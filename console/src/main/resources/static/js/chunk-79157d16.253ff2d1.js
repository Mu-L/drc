(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-79157d16"],{"0cb2":function(e,t,i){"use strict";var r=i("e330"),a=i("7b0b"),n=Math.floor,c=r("".charAt),s=r("".replace),o=r("".slice),l=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,u=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,i,r,d,f){var h=i+e.length,g=r.length,p=u;return void 0!==d&&(d=a(d),p=l),s(f,p,(function(a,s){var l;switch(c(s,0)){case"$":return"$";case"&":return e;case"`":return o(t,0,i);case"'":return o(t,h);case"<":l=d[o(s,1,-1)];break;default:var u=+s;if(0===u)return a;if(u>g){var f=n(u/10);return 0===f?a:f<=g?void 0===r[f-1]?c(s,1):r[f-1]+c(s,1):a}l=r[u-1]}return void 0===l?"":l}))}},"14c3":function(e,t,i){"use strict";var r=i("c65b"),a=i("825a"),n=i("1626"),c=i("c6b6"),s=i("9263"),o=TypeError;e.exports=function(e,t){var i=e.exec;if(n(i)){var l=r(i,e,t);return null!==l&&a(l),l}if("RegExp"===c(e))return r(s,e,t);throw new o("RegExp#exec called on incompatible receiver")}},"2c3e":function(e,t,i){"use strict";var r=i("83ab"),a=i("9f7f").MISSED_STICKY,n=i("c6b6"),c=i("edd0"),s=i("69f3").get,o=RegExp.prototype,l=TypeError;r&&a&&c(o,"sticky",{configurable:!0,get:function(){if(this!==o){if("RegExp"===n(this))return!!s(this).sticky;throw new l("Incompatible receiver, RegExp required")}}})},"44e7":function(e,t,i){"use strict";var r=i("861d"),a=i("c6b6"),n=i("b622"),c=n("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[c])?!!t:"RegExp"===a(e))}},"4d63":function(e,t,i){"use strict";var r=i("83ab"),a=i("cfe9"),n=i("e330"),c=i("94ca"),s=i("7156"),o=i("9112"),l=i("7c73"),u=i("241c").f,d=i("3a9b"),f=i("44e7"),h=i("577e"),g=i("90d8"),p=i("9f7f"),v=i("aeb0"),m=i("cb2d"),b=i("d039"),x=i("1a2d"),y=i("69f3").enforce,R=i("2626"),w=i("b622"),S=i("fce3"),D=i("107c"),_=w("match"),I=a.RegExp,E=I.prototype,k=a.SyntaxError,N=n(E.exec),$=n("".charAt),z=n("".replace),C=n("".indexOf),M=n("".slice),q=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,V=/a/g,L=/a/g,T=new I(V)!==V,A=p.MISSED_STICKY,O=p.UNSUPPORTED_Y,B=r&&(!T||A||S||D||b((function(){return L[_]=!1,I(V)!==V||I(L)===L||"/a/i"!==String(I(V,"i"))}))),P=function(e){for(var t,i=e.length,r=0,a="",n=!1;r<=i;r++)t=$(e,r),"\\"!==t?n||"."!==t?("["===t?n=!0:"]"===t&&(n=!1),a+=t):a+="[\\s\\S]":a+=t+$(e,++r);return a},F=function(e){for(var t,i=e.length,r=0,a="",n=[],c=l(null),s=!1,o=!1,u=0,d="";r<=i;r++){if(t=$(e,r),"\\"===t)t+=$(e,++r);else if("]"===t)s=!1;else if(!s)switch(!0){case"["===t:s=!0;break;case"("===t:if(a+=t,"?:"===M(e,r+1,r+3))continue;N(q,M(e,r+1))&&(r+=2,o=!0),u++;continue;case">"===t&&o:if(""===d||x(c,d))throw new k("Invalid capture group name");c[d]=!0,n[n.length]=[d,u],o=!1,d="";continue}o?d+=t:a+=t}return[a,n]};if(c("RegExp",B)){for(var Y=function(e,t){var i,r,a,n,c,l,u=d(E,this),p=f(e),v=void 0===t,m=[],b=e;if(!u&&p&&v&&e.constructor===Y)return e;if((p||d(E,e))&&(e=e.source,v&&(t=g(b))),e=void 0===e?"":h(e),t=void 0===t?"":h(t),b=e,S&&"dotAll"in V&&(r=!!t&&C(t,"s")>-1,r&&(t=z(t,/s/g,""))),i=t,A&&"sticky"in V&&(a=!!t&&C(t,"y")>-1,a&&O&&(t=z(t,/y/g,""))),D&&(n=F(e),e=n[0],m=n[1]),c=s(I(e,t),u?this:E,Y),(r||a||m.length)&&(l=y(c),r&&(l.dotAll=!0,l.raw=Y(P(e),i)),a&&(l.sticky=!0),m.length&&(l.groups=m)),e!==b)try{o(c,"source",""===b?"(?:)":b)}catch(x){}return c},j=u(I),J=0;j.length>J;)v(Y,I,j[J++]);E.constructor=Y,Y.prototype=E,m(a,"RegExp",Y,{constructor:!0})}R("RegExp")},5319:function(e,t,i){"use strict";var r=i("2ba4"),a=i("c65b"),n=i("e330"),c=i("d784"),s=i("d039"),o=i("825a"),l=i("1626"),u=i("7234"),d=i("5926"),f=i("50c4"),h=i("577e"),g=i("1d80"),p=i("8aa5"),v=i("dc4a"),m=i("0cb2"),b=i("14c3"),x=i("b622"),y=x("replace"),R=Math.max,w=Math.min,S=n([].concat),D=n([].push),_=n("".indexOf),I=n("".slice),E=function(e){return void 0===e?e:String(e)},k=function(){return"$0"==="a".replace(/./,"$0")}(),N=function(){return!!/./[y]&&""===/./[y]("a","$0")}(),$=!s((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));c("replace",(function(e,t,i){var n=N?"$":"$0";return[function(e,i){var r=g(this),n=u(e)?void 0:v(e,y);return n?a(n,e,r,i):a(t,h(r),e,i)},function(e,a){var c=o(this),s=h(e);if("string"==typeof a&&-1===_(a,n)&&-1===_(a,"$<")){var u=i(t,c,s,a);if(u.done)return u.value}var g=l(a);g||(a=h(a));var v,x=c.global;x&&(v=c.unicode,c.lastIndex=0);var y,k=[];while(1){if(y=b(c,s),null===y)break;if(D(k,y),!x)break;var N=h(y[0]);""===N&&(c.lastIndex=p(s,f(c.lastIndex),v))}for(var $="",z=0,C=0;C<k.length;C++){y=k[C];for(var M,q=h(y[0]),V=R(w(d(y.index),s.length),0),L=[],T=1;T<y.length;T++)D(L,E(y[T]));var A=y.groups;if(g){var O=S([q],L,V,s);void 0!==A&&D(O,A),M=h(r(a,void 0,O))}else M=m(q,s,V,L,A,a);V>=z&&($+=I(s,z,V)+M,z=V+q.length)}return $+I(s,z)}]}),!$||!k||N)},"8aa5":function(e,t,i){"use strict";var r=i("6547").charAt;e.exports=function(e,t,i){return t+(i?r(e,t).length:1)}},c607:function(e,t,i){"use strict";var r=i("83ab"),a=i("fce3"),n=i("c6b6"),c=i("edd0"),s=i("69f3").get,o=RegExp.prototype,l=TypeError;r&&a&&c(o,"dotAll",{configurable:!0,get:function(){if(this!==o){if("RegExp"===n(this))return!!s(this).dotAll;throw new l("Incompatible receiver, RegExp required")}}})},d784:function(e,t,i){"use strict";i("ac1f");var r=i("c65b"),a=i("cb2d"),n=i("9263"),c=i("d039"),s=i("b622"),o=i("9112"),l=s("species"),u=RegExp.prototype;e.exports=function(e,t,i,d){var f=s(e),h=!c((function(){var t={};return t[f]=function(){return 7},7!==""[e](t)})),g=h&&!c((function(){var t=!1,i=/a/;return"split"===e&&(i={},i.constructor={},i.constructor[l]=function(){return i},i.flags="",i[f]=/./[f]),i.exec=function(){return t=!0,null},i[f](""),!t}));if(!h||!g||i){var p=/./[f],v=t(f,""[e],(function(e,t,i,a,c){var s=t.exec;return s===n||s===u.exec?h&&!c?{done:!0,value:r(p,t,i,a)}:{done:!0,value:r(e,i,t,a)}:{done:!1}}));a(String.prototype,e,v[0]),a(u,f,v[1])}d&&o(u[f],"sham",!0)}},e66c:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));i("4d63"),i("c607"),i("ac1f"),i("2c3e"),i("00b4"),i("25f0"),i("5319");function r(e,t){var i={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"S+":e.getMilliseconds()};for(var r in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),i)new RegExp("("+r+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?i[r]:("00"+i[r]).substr((""+i[r]).length)));return t}},ff40:function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e._self._c;return t("base-component",{attrs:{isFather:e.isFather,subMenuName:["1"],fatherMenu:e.fatherMenu}},[t("Breadcrumb",{style:{margin:"15px 0 15px 185px",position:"fixed"}},[t("BreadcrumbItem",{attrs:{to:"/home"}},[e._v("首页")]),t("BreadcrumbItem",[e._v("单元化路由校验")])],1),t("Content",{staticClass:"content",style:{padding:"10px",background:"#fff",margin:"50px 0 1px 185px",zIndex:"1"}},[t("div",{staticStyle:{padding:"1px 1px"}},[t("Card",[e._v(" 数据库名："),t("Input",{style:{width:"180px",marginRight:"10px"},model:{value:e.searchCondition.schemaName,callback:function(t){e.$set(e.searchCondition,"schemaName",t)},expression:"searchCondition.schemaName"}}),e._v(" 表名："),t("Input",{style:{width:"180px",marginRight:"10px"},model:{value:e.searchCondition.tableName,callback:function(t){e.$set(e.searchCondition,"tableName",t)},expression:"searchCondition.tableName"}}),t("Button",{style:{marginLeft:"10px"},attrs:{type:"primary"},on:{click:e.getVerificationResults}},[e._v("查询")]),t("Table",{staticStyle:{"margin-top":"20px"},attrs:{stripe:"",columns:e.columns,data:e.dataWithPage,size:"small"}}),t("Modal",{attrs:{title:"校验详情",width:"900px"},on:{"on-ok":e.clearDetail,"on-cancel":e.clearDetail},model:{value:e.verificationResultDetail,callback:function(t){e.verificationResultDetail=t},expression:"verificationResultDetail"}},[e._v(" "+e._s(this.detail.querySql)+" "),t("Row",{attrs:{gutter:5}},[t("i-col",{attrs:{span:"12"}},[t("List",{attrs:{border:""}},[t("ListItem",[e._v("字段名")]),t("ListItem",[e._v("原始值")]),t("ListItem",[e._v("更新值")])],1)],1),t("i-col",{attrs:{span:"12"}},[t("List",{attrs:{border:""}},[t("ListItem",[e._v(e._s(this.detail.columns))]),t("ListItem",[e._v(e._s(this.detail.beforeValues))]),t("ListItem",[e._v(e._s(this.detail.afterValues))])],1)],1)],1),e._v(" 单元化路由机房："+e._s(this.detail.expectedDc)+"（根据用户id名["+e._s(this.detail.uidName)+"]对应值和ucs策略号["+e._s(this.detail.ucsStrategyId)+"]获得） "),t("br"),e._v(" 实际写入机房："+e._s(this.detail.actualDc)+"（根据GTID["+e._s(this.detail.gtid)+"]获得） ")],1),t("div",{staticStyle:{"text-align":"center",margin:"16px 0"}},[t("Page",{attrs:{transfer:!0,total:e.verificationResults.length,current:e.current,"show-sizer":"","show-elevator":""},on:{"update:current":function(t){e.current=t},"on-page-size-change":e.handleChangeSize}})],1)],1)],1)])],1)},a=[],n=i("2909"),c=(i("fb6a"),i("e66c")),s={name:"unitRouteVerificationResult",data:function(){var e=this;return{isFather:!0,fatherMenu:"/unitRouteVerificationCluster",total:0,current:1,size:10,verificationResults:[],verificationResultDetail:!1,detail:{gtid:"",querySql:"",expectedDc:"",actualDc:"",columns:"",beforeValues:"",afterValues:"",uidName:"",ucsStrategyId:""},searchCondition:{schemaName:"",tableName:""},columns:[{title:"序号",width:75,align:"center",render:function(t,i){return t("span",i.index+1+(e.current-1)*e.size)}},{title:"库名",key:"schemaName",align:"center",resizable:!0},{title:"表名",key:"tableName",align:"center",resizable:!0},{title:"SQL",key:"querySql",align:"center",resizable:!0},{title:"单元化路由机房",key:"expectedDc",align:"center",resizable:!0},{title:"实际写入机房",key:"actualDc",align:"center",resizable:!0},{title:"执行时间",key:"executeTime",align:"center",resizable:!0,render:function(e,t){return e("div",Object(c["a"])(new Date(t.row.executeTime),"yyyy-MM-dd hh:mm:ss"))}},{title:"详情",align:"center",render:function(t,i){return t("div",[t("Button",{props:{type:"info",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.showDetail(i.row)}}},"查看")])}}]}},methods:{getVerificationResults:function(){var e=this;e.axios.get("/api/drc/v1/logs/unit/mhas/"+e.$route.query.clusterA+"?schemaName="+this.searchCondition.schemaName+"&tableName="+this.searchCondition.tableName).then((function(t){console.log(t),e.total=t.data.data.length,e.verificationResults=t.data.data}))},handleChangeSize:function(e){this.size=e},showDetail:function(e){this.verificationResultDetail=!0,this.detail.gtid=e.gtid,this.detail.querySql=e.querySql,this.detail.expectedDc=e.expectedDc,this.detail.actualDc=e.actualDc,this.detail.columns=e.columns,this.detail.beforeValues=e.beforeValues,this.detail.afterValues=e.afterValues,this.detail.uidName=e.uidName,this.detail.ucsStrategyId=e.ucsStrategyId},clearDetail:function(){this.detail.gtid="",this.detail.querySql="",this.detail.expectedDc="",this.detail.actualDc="",this.detail.columns="",this.detail.beforeValues="",this.detail.afterValues="",this.detail.uidName="",this.detail.ucsStrategyId=""}},computed:{dataWithPage:function(){var e=this.verificationResults,t=this.current*this.size-this.size,i=t+this.size;return Object(n["a"])(e).slice(t,i)}},created:function(){this.getVerificationResults()}},o=s,l=i("2877"),u=Object(l["a"])(o,r,a,!1,null,"33f126b2",null);t["default"]=u.exports}}]);
//# sourceMappingURL=chunk-79157d16.253ff2d1.js.map