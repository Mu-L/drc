{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.string.includes.js","webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack:///./node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack:///./node_modules/core-js/internals/is-regexp.js","webpack:///./node_modules/core-js/internals/not-a-regexp.js","webpack:///./src/components/v2/dbDrcBuild/mhaPreview.vue?c7c3","webpack:///src/components/v2/dbDrcBuild/mhaPreview.vue","webpack:///./src/components/v2/dbDrcBuild/mhaPreview.vue?c2d2","webpack:///./src/components/v2/dbDrcBuild/mhaPreview.vue","webpack:///./node_modules/core-js/internals/array-fill.js","webpack:///./node_modules/core-js/internals/correct-is-regexp-logic.js","webpack:///./node_modules/core-js/modules/es.array.fill.js","webpack:///./src/components/v2/dbDrcBuild/dbTablesPreview.vue?1a65","webpack:///src/components/v2/dbDrcBuild/dbTablesPreview.vue","webpack:///./src/components/v2/dbDrcBuild/dbTablesPreview.vue?33f5","webpack:///./src/components/v2/dbDrcBuild/dbTablesPreview.vue"],"names":["$","notARegExp","requireObjectCoercible","correctIsRegExpLogic","target","proto","forced","includes","searchString","String","this","indexOf","arguments","length","undefined","_arrayWithHoles","r","Array","isArray","_iterableToArrayLimit","l","t","Symbol","iterator","e","n","i","u","a","f","o","call","next","Object","done","push","value","_nonIterableRest","TypeError","_slicedToArray","arrayWithHoles","iterableToArrayLimit","unsupportedIterableToArray","nonIterableRest","isObject","classof","wellKnownSymbol","MATCH","module","exports","it","isRegExp","render","_vm","_h","$createElement","_c","_self","style","padding","height","alertInfo","attrs","scopedSlots","_u","key","fn","_v","_s","message","proxy","title","_e","replicationType","meta","DB_TO_DB","staticStyle","on","afterSwitchRegion","model","formItem","callback","$$v","$set","expression","_l","region","dataLoading","getRegionOptions","table","dbMhaTableLoading","getDalInfo","dbMhaTableColumn","preCheckMhaReplicationPage","previewDataList","dbMhaTablePage","current","pageSizeOpts","size","$event","val","DB_TO_MQ","dbMhaMqTableColumn","createReplication","staticRenderFns","component","toObject","toAbsoluteIndex","toLength","O","argumentsLength","index","end","endPos","METHOD_NAME","regexp","fill","addToUnscopables","dbTableLoading","getTableInfo","dbTableColumn","preCheckTablePage","checkTableDataList","dbTablePage"],"mappings":"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AAC,QAAUT,EAAIkC,YAAY,KAAO,WAAWV,GAAG,CAAC,MAAQxB,EAAIkD,oBAAoB,CAAClD,EAAIc,GAAG,SAAS,IAC9vKqC,EAAkB,G,oCC8HtB,G,wCAAA,CACA,kBACA,cACA,OACA,uBACA,cACA,qCAEA,kBACA,gBACA,OACA,MACA,iBACA,iCACA,iBACA,WACA,aAGA,WACA,QACA,eACA,WACA,cAEA,UACA,mBACA,oBAEA,eACA,WACA,oBAEA,mBACA,OACA,qBACA,kBACA,CACA,YACA,cAEA,CACA,YACA,iBACA,qBACA,YACA,WACA,WACA,gBACA,iBACA,UACA,MACA,CACA,cACA,kBAEA,mCAKA,CACA,aACA,iBACA,qBACA,YACA,WACA,WACA,gBACA,iBACA,UACA,MACA,CACA,cACA,kBAEA,oCAMA,oBACA,CACA,YACA,cAEA,CACA,YACA,iBACA,qBACA,YACA,WACA,WACA,gBACA,iBACA,UACA,MACA,CACA,cACA,kBAEA,oCAMA,gBACA,QACA,UACA,OACA,+BAKA,SACA,gLAEA,OADA,iBACA,iCACA,oDACA,QACA,kCACA,mBAGA,kBACA,kBACA,uBACA,GACA,wBACA,0CACA,gCAEA,0CACA,iCAGA,8BACA,8BACA,mCAGA,mBACA,oCAEA,oBACA,oBACA,0CA/BA,IAiCA,0KAGA,OAFA,qBACA,iCACA,sCACA,+CACA,QACA,kCACA,gBACA,uCACA,qCAGA,kBACA,kBACA,uBACA,GACA,oBACA,gDACA,sDAEA,kDAGA,mBACA,0CAEA,oBACA,gCACA,0CA5BA,IA8BA,yLAeA,OAdA,GACA,uCACA,uCACA,gBACA,mCAEA,oBACA,2BACA,iBAGA,EADA,oDACA,wBAEA,mBACA,SACA,sDACA,kBACA,aACA,eACA,GACA,2BACA,yBACA,yBACA,qBAEA,oBACA,yBACA,8BACA,2CAGA,mBACA,gCAEA,oBACA,oBACA,0CArCA,IAuCA,8MAGA,UACA,sCACA,2BACA,kGACA,mCACA,sCAGA,mBACA,2BCvWkX,I,YCO9WC,EAAY,eACd,EACArD,EACAoD,GACA,EACA,KACA,WACA,MAIa,OAAAC,E,6CCjBf,IAAIC,EAAW,EAAQ,QACnBC,EAAkB,EAAQ,QAC1BC,EAAW,EAAQ,QAIvB5D,EAAOC,QAAU,SAAcb,GAC7B,IAAIyE,EAAIH,EAAShG,MACbG,EAAS+F,EAASC,EAAEhG,QACpBiG,EAAkBlG,UAAUC,OAC5BkG,EAAQJ,EAAgBG,EAAkB,EAAIlG,UAAU,QAAKE,EAAWD,GACxEmG,EAAMF,EAAkB,EAAIlG,UAAU,QAAKE,EAC3CmG,OAAiBnG,IAARkG,EAAoBnG,EAAS8F,EAAgBK,EAAKnG,GAC/D,MAAOoG,EAASF,EAAOF,EAAEE,KAAW3E,EACpC,OAAOyE,I,qBCfT,IAAI/D,EAAkB,EAAQ,QAE1BC,EAAQD,EAAgB,SAE5BE,EAAOC,QAAU,SAAUiE,GACzB,IAAIC,EAAS,IACb,IACE,MAAMD,GAAaC,GACnB,MAAO3F,GACP,IAEE,OADA2F,EAAOpE,IAAS,EACT,MAAMmE,GAAaC,GAC1B,MAAOtF,KACT,OAAO,I,qBCbX,IAAI7B,EAAI,EAAQ,QACZoH,EAAO,EAAQ,QACfC,EAAmB,EAAQ,QAI/BrH,EAAE,CAAEI,OAAQ,QAASC,OAAO,GAAQ,CAClC+G,KAAMA,IAIRC,EAAiB,S,kCCXjB,IAAIjE,EAAS,WAAa,IAAIC,EAAI3C,KAAS4C,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,MAAM,CAAEC,QAAS,UAAUC,OAAQ,SAAU,CAACJ,EAAG,UAAU,CAACoB,YAAY,CAAC,aAAa,SAAS,CAACvB,EAAIc,GAAG,YAAYX,EAAG,SAAS,CAACoB,YAAY,CAAC,gBAAgB,OAAOd,MAAM,CAAC,KAAO,UAAU,QAAUT,EAAIiE,gBAAgBzC,GAAG,CAAC,MAAQxB,EAAIkE,eAAe,CAAClE,EAAIc,GAAG,aAAaX,EAAG,QAAQ,CAACM,MAAM,CAAC,KAAO,QAAQ,QAAUT,EAAIiE,eAAe,OAAS,GAAG,QAAUjE,EAAIoC,MAAM+B,cAAc,KAAOnE,EAAIoE,kBAAkB,OAAS,MAAMjE,EAAG,MAAM,CAACA,EAAG,OAAO,CAACM,MAAM,CAAC,UAAW,EAAK,MAAQT,EAAIqE,mBAAmB7G,OAAO,QAAUwC,EAAIoC,MAAMkC,YAAY3B,QAAQ,iBAAiB3C,EAAIoC,MAAMkC,YAAY1B,aAAa,YAAY5C,EAAIoC,MAAMkC,YAAYzB,KAAK,aAAa,GAAG,aAAa,GAAG,gBAAgB,IAAIrB,GAAG,CAAC,iBAAiB,SAASsB,GAAQ,OAAO9C,EAAI8B,KAAK9B,EAAIoC,MAAMkC,YAAa,UAAWxB,IAAS,YAAY,SAAUC,GAAM/C,EAAIoC,MAAMkC,YAAY3B,QAAUI,GAAK,sBAAsB,SAAUA,GAAM/C,EAAIoC,MAAMkC,YAAYzB,KAAOE,OAAS,IAAI,IACxgCI,EAAkB,G,wECyBtB,G,kDAAA,CACA,uBACA,OACA,YACA,cACA,qBACA,qBACA,kBACA,wBAEA,kBACA,gBACA,OACA,sBACA,kBACA,OACA,eACA,CACA,UACA,SACA,oBAGA,CACA,WACA,aACA,cAEA,CACA,WACA,YACA,cAEA,CACA,WACA,eACA,qBACA,YACA,iCACA,QACA,gBACA,OACA,UAEA,MAIA,aACA,QACA,UACA,QACA,+BAKA,SACA,4KAEA,GADA,wBACA,8BACA,8BACA,iCACA,iGAIA,0BACA,mEAIA,2EACA,oEAGA,8BACA,+DAGA,qCACA,oDACA,qBACA,YACA,gBACA,8BACA,8BACA,kCACA,kBACA,6BAIA,kBACA,kBACA,UACA,EADA,iBACA,2FACA,kBACA,8BACA,uBACA,wDAEA,iDAGA,mBACA,0CAEA,oBACA,uBACA,2CApDA,IAsDA,uBACA,SACA,eACA,wDAMA,cANA,CACA,4BACA,eACA,gBAMA,WAGA,UACA,6BACA,8BACA,iEACA,gCACA,sCAGA,mBACA,kDACA,uBCnKuX,I,YCOnXC,EAAY,eACd,EACArD,EACAoD,GACA,EACA,KACA,WACA,MAIa,OAAAC,E","file":"js/chunk-080c042a.f2a6928d.js","sourcesContent":["'use strict';\nvar $ = require('../internals/export');\nvar notARegExp = require('../internals/not-a-regexp');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar correctIsRegExpLogic = require('../internals/correct-is-regexp-logic');\n\n// `String.prototype.includes` method\n// https://tc39.github.io/ecma262/#sec-string.prototype.includes\n$({ target: 'String', proto: true, forced: !correctIsRegExpLogic('includes') }, {\n  includes: function includes(searchString /* , position = 0 */) {\n    return !!~String(requireObjectCoercible(this))\n      .indexOf(notARegExp(searchString), arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","function _arrayWithHoles(r) {\n  if (Array.isArray(r)) return r;\n}\nexport { _arrayWithHoles as default };","function _iterableToArrayLimit(r, l) {\n  var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"];\n  if (null != t) {\n    var e,\n      n,\n      i,\n      u,\n      a = [],\n      f = !0,\n      o = !1;\n    try {\n      if (i = (t = t.call(r)).next, 0 === l) {\n        if (Object(t) !== t) return;\n        f = !1;\n      } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0);\n    } catch (r) {\n      o = !0, n = r;\n    } finally {\n      try {\n        if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return;\n      } finally {\n        if (o) throw n;\n      }\n    }\n    return a;\n  }\n}\nexport { _iterableToArrayLimit as default };","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nexport { _nonIterableRest as default };","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nfunction _slicedToArray(r, e) {\n  return arrayWithHoles(r) || iterableToArrayLimit(r, e) || unsupportedIterableToArray(r, e) || nonIterableRest();\n}\nexport { _slicedToArray as default };","var isObject = require('../internals/is-object');\nvar classof = require('../internals/classof-raw');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar MATCH = wellKnownSymbol('match');\n\n// `IsRegExp` abstract operation\n// https://tc39.github.io/ecma262/#sec-isregexp\nmodule.exports = function (it) {\n  var isRegExp;\n  return isObject(it) && ((isRegExp = it[MATCH]) !== undefined ? !!isRegExp : classof(it) == 'RegExp');\n};\n","var isRegExp = require('../internals/is-regexp');\n\nmodule.exports = function (it) {\n  if (isRegExp(it)) {\n    throw TypeError(\"The method doesn't accept regular expressions\");\n  } return it;\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{style:({padding: '1px 1px',height: '100%'})},[_c('Row',[(_vm.alertInfo.show)?_c('Alert',{attrs:{\"type\":\"warning\",\"show-icon\":\"\",\"closable\":\"\"},scopedSlots:_vm._u([{key:\"desc\",fn:function(){return [_vm._v(_vm._s(_vm.alertInfo.message))]},proxy:true}],null,false,3041357252)},[_vm._v(\" \"+_vm._s(_vm.alertInfo.title)+\" \")]):_vm._e(),(_vm.alertInfo.successShow)?_c('Alert',{attrs:{\"type\":\"success\",\"show-icon\":\"\",\"closable\":\"\"},scopedSlots:_vm._u([{key:\"desc\",fn:function(){return [_vm._v(_vm._s(_vm.alertInfo.message))]},proxy:true}],null,false,3041357252)},[_vm._v(\" \"+_vm._s(_vm.alertInfo.title)+\" \")]):_vm._e(),(_vm.replicationType === _vm.meta.replicationType.DB_TO_DB)?_c('div',[_c('Col',{attrs:{\"span\":\"12\"}},[_c('Row',{staticStyle:{\"margin-right\":\"20px\"}},[_c('Divider',[_vm._v(\"1. 选择同步方向\")]),_c('Col',{attrs:{\"span\":\"11\"}},[_c('Card',{attrs:{\"bordered\":true},scopedSlots:_vm._u([{key:\"title\",fn:function(){return [_c('Icon',{attrs:{\"type\":\"ios-pin\"}}),_vm._v(\" 源 region \")]},proxy:true}],null,false,2156775476)},[_c('Select',{attrs:{\"filterable\":\"\",\"clearable\":\"\",\"placeholder\":\"地域\"},on:{\"on-change\":_vm.afterSwitchRegion},model:{value:(_vm.formItem.srcRegionName),callback:function ($$v) {_vm.$set(_vm.formItem, \"srcRegionName\", $$v)},expression:\"formItem.srcRegionName\"}},_vm._l((_vm.meta.regionOptions),function(region){return _c('Option',{key:region,attrs:{\"value\":region,\"label\":region}},[_vm._v(\" \"+_vm._s(region)+\" \")])}),1)],1)],1),_c('Col',{staticStyle:{\"text-align\":\"center\"},attrs:{\"span\":\"2\"}},[_c('Button',{attrs:{\"size\":\"small\",\"shape\":\"circle\",\"type\":\"default\",\"loading\":_vm.dataLoading},on:{\"click\":_vm.getRegionOptions}},[_vm._v(\" -> \")])],1),_c('Col',{attrs:{\"span\":\"11\"}},[_c('Card',{attrs:{\"bordered\":true},scopedSlots:_vm._u([{key:\"title\",fn:function(){return [_c('Icon',{attrs:{\"type\":\"ios-pin\"}}),_vm._v(\" 目标 region \")]},proxy:true}],null,false,4278622733)},[_c('Select',{attrs:{\"filterable\":\"\",\"clearable\":\"\",\"placeholder\":\"地域\"},on:{\"on-change\":_vm.afterSwitchRegion},model:{value:(_vm.formItem.dstRegionName),callback:function ($$v) {_vm.$set(_vm.formItem, \"dstRegionName\", $$v)},expression:\"formItem.dstRegionName\"}},_vm._l((_vm.meta.regionOptions),function(region){return _c('Option',{key:region,attrs:{\"value\":region,\"label\":region}},[_vm._v(\" \"+_vm._s(region)+\" \")])}),1)],1)],1)],1)],1),_c('Col',{attrs:{\"span\":\"12\"}},[_c('Row',[_c('Divider',[_vm._v(\"2. 预览：同步集群\")]),_c('Button',{staticStyle:{\"margin-bottom\":\"5px\"},attrs:{\"type\":\"primary\",\"loading\":_vm.table.dbMhaTableLoading},on:{\"click\":_vm.getDalInfo}},[_vm._v(\" 检查同步集群 \")]),_c('Table',{attrs:{\"size\":\"small\",\"loading\":_vm.table.dbMhaTableLoading,\"stripe\":\"\",\"columns\":_vm.table.dbMhaTableColumn,\"data\":_vm.preCheckMhaReplicationPage,\"border\":\"\"}}),_c('div',[_c('Page',{attrs:{\"transfer\":true,\"total\":_vm.previewDataList.length,\"current\":_vm.table.dbMhaTablePage.current,\"page-size-opts\":_vm.table.dbMhaTablePage.pageSizeOpts,\"page-size\":_vm.table.dbMhaTablePage.size,\"show-total\":\"\",\"show-sizer\":\"\",\"show-elevator\":\"\"},on:{\"update:current\":function($event){return _vm.$set(_vm.table.dbMhaTablePage, \"current\", $event)},\"on-page-size-change\":function (val) {_vm.table.dbMhaTablePage.size = val}}})],1)],1)],1)],1):_vm._e(),(_vm.replicationType === _vm.meta.replicationType.DB_TO_MQ)?_c('div',[_c('Col',{attrs:{\"span\":\"12\"}},[_c('Row',{staticStyle:{\"margin-right\":\"20px\"}},[_c('Divider',[_vm._v(\"1. 选择消息投递Region\")]),_c('Col',{attrs:{\"span\":\"24\"}},[_c('Card',{attrs:{\"bordered\":true},scopedSlots:_vm._u([{key:\"title\",fn:function(){return [_c('Icon',{attrs:{\"type\":\"ios-pin\"}}),_vm._v(\" 源 region \"),_c('Button',{staticStyle:{\"margin-left\":\"50px\"},attrs:{\"size\":\"small\",\"shape\":\"circle\",\"type\":\"default\",\"loading\":_vm.dataLoading},on:{\"click\":_vm.getRegionOptions}},[_vm._v(\"刷新 \")])]},proxy:true}],null,false,1193028979)},[_c('Select',{attrs:{\"filterable\":\"\",\"clearable\":\"\",\"placeholder\":\"地域\"},on:{\"on-change\":_vm.afterSwitchRegion},model:{value:(_vm.formItem.srcRegionName),callback:function ($$v) {_vm.$set(_vm.formItem, \"srcRegionName\", $$v)},expression:\"formItem.srcRegionName\"}},_vm._l((_vm.meta.regionOptions),function(region){return _c('Option',{key:region,attrs:{\"value\":region,\"label\":region}},[_vm._v(\" \"+_vm._s(region)+\" \")])}),1)],1)],1)],1)],1),_c('Col',{attrs:{\"span\":\"12\"}},[_c('Row',[_c('Divider',[_vm._v(\"2. 预览：消息投递集群\")]),_c('Button',{staticStyle:{\"margin-bottom\":\"5px\"},attrs:{\"type\":\"primary\",\"loading\":_vm.table.dbMhaTableLoading},on:{\"click\":_vm.getDalInfo}},[_vm._v(\" 检查同步集群 \")]),_c('Table',{attrs:{\"size\":\"small\",\"loading\":_vm.table.dbMhaTableLoading,\"stripe\":\"\",\"columns\":_vm.table.dbMhaMqTableColumn,\"data\":_vm.preCheckMhaReplicationPage,\"border\":\"\"}}),_c('div',[_c('Page',{attrs:{\"transfer\":true,\"total\":_vm.previewDataList.length,\"current\":_vm.table.dbMhaTablePage.current,\"page-size-opts\":_vm.table.dbMhaTablePage.pageSizeOpts,\"page-size\":_vm.table.dbMhaTablePage.size,\"show-total\":\"\",\"show-sizer\":\"\",\"show-elevator\":\"\"},on:{\"update:current\":function($event){return _vm.$set(_vm.table.dbMhaTablePage, \"current\", $event)},\"on-page-size-change\":function (val) {_vm.table.dbMhaTablePage.size = val}}})],1)],1)],1)],1):_vm._e()],1),_c('Divider'),_c('Button',{attrs:{\"loading\":_vm.dataLoading,\"type\":\"primary\"},on:{\"click\":_vm.createReplication}},[_vm._v(\"提交\")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div :style=\"{padding: '1px 1px',height: '100%'}\">\n    <Row>\n      <Alert type=\"warning\" show-icon v-if=\"alertInfo.show\" closable>\n        {{ alertInfo.title }}\n        <template #desc>{{ alertInfo.message }}</template>\n      </Alert>\n      <Alert type=\"success\" show-icon v-if=\"alertInfo.successShow\" closable>\n        {{ alertInfo.title }}\n        <template #desc>{{ alertInfo.message }}</template>\n      </Alert>\n      <div v-if=\"replicationType === meta.replicationType.DB_TO_DB\">\n        <Col span=\"12\">\n          <Row style=\"margin-right: 20px\">\n            <Divider>1. 选择同步方向</Divider>\n            <Col span=\"11\">\n              <Card :bordered=\"true\">\n                <template #title>\n                  <Icon type=\"ios-pin\"/>\n                  源 region\n                </template>\n                <Select filterable clearable v-model=\"formItem.srcRegionName\" placeholder=\"地域\"\n                        @on-change=\"afterSwitchRegion\">\n                  <Option v-for=\"region in meta.regionOptions\" :value=\"region\" :key=\"region\" :label=\"region\">\n                    {{ region }}\n                  </Option>\n                </Select>\n              </Card>\n            </Col>\n            <Col span=\"2\" style=\"text-align: center\">\n              <Button size=\"small\" shape=\"circle\" type=\"default\" :loading=\"dataLoading\" @click=\"getRegionOptions\">\n                ->\n              </Button>\n            </Col>\n            <Col span=\"11\">\n              <Card :bordered=\"true\">\n                <template #title>\n                  <Icon type=\"ios-pin\"/>\n                  目标 region\n                </template>\n                <Select filterable clearable v-model=\"formItem.dstRegionName\" placeholder=\"地域\"\n                        @on-change=\"afterSwitchRegion\">\n                  <Option v-for=\"region in meta.regionOptions\" :value=\"region\" :key=\"region\" :label=\"region\">\n                    {{ region }}\n                  </Option>\n                </Select>\n              </Card>\n            </Col>\n          </Row>\n        </Col>\n        <Col span=\"12\">\n          <Row>\n            <Divider>2. 预览：同步集群</Divider>\n            <Button type=\"primary\" :loading=\"table.dbMhaTableLoading\" @click=\"getDalInfo\" style=\"margin-bottom: 5px\">\n              检查同步集群\n            </Button>\n            <Table size=\"small\" :loading=\"table.dbMhaTableLoading\" stripe :columns=\"table.dbMhaTableColumn\"\n                   :data=\"preCheckMhaReplicationPage\" border></Table>\n            <div>\n              <Page\n                  :transfer=\"true\"\n                  :total=\"previewDataList.length\"\n                  :current.sync=\"table.dbMhaTablePage.current\"\n                  :page-size-opts=\"table.dbMhaTablePage.pageSizeOpts\"\n                  :page-size=\"table.dbMhaTablePage.size\"\n                  show-total\n                  show-sizer\n                  show-elevator\n                  @on-page-size-change=\"(val) => {table.dbMhaTablePage.size = val}\"></Page>\n            </div>\n          </Row>\n        </Col>\n      </div>\n      <div v-if=\"replicationType === meta.replicationType.DB_TO_MQ\">\n        <Col span=\"12\">\n          <Row style=\"margin-right: 20px\">\n            <Divider>1. 选择消息投递Region</Divider>\n            <Col span=\"24\">\n              <Card :bordered=\"true\">\n                <template #title>\n                  <Icon type=\"ios-pin\"/>\n                  源 region\n                  <Button size=\"small\" shape=\"circle\" type=\"default\" :loading=\"dataLoading\" style=\"margin-left: 50px\" @click=\"getRegionOptions\">刷新\n                  </Button>\n                </template>\n                <Select filterable clearable v-model=\"formItem.srcRegionName\" placeholder=\"地域\"\n                        @on-change=\"afterSwitchRegion\">\n                  <Option v-for=\"region in meta.regionOptions\" :value=\"region\" :key=\"region\" :label=\"region\">\n                    {{ region }}\n                  </Option>\n                </Select>\n              </Card>\n            </Col>\n          </Row>\n        </Col>\n        <Col span=\"12\">\n          <Row>\n            <Divider>2. 预览：消息投递集群</Divider>\n            <Button type=\"primary\" :loading=\"table.dbMhaTableLoading\" @click=\"getDalInfo\" style=\"margin-bottom: 5px\">\n              检查同步集群\n            </Button>\n            <Table size=\"small\" :loading=\"table.dbMhaTableLoading\" stripe :columns=\"table.dbMhaMqTableColumn\"\n                   :data=\"preCheckMhaReplicationPage\" border></Table>\n            <div>\n              <Page\n                  :transfer=\"true\"\n                  :total=\"previewDataList.length\"\n                  :current.sync=\"table.dbMhaTablePage.current\"\n                  :page-size-opts=\"table.dbMhaTablePage.pageSizeOpts\"\n                  :page-size=\"table.dbMhaTablePage.size\"\n                  show-total\n                  show-sizer\n                  show-elevator\n                  @on-page-size-change=\"(val) => {table.dbMhaTablePage.size = val}\"></Page>\n            </div>\n          </Row>\n        </Col>\n      </div>\n    </Row>\n    <Divider></Divider>\n    <Button @click=\"createReplication\" :loading=\"dataLoading\" type=\"primary\">提交</Button>\n\n  </div>\n</template>\n\n<script>\n\nexport default {\n  name: 'mhaPreview',\n  components: {},\n  props: {\n    replicationType: Number,\n    dbName: String,\n    existReplicationRegionOptions: Array\n  },\n  emits: ['updated'],\n  data () {\n    return {\n      meta: {\n        regionOptions: [],\n        existReplicationRegionOptions: [],\n        replicationType: {\n          DB_TO_DB: 0,\n          DB_TO_MQ: 1\n        }\n      },\n      alertInfo: {\n        show: false,\n        successShow: false,\n        title: null,\n        message: null\n      },\n      formItem: {\n        srcRegionName: null,\n        dstRegionName: null\n      },\n      dataLoading: false,\n      constants: {\n        DAL_CLUSTER_MODE: 1\n      },\n      previewDataList: [],\n      table: {\n        dbMhaTableLoading: false,\n        dbMhaTableColumn: [\n          {\n            title: 'DB名',\n            key: 'dbName'\n          },\n          {\n            title: '源集群',\n            key: 'srcMhaName',\n            render: (h, params) => {\n              const row = params.row\n              const mha = row.srcMha\n              if (mha != null) {\n                return h('div', [\n                  h('span', mha.name),\n                  h('span', {\n                    style:\n                      {\n                        float: 'right',\n                        color: '#ababab'\n                      }\n                  }, mha.regionName + '(' + mha.dcName + ')')\n                ])\n              }\n            }\n          },\n          {\n            title: '目标集群',\n            key: 'dstMhaName',\n            render: (h, params) => {\n              const row = params.row\n              const mha = row.dstMha\n              if (mha != null) {\n                return h('div', [\n                  h('span', mha.name),\n                  h('span', {\n                    style:\n                      {\n                        float: 'right',\n                        color: '#ababab'\n                      }\n                  }, mha.regionName + '(' + mha.dcName + ')')\n                ])\n              }\n            }\n          }\n        ],\n        dbMhaMqTableColumn: [\n          {\n            title: 'DB名',\n            key: 'dbName'\n          },\n          {\n            title: '源集群',\n            key: 'srcMhaName',\n            render: (h, params) => {\n              const row = params.row\n              const mha = row.srcMha\n              if (mha != null) {\n                return h('div', [\n                  h('span', mha.name),\n                  h('span', {\n                    style:\n                        {\n                          float: 'right',\n                          color: '#ababab'\n                        }\n                  }, mha.regionName + '(' + mha.dcName + ')')\n                ])\n              }\n            }\n          }\n        ],\n        dbMhaTablePage: {\n          total: 0,\n          current: 1,\n          size: 5,\n          pageSizeOpts: [5, 10, 20, 100]\n        }\n      }\n    }\n  },\n  methods: {\n    async getRegionOptions () {\n      this.dataLoading = true\n      this.meta.regionOptions = []\n      await this.axios.get('/api/drc/v2/autoconfig/regionOptions', {\n        params: {\n          mode: this.constants.DAL_CLUSTER_MODE,\n          dbName: this.dbName\n        }\n      })\n        .then(response => {\n          const data = response.data.data\n          const success = data && response.data.status === 0\n          if (success) {\n            this.meta.regionOptions = data\n            if (data.indexOf(this.formItem.srcRegionName) === -1) {\n              this.formItem.srcRegionName = null\n            }\n            if (data.indexOf(this.formItem.dstRegionName) === -1) {\n              this.formItem.dstRegionName = null\n            }\n          } else {\n            this.formItem.srcRegionName = null\n            this.formItem.dstRegionName = null\n            this.$Message.warning('查询可选地域失败')\n          }\n        })\n        .catch(message => {\n          this.$Message.error('查询可选地域失败: ' + message)\n        })\n        .finally(() => {\n          this.dataLoading = false\n        })\n    },\n    async getDalInfo () {\n      this.previewDataList = []\n      this.table.dbMhaTablePage.current = 1\n      this.table.dbMhaTableLoading = true\n      await this.axios.get('/api/drc/v2/autoconfig/preCheck', {\n        params: {\n          mode: this.constants.DAL_CLUSTER_MODE,\n          dbName: this.dbName,\n          srcRegionName: this.formItem.srcRegionName,\n          replicationType: this.replicationType\n        }\n      })\n        .then(response => {\n          const data = response.data.data\n          const success = data && response.data.status === 0\n          if (success) {\n            this.previewDataList = data\n            console.log('total: ' + this.previewDataList.length)\n            this.$Message.success('同步集群检测成功, 共找到 ' + data.length + ' 个DB')\n          } else {\n            this.$Message.warning('同步集群检测失败：' + response.data.message)\n          }\n        })\n        .catch(message => {\n          this.$Message.error('查询dalcluster异常: ' + message)\n        })\n        .finally(() => {\n          this.table.dbMhaTableLoading = false\n        })\n    },\n    async createReplication () {\n      const params = {\n        srcRegionName: this.formItem.srcRegionName,\n        dstRegionName: this.formItem.dstRegionName,\n        dbName: this.dbName,\n        replicationType: this.replicationType\n      }\n      this.alertInfo.show = false\n      this.alertInfo.successShow = false\n      this.dataLoading = true\n      let scene\n      if (this.replicationType === this.meta.replicationType.DB_TO_MQ) {\n        scene = 'mhaDbReplicationForMq'\n      } else {\n        scene = 'mhaDbReplication'\n      }\n      await this.axios.post('/api/drc/v2/autoconfig/' + scene + '/create', params)\n        .then(response => {\n          const data = response.data\n          const success = data.status === 0\n          if (success) {\n            this.alertInfo.successShow = true\n            this.alertInfo.message = null\n            this.alertInfo.title = '提交成功'\n            this.$emit('updated')\n          } else {\n            this.alertInfo.show = true\n            this.alertInfo.title = '提交失败'\n            this.alertInfo.message = data.message\n            this.$Message.warning('提交失败: ' + data.message)\n          }\n        })\n        .catch(message => {\n          this.$Message.error('提交异常: ' + message)\n        })\n        .finally(() => {\n          this.dataLoading = false\n        })\n    },\n    async afterSwitchRegion () {\n    }\n  },\n  computed: {\n    preCheckMhaReplicationPage () {\n      const data = this.previewDataList\n      const start = this.table.dbMhaTablePage.current * this.table.dbMhaTablePage.size - this.table.dbMhaTablePage.size\n      const end = start + this.table.dbMhaTablePage.size\n      return [...data].slice(start, end)\n    }\n  },\n  created () {\n    this.getRegionOptions()\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mhaPreview.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mhaPreview.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./mhaPreview.vue?vue&type=template&id=6cd96bcc&scoped=true&\"\nimport script from \"./mhaPreview.vue?vue&type=script&lang=js&\"\nexport * from \"./mhaPreview.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6cd96bcc\",\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar toObject = require('../internals/to-object');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toLength = require('../internals/to-length');\n\n// `Array.prototype.fill` method implementation\n// https://tc39.github.io/ecma262/#sec-array.prototype.fill\nmodule.exports = function fill(value /* , start = 0, end = @length */) {\n  var O = toObject(this);\n  var length = toLength(O.length);\n  var argumentsLength = arguments.length;\n  var index = toAbsoluteIndex(argumentsLength > 1 ? arguments[1] : undefined, length);\n  var end = argumentsLength > 2 ? arguments[2] : undefined;\n  var endPos = end === undefined ? length : toAbsoluteIndex(end, length);\n  while (endPos > index) O[index++] = value;\n  return O;\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar MATCH = wellKnownSymbol('match');\n\nmodule.exports = function (METHOD_NAME) {\n  var regexp = /./;\n  try {\n    '/./'[METHOD_NAME](regexp);\n  } catch (e) {\n    try {\n      regexp[MATCH] = false;\n      return '/./'[METHOD_NAME](regexp);\n    } catch (f) { /* empty */ }\n  } return false;\n};\n","var $ = require('../internals/export');\nvar fill = require('../internals/array-fill');\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// `Array.prototype.fill` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.fill\n$({ target: 'Array', proto: true }, {\n  fill: fill\n});\n\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('fill');\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{style:({padding: '1px 1px',height: '100%'})},[_c('Divider',{staticStyle:{\"margin-top\":\"50px\"}},[_vm._v(\"预览：同步表\")]),_c('Button',{staticStyle:{\"margin-bottom\":\"5px\"},attrs:{\"type\":\"primary\",\"loading\":_vm.dbTableLoading},on:{\"click\":_vm.getTableInfo}},[_vm._v(\" 检查同步表 \")]),_c('Table',{attrs:{\"size\":\"small\",\"loading\":_vm.dbTableLoading,\"stripe\":\"\",\"columns\":_vm.table.dbTableColumn,\"data\":_vm.preCheckTablePage,\"border\":\"\"}}),_c('div',[_c('Page',{attrs:{\"transfer\":true,\"total\":_vm.checkTableDataList.length,\"current\":_vm.table.dbTablePage.current,\"page-size-opts\":_vm.table.dbTablePage.pageSizeOpts,\"page-size\":_vm.table.dbTablePage.size,\"show-total\":\"\",\"show-sizer\":\"\",\"show-elevator\":\"\"},on:{\"update:current\":function($event){return _vm.$set(_vm.table.dbTablePage, \"current\", $event)},\"on-change\":function (val) {_vm.table.dbTablePage.current = val},\"on-page-size-change\":function (val) {_vm.table.dbTablePage.size = val}}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div :style=\"{padding: '1px 1px',height: '100%'}\">\n    <Divider style=\"margin-top: 50px\">预览：同步表</Divider>\n    <Button type=\"primary\" :loading=\"dbTableLoading\" @click=\"getTableInfo\" style=\"margin-bottom: 5px\">\n      检查同步表\n    </Button>\n    <Table size=\"small\" :loading=\"dbTableLoading\" stripe :columns=\"table.dbTableColumn\"\n           :data=\"preCheckTablePage\" border></Table>\n    <div>\n      <Page\n        :transfer=\"true\"\n        :total=\"checkTableDataList.length\"\n        :current.sync=\"table.dbTablePage.current\"\n        :page-size-opts=\"table.dbTablePage.pageSizeOpts\"\n        :page-size=\"table.dbTablePage.size\"\n        show-total\n        show-sizer\n        show-elevator\n        @on-change=\"(val) => {table.dbTablePage.current = val}\"\n        @on-page-size-change=\"(val) => {table.dbTablePage.size = val}\"></Page>\n    </div>\n  </div>\n</template>\n\n<script>\n\nexport default {\n  name: 'dbTablesPreview',\n  props: {\n    mode: Number,\n    dbName: String,\n    srcRegionName: String,\n    dstRegionName: String,\n    tableNames: String,\n    replicationType: Number\n  },\n  emits: ['updated'],\n  data () {\n    return {\n      checkTableDataList: [],\n      dbTableLoading: false,\n      table: {\n        dbTableColumn: [\n          {\n            title: '序',\n            width: 50,\n            key: 'indexForShow'\n            // resizable: true\n          },\n          {\n            title: '库名',\n            key: 'schema',\n            resizable: true\n          },\n          {\n            title: '表名',\n            key: 'table',\n            resizable: true\n          },\n          {\n            title: '结果',\n            align: 'center',\n            render: (h, params) => {\n              const row = params.row\n              const color = row.res !== 'ok' ? 'volcano' : 'green'\n              const text = row.res\n              return h('Tag', {\n                props: {\n                  color: color\n                }\n              }, text)\n            }\n          }\n        ],\n        dbTablePage: {\n          total: 0,\n          current: 1,\n          size: 10,\n          pageSizeOpts: [5, 10, 20, 100]\n        }\n      }\n    }\n  },\n  methods: {\n    async getTableInfo () {\n      this.checkTableDataList = []\n      this.table.dbTablePage.current = 1\n      if (this.mode === 1) {\n        if (!this.dalClusterName) {\n          this.$Message.warning('请先填写 dalcluster')\n          return\n        }\n      } else {\n        if (!this.dbName) {\n          this.$Message.warning('请先填写数据库')\n          return\n        }\n      }\n      if (!this.srcRegionName || (this.replicationType === 0 && !this.dstRegionName)) {\n        this.$Message.warning('请先填写同步方向')\n        return\n      }\n      if (!this.tableNames) {\n        this.$Message.warning('请先填写表名')\n        return\n      }\n      this.dbTableLoading = true\n      await this.axios.get('/api/drc/v2/autoconfig/preCheckTable', {\n        params: this.flattenObj({\n          mode: this.mode,\n          dbName: this.dbName,\n          srcRegionName: this.srcRegionName,\n          dstRegionName: this.dstRegionName,\n          replicationType: this.replicationType,\n          tblsFilterDetail: {\n            tableNames: this.tableNames\n          }\n        })\n      })\n        .then(response => {\n          const data = response.data.data\n          if (data) {\n            for (const [index, val] of data.entries()) {\n              val.indexForShow = index\n            }\n            this.checkTableDataList = data\n            this.$Message.success('同步表检测成功, 共找到 ' + data.length + ' 个表')\n          } else {\n            this.$Message.warning('同步表检测失败：' + response.data.message)\n          }\n        })\n        .catch(message => {\n          this.$Message.error('查询dalcluster异常: ' + message)\n        })\n        .finally(() => {\n          this.dbTableLoading = false\n        })\n    },\n    flattenObj (ob) {\n      const result = {}\n      for (const i in ob) {\n        if ((typeof ob[i]) === 'object' && !Array.isArray(ob[i])) {\n          const temp = this.flattenObj(ob[i])\n          for (const j in temp) {\n            result[i + '.' + j] = temp[j]\n          }\n        } else {\n          result[i] = ob[i]\n        }\n      }\n      return result\n    }\n  },\n  computed: {\n    preCheckTablePage () {\n      const data = this.checkTableDataList\n      const start = (this.table.dbTablePage.current - 1) * this.table.dbTablePage.size\n      const end = start + this.table.dbTablePage.size\n      return [...data].slice(start, end)\n    }\n  },\n  created () {\n    if (this.tableNames && this.tableNames.trim().length > 0) {\n      this.getTableInfo()\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dbTablesPreview.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dbTablesPreview.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./dbTablesPreview.vue?vue&type=template&id=647b2baf&scoped=true&\"\nimport script from \"./dbTablesPreview.vue?vue&type=script&lang=js&\"\nexport * from \"./dbTablesPreview.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"647b2baf\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}