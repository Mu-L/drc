(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7988d01a","chunk-6304b0b8"],{"057f":function(t,a,e){var r=e("fc6a"),i=e("241c").f,s={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],n=function(t){try{return i(t)}catch(a){return o.slice()}};t.exports.f=function(t){return o&&"[object Window]"==s.call(t)?n(t):i(r(t))}},"159b":function(t,a,e){var r=e("da84"),i=e("fdbc"),s=e("17c2"),o=e("9112");for(var n in i){var c=r[n],l=c&&c.prototype;if(l&&l.forEach!==s)try{o(l,"forEach",s)}catch(d){l.forEach=s}}},"17c2":function(t,a,e){"use strict";var r=e("b727").forEach,i=e("a640"),s=e("ae40"),o=i("forEach"),n=s("forEach");t.exports=o&&n?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},"25f0":function(t,a,e){"use strict";var r=e("6eeb"),i=e("825a"),s=e("d039"),o=e("ad6d"),n="toString",c=RegExp.prototype,l=c[n],d=s((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),u=l.name!=n;(d||u)&&r(RegExp.prototype,n,(function(){var t=i(this),a=String(t.source),e=t.flags,r=String(void 0===e&&t instanceof RegExp&&!("flags"in c)?o.call(t):e);return"/"+a+"/"+r}),{unsafe:!0})},2909:function(t,a,e){"use strict";function r(t){if(Array.isArray(t)){for(var a=0,e=new Array(t.length);a<t.length;a++)e[a]=t[a];return e}}e.d(a,"a",(function(){return o}));e("a4d3"),e("e01a"),e("d28b"),e("a630"),e("e260"),e("d3b7"),e("25f0"),e("3ca3"),e("ddb0");function i(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function o(t){return r(t)||i(t)||s()}},"3ca3":function(t,a,e){"use strict";var r=e("6547").charAt,i=e("69f3"),s=e("7dd0"),o="String Iterator",n=i.set,c=i.getterFor(o);s(String,"String",(function(t){n(this,{type:o,string:String(t),index:0})}),(function(){var t,a=c(this),e=a.string,i=a.index;return i>=e.length?{value:void 0,done:!0}:(t=r(e,i),a.index+=t.length,{value:t,done:!1})}))},4160:function(t,a,e){"use strict";var r=e("23e7"),i=e("17c2");r({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},"471e":function(t,a,e){"use strict";var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[t.hasResp?e("Alert",{staticStyle:{width:"65%","margin-left":"250px"},attrs:{type:t.status,"show-icon":""}},[t._v(" "+t._s(t.title)+" "),e("span",{attrs:{slot:"desc"},domProps:{innerHTML:t._s(t.message)},slot:"desc"})]):t._e(),e("Row",[e("i-col",{attrs:{span:"12"}},[e("Form",{ref:"drc1",staticStyle:{float:"left","margin-top":"50px"},attrs:{model:t.srcBuildParam,rules:t.ruleDrc,"label-width":250}},[e("FormItem",{staticStyle:{width:"600px"},attrs:{label:"源集群名",prop:"srcMhaName"}},[e("Input",{attrs:{placeholder:"请输入源集群名"},on:{input:t.changeSrcMha},model:{value:t.srcBuildParam.mhaName,callback:function(a){t.$set(t.srcBuildParam,"mhaName",a)},expression:"srcBuildParam.mhaName"}})],1),e("FormItem",{attrs:{label:"选择Replicator",prop:"replicator"}},[e("Select",{staticStyle:{width:"250px"},attrs:{multiple:"",placeholder:"选择源集群Replicator"},model:{value:t.srcBuildParam.replicatorIps,callback:function(a){t.$set(t.srcBuildParam,"replicatorIps",a)},expression:"srcBuildParam.replicatorIps"}},t._l(t.replicatorList.src,(function(a){return e("Option",{key:a.ip,attrs:{value:a.ip}},[t._v(t._s(a.ip)+" —— "+t._s(a.az)+" ")])})),1),t._v("   "),e("Button",{attrs:{type:"success"},on:{click:t.autoConfigSrcReplicator}},[t._v("自动录入")])],1),t.showMhaApplierConfig(!0)?e("FormItem",{attrs:{label:"选择Applier",prop:"applier"}},[e("Select",{staticStyle:{width:"250px"},attrs:{multiple:"",placeholder:"选择源集群Applier"},model:{value:t.srcBuildParam.applierIps,callback:function(a){t.$set(t.srcBuildParam,"applierIps",a)},expression:"srcBuildParam.applierIps"}},t._l(t.applierList.src,(function(a){return e("Option",{key:a.ip,attrs:{value:a.ip}},[t._v(t._s(a.ip)+" —— "+t._s(a.az)+" ")])})),1),t._v("   "),e("Button",{attrs:{type:"success"},on:{click:t.autoConfigSrcApplier}},[t._v("自动录入")])],1):t._e(),e("FormItem",{staticStyle:{width:"600px"},attrs:{label:"初始拉取位点R"}},[e("Input",{attrs:{placeholder:"变更replicator机器时,请输入binlog拉取位点"},model:{value:t.srcBuildParam.replicatorInitGtid,callback:function(a){t.$set(t.srcBuildParam,"replicatorInitGtid",a)},expression:"srcBuildParam.replicatorInitGtid"}}),e("Row",[e("Col",{attrs:{span:"12"}},[e("Button",{on:{click:t.querySrcMhaMachineGtid}},[t._v("查询mha位点")]),t.hasTest1?e("span",[e("Icon",{attrs:{type:t.testSuccess1?"ios-checkmark-circle":"ios-close-circle",color:t.testSuccess1?"green":"red"}}),t._v(" "+t._s(t.testSuccess1?"查询实时位点成功":"连接查询失败")+" ")],1):t._e()],1),e("Col",{attrs:{span:"12"}},[e("Button",{attrs:{type:"success"},on:{click:t.querySrcMhaGtidCheckRes}},[t._v("位点校验")])],1)],1)],1),t.showMhaApplierConfig(!0)?e("FormItem",{staticStyle:{width:"600px"},attrs:{label:"初始同步位点A"}},[e("Input",{attrs:{placeholder:"请输入DRC同步起始位点"},model:{value:t.srcBuildParam.applierInitGtid,callback:function(a){t.$set(t.srcBuildParam,"applierInitGtid",a)},expression:"srcBuildParam.applierInitGtid"}})],1):t._e(),e("FormItem",{staticStyle:{width:"600px"},attrs:{label:"同步配置"}},[e("Button",{attrs:{type:"primary",ghost:""},on:{click:t.getSrcDbReplications}},[t._v("同步表管理")])],1),t.showDbMhaApplierConfig(!0)?e("FormItem",{staticStyle:{width:"600px"},attrs:{label:"DB Applier 配置"}},[e("Button",{attrs:{type:"primary",ghost:""},on:{click:t.getSrcDbApplierReplications}},[t._v("Db Applier 管理")])],1):t._e()],1)],1),e("i-col",{attrs:{span:"12"}},[e("Form",{ref:"drc1",staticStyle:{float:"left","margin-top":"50px"},attrs:{model:t.dstBuildParam,rules:t.ruleDrc,"label-width":250}},[e("FormItem",{staticStyle:{width:"600px"},attrs:{label:"目标集群名",prop:"dstMhaName"}},[e("Input",{attrs:{placeholder:"请输入目标集群名"},on:{input:t.changeDstMha},model:{value:t.dstBuildParam.mhaName,callback:function(a){t.$set(t.dstBuildParam,"mhaName",a)},expression:"dstBuildParam.mhaName"}})],1),e("FormItem",{attrs:{label:"选择Replicator",prop:"replicator"}},[e("Select",{staticStyle:{width:"250px"},attrs:{multiple:"",placeholder:"选择目标集群Replicator"},model:{value:t.dstBuildParam.replicatorIps,callback:function(a){t.$set(t.dstBuildParam,"replicatorIps",a)},expression:"dstBuildParam.replicatorIps"}},t._l(t.replicatorList.dst,(function(a){return e("Option",{key:a.ip,attrs:{value:a.ip}},[t._v(t._s(a.ip)+" —— "+t._s(a.az)+" ")])})),1),t._v("   "),e("Button",{attrs:{type:"success"},on:{click:t.autoConfigDstReplicator}},[t._v("自动录入")])],1),t.showMhaApplierConfig(!1)?e("FormItem",{attrs:{label:"选择Applier",prop:"applier"}},[e("Select",{staticStyle:{width:"250px"},attrs:{multiple:"",placeholder:"选择目标集群Applier"},model:{value:t.dstBuildParam.applierIps,callback:function(a){t.$set(t.dstBuildParam,"applierIps",a)},expression:"dstBuildParam.applierIps"}},t._l(t.applierList.dst,(function(a){return e("Option",{key:a.ip,attrs:{value:a.ip}},[t._v(t._s(a.ip)+" —— "+t._s(a.az)+" ")])})),1),t._v("   "),e("Button",{attrs:{type:"success"},on:{click:t.autoConfigDstApplier}},[t._v("自动录入")])],1):t._e(),e("FormItem",{staticStyle:{width:"600px"},attrs:{label:"初始拉取位点R"}},[e("Input",{attrs:{placeholder:"变更replicator机器时,请输入binlog拉取位点"},model:{value:t.dstBuildParam.replicatorInitGtid,callback:function(a){t.$set(t.dstBuildParam,"replicatorInitGtid",a)},expression:"dstBuildParam.replicatorInitGtid"}}),e("Row",[e("Col",{attrs:{span:"12"}},[e("Button",{on:{click:t.queryDstMhaMachineGtid}},[t._v("查询mha位点")]),t.hasTest2?e("span",[e("Icon",{attrs:{type:t.testSuccess2?"ios-checkmark-circle":"ios-close-circle",color:t.testSuccess2?"green":"red"}}),t._v(" "+t._s(t.testSuccess2?"查询实时位点成功":"连接查询失败")+" ")],1):t._e()],1),e("Col",{attrs:{span:"12"}},[e("Button",{attrs:{type:"success"},on:{click:t.queryDstMhaGtidCheckRes}},[t._v("位点校验")])],1)],1)],1),t.showMhaApplierConfig(!1)?e("FormItem",{staticStyle:{width:"600px"},attrs:{label:"初始同步位点A"}},[e("Input",{attrs:{placeholder:"请输入DRC同步起始位点"},model:{value:t.dstBuildParam.applierInitGtid,callback:function(a){t.$set(t.dstBuildParam,"applierInitGtid",a)},expression:"dstBuildParam.applierInitGtid"}})],1):t._e(),e("FormItem",{staticStyle:{width:"600px"},attrs:{label:"同步配置"}},[e("Button",{attrs:{type:"primary",ghost:""},on:{click:t.getDstDbReplications}},[t._v("同步表管理")])],1),t.showDbMhaApplierConfig(!1)?e("FormItem",{staticStyle:{width:"600px"},attrs:{label:"DB Applier 配置"}},[e("Button",{attrs:{type:"primary",ghost:""},on:{click:t.getDstDbApplierReplications}},[t._v("Db Applier 管理")])],1):t._e()],1)],1)],1),e("Form",{staticStyle:{"margin-top":"50px"},attrs:{"label-width":250}},[e("FormItem",[e("br"),e("Button",{staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:function(a){t.preCheckConfigure()}}},[t._v("提交")])],1),e("Modal",{attrs:{title:"确认配置信息",width:"900px"},on:{"on-ok":t.submitConfig},model:{value:t.reviewModal,callback:function(a){t.reviewModal=a},expression:"reviewModal"}},[e("Row",{attrs:{gutter:5}},[e("i-col",{attrs:{span:"12"}},[e("Form",{staticStyle:{width:"80%"}},[e("FormItem",{attrs:{label:"源集群名"}},[e("Input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:30},readonly:""},model:{value:t.srcBuildParam.mhaName,callback:function(a){t.$set(t.srcBuildParam,"mhaName",a)},expression:"srcBuildParam.mhaName"}})],1),e("FormItem",{attrs:{label:"源集群端Replicator"}},[e("Input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:30},readonly:""},model:{value:t.srcBuildParam.replicatorIps,callback:function(a){t.$set(t.srcBuildParam,"replicatorIps",a)},expression:"srcBuildParam.replicatorIps"}})],1),e("FormItem",{attrs:{label:"源集群端Applier"}},[e("Input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:30},readonly:""},model:{value:t.srcBuildParam.applierIps,callback:function(a){t.$set(t.srcBuildParam,"applierIps",a)},expression:"srcBuildParam.applierIps"}})],1),e("FormItem",{attrs:{label:"源集群端R位点"}},[e("Input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:30},readonly:""},model:{value:t.srcBuildParam.replicatorInitGtid,callback:function(a){t.$set(t.srcBuildParam,"replicatorInitGtid",a)},expression:"srcBuildParam.replicatorInitGtid"}})],1),e("FormItem",{attrs:{label:"源集群端A位点"}},[e("Input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:30},readonly:""},model:{value:t.srcBuildParam.applierInitGtid,callback:function(a){t.$set(t.srcBuildParam,"applierInitGtid",a)},expression:"srcBuildParam.applierInitGtid"}})],1)],1)],1),e("i-col",{attrs:{span:"12"}},[e("Form",{staticStyle:{width:"80%"}},[e("FormItem",{attrs:{label:"目标集群名"}},[e("Input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:30},readonly:""},model:{value:t.dstBuildParam.mhaName,callback:function(a){t.$set(t.dstBuildParam,"mhaName",a)},expression:"dstBuildParam.mhaName"}})],1),e("FormItem",{attrs:{label:"目标集群端Replicator"}},[e("Input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:30},readonly:""},model:{value:t.dstBuildParam.replicatorIps,callback:function(a){t.$set(t.dstBuildParam,"replicatorIps",a)},expression:"dstBuildParam.replicatorIps"}})],1),e("FormItem",{attrs:{label:"目标集群端Applier"}},[e("Input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:30},readonly:""},model:{value:t.dstBuildParam.applierIps,callback:function(a){t.$set(t.dstBuildParam,"applierIps",a)},expression:"dstBuildParam.applierIps"}})],1),e("FormItem",{attrs:{label:"目标集群端R位点"}},[e("Input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:30},readonly:""},model:{value:t.dstBuildParam.replicatorInitGtid,callback:function(a){t.$set(t.dstBuildParam,"replicatorInitGtid",a)},expression:"dstBuildParam.replicatorInitGtid"}})],1),e("FormItem",{attrs:{label:"目标集群端A位点"}},[e("Input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:30},readonly:""},model:{value:t.dstBuildParam.applierInitGtid,callback:function(a){t.$set(t.dstBuildParam,"applierInitGtid",a)},expression:"dstBuildParam.applierInitGtid"}})],1)],1)],1)],1)],1),e("Modal",{attrs:{title:"配置结果",width:"1200px"},model:{value:t.resultModal,callback:function(a){t.resultModal=a},expression:"resultModal"}},[e("Form",{staticStyle:{width:"100%"}},[e("FormItem",{attrs:{label:"集群配置"}},[e("Input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:30},readonly:""},model:{value:t.result,callback:function(a){t.result=a},expression:"result"}})],1)],1)],1),e("Modal",{attrs:{title:"gitd位点校验结果",width:"900px"},model:{value:t.gtidCheck.modal,callback:function(a){t.$set(t.gtidCheck,"modal",a)},expression:"gtidCheck.modal"}},[e("Form",{staticStyle:{width:"80%"}},[e("FormItem",{attrs:{label:"校验结果"}},[e("Input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:30},readonly:""},model:{value:t.gtidCheck.resVo.legal,callback:function(a){t.$set(t.gtidCheck.resVo,"legal",a)},expression:"gtidCheck.resVo.legal"}})],1),e("FormItem",{attrs:{label:"当前Mha"}},[e("Input",{attrs:{autosize:{minRows:1,maxRows:30},readonly:""},model:{value:t.gtidCheck.resVo.mha,callback:function(a){t.$set(t.gtidCheck.resVo,"mha",a)},expression:"gtidCheck.resVo.mha"}})],1),e("FormItem",{attrs:{label:"配置位点"}},[e("Input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:30},readonly:""},model:{value:t.gtidCheck.resVo.configGtid,callback:function(a){t.$set(t.gtidCheck.resVo,"configGtid",a)},expression:"gtidCheck.resVo.configGtid"}})],1),e("FormItem",{attrs:{label:"purgedGtid"}},[e("Input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:30},readonly:""},model:{value:t.gtidCheck.resVo.purgedGtid,callback:function(a){t.$set(t.gtidCheck.resVo,"purgedGtid",a)},expression:"gtidCheck.resVo.purgedGtid"}})],1)],1)],1)],1)],1)},i=[],s=(e("a4d3"),e("e01a"),e("d28b"),e("4160"),e("fb6a"),e("d3b7"),e("3ca3"),e("159b"),e("ddb0"),e("53ca")),o=e("2909"),n={name:"drcBuildV2",props:{srcMhaName:String,dstMhaName:String,srcDc:String,dstDc:String,env:String},data:function(){return{result:"",status:"",title:"",message:"",hasResp:!1,hasTest1:!1,testSuccess1:!1,hasTest2:!1,testSuccess2:!1,reviewModal:!1,resultModal:!1,replicatorList:{src:[],dst:[]},applierList:{src:[],dst:[]},srcBuildParam:{mhaName:this.srcMhaName,replicatorIps:[],applierIps:[],replicatorInitGtid:"",applierInitGtid:""},srcBuildData:{dbApplierDtos:[],dbApplierSwitch:!1},dstBuildParam:{mhaName:this.dstMhaName,replicatorIps:[],applierIps:[],replicatorInitGtid:"",applierInitGtid:""},dstBuildData:{dbApplierDtos:[],dbApplierSwitch:!1},gtidCheck:{modal:!1,resVo:{mha:"",legal:"",configGtid:"",purgedGtid:""}},ruleDrc:{oldClusterName:[{required:!0,message:"源集群名不能为空",trigger:"blur"}],newClusterName:[{required:!0,message:"新集群名不能为空",trigger:"blur"}],env:[{required:!0,message:"环境不能为空",trigger:"blur"}],replicator:[{required:!0,message:"replicator不能为空",trigger:"blur"}],applier:[{required:!0,message:"applier不能为空",trigger:"blur"}]}}},computed:{dataWithPage:function(){var t=this.nameFilterCheck.tableData,a=this.nameFilterCheck.current*this.nameFilterCheck.size-this.nameFilterCheck.size,e=a+this.nameFilterCheck.size;return Object(o["a"])(t).slice(a,e)}},methods:{flattenObj:function(t){var a={};for(var e in t)if("object"!==Object(s["a"])(t[e])||Array.isArray(t[e]))a[e]=t[e];else{var r=this.flattenObj(t[e]);for(var i in r)a[e+"."+i]=r[i]}return a},autoConfigSrcReplicator:function(){var t=this;this.axios.get("/api/drc/v2/resource/mha/auto?mhaName="+this.srcBuildParam.mhaName+"&type=0&selectedIps="+this.srcBuildParam.replicatorIps).then((function(a){console.log(a.data),t.srcBuildParam.replicatorIps=[],a.data.data.forEach((function(a){return t.srcBuildParam.replicatorIps.push(a.ip)}))}))},autoConfigSrcApplier:function(){var t=this;this.axios.get("/api/drc/v2/resource/mha/auto?mhaName="+this.srcBuildParam.mhaName+"&type=1&selectedIps="+this.srcBuildParam.applierIps).then((function(a){console.log(a.data),t.srcBuildParam.applierIps=[],a.data.data.forEach((function(a){return t.srcBuildParam.applierIps.push(a.ip)}))}))},autoConfigDstReplicator:function(){var t=this;this.axios.get("/api/drc/v2/resource/mha/auto?mhaName="+this.dstBuildParam.mhaName+"&type=0&selectedIps="+this.dstBuildParam.replicatorIps).then((function(a){console.log(a.data),t.dstBuildParam.replicatorIps=[],a.data.data.forEach((function(a){return t.dstBuildParam.replicatorIps.push(a.ip)}))}))},autoConfigDstApplier:function(){var t=this;this.axios.get("/api/drc/v2/resource/mha/auto?mhaName="+this.dstBuildParam.mhaName+"&type=1&selectedIps="+this.dstBuildParam.applierIps).then((function(a){console.log(a.data),t.dstBuildParam.applierIps=[],a.data.data.forEach((function(a){return t.dstBuildParam.applierIps.push(a.ip)}))}))},getSrcMhaResources:function(){var t=this;this.axios.get("/api/drc/v2/resource/mha/all?mhaName="+this.srcBuildParam.mhaName+"&type=0").then((function(a){console.log(a.data),t.replicatorList.src=a.data.data})),this.axios.get("/api/drc/v2/resource/mha/all?mhaName="+this.srcBuildParam.mhaName+"&type=1").then((function(a){console.log(a.data),t.applierList.src=a.data.data}))},getDstMhaResources:function(){var t=this;this.axios.get("/api/drc/v2/resource/mha/all?mhaName="+this.dstBuildParam.mhaName+"&type=0").then((function(a){console.log(a.data),t.replicatorList.dst=a.data.data})),this.axios.get("/api/drc/v2/resource/mha/all?mhaName="+this.dstBuildParam.mhaName+"&type=1").then((function(a){console.log(a.data),t.applierList.dst=a.data.data}))},getSrcMhaReplicatorsInUse:function(){var t=this;this.axios.get("/api/drc/v2/mha/replicator?mhaName="+this.srcBuildParam.mhaName).then((function(a){t.srcBuildParam.replicatorIps=a.data.data}))},getDstMhaReplicatorsInUse:function(){var t=this;this.axios.get("/api/drc/v2/mha/replicator?mhaName="+this.dstBuildParam.mhaName).then((function(a){console.log(a.data),t.dstBuildParam.replicatorIps=a.data.data}))},getSrcMhaAppliersInUse:function(){var t=this;this.axios.get("/api/drc/v2/config/mha/applier?srcMhaName="+this.dstBuildParam.mhaName+"&dstMhaName="+this.srcBuildParam.mhaName).then((function(a){console.log(a.data),t.srcBuildParam.applierIps=a.data.data})),this.axios.get("/api/drc/v2/config/mha/applierGtid?srcMhaName="+this.dstBuildParam.mhaName+"&dstMhaName="+this.srcBuildParam.mhaName).then((function(a){console.log(a.data),t.srcBuildParam.applierInitGtid=a.data.data}))},getDstMhaAppliersInUse:function(){var t=this;this.axios.get("/api/drc/v2/config/mha/applier?srcMhaName="+this.srcBuildParam.mhaName+"&dstMhaName="+this.dstBuildParam.mhaName).then((function(a){t.dstBuildParam.applierIps=a.data.data})),this.axios.get("/api/drc/v2/config/mha/applierGtid?srcMhaName="+this.srcBuildParam.mhaName+"&dstMhaName="+this.dstBuildParam.mhaName).then((function(a){console.log(a.data),t.dstBuildParam.applierInitGtid=a.data.data}))},getMhaDbAppliersInUse:function(){var t=this;this.axios.get("/api/drc/v2/config/mha/dbApplier?srcMhaName="+this.dstBuildParam.mhaName+"&dstMhaName="+this.srcBuildParam.mhaName).then((function(a){console.log(a.data),t.srcBuildData.dbApplierDtos=a.data.data})),this.axios.get("/api/drc/v2/config/mha/dbApplier?srcMhaName="+this.srcBuildParam.mhaName+"&dstMhaName="+this.dstBuildParam.mhaName).then((function(a){console.log(a.data),t.dstBuildData.dbApplierDtos=a.data.data})),this.axios.get("/api/drc/v2/config/mha/dbApplier/switch?mhaName="+this.srcBuildParam.mhaName).then((function(a){console.log(a.data),t.srcBuildData.dbApplierSwitch=a.data.data})),this.axios.get("/api/drc/v2/config/mha/dbApplier/switch?mhaName="+this.dstBuildParam.mhaName).then((function(a){console.log(a.data),t.dstBuildData.dbApplierSwitch=a.data.data}))},querySrcMhaMachineGtid:function(){var t=this,a=this;a.axios.get("/api/drc/v2/mha/gtid/executed?mha="+this.srcBuildParam.mhaName).then((function(a){t.hasTest1=!0,0===a.data.status?(t.srcBuildParam.replicatorInitGtid=a.data.data,t.testSuccess1=!0):t.testSuccess1=!1}))},querySrcMhaGtidCheckRes:function(){var t=this;if(null!=this.srcBuildParam.replicatorInitGtid&&""!==this.srcBuildParam.replicatorInitGtid){var a=this;a.axios.get("/api/drc/v2/mha/gtid/checkResult?mha="+this.srcBuildParam.mhaName+"&configGtid="+this.srcBuildParam.replicatorInitGtid).then((function(a){0===a.data.status?(t.gtidCheck.resVo={mha:t.srcBuildParam.mhaName,legal:!0===a.data.data.legal?"合理位点":"binlog已经被purge",configGtid:t.srcBuildParam.replicatorInitGtid,purgedGtid:a.data.data.purgedGtid},t.gtidCheck.modal=!0):alert("位点校验失败!")}))}else alert("位点为空！")},queryDstMhaMachineGtid:function(){var t=this,a=this;a.axios.get("/api/drc/v2/mha/gtid/executed?mha="+this.dstBuildParam.mhaName).then((function(a){t.hasTest2=!0,0===a.data.status?(t.dstBuildParam.replicatorInitGtid=a.data.data,t.testSuccess2=!0):t.testSuccess2=!1}))},queryDstMhaGtidCheckRes:function(){var t=this;if(null!=this.dstBuildParam.replicatorInitGtid&&""!==this.dstBuildParam.replicatorInitGtid){var a=this;a.axios.get("/api/drc/v2/mha/gtid/checkResult?mha="+this.dstBuildParam.mhaName+"&configGtid="+this.dstBuildParam.replicatorInitGtid).then((function(a){0===a.data.status?(t.gtidCheck.resVo={mha:t.dstBuildParam.mhaName,legal:!0===a.data.data.legal?"合理位点":"binlog已经被purge",configGtid:t.dstBuildParam.replicatorInitGtid,purgedGtid:a.data.data.purgedGtid},t.gtidCheck.modal=!0):alert("位点校验失败!")}))}else alert("位点为空！")},getSrcDc:function(){var t=this;this.axios.get("/api/drc/v2/mha/dc?mhaName="+this.srcBuildParam.mhaName).then((function(a){t.srcDc=a.data.data}))},getDstDc:function(){var t=this;this.axios.get("/api/drc/v2/mha/dc?mhaName="+this.dstBuildParam.mhaName).then((function(a){t.dstDc=a.data.data}))},changeSrcMha:function(){this.$emit("srcMhaNameChanged",this.srcBuildParam.mhaName),this.getSrcMhaResources(),this.getSrcMhaReplicatorsInUse(),this.getSrcMhaAppliersInUse(),this.getDstMhaAppliersInUse(),this.getMhaDbAppliersInUse(),this.getSrcDc()},changeDstMha:function(){this.$emit("dstMhaNameChanged",this.dstBuildParam.mhaName),this.getDstMhaResources(),this.getDstMhaReplicatorsInUse(),this.getDstMhaAppliersInUse(),this.getSrcMhaAppliersInUse(),this.getMhaDbAppliersInUse(),this.getDstDc()},start:function(){this.$Loading.start()},finish:function(){this.$Loading.finish()},error:function(){this.$Loading.error()},changeModal:function(t){var a=this;this.$refs[t].validate((function(t){t?a.drc.reviewModal=!0:a.$Message.error("仍有必填项未填!")}))},preCheckConfigure:function(){this.reviewModal=!0},reviewConfigure:function(){this.drc.reviewModal=!0},submitConfig:function(){var t=this,a=this;this.axios.post("/api/drc/v2/config/",{srcBuildParam:this.srcBuildParam,dstBuildParam:this.dstBuildParam}).then((function(e){console.log(e.data),a.result=e.data,a.reviewModal=!1,a.resultModal=!0,t.refresh()}))},getSrcDbReplications:function(){this.$router.push({path:"/dbTables",query:{srcMhaName:this.dstBuildParam.mhaName,dstMhaName:this.srcBuildParam.mhaName,srcDc:this.dstDc,dstDc:this.srcDc,order:!0}})},getDstDbReplications:function(){this.$router.push({path:"/dbTables",query:{srcMhaName:this.srcBuildParam.mhaName,dstMhaName:this.dstBuildParam.mhaName,srcDc:this.srcDc,dstDc:this.dstDc,order:!0}})},getSrcDbApplierReplications:function(){this.$router.push({path:"/dbAppliers",query:{srcMhaName:this.dstBuildParam.mhaName,dstMhaName:this.srcBuildParam.mhaName,srcDc:this.dstDc,dstDc:this.srcDc,order:!0}})},getDstDbApplierReplications:function(){this.$router.push({path:"/dbAppliers",query:{srcMhaName:this.srcBuildParam.mhaName,dstMhaName:this.dstBuildParam.mhaName,srcDc:this.srcDc,dstDc:this.dstDc,order:!0}})},handleChangeSize:function(t){this.size=t},hasAppliers:function(t){var a=!0,e=!1,r=void 0;try{for(var i,s=t[Symbol.iterator]();!(a=(i=s.next()).done);a=!0){var o=i.value;if(o.ips&&o.ips.length>0)return!0}}catch(n){e=!0,r=n}finally{try{a||null==s.return||s.return()}finally{if(e)throw r}}return!1},showMhaApplierConfig:function(t){return t?!this.hasAppliers(this.srcBuildData.dbApplierDtos):!this.hasAppliers(this.dstBuildData.dbApplierDtos)},showDbMhaApplierConfig:function(t){return t?this.srcBuildData.dbApplierSwitch||this.hasAppliers(this.srcBuildData.dbApplierDtos):this.dstBuildData.dbApplierSwitch||this.hasAppliers(this.dstBuildData.dbApplierDtos)},refresh:function(){this.getSrcMhaReplicatorsInUse(),this.getDstMhaReplicatorsInUse(),this.getSrcMhaAppliersInUse(),this.getDstMhaAppliersInUse(),this.getMhaDbAppliersInUse(),this.getSrcDc(),this.getDstDc()}},created:function(){this.getSrcMhaResources(),this.getDstMhaResources(),this.refresh()}},c=n,l=(e("8a76"),e("2877")),d=Object(l["a"])(c,r,i,!1,null,"136ff284",null);a["a"]=d.exports},"4df4":function(t,a,e){"use strict";var r=e("0366"),i=e("7b0b"),s=e("9bdd"),o=e("e95a"),n=e("50c4"),c=e("8418"),l=e("35a1");t.exports=function(t){var a,e,d,u,p,h,m=i(t),f="function"==typeof this?this:Array,g=arguments.length,b=g>1?arguments[1]:void 0,v=void 0!==b,y=l(m),I=0;if(v&&(b=r(b,g>2?arguments[2]:void 0,2)),void 0==y||f==Array&&o(y))for(a=n(m.length),e=new f(a);a>I;I++)h=v?b(m[I],I):m[I],c(e,I,h);else for(u=y.call(m),p=u.next,e=new f;!(d=p.call(u)).done;I++)h=v?s(u,b,[d.value,I],!0):d.value,c(e,I,h);return e.length=I,e}},"53ca":function(t,a,e){"use strict";e.d(a,"a",(function(){return r}));e("a4d3"),e("e01a"),e("d28b"),e("e260"),e("d3b7"),e("3ca3"),e("ddb0");function r(t){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}},5899:function(t,a){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,a,e){var r=e("1d80"),i=e("5899"),s="["+i+"]",o=RegExp("^"+s+s+"*"),n=RegExp(s+s+"*$"),c=function(t){return function(a){var e=String(r(a));return 1&t&&(e=e.replace(o,"")),2&t&&(e=e.replace(n,"")),e}};t.exports={start:c(1),end:c(2),trim:c(3)}},6547:function(t,a,e){var r=e("a691"),i=e("1d80"),s=function(t){return function(a,e){var s,o,n=String(i(a)),c=r(e),l=n.length;return c<0||c>=l?t?"":void 0:(s=n.charCodeAt(c),s<55296||s>56319||c+1===l||(o=n.charCodeAt(c+1))<56320||o>57343?t?n.charAt(c):s:t?n.slice(c,c+2):o-56320+(s-55296<<10)+65536)}};t.exports={codeAt:s(!1),charAt:s(!0)}},7156:function(t,a,e){var r=e("861d"),i=e("d2bb");t.exports=function(t,a,e){var s,o;return i&&"function"==typeof(s=a.constructor)&&s!==e&&r(o=s.prototype)&&o!==e.prototype&&i(t,o),t}},"746f":function(t,a,e){var r=e("428f"),i=e("5135"),s=e("e538"),o=e("9bf2").f;t.exports=function(t){var a=r.Symbol||(r.Symbol={});i(a,t)||o(a,t,{value:s.f(t)})}},8418:function(t,a,e){"use strict";var r=e("c04e"),i=e("9bf2"),s=e("5c6c");t.exports=function(t,a,e){var o=r(a);o in t?i.f(t,o,s(0,e)):t[o]=e}},"8a76":function(t,a,e){"use strict";e("9ae8")},"9ae8":function(t,a,e){},a4d3:function(t,a,e){"use strict";var r=e("23e7"),i=e("da84"),s=e("d066"),o=e("c430"),n=e("83ab"),c=e("4930"),l=e("fdbf"),d=e("d039"),u=e("5135"),p=e("e8b5"),h=e("861d"),m=e("825a"),f=e("7b0b"),g=e("fc6a"),b=e("c04e"),v=e("5c6c"),y=e("7c73"),I=e("df75"),B=e("241c"),P=e("057f"),S=e("7418"),x=e("06cf"),N=e("9bf2"),w=e("d1e7"),M=e("9112"),A=e("6eeb"),D=e("5692"),k=e("f772"),R=e("d012"),C=e("90e3"),G=e("b622"),_=e("e538"),F=e("746f"),L=e("d44e"),$=e("69f3"),E=e("b727").forEach,O=k("hidden"),T="Symbol",V="prototype",z=G("toPrimitive"),j=$.set,U=$.getterFor(T),q=Object[V],H=i.Symbol,J=s("JSON","stringify"),W=x.f,X=N.f,Y=P.f,Q=w.f,K=D("symbols"),Z=D("op-symbols"),tt=D("string-to-symbol-registry"),at=D("symbol-to-string-registry"),et=D("wks"),rt=i.QObject,it=!rt||!rt[V]||!rt[V].findChild,st=n&&d((function(){return 7!=y(X({},"a",{get:function(){return X(this,"a",{value:7}).a}})).a}))?function(t,a,e){var r=W(q,a);r&&delete q[a],X(t,a,e),r&&t!==q&&X(q,a,r)}:X,ot=function(t,a){var e=K[t]=y(H[V]);return j(e,{type:T,tag:t,description:a}),n||(e.description=a),e},nt=l?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof H},ct=function(t,a,e){t===q&&ct(Z,a,e),m(t);var r=b(a,!0);return m(e),u(K,r)?(e.enumerable?(u(t,O)&&t[O][r]&&(t[O][r]=!1),e=y(e,{enumerable:v(0,!1)})):(u(t,O)||X(t,O,v(1,{})),t[O][r]=!0),st(t,r,e)):X(t,r,e)},lt=function(t,a){m(t);var e=g(a),r=I(e).concat(mt(e));return E(r,(function(a){n&&!ut.call(e,a)||ct(t,a,e[a])})),t},dt=function(t,a){return void 0===a?y(t):lt(y(t),a)},ut=function(t){var a=b(t,!0),e=Q.call(this,a);return!(this===q&&u(K,a)&&!u(Z,a))&&(!(e||!u(this,a)||!u(K,a)||u(this,O)&&this[O][a])||e)},pt=function(t,a){var e=g(t),r=b(a,!0);if(e!==q||!u(K,r)||u(Z,r)){var i=W(e,r);return!i||!u(K,r)||u(e,O)&&e[O][r]||(i.enumerable=!0),i}},ht=function(t){var a=Y(g(t)),e=[];return E(a,(function(t){u(K,t)||u(R,t)||e.push(t)})),e},mt=function(t){var a=t===q,e=Y(a?Z:g(t)),r=[];return E(e,(function(t){!u(K,t)||a&&!u(q,t)||r.push(K[t])})),r};if(c||(H=function(){if(this instanceof H)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,a=C(t),e=function(t){this===q&&e.call(Z,t),u(this,O)&&u(this[O],a)&&(this[O][a]=!1),st(this,a,v(1,t))};return n&&it&&st(q,a,{configurable:!0,set:e}),ot(a,t)},A(H[V],"toString",(function(){return U(this).tag})),A(H,"withoutSetter",(function(t){return ot(C(t),t)})),w.f=ut,N.f=ct,x.f=pt,B.f=P.f=ht,S.f=mt,_.f=function(t){return ot(G(t),t)},n&&(X(H[V],"description",{configurable:!0,get:function(){return U(this).description}}),o||A(q,"propertyIsEnumerable",ut,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!c,sham:!c},{Symbol:H}),E(I(et),(function(t){F(t)})),r({target:T,stat:!0,forced:!c},{for:function(t){var a=String(t);if(u(tt,a))return tt[a];var e=H(a);return tt[a]=e,at[e]=a,e},keyFor:function(t){if(!nt(t))throw TypeError(t+" is not a symbol");if(u(at,t))return at[t]},useSetter:function(){it=!0},useSimple:function(){it=!1}}),r({target:"Object",stat:!0,forced:!c,sham:!n},{create:dt,defineProperty:ct,defineProperties:lt,getOwnPropertyDescriptor:pt}),r({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:ht,getOwnPropertySymbols:mt}),r({target:"Object",stat:!0,forced:d((function(){S.f(1)}))},{getOwnPropertySymbols:function(t){return S.f(f(t))}}),J){var ft=!c||d((function(){var t=H();return"[null]"!=J([t])||"{}"!=J({a:t})||"{}"!=J(Object(t))}));r({target:"JSON",stat:!0,forced:ft},{stringify:function(t,a,e){var r,i=[t],s=1;while(arguments.length>s)i.push(arguments[s++]);if(r=a,(h(a)||void 0!==t)&&!nt(t))return p(a)||(a=function(t,a){if("function"==typeof r&&(a=r.call(this,t,a)),!nt(a))return a}),i[1]=a,J.apply(null,i)}})}H[V][z]||M(H[V],z,H[V].valueOf),L(H,T),R[O]=!0},a630:function(t,a,e){var r=e("23e7"),i=e("4df4"),s=e("1c7e"),o=!s((function(t){Array.from(t)}));r({target:"Array",stat:!0,forced:o},{from:i})},a640:function(t,a,e){"use strict";var r=e("d039");t.exports=function(t,a){var e=[][t];return!!e&&r((function(){e.call(null,a||function(){throw 1},1)}))}},a9e3:function(t,a,e){"use strict";var r=e("83ab"),i=e("da84"),s=e("94ca"),o=e("6eeb"),n=e("5135"),c=e("c6b6"),l=e("7156"),d=e("c04e"),u=e("d039"),p=e("7c73"),h=e("241c").f,m=e("06cf").f,f=e("9bf2").f,g=e("58a8").trim,b="Number",v=i[b],y=v.prototype,I=c(p(y))==b,B=function(t){var a,e,r,i,s,o,n,c,l=d(t,!1);if("string"==typeof l&&l.length>2)if(l=g(l),a=l.charCodeAt(0),43===a||45===a){if(e=l.charCodeAt(2),88===e||120===e)return NaN}else if(48===a){switch(l.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+l}for(s=l.slice(2),o=s.length,n=0;n<o;n++)if(c=s.charCodeAt(n),c<48||c>i)return NaN;return parseInt(s,r)}return+l};if(s(b,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var P,S=function(t){var a=arguments.length<1?0:t,e=this;return e instanceof S&&(I?u((function(){y.valueOf.call(e)})):c(e)!=b)?l(new v(B(a)),e,S):B(a)},x=r?h(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),N=0;x.length>N;N++)n(v,P=x[N])&&!n(S,P)&&f(S,P,m(v,P));S.prototype=y,y.constructor=S,o(i,b,S)}},ad6d:function(t,a,e){"use strict";var r=e("825a");t.exports=function(){var t=r(this),a="";return t.global&&(a+="g"),t.ignoreCase&&(a+="i"),t.multiline&&(a+="m"),t.dotAll&&(a+="s"),t.unicode&&(a+="u"),t.sticky&&(a+="y"),a}},d28b:function(t,a,e){var r=e("746f");r("iterator")},ddb0:function(t,a,e){var r=e("da84"),i=e("fdbc"),s=e("e260"),o=e("9112"),n=e("b622"),c=n("iterator"),l=n("toStringTag"),d=s.values;for(var u in i){var p=r[u],h=p&&p.prototype;if(h){if(h[c]!==d)try{o(h,c,d)}catch(f){h[c]=d}if(h[l]||o(h,l,u),i[u])for(var m in s)if(h[m]!==s[m])try{o(h,m,s[m])}catch(f){h[m]=s[m]}}}},e01a:function(t,a,e){"use strict";var r=e("23e7"),i=e("83ab"),s=e("da84"),o=e("5135"),n=e("861d"),c=e("9bf2").f,l=e("e893"),d=s.Symbol;if(i&&"function"==typeof d&&(!("description"in d.prototype)||void 0!==d().description)){var u={},p=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),a=this instanceof p?new d(t):void 0===t?d():d(t);return""===t&&(u[a]=!0),a};l(p,d);var h=p.prototype=d.prototype;h.constructor=p;var m=h.toString,f="Symbol(test)"==String(d("test")),g=/^Symbol\((.*)\)[^)]+$/;c(h,"description",{configurable:!0,get:function(){var t=n(this)?this.valueOf():this,a=m.call(t);if(o(u,t))return"";var e=f?a.slice(7,-1):a.replace(g,"$1");return""===e?void 0:e}}),r({global:!0,forced:!0},{Symbol:p})}},e538:function(t,a,e){var r=e("b622");a.f=r},fb6a:function(t,a,e){"use strict";var r=e("23e7"),i=e("861d"),s=e("e8b5"),o=e("23cb"),n=e("50c4"),c=e("fc6a"),l=e("8418"),d=e("b622"),u=e("1dde"),p=e("ae40"),h=u("slice"),m=p("slice",{ACCESSORS:!0,0:0,1:2}),f=d("species"),g=[].slice,b=Math.max;r({target:"Array",proto:!0,forced:!h||!m},{slice:function(t,a){var e,r,d,u=c(this),p=n(u.length),h=o(t,p),m=o(void 0===a?p:a,p);if(s(u)&&(e=u.constructor,"function"!=typeof e||e!==Array&&!s(e.prototype)?i(e)&&(e=e[f],null===e&&(e=void 0)):e=void 0,e===Array||void 0===e))return g.call(u,h,m);for(r=new(void 0===e?Array:e)(b(m-h,0)),d=0;h<m;h++,d++)h in u&&l(r,d,u[h]);return r.length=d,r}})},fdbc:function(t,a){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=chunk-7988d01a.f4799738.js.map