(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0ca2e1cf"],{"159b":function(t,e,r){var o=r("da84"),s=r("fdbc"),a=r("17c2"),i=r("9112");for(var u in s){var l=o[u],c=l&&l.prototype;if(c&&c.forEach!==a)try{i(c,"forEach",a)}catch(n){c.forEach=a}}},"17c2":function(t,e,r){"use strict";var o=r("b727").forEach,s=r("a640"),a=r("ae40"),i=s("forEach"),u=a("forEach");t.exports=i&&u?[].forEach:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}},4160:function(t,e,r){"use strict";var o=r("23e7"),s=r("17c2");o({target:"Array",proto:!0,forced:[].forEach!=s},{forEach:s})},"48f5":function(t,e,r){"use strict";r.r(e);var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("base-component",[r("Breadcrumb",{style:{margin:"15px 0 15px 185px",position:"fixed"}},[r("BreadcrumbItem",{attrs:{to:"/home"}},[t._v("首页")]),r("BreadcrumbItem",{attrs:{to:"/proxyRouteManagement"}},[t._v("路由管理")])],1),r("Content",{staticClass:"content",style:{padding:"10px",background:"#fff",margin:"50px 0 1px 185px",zIndex:"1"}},[r("div",{staticStyle:{padding:"1px 1px"}},[r("Row",[r("i-col",{attrs:{span:"12"}},[r("Form",{ref:"route",staticStyle:{float:"left","margin-top":"50px"},attrs:{model:t.route,rules:t.ruleRoute,"label-width":250}},[r("FormItem",{staticStyle:{width:"500px"},attrs:{label:"BU",prop:"routeOrgName"}},[r("Input",{attrs:{disabled:t.updateStatus,placeholder:"请输入路由BU,不填默认为公用路由"},model:{value:t.route.routeOrgName,callback:function(e){t.$set(t.route,"routeOrgName",e)},expression:"route.routeOrgName"}})],1),r("FormItem",{attrs:{label:"源端机房",prop:"srcDcName"}},[r("Select",{staticStyle:{width:"250px"},attrs:{disabled:t.updateStatus,filterable:"","allow-create":"",placeholder:"请选择源端机房"},on:{"on-select":t.getProxyUrisInSrc,"on-create":t.handleCreateDc},model:{value:t.route.srcDcName,callback:function(e){t.$set(t.route,"srcDcName",e)},expression:"route.srcDcName"}},t._l(t.drcZoneList,(function(e){return r("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1),r("FormItem",{attrs:{label:"目标机房",prop:"dstDcName"}},[r("Select",{staticStyle:{width:"250px"},attrs:{disabled:t.updateStatus,filterable:"","allow-create":"",placeholder:"请选择目标机房"},on:{"on-select":t.getProxyUrisInDst,"on-create":t.handleCreateDc},model:{value:t.route.dstDcName,callback:function(e){t.$set(t.route,"dstDcName",e)},expression:"route.dstDcName"}},t._l(t.drcZoneList,(function(e){return r("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1),r("FormItem",{attrs:{label:"源端Proxy",prop:"srcProxyUris"}},[r("Select",{staticStyle:{width:"250px"},attrs:{filterable:"",multiple:"",placeholder:"请选择源端Proxy"},model:{value:t.route.proxyUris.src,callback:function(e){t.$set(t.route.proxyUris,"src",e)},expression:"route.proxyUris.src"}},t._l(t.route.proxyUriList.src,(function(e){return r("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])})),1)],1),r("FormItem",{attrs:{label:"中继Proxy",prop:"relayProxyUris"}},[r("Select",{staticStyle:{width:"250px"},attrs:{filterable:"",multiple:"",placeholder:"请选择中继Proxy"},model:{value:t.route.proxyUris.relay,callback:function(e){t.$set(t.route.proxyUris,"relay",e)},expression:"route.proxyUris.relay"}},t._l(t.route.proxyUriList.all,(function(e){return r("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])})),1)],1),r("FormItem",{attrs:{label:"目标Proxy",prop:"dstProxyUris"}},[r("Select",{staticStyle:{width:"250px"},attrs:{filterable:"",multiple:"",placeholder:"请选择目标Proxy"},model:{value:t.route.proxyUris.dst,callback:function(e){t.$set(t.route.proxyUris,"dst",e)},expression:"route.proxyUris.dst"}},t._l(t.route.proxyUriList.dst,(function(e){return r("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])})),1)],1),r("FormItem",{staticStyle:{width:"500px"},attrs:{label:"Tag",prop:"tag"}},[r("Input",{attrs:{disabled:t.updateStatus,placeholder:"请输入路由tag"},model:{value:t.route.tag,callback:function(e){t.$set(t.route,"tag",e)},expression:"route.tag"}})],1),r("FormItem",[r("Button",{on:{click:function(e){return t.handleReset()}}},[t._v("重置")]),r("br"),r("br"),r("Button",{attrs:{type:"primary"},on:{click:function(e){t.reviewInputResource()}}},[t._v("录入")])],1),r("Modal",{attrs:{title:"录入确认"},on:{"on-ok":function(e){return t.inputResource()}},model:{value:t.route.reviewModal,callback:function(e){t.$set(t.route,"reviewModal",e)},expression:"route.reviewModal"}},[t._v(" 对BU["+t._s(this.route.routeOrgName)+"]、tag["+t._s(this.route.tag)+"]、方向["+t._s(this.route.srcDcName)+"->"+t._s(this.route.dstDcName)+"]，确认新增/修改路由为源端Proxies："+t._s(this.route.proxyUris.src)+"，中继Proxies："+t._s(this.route.proxyUris.relay)+"，目标Proxies："+t._s(this.route.proxyUris.dst)+"吗？ ")]),r("Modal",{attrs:{title:"录入结果"},model:{value:t.route.resultModal,callback:function(e){t.$set(t.route,"resultModal",e)},expression:"route.resultModal"}},[t._v(" "+t._s(this.result)+" ")])],1)],1)],1)],1)])],1)},s=[],a=(r("4160"),r("159b"),{name:"proxyRouteManagement",data:function(){return{updateStatus:this.$route.query.updateStatus,route:{reviewModal:!1,resultModal:!1,routeOrgName:this.$route.query.routeOrgName,srcDcName:this.$route.query.srcDcName,dstDcName:this.$route.query.dstDcName,tag:this.$route.query.tag,proxyUris:{src:this.$route.query.srcProxyUris,relay:this.$route.query.relayProxyUris,dst:this.$route.query.dstProxyUris},proxyUriList:{src:[],all:[],dst:[]}},ruleRoute:{srcDcName:[{required:!0,message:"源端机房不能为空",trigger:"blur"}],dstDcName:[{required:!0,message:"目标机房不能为空",trigger:"blur"}],srcProxyUris:[{required:!0,message:"源端Proxy不能为空",trigger:"blur"}],dstProxyUris:[{required:!0,message:"目标Proxy不能为空",trigger:"blur"}],tag:[{required:!0,message:"tag不能为空",trigger:"blur"}]},drcZoneList:[{value:"shaoy",label:"上海欧阳"},{value:"shaxy",label:"上海新源"},{value:"sharb",label:"上海日版"},{value:"shajq",label:"上海金桥"},{value:"shafq",label:"上海福泉"},{value:"shajz",label:"上海金钟"},{value:"ntgxh",label:"南通星湖大道"},{value:"ntgxy",label:"ntgxy"},{value:"fraaws",label:"法兰克福AWS"},{value:"shali",label:"上海阿里"},{value:"sinibuaws",label:"IBU-VPC"},{value:"sinibualiyun",label:"IBU-VPC(aliyun)"},{value:"sinaws",label:"新加坡AWS"}],result:""}},methods:{reviewInputResource:function(){this.route.reviewModal=!0},inputResource:function(){var t=this;this.axios.post("/api/drc/v1/meta/routes",{id:0,routeOrgName:this.route.routeOrgName,srcDcName:this.route.srcDcName,dstDcName:this.route.dstDcName,srcProxyUris:this.route.proxyUris.src,relayProxyUris:this.route.proxyUris.relay,dstProxyUris:this.route.proxyUris.dst,tag:this.route.tag}).then((function(e){console.log(e.data),t.result=e.data.data,t.route.reviewModal=!1,t.route.resultModal=!0}))},handleCreateDc:function(t){console.log("customize add dc: "+t),this.drcZoneList.push({value:t,label:t}),console.log(this.drcZoneList)},handleReset:function(){this.route.routeOrgName="",this.route.srcDcName="",this.route.dstDcName="",this.route.tag="",this.route.proxyUris.src=[],this.route.proxyUris.relay=[],this.route.proxyUris.dst=[]},getProxyUrisInSrc:function(t){var e=this,r="/api/drc/v1/meta/proxy/uris/dcs/"+t.value;console.log("uri: "+r),this.axios.get(r).then((function(t){console.log(t.data),e.route.proxyUriList.src=[],t.data.data.forEach((function(t){return e.route.proxyUriList.src.push(t)}))}))},getProxyUrisInDst:function(t){var e=this,r="/api/drc/v1/meta/proxy/uris/dcs/"+t.value;console.log("uri: "+r),this.axios.get(r).then((function(t){console.log(t.data),e.route.proxyUriList.dst=[],t.data.data.forEach((function(t){return e.route.proxyUriList.dst.push(t)}))}))},getProxyUrisInSrc2:function(){var t=this,e="/api/drc/v1/meta/proxy/uris/dcs/"+this.route.srcDcName;console.log("uri: "+e),this.axios.get(e).then((function(e){console.log(e.data),t.route.proxyUriList.src=[],e.data.data.forEach((function(e){return t.route.proxyUriList.src.push(e)}))}))},getProxyUrisInDst2:function(){var t=this,e="/api/drc/v1/meta/proxy/uris/dcs/"+this.route.dstDcName;console.log("uri: "+e),this.axios.get(e).then((function(e){console.log(e.data),t.route.proxyUriList.dst=[],e.data.data.forEach((function(e){return t.route.proxyUriList.dst.push(e)}))}))},getAllProxyUris:function(){var t=this,e="/api/drc/v1/meta/proxy/uris";console.log("uri: "+e),this.axios.get(e).then((function(e){console.log(e.data),t.route.proxyUriList.all=[],e.data.data.forEach((function(e){return t.route.proxyUriList.all.push(e)}))}))},getProxyUrisInUse:function(){var t=this,e="/api/drc/v1/meta/routes?routeOrgName="+this.route.routeOrgName+"&srcDcName="+this.route.srcDcName+"&dstDcName="+this.route.dstDcName+"&tag="+this.route.tag+"&deleted=0";console.log("uri: "+e),this.axios.get(e).then((function(e){console.log(e),t.route.proxyUris.src=[],t.route.proxyUris.relay=[],t.route.proxyUris.dst=[],0!==e.data.data.length&&(e.data.data[0].srcProxyUris.forEach((function(e){return t.route.proxyUris.src.push(e)})),e.data.data[0].relayProxyUris.forEach((function(e){return t.route.proxyUris.relay.push(e)})),e.data.data[0].dstProxyUris.forEach((function(e){return t.route.proxyUris.dst.push(e)})))}))}},created:function(){this.getProxyUrisInSrc2(),this.getAllProxyUris(),this.getProxyUrisInDst2(),this.getProxyUrisInUse()}}),i=a,u=r("2877"),l=Object(u["a"])(i,o,s,!1,null,"34b33004",null);e["default"]=l.exports},a640:function(t,e,r){"use strict";var o=r("d039");t.exports=function(t,e){var r=[][t];return!!r&&o((function(){r.call(null,e||function(){throw 1},1)}))}},fdbc:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=chunk-0ca2e1cf.b48f1b22.js.map