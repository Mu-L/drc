(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5c743e52"],{1043:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("base-component",{attrs:{isFather:e.isFather,subMenuName:["1"],fatherMenu:e.fatherMenu}},[n("Breadcrumb",{style:{margin:"15px 0 15px 185px",position:"fixed"}},[n("BreadcrumbItem",{attrs:{to:"/home"}},[e._v("首页")]),n("BreadcrumbItem",{attrs:{to:"/fullDataConsistencyCluster"}},[e._v("校验集群")]),n("BreadcrumbItem",[e._v("校验表配置")])],1),n("Content",{staticClass:"content",style:{padding:"10px",background:"#fff",margin:"50px 0 1px 185px",zIndex:"1"}},[n("div",{staticStyle:{padding:"1px 1px"}},[n("div",{staticClass:"ivu-list-item-meta-title"},[n("p",[e._v("DRC集群："+e._s(e.$route.query.clusterA)+"(集群A)---"+e._s(e.$route.query.clusterB)+"(集群B)")])]),n("Table",{staticStyle:{"margin-top":"20px"},attrs:{stripe:"",columns:e.columns,data:e.dataWithPage,size:"small"}}),n("div",{staticStyle:{"text-align":"center",margin:"16px 0"}},[n("Page",{attrs:{total:e.records.length,current:e.current,"show-sizer":"","show-elevator":"",placement:"top"},on:{"update:current":function(t){e.current=t},"on-page-size-change":e.handleChangeSize}})],1)],1),n("Modal",{attrs:{width:"900px",title:"一致性校验确认"},on:{"on-ok":e.okCheckConsistency,"on-cancel":e.cancelCheckConsistency},model:{value:this.confirmCheckModal,callback:function(t){e.$set(this,"confirmCheckModal",t)},expression:"this.confirmCheckModal"}},[n("Form",{attrs:{"label-width":200}},[n("FormItem",{attrs:{label:"库名"}},[n("Input",{staticStyle:{width:"500px"},attrs:{readonly:""},model:{value:this.chooseTableConfig.schema,callback:function(t){e.$set(this.chooseTableConfig,"schema",t)},expression:"this.chooseTableConfig.schema"}})],1),n("FormItem",{attrs:{label:"表名"}},[n("Input",{staticStyle:{width:"500px"},attrs:{readonly:""},model:{value:this.chooseTableConfig.table,callback:function(t){e.$set(this.chooseTableConfig,"table",t)},expression:"this.chooseTableConfig.table"}})],1),n("FormItem",{attrs:{label:"key"}},[n("Input",{staticStyle:{width:"500px"},attrs:{readonly:""},model:{value:this.chooseTableConfig.key,callback:function(t){e.$set(this.chooseTableConfig,"key",t)},expression:"this.chooseTableConfig.key"}})],1),n("FormItem",{attrs:{label:"onUpdate"}},[n("Input",{staticStyle:{width:"500px"},attrs:{readonly:""},model:{value:this.chooseTableConfig.onUpdate,callback:function(t){e.$set(this.chooseTableConfig,"onUpdate",t)},expression:"this.chooseTableConfig.onUpdate"}})],1),n("FormItem",{attrs:{label:"startTimestamp"}},[n("Input",{staticStyle:{width:"500px"},attrs:{readonly:""},model:{value:this.chooseTableConfig.startTimestamp,callback:function(t){e.$set(this.chooseTableConfig,"startTimestamp",t)},expression:"this.chooseTableConfig.startTimestamp"}})],1),n("FormItem",{attrs:{label:"endTimeStamp"}},[n("Input",{staticStyle:{width:"500px"},attrs:{readonly:""},model:{value:this.chooseTableConfig.endTimeStamp,callback:function(t){e.$set(this.chooseTableConfig,"endTimeStamp",t)},expression:"this.chooseTableConfig.endTimeStamp"}})],1)],1)],1),n("Modal",{attrs:{width:"900px",title:"执行结果"},on:{"on-ok":e.okExecuteModal,"on-cancel":e.okExecuteModal},model:{value:this.executeModal,callback:function(t){e.$set(this,"executeModal",t)},expression:"this.executeModal"}},[n("Form",[n("FormItem",{attrs:{label:"执行结果"}},[n("Alert",{attrs:{type:this.executeStatus,"show-icon":""}},[e._v(e._s(this.executeMsg))])],1)],1)],1)],1)],1)},r=[],o=(n("fb6a"),n("2909")),i=n("e66c"),s={name:"fullDataConsistencyCheck",data:function(){var e=this;return{isFather:!0,fatherMenu:"/fullDataConsistencyCluster",executeStatus:"",executeMsg:"",executeModal:!1,confirmCheckModal:!1,chooseTableConfig:{tableId:"",schema:"",table:"",key:"",onUpdate:"",startTimestamp:"",endTimeStamp:""},total:0,current:1,size:10,records:[],startTime:[],endTime:[],columns:[{title:"库名",key:"monitorSchemaName",resizable:!0},{title:"表名",key:"monitorTableName",resizable:!0},{title:"开始时间",align:"center",resizable:!0,render:function(t,n){return t("DatePicker",{props:{type:"datetime",format:"yyyy-MM-dd HH:mm",transfer:!0,placeholder:"start time"},on:{"on-change":function(t){e.startTime[n.index+(e.current-1)*e.size]=t}}})}},{title:"结束时间",align:"center",resizable:!0,render:function(t,n){return t("DatePicker",{props:{type:"datetime",format:"yyyy-MM-dd HH:mm",transfer:!0,placeholder:"end time"},on:{"on-change":function(t){e.endTime[n.index+(e.current-1)*e.size]=t}}})}},{title:"操作",align:"center",resizable:!0,render:function(t,n){return t("div",[t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.confirmModalCheck(n)}}},"执行")])}},{title:"校验状态",align:"center",render:function(e,t){var n=t.row,a=0===n.fullDataCheckStatus?"error":1===n.fullDataCheckStatus?"warning":2===n.fullDataCheckStatus?"success":"warning",r=0===n.fullDataCheckStatus?"未校验":1===n.fullDataCheckStatus?"校验中":2===n.fullDataCheckStatus?"已校验":"校验失败";return e("Tag",{props:{color:a}},r)}},{title:"最近校验时间",align:"center",render:function(e,t){return e("div",null==t.row.fullDataCheckLasttime?"":Object(i["a"])(new Date(t.row.fullDataCheckLasttime),"yyyy-MM-dd hh:mm:ss"))}},{title:"最近校验结果",align:"center",render:function(t,n){return t("div",[t("Button",{props:{type:"info",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.showCheckResult(n.row)}}},"查看")])}}]}},methods:{getConfiguredTables:function(){var e=this;this.axios.get("/api/drc/v1/monitor/consistency/data/"+this.$route.query.clusterA+"/"+this.$route.query.clusterB).then((function(t){e.records=t.data.data,console.log(t.data.data)}))},handleChangeSize:function(e){var t=this;this.size=e,this.$nextTick((function(){t.getData()}))},confirmModalCheck:function(e){this.chooseTableConfig.tableId=e.row.id,this.chooseTableConfig.schema=e.row.monitorSchemaName,this.chooseTableConfig.table=e.row.monitorTableName,this.chooseTableConfig.key=e.row.monitorTableKey,this.chooseTableConfig.onUpdate=e.row.monitorTableOnUpdate,this.chooseTableConfig.startTimestamp=this.startTime[e.index+(this.current-1)*this.size],this.chooseTableConfig.endTimeStamp=this.endTime[e.index+(this.current-1)*this.size],this.confirmCheckModal=!0},okCheckConsistency:function(){this.checkDataConsistency(),this.confirmCheckModal=!1},cancelCheckConsistency:function(){this.confirmCheckModal=!1},checkDataConsistency:function(){var e=this;this.axios.post("/api/drc/v1/monitor/consistency/data/full/"+this.$route.query.clusterA+"/"+this.$route.query.clusterB,{tableId:this.chooseTableConfig.tableId,schema:this.chooseTableConfig.schema,table:this.chooseTableConfig.table,key:this.chooseTableConfig.key,onUpdate:this.chooseTableConfig.onUpdate,startTimestamp:this.chooseTableConfig.startTimestamp,endTimeStamp:this.chooseTableConfig.endTimeStamp,mhaAName:this.$route.query.clusterA,mhaBName:this.$route.query.clusterB}).then((function(t){console.log("add result"),console.log(t.data),0===t.data.status?(e.executeStatus="success",e.executeMsg=t.data.message):(e.executeStatus="error",e.executeMsg=t.data.data),e.executeModal=!0}))},okExecuteModal:function(){this.executeModal=!1,this.confirmCheckModal=!1},showCheckResult:function(e){this.$router.push({name:"fullDataConsistencyResult",query:{dbName:e.monitorSchemaName,tableName:e.monitorTableName,mhaA:this.$route.query.clusterA,mhaB:this.$route.query.clusterB,key:e.monitorTableKey,checkTime:Object(i["a"])(new Date(e.fullDataCheckLasttime),"yyyy-MM-dd hh:mm:ss")}})}},computed:{dataWithPage:function(){var e=this.records,t=this.current*this.size-this.size,n=t+this.size;return Object(o["a"])(e).slice(t,n)}},created:function(){this.getConfiguredTables()}},c=s,l=n("2877"),u=Object(l["a"])(c,a,r,!1,null,"ddb6d8ee",null);t["default"]=u.exports},"14c3":function(e,t,n){var a=n("c6b6"),r=n("9263");e.exports=function(e,t){var n=e.exec;if("function"===typeof n){var o=n.call(e,t);if("object"!==typeof o)throw TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==a(e))throw TypeError("RegExp#exec called on incompatible receiver");return r.call(e,t)}},"44e7":function(e,t,n){var a=n("861d"),r=n("c6b6"),o=n("b622"),i=o("match");e.exports=function(e){var t;return a(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==r(e))}},"4d63":function(e,t,n){var a=n("83ab"),r=n("da84"),o=n("94ca"),i=n("7156"),s=n("9bf2").f,c=n("241c").f,l=n("44e7"),u=n("ad6d"),h=n("9f7f"),d=n("6eeb"),f=n("d039"),p=n("69f3").set,m=n("2626"),g=n("b622"),b=g("match"),x=r.RegExp,y=x.prototype,v=/a/g,C=/a/g,T=new x(v)!==v,k=h.UNSUPPORTED_Y,E=a&&o("RegExp",!T||k||f((function(){return C[b]=!1,x(v)!=v||x(C)==C||"/a/i"!=x(v,"i")})));if(E){var S=function(e,t){var n,a=this instanceof S,r=l(e),o=void 0===t;if(!a&&r&&e.constructor===S&&o)return e;T?r&&!o&&(e=e.source):e instanceof S&&(o&&(t=u.call(e)),e=e.source),k&&(n=!!t&&t.indexOf("y")>-1,n&&(t=t.replace(/y/g,"")));var s=i(T?new x(e,t):x(e,t),a?this:y,S);return k&&n&&p(s,{sticky:n}),s},M=function(e){e in S||s(S,e,{configurable:!0,get:function(){return x[e]},set:function(t){x[e]=t}})},w=c(x),R=0;while(w.length>R)M(w[R++]);y.constructor=S,S.prototype=y,d(r,"RegExp",S)}m("RegExp")},5319:function(e,t,n){"use strict";var a=n("d784"),r=n("825a"),o=n("7b0b"),i=n("50c4"),s=n("a691"),c=n("1d80"),l=n("8aa5"),u=n("14c3"),h=Math.max,d=Math.min,f=Math.floor,p=/\$([$&'`]|\d\d?|<[^>]*>)/g,m=/\$([$&'`]|\d\d?)/g,g=function(e){return void 0===e?e:String(e)};a("replace",2,(function(e,t,n,a){var b=a.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,x=a.REPLACE_KEEPS_$0,y=b?"$":"$0";return[function(n,a){var r=c(this),o=void 0==n?void 0:n[e];return void 0!==o?o.call(n,r,a):t.call(String(r),n,a)},function(e,a){if(!b&&x||"string"===typeof a&&-1===a.indexOf(y)){var o=n(t,e,this,a);if(o.done)return o.value}var c=r(e),f=String(this),p="function"===typeof a;p||(a=String(a));var m=c.global;if(m){var C=c.unicode;c.lastIndex=0}var T=[];while(1){var k=u(c,f);if(null===k)break;if(T.push(k),!m)break;var E=String(k[0]);""===E&&(c.lastIndex=l(f,i(c.lastIndex),C))}for(var S="",M=0,w=0;w<T.length;w++){k=T[w];for(var R=String(k[0]),I=h(d(s(k.index),f.length),0),$=[],D=1;D<k.length;D++)$.push(g(k[D]));var _=k.groups;if(p){var A=[R].concat($,I,f);void 0!==_&&A.push(_);var U=String(a.apply(void 0,A))}else U=v(R,f,I,$,_,a);I>=M&&(S+=f.slice(M,I)+U,M=I+R.length)}return S+f.slice(M)}];function v(e,n,a,r,i,s){var c=a+e.length,l=r.length,u=m;return void 0!==i&&(i=o(i),u=p),t.call(s,u,(function(t,o){var s;switch(o.charAt(0)){case"$":return"$";case"&":return e;case"`":return n.slice(0,a);case"'":return n.slice(c);case"<":s=i[o.slice(1,-1)];break;default:var u=+o;if(0===u)return t;if(u>l){var h=f(u/10);return 0===h?t:h<=l?void 0===r[h-1]?o.charAt(1):r[h-1]+o.charAt(1):t}s=r[u-1]}return void 0===s?"":s}))}}))},"8aa5":function(e,t,n){"use strict";var a=n("6547").charAt;e.exports=function(e,t,n){return t+(n?a(e,t).length:1)}},9263:function(e,t,n){"use strict";var a=n("ad6d"),r=n("9f7f"),o=RegExp.prototype.exec,i=String.prototype.replace,s=o,c=function(){var e=/a/,t=/b*/g;return o.call(e,"a"),o.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),l=r.UNSUPPORTED_Y||r.BROKEN_CARET,u=void 0!==/()??/.exec("")[1],h=c||u||l;h&&(s=function(e){var t,n,r,s,h=this,d=l&&h.sticky,f=a.call(h),p=h.source,m=0,g=e;return d&&(f=f.replace("y",""),-1===f.indexOf("g")&&(f+="g"),g=String(e).slice(h.lastIndex),h.lastIndex>0&&(!h.multiline||h.multiline&&"\n"!==e[h.lastIndex-1])&&(p="(?: "+p+")",g=" "+g,m++),n=new RegExp("^(?:"+p+")",f)),u&&(n=new RegExp("^"+p+"$(?!\\s)",f)),c&&(t=h.lastIndex),r=o.call(d?n:h,g),d?r?(r.input=r.input.slice(m),r[0]=r[0].slice(m),r.index=h.lastIndex,h.lastIndex+=r[0].length):h.lastIndex=0:c&&r&&(h.lastIndex=h.global?r.index+r[0].length:t),u&&r&&r.length>1&&i.call(r[0],n,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(r[s]=void 0)})),r}),e.exports=s},"9f7f":function(e,t,n){"use strict";var a=n("d039");function r(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=a((function(){var e=r("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=a((function(){var e=r("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},ac1f:function(e,t,n){"use strict";var a=n("23e7"),r=n("9263");a({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},d784:function(e,t,n){"use strict";n("ac1f");var a=n("6eeb"),r=n("d039"),o=n("b622"),i=n("9263"),s=n("9112"),c=o("species"),l=!r((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),u=function(){return"$0"==="a".replace(/./,"$0")}(),h=o("replace"),d=function(){return!!/./[h]&&""===/./[h]("a","$0")}(),f=!r((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));e.exports=function(e,t,n,h){var p=o(e),m=!r((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),g=m&&!r((function(){var t=!1,n=/a/;return"split"===e&&(n={},n.constructor={},n.constructor[c]=function(){return n},n.flags="",n[p]=/./[p]),n.exec=function(){return t=!0,null},n[p](""),!t}));if(!m||!g||"replace"===e&&(!l||!u||d)||"split"===e&&!f){var b=/./[p],x=n(p,""[e],(function(e,t,n,a,r){return t.exec===i?m&&!r?{done:!0,value:b.call(t,n,a)}:{done:!0,value:e.call(n,t,a)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:d}),y=x[0],v=x[1];a(String.prototype,e,y),a(RegExp.prototype,p,2==t?function(e,t){return v.call(e,this,t)}:function(e){return v.call(e,this)})}h&&s(RegExp.prototype[p],"sham",!0)}},e66c:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n("4d63"),n("ac1f"),n("25f0"),n("5319");function a(e,t){var n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"S+":e.getMilliseconds()};for(var a in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?n[a]:("00"+n[a]).substr((""+n[a]).length)));return t}},fb6a:function(e,t,n){"use strict";var a=n("23e7"),r=n("861d"),o=n("e8b5"),i=n("23cb"),s=n("50c4"),c=n("fc6a"),l=n("8418"),u=n("b622"),h=n("1dde"),d=n("ae40"),f=h("slice"),p=d("slice",{ACCESSORS:!0,0:0,1:2}),m=u("species"),g=[].slice,b=Math.max;a({target:"Array",proto:!0,forced:!f||!p},{slice:function(e,t){var n,a,u,h=c(this),d=s(h.length),f=i(e,d),p=i(void 0===t?d:t,d);if(o(h)&&(n=h.constructor,"function"!=typeof n||n!==Array&&!o(n.prototype)?r(n)&&(n=n[m],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return g.call(h,f,p);for(a=new(void 0===n?Array:n)(b(p-f,0)),u=0;f<p;f++,u++)f in h&&l(a,u,h[f]);return a.length=u,a}})}}]);
//# sourceMappingURL=chunk-5c743e52.82ae7da3.js.map