(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-628b7b02"],{"057f":function(t,e,a){"use strict";var n=a("c6b6"),r=a("fc6a"),o=a("241c").f,i=a("f36a"),l="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return o(t)}catch(e){return i(l)}};t.exports.f=function(t){return l&&"Window"===n(t)?s(t):o(r(t))}},"0b43":function(t,e,a){"use strict";var n=a("04f8");t.exports=n&&!!Symbol["for"]&&!!Symbol.keyFor},"428f":function(t,e,a){"use strict";var n=a("cfe9");t.exports=n},"53ca":function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));a("a4d3"),a("e01a"),a("d28b"),a("d3b7"),a("3ca3"),a("ddb0");function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}},"57b9":function(t,e,a){"use strict";var n=a("c65b"),r=a("d066"),o=a("b622"),i=a("cb2d");t.exports=function(){var t=r("Symbol"),e=t&&t.prototype,a=e&&e.valueOf,l=o("toPrimitive");e&&!e[l]&&i(e,l,(function(t){return n(a,this)}),{arity:1})}},"5a47":function(t,e,a){"use strict";var n=a("23e7"),r=a("04f8"),o=a("d039"),i=a("7418"),l=a("7b0b"),s=!r||o((function(){i.f(1)}));n({target:"Object",stat:!0,forced:s},{getOwnPropertySymbols:function(t){var e=i.f;return e?e(l(t)):[]}})},a4d3:function(t,e,a){"use strict";a("d9f5"),a("b4f8"),a("c513"),a("e9c4"),a("5a47")},b0c0:function(t,e,a){"use strict";var n=a("83ab"),r=a("5e77").EXISTS,o=a("e330"),i=a("edd0"),l=Function.prototype,s=o(l.toString),c=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,u=o(c.exec),p="name";n&&!r&&i(l,p,{configurable:!0,get:function(){try{return u(c,s(this))[1]}catch(t){return""}}})},b4f8:function(t,e,a){"use strict";var n=a("23e7"),r=a("d066"),o=a("1a2d"),i=a("577e"),l=a("5692"),s=a("0b43"),c=l("string-to-symbol-registry"),u=l("symbol-to-string-registry");n({target:"Symbol",stat:!0,forced:!s},{for:function(t){var e=i(t);if(o(c,e))return c[e];var a=r("Symbol")(e);return c[e]=a,u[a]=e,a}})},c513:function(t,e,a){"use strict";var n=a("23e7"),r=a("1a2d"),o=a("d9b5"),i=a("0d51"),l=a("5692"),s=a("0b43"),c=l("symbol-to-string-registry");n({target:"Symbol",stat:!0,forced:!s},{keyFor:function(t){if(!o(t))throw new TypeError(i(t)+" is not a symbol");if(r(c,t))return c[t]}})},d28b:function(t,e,a){"use strict";var n=a("e065");n("iterator")},d9f5:function(t,e,a){"use strict";var n=a("23e7"),r=a("cfe9"),o=a("c65b"),i=a("e330"),l=a("c430"),s=a("83ab"),c=a("04f8"),u=a("d039"),p=a("1a2d"),d=a("3a9b"),f=a("825a"),m=a("fc6a"),g=a("a04b"),b=a("577e"),y=a("5c6c"),v=a("7c73"),h=a("df75"),w=a("241c"),I=a("057f"),x=a("7418"),R=a("06cf"),S=a("9bf2"),k=a("37e8"),N=a("d1e7"),D=a("cb2d"),_=a("edd0"),P=a("5692"),q=a("f772"),O=a("d012"),F=a("90e3"),T=a("b622"),$=a("e538"),M=a("e065"),B=a("57b9"),C=a("d44e"),z=a("69f3"),j=a("b727").forEach,E=q("hidden"),L="Symbol",A="prototype",U=z.set,G=z.getterFor(L),J=Object[A],Q=r.Symbol,W=Q&&Q[A],X=r.RangeError,H=r.TypeError,K=r.QObject,V=R.f,Y=S.f,Z=I.f,tt=N.f,et=i([].push),at=P("symbols"),nt=P("op-symbols"),rt=P("wks"),ot=!K||!K[A]||!K[A].findChild,it=function(t,e,a){var n=V(J,e);n&&delete J[e],Y(t,e,a),n&&t!==J&&Y(J,e,n)},lt=s&&u((function(){return 7!==v(Y({},"a",{get:function(){return Y(this,"a",{value:7}).a}})).a}))?it:Y,st=function(t,e){var a=at[t]=v(W);return U(a,{type:L,tag:t,description:e}),s||(a.description=e),a},ct=function(t,e,a){t===J&&ct(nt,e,a),f(t);var n=g(e);return f(a),p(at,n)?(a.enumerable?(p(t,E)&&t[E][n]&&(t[E][n]=!1),a=v(a,{enumerable:y(0,!1)})):(p(t,E)||Y(t,E,y(1,v(null))),t[E][n]=!0),lt(t,n,a)):Y(t,n,a)},ut=function(t,e){f(t);var a=m(e),n=h(a).concat(gt(a));return j(n,(function(e){s&&!o(dt,a,e)||ct(t,e,a[e])})),t},pt=function(t,e){return void 0===e?v(t):ut(v(t),e)},dt=function(t){var e=g(t),a=o(tt,this,e);return!(this===J&&p(at,e)&&!p(nt,e))&&(!(a||!p(this,e)||!p(at,e)||p(this,E)&&this[E][e])||a)},ft=function(t,e){var a=m(t),n=g(e);if(a!==J||!p(at,n)||p(nt,n)){var r=V(a,n);return!r||!p(at,n)||p(a,E)&&a[E][n]||(r.enumerable=!0),r}},mt=function(t){var e=Z(m(t)),a=[];return j(e,(function(t){p(at,t)||p(O,t)||et(a,t)})),a},gt=function(t){var e=t===J,a=Z(e?nt:m(t)),n=[];return j(a,(function(t){!p(at,t)||e&&!p(J,t)||et(n,at[t])})),n};c||(Q=function(){if(d(W,this))throw new H("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?b(arguments[0]):void 0,e=F(t),a=function(t){var n=void 0===this?r:this;n===J&&o(a,nt,t),p(n,E)&&p(n[E],e)&&(n[E][e]=!1);var i=y(1,t);try{lt(n,e,i)}catch(l){if(!(l instanceof X))throw l;it(n,e,i)}};return s&&ot&&lt(J,e,{configurable:!0,set:a}),st(e,t)},W=Q[A],D(W,"toString",(function(){return G(this).tag})),D(Q,"withoutSetter",(function(t){return st(F(t),t)})),N.f=dt,S.f=ct,k.f=ut,R.f=ft,w.f=I.f=mt,x.f=gt,$.f=function(t){return st(T(t),t)},s&&(_(W,"description",{configurable:!0,get:function(){return G(this).description}}),l||D(J,"propertyIsEnumerable",dt,{unsafe:!0}))),n({global:!0,constructor:!0,wrap:!0,forced:!c,sham:!c},{Symbol:Q}),j(h(rt),(function(t){M(t)})),n({target:L,stat:!0,forced:!c},{useSetter:function(){ot=!0},useSimple:function(){ot=!1}}),n({target:"Object",stat:!0,forced:!c,sham:!s},{create:pt,defineProperty:ct,defineProperties:ut,getOwnPropertyDescriptor:ft}),n({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:mt}),B(),C(Q,L),O[E]=!0},e01a:function(t,e,a){"use strict";var n=a("23e7"),r=a("83ab"),o=a("cfe9"),i=a("e330"),l=a("1a2d"),s=a("1626"),c=a("3a9b"),u=a("577e"),p=a("edd0"),d=a("e893"),f=o.Symbol,m=f&&f.prototype;if(r&&s(f)&&(!("description"in m)||void 0!==f().description)){var g={},b=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:u(arguments[0]),e=c(m,this)?new f(t):void 0===t?f():f(t);return""===t&&(g[e]=!0),e};d(b,f),b.prototype=m,m.constructor=b;var y="Symbol(description detection)"===String(f("description detection")),v=i(m.valueOf),h=i(m.toString),w=/^Symbol\((.*)\)[^)]+$/,I=i("".replace),x=i("".slice);p(m,"description",{configurable:!0,get:function(){var t=v(this);if(l(g,t))return"";var e=h(t),a=y?x(e,7,-1):I(e,w,"$1");return""===a?void 0:a}}),n({global:!0,constructor:!0,forced:!0},{Symbol:b})}},e065:function(t,e,a){"use strict";var n=a("428f"),r=a("1a2d"),o=a("e538"),i=a("9bf2").f;t.exports=function(t){var e=n.Symbol||(n.Symbol={});r(e,t)||i(e,t,{value:o.f(t)})}},e538:function(t,e,a){"use strict";var n=a("b622");e.f=n},f6df:function(t,e,a){"use strict";a.r(e);a("b0c0");var n=function(){var t=this,e=t._self._c;return e("base-component",[e("Breadcrumb",{style:{margin:"15px 0 15px 185px",position:"fixed"}},[e("BreadcrumbItem",{attrs:{to:"/home"}},[t._v("首页")]),e("BreadcrumbItem",[t._v("DRC审批")])],1),e("Content",{staticClass:"content",style:{padding:"10px",background:"#fff",margin:"50px 0 1px 185px",zIndex:"1"}},[e("div",{staticStyle:{padding:"1px 1px"}},[e("Row",{attrs:{gutter:10,align:"middle"}},[e("Col",{attrs:{span:"20"}},[e("Card",{attrs:{padding:5},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("查询条件")]},proxy:!0}])},[e("Row",{attrs:{gutter:10}},[e("Col",{attrs:{span:"3"}},[e("Select",{attrs:{filterable:"",clearable:"",placeholder:"源region"},model:{value:t.queryParam.srcRegion,callback:function(e){t.$set(t.queryParam,"srcRegion",e)},expression:"queryParam.srcRegion"}},t._l(t.regions,(function(a){return e("Option",{key:a.regionName,attrs:{value:a.regionName}},[t._v(" "+t._s(a.regionName)+" ")])})),1)],1),e("Col",{attrs:{span:"3"}},[e("Select",{attrs:{filterable:"",clearable:"",placeholder:"目标region"},model:{value:t.queryParam.dstRegion,callback:function(e){t.$set(t.queryParam,"dstRegion",e)},expression:"queryParam.dstRegion"}},t._l(t.regions,(function(a){return e("Option",{key:a.regionName,attrs:{value:a.regionName}},[t._v(" "+t._s(a.regionName)+" ")])})),1)],1),e("Col",{attrs:{span:"6"}},[e("Input",{attrs:{prefix:"ios-search",placeholder:"库名"},on:{"on-enter":t.getData},model:{value:t.queryParam.dbName,callback:function(e){t.$set(t.queryParam,"dbName",e)},expression:"queryParam.dbName"}})],1),e("Col",{attrs:{span:"6"}},[e("Input",{attrs:{prefix:"ios-search",placeholder:"表名"},on:{"on-enter":t.getData},model:{value:t.queryParam.tableName,callback:function(e){t.$set(t.queryParam,"tableName",e)},expression:"queryParam.tableName"}})],1),e("Col",{attrs:{span:"3"}},[e("Select",{attrs:{filterable:"",clearable:"",placeholder:"过滤类型"},on:{"on-change":t.getData},model:{value:t.queryParam.filterType,callback:function(e){t.$set(t.queryParam,"filterType",e)},expression:"queryParam.filterType"}},t._l(t.filterTypeOpts,(function(a){return e("Option",{key:a.val,attrs:{value:a.val}},[t._v(t._s(a.val))])})),1)],1),e("Col",{attrs:{span:"3"}},[e("Select",{attrs:{filterable:"",clearable:"",placeholder:"审批结果"},on:{"on-change":t.getData},model:{value:t.queryParam.approvalResult,callback:function(e){t.$set(t.queryParam,"approvalResult",e)},expression:"queryParam.approvalResult"}},t._l(t.approvalResultOpts,(function(a){return e("Option",{key:a.val,attrs:{value:a.val}},[t._v(t._s(a.name))])})),1)],1)],1)],1)],1),e("Col",{attrs:{span:"2"}},[e("Button",{attrs:{type:"primary",icon:"ios-search",loading:t.dataLoading},on:{click:t.getData}},[t._v("查询")]),e("Button",{staticStyle:{"margin-top":"20px"},attrs:{icon:"md-refresh"},on:{click:t.resetParam}},[t._v("重置 ")])],1)],1),e("br"),e("Row",{staticStyle:{background:"#fdfdff",border:"1px solid #e8eaec"}},[e("Col",{staticStyle:{display:"flex",float:"left",margin:"5px"},attrs:{span:"2"}},[e("Button",{attrs:{type:"default",icon:"md-create"},on:{click:t.applicationBuild}},[t._v(" 申请DRC ")])],1)],1),e("Table",{attrs:{stripe:"",border:"",columns:t.columns,data:t.tableData},scopedSlots:t._u([{key:"action",fn:function(a){var n=a.row,r=a.index;return[e("Dropdown",{attrs:{transfer:!0,placement:"bottom-start"},scopedSlots:t._u([{key:"list",fn:function(){return[e("DropdownMenu",[e("DropdownItem",[e("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.getDetail(n,r)}}},[t._v(" 详情 ")])],1),e("DropdownItem",[e("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"success",size:"small"},on:{click:function(e){return t.copy(n,r)}}},[t._v(" 复制 ")])],1),e("DropdownItem",[e("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"error",size:"small"},on:{click:function(e){return t.preDelete(n,r)}}},[t._v(" 废弃 ")])],1),e("DropdownItem",[e("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"warning",size:"small"},on:{click:function(e){return t.sendEmail(n,r)}}},[t._v(" 发送邮件 ")])],1),e("DropdownItem",[e("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"info",size:"small"},on:{click:function(e){return t.preUpdateApplicant(n,r)}}},[t._v(" 修改申请人 ")])],1)],1)]},proxy:!0}],null,!0)},[e("Button",{attrs:{type:"default",icon:"ios-hammer"}},[t._v(" 操作 "),e("Icon",{attrs:{type:"ios-arrow-down"}})],1)],1)]}}])}),e("div",{staticStyle:{"text-align":"center",margin:"16px 0"}},[e("Page",{attrs:{transfer:!0,total:t.total,current:t.current,"page-size-opts":[10,20,50,100],"page-size":10,"show-total":"","show-sizer":"","show-elevator":""},on:{"update:current":function(e){t.current=e},"on-change":t.getData,"on-page-size-change":t.handleChangeSize}})],1),e("Modal",{attrs:{title:"确认删除以下申请单",width:"800px"},on:{"on-ok":t.deleteForm,"on-cancel":t.clearDeleteInfo},model:{value:t.deleteInfo.deleteModal,callback:function(e){t.$set(t.deleteInfo,"deleteModal",e)},expression:"deleteInfo.deleteModal"}},[e("p",[t._v("同步DB: "+t._s(t.deleteInfo.dbName))]),e("p",[t._v("同步表: "+t._s(t.deleteInfo.tableName))]),e("p",[t._v("同步方向: "+t._s(t.deleteInfo.srcRegion)+" => "+t._s(t.deleteInfo.dstRegion))])]),e("Modal",{attrs:{title:"修改申请人",width:"800px"},on:{"on-cancel":t.clearUpdateInfo,"on-ok":t.updateApplicant},model:{value:t.updateInfo.updateModal,callback:function(e){t.$set(t.updateInfo,"updateModal",e)},expression:"updateInfo.updateModal"}},[e("Form",{staticStyle:{width:"100%"},attrs:{"label-position":"right"}},[e("FormItem",{attrs:{label:"申请人"}},[e("Input",{staticStyle:{width:"500px"},model:{value:t.updateInfo.applicant,callback:function(e){t.$set(t.updateInfo,"applicant",e)},expression:"updateInfo.applicant"}})],1)],1)],1)],1)])],1)},r=[],o=a("53ca"),i=(a("a4d3"),a("e01a"),a("14d9"),a("d3b7"),{name:"applicationForm",data:function(){return{updateInfo:{updateModal:!1,applicant:"",applicationFormId:null},deleteInfo:{deleteModal:!1,dbName:null,tableName:null,srcRegion:null,dstRegion:null,applicationFormId:null},editable:!1,clearable:!1,dataLoading:!1,regions:[],queryParam:{dbName:null,tableName:null,srcRegion:null,dstRegion:null,approvalResult:null,filterType:null},tableData:[],columns:[{title:"同步DB",key:"dbName",tooltip:!0,width:200},{title:"同步表",key:"tableName",tooltip:!0},{title:"BU",key:"buName",width:150,align:"center"},{title:"同步方向",key:"region",width:150,align:"center",render:function(t,e){var a=e.row,n=a.srcRegion+"->"+a.dstRegion;return t("Tag",{props:{color:"blue"}},n)}},{title:"过滤方式",key:"filterType",width:150,align:"center",render:function(t,e){var a="blue",n=e.row.filterType;return"ALL"===n?a="blue":"UDL"===n&&(a="volcano"),t("Tag",{props:{color:a}},n)}},{title:"是否刷存量",key:"flushExistingData",width:150,align:"center",render:function(t,e){var a=e.row.flushExistingData,n="blue",r="";return 0===a?(n="blue",r="否"):1===a&&(n="volcano",r="是"),t("Tag",{props:{color:n}},r)}},{title:"是否使用给定位点",key:"useGivenGtid",width:150,align:"center",render:function(t,e){var a=e.row.useGivenGtid,n="",r="";return 0===a?(n="blue",r="否"):1===a&&(n="volcano",r="是"),t("Tag",{props:{color:n}},r)}},{title:"提交时间",key:"createTime",width:200,sortable:!0},{title:"审批结果",key:"approvalResult",width:150,align:"center",render:function(t,e){var a=e.row.approvalResult,n="cyan",r="";return 1===a?(n="green",r="通过"):2===a?(n="volcano",r="未通过"):3===a?(n="blue",r="未审批"):0===a&&(r="审批中"),t("Tag",{props:{color:n}},r)}},{title:"操作",slot:"action",width:200,align:"center"}],total:0,current:1,size:10,pageSizeOpts:[10,20,50,100],approvalResultOpts:[{name:"审批中",val:0},{name:"通过",val:1},{name:"未通过",val:2},{name:"未审批",val:3}],filterTypeOpts:[{val:"ALL"},{val:"UDL"}]}},methods:{preUpdateApplicant:function(t,e){this.updateInfo.applicant=t.applicant,this.updateInfo.applicationFormId=t.applicationFormId,this.updateInfo.updateModal=!0},updateApplicant:function(){var t=this;this.axios.post("/api/drc/v2/application/applicant?applicationFormId="+this.updateInfo.applicationFormId+"&applicant="+this.updateInfo.applicant).then((function(e){var a=e.data;!1===a.data?t.$Message.error("修改申请人失败！"):(t.$Message.success("修改申请人成功"),t.getData())}))},clearUpdateInfo:function(){this.updateInfo={updateModal:!1,applicant:"",applicationFormId:null}},sendEmail:function(t,e){var a=this;this.axios.post("/api/drc/v2/application/email?applicationFormId="+t.applicationFormId).then((function(t){var e=t.data;!1===e.data?a.$Message.error("发送邮件失败！"):a.$Message.success("发送邮件成功")}))},preDelete:function(t,e){this.deleteInfo={deleteModal:!0,dbName:t.dbName,tableName:t.tableName,srcRegion:t.srcRegion,dstRegion:t.dstRegion,applicationFormId:t.applicationFormId}},clearDeleteInfo:function(){this.deleteInfo={deleteModal:!1,dbName:null,tableName:null,srcRegion:null,dstRegion:null,applicationFormId:null}},deleteForm:function(){var t=this;this.axios.delete("/api/drc/v2/application/?applicationFormId="+this.deleteInfo.applicationFormId).then((function(e){var a=e.data;1===a.status?t.$Message.error("操作失败！"+a.message):t.getData()}))},applicationBuild:function(){var t=this.$router.resolve({path:"/applicationBuild"});window.open(t.href,"_blank")},getData:function(){var t=this,e={dbName:this.queryParam.dbName,tableName:this.queryParam.tableName,srcRegion:this.queryParam.srcRegion,dstRegion:this.queryParam.dstRegion,approvalResult:this.queryParam.approvalResult,filterType:this.queryParam.filterType,pageReq:{pageSize:this.size,pageIndex:this.current}},a=this.flattenObj(e);this.dataLoading=!0,this.axios.get("/api/drc/v2/application/list",{params:a}).then((function(e){var a=e.data,n=a.pageReq;1===a.status?t.$Message.error("查询失败"):0===a.data.length||0===n.totalCount?(t.total=0,t.current=1,t.tableData=a.data,t.$Message.warning("查询结果为空")):(t.total=n.totalCount,t.current=n.pageIndex,t.tableData=a.data,t.$Message.success("查询成功"))})).finally((function(){t.dataLoading=!1}))},flattenObj:function(t){var e={};for(var a in t)if("object"!==Object(o["a"])(t[a])||Array.isArray(t[a]))e[a]=t[a];else{var n=this.flattenObj(t[a]);for(var r in n)e[a+"."+r]=n[r]}return e},resetParam:function(){this.queryParam={dbName:null,tableName:null,srcRegion:null,dstRegion:null,approvalResult:null,filterType:null}},getDetail:function(t,e){var a=this.$router.resolve({path:"/applicationBuild",query:{applicationFormId:t.applicationFormId,showDetail:!0,dbName:t.dbName,tableName:t.tableName,srcRegion:t.srcRegion,dstRegion:t.dstRegion,filterType:t.filterType,buName:t.buName,tps:t.tps,description:t.description,disruptionImpact:t.disruptionImpact,tag:t.tag,flushExistingData:t.flushExistingData,orderRelated:t.orderRelated,gtidInit:t.gtidInit,remark:t.remark,applicant:t.applicant}});window.open(a.href,"_blank")},copy:function(t,e){var a=this.$router.resolve({path:"/applicationBuild",query:{dbName:t.dbName,tableName:t.tableName,srcRegion:t.srcRegion,dstRegion:t.dstRegion,filterType:t.filterType,buName:t.buName,tps:t.tps,description:t.description,disruptionImpact:t.disruptionImpact,tag:t.tag,flushExistingData:t.flushExistingData,orderRelated:t.orderRelated,remark:t.remark,applicant:t.applicant,applicationFormId:t.applicationFormId}});window.open(a.href,"_blank")},handleChangeSize:function(t){var e=this;this.size=t,this.$nextTick((function(){e.getData()}))},getRegions:function(){var t=this;this.axios.get("/api/drc/v2/meta/regions/all").then((function(e){t.regions=e.data.data}))}},created:function(){var t=this;this.axios.get("/api/drc/v2/permission/approval/drc").then((function(e){403!==e.data.status?(t.getRegions(),t.getData()):t.$router.push("/nopermission")}))}}),l=i,s=a("2877"),c=Object(s["a"])(l,n,r,!1,null,"33c3168e",null);e["default"]=c.exports}}]);
//# sourceMappingURL=chunk-628b7b02.95c251c7.js.map