(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-49bb2f05"],{7138:function(a,t,e){"use strict";e.r(t);var i=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("base-component",[e("Breadcrumb",{style:{margin:"15px 0 15px 185px",position:"fixed"}},[e("BreadcrumbItem",{attrs:{to:"/home"}},[a._v("首页")]),e("BreadcrumbItem",{attrs:{to:"/dataMedias"}},[a._v("数据表")])],1),e("Content",{staticClass:"content",style:{padding:"10px",background:"#fff",margin:"50px 0 1px 185px",zIndex:"1"}},[e("div",{style:{padding:"1px 1px",height:"100%"}},[a.display.dataMediasTable?[e("Table",{attrs:{stripe:"",columns:a.columns,data:a.dataMediasData,border:""},scopedSlots:a._u([{key:"action",fn:function(t){var i=t.row,d=t.index;return[e("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"success",size:"small"},on:{click:function(t){return a.goToShowDataMedia(i,d)}}},[a._v("查看 ")]),e("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return a.goToUpdateDataMedia(i,d)}}},[a._v(" 修改 ")]),e("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"error",size:"small"},on:{click:function(t){return a.deleteDataMedia(i,d)}}},[a._v("删除 ")])]}}],null,!1,110853837)})]:a._e(),a.display.dataMediaForm?e("Form",{ref:"dataMediaForSubmit",staticStyle:{"margin-top":"50px"},attrs:{model:a.dataMediaForSubmit,"label-width":250}},[e("FormItem",{staticStyle:{width:"600px"},attrs:{label:"逻辑库"}},[e("Input",{attrs:{placeholder:"请输入逻辑库名，支持正则"},model:{value:a.dataMediaForSubmit.namespace,callback:function(t){a.$set(a.dataMediaForSubmit,"namespace",t)},expression:"dataMediaForSubmit.namespace"}})],1),e("FormItem",{staticStyle:{width:"720px"},attrs:{label:"逻辑表"}},[e("Row",[e("Col",{attrs:{span:"18"}},[e("Input",{attrs:{placeholder:"请输入逻辑表名，支持正则"},model:{value:a.dataMediaForSubmit.name,callback:function(t){a.$set(a.dataMediaForSubmit,"name",t)},expression:"dataMediaForSubmit.name"}})],1),e("Col",{attrs:{span:"4"}},[e("Button",{staticStyle:{"margin-left":"50px"},attrs:{type:"primary"},on:{click:a.checkTable}},[a._v("匹配相关表")])],1)],1)],1),e("FormItem",{staticStyle:{width:"600px"},attrs:{label:"数据源"}},[e("Input",{attrs:{readonly:""},model:{value:a.dataMediaForSubmit.dataMediaSourceName,callback:function(t){a.$set(a.dataMediaForSubmit,"dataMediaSourceName",t)},expression:"dataMediaForSubmit.dataMediaSourceName"}})],1),e("FormItem",[a.display.submitButton&&!a.display.showAction?e("Button",{attrs:{type:"primary"},on:{click:a.submitDataMediaConfig}},[a._v(" 提交 ")]):a._e(),e("Button",{staticStyle:{"margin-left":"50px"},on:{click:a.cancelSubmit}},[a._v("返回")])],1)],1):a._e(),a.display.checkBeforeSubmit?e("Table",{attrs:{stripe:"",columns:a.columnsForTableCheck,data:a.tableData,border:""}}):a._e()],2)])],1)},d=[],n=(e("b0c0"),{name:"dataMedias",data:function(){return{display:{dataMediasTable:!0,dataMediaForm:!1,checkBeforeSubmit:!1,submitButton:!1,showAction:!1},dataMediasData:[],columns:[{title:"序号",width:75,align:"center",render:function(a,t){return a("span",t.index+1)}},{title:"数据源",key:"dataMediaSourceName"},{title:"库名",key:"namespace"},{title:"表名",key:"name"},{title:"操作",slot:"action",align:"center"}],tableData:[],columnsForTableCheck:[{title:"序号",width:75,align:"center",render:function(a,t){return a("span",t.index+1)}},{title:"库名",key:"schema"},{title:"表名",key:"name"}],dataMediaForSubmit:{id:null,namespace:".*",name:".*",type:null,dataMediaSourceId:null,dataMediaSourceName:null},applierGroupConfig:{srcMha:null,destMha:null,srcDc:null,destDc:null,applierGroupId:null}}},methods:{getDataMediasData:function(){var a=this;this.axios.get("/api/drc/v1/build/allDataMedias").then((function(t){1===t.data.status?window.alert("查询dataMedias 失败"):a.dataMediasData=t.data.data}))},goToShowDataMedia:function(a,t){this.dataMediaForSubmit={namespace:a.namespace,name:a.name,type:0,dataMediaSourceName:a.dataMediaSourceName},this.showDataMediasForm()},goToCreateDataMedia:function(){console.log("创建"),this.dataMediaForSubmit={id:null,namespace:".*",name:".*",type:null,dataMediaSourceId:null,dataMediaSourceName:null},this.showUpdateOrCreateDataMediasForm()},goToUpdateDataMedia:function(a,t){this.dataMediaForSubmit={id:a.id,namespace:a.namespace,name:a.name,type:0,dataMediaSourceName:a.dataMediaSourceName},this.showUpdateOrCreateDataMediasForm()},deleteDataMedia:function(a,t){var e=this;this.axios.delete("/api/drc/v1/meta/dataMedia/"+a.id).then((function(a){1===a.data.status?window.alert("删除失败!"):(window.alert("删除成功"),e.getDataMediasData())}))},checkTable:function(){var a=this;this.axios.get("/api/drc/v1/build/dataMedia/check/"+this.dataMediaForSubmit.namespace+"/"+this.dataMediaForSubmit.name+"/null/"+this.dataMediaForSubmit.dataMediaSourceName+"/0").then((function(t){a.showChangeAfterCheckTable(),1===t.data.status?window.alert("查询匹配表失败"):(console.log(t.data.data),a.tableData=t.data.data,0===a.tableData.length&&window.alert("无匹配表 或 查询匹配表失败"))}))},submitDataMediaConfig:function(){var a=this;0!==this.tableData.length?this.axios.post("/api/drc/v1/meta/dataMedia",{id:this.dataMediaForSubmit.id,namespace:this.dataMediaForSubmit.namespace,name:this.dataMediaForSubmit.name,type:0,dataMediaSourceName:this.dataMediaForSubmit.dataMediaSourceName}).then((function(t){1===t.data.status?window.alert("提交失败!"):(a.getDataMediasData(),window.alert("提交成功！"))})):window.alert("没有匹配的表,禁止提交！")},cancelSubmit:function(){this.getDataMediasData(),this.showDataMediasTable()},showDataMediasTable:function(){this.display={dataMediasTable:!0,dataMediaForm:!1,checkBeforeSubmit:!1,submitButton:!1,showAction:!1}},showUpdateOrCreateDataMediasForm:function(){this.display={dataMediasTable:!1,dataMediaForm:!0,checkBeforeSubmit:!1,submitButton:!1,showAction:!1}},showDataMediasForm:function(){this.display={dataMediasTable:!1,dataMediaForm:!0,checkBeforeSubmit:!1,submitButton:!1,showAction:!0}},showChangeAfterCheckTable:function(){this.display.checkBeforeSubmit=!0,this.display.submitButton=!0}},created:function(){this.getDataMediasData()}}),o=n,s=e("2877"),r=Object(s["a"])(o,i,d,!1,null,"2e284845",null);t["default"]=r.exports},b0c0:function(a,t,e){var i=e("83ab"),d=e("9bf2").f,n=Function.prototype,o=n.toString,s=/^\s*function ([^ (]*)/,r="name";!i||r in n||d(n,r,{configurable:!0,get:function(){try{return o.call(this).match(s)[1]}catch(a){return""}}})}}]);
//# sourceMappingURL=chunk-49bb2f05.dc7d0312.js.map