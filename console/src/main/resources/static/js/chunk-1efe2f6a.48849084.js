(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1efe2f6a"],{"0e27":function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("base-component",[i("Breadcrumb",{style:{margin:"15px 0 15px 185px",position:"fixed"}},[i("BreadcrumbItem",{attrs:{to:"/home"}},[t._v("首页")]),i("BreadcrumbItem",{attrs:{to:{path:"/accessV2",query:{step:3,clustername:this.initInfo.srcMha,newclustername:this.initInfo.destMha,order:this.initInfo.order}}}},[t._v("DRC配置")]),i("BreadcrumbItem",[t._v("同步表")])],1),i("Content",{staticClass:"content",style:{padding:"10px",background:"#fff",margin:"50px 0 1px 185px",zIndex:"1"}},[i("Row",[i("Col",{attrs:{span:"20"}},[i("span",{staticStyle:{"margin-top":"10px",color:"#464c5b","font-weight":"600"}},[t._v(t._s(t.initInfo.srcMha)+"("+t._s(t.initInfo.srcDc)+")==>"+t._s(t.initInfo.destMha)+"("+t._s(t.initInfo.destDc)+")")])]),i("Col",{attrs:{span:"2"}},[i("Button",{staticStyle:{"margin-top":"10px","text-align":"right"},attrs:{type:"primary",ghost:""},on:{click:t.showPropertiesJson}},[t._v("总览")])],1),i("Col",{attrs:{span:"2"}},[i("Button",{staticStyle:{"margin-top":"10px","text-align":"right"},attrs:{type:"primary",ghost:""},on:{click:t.goToTableConfigFlow}},[t._v("添加")])],1)],1),i("Modal",{attrs:{title:"Applier properties",width:"800px"},model:{value:t.display.showPropertiesJson,callback:function(e){t.$set(t.display,"showPropertiesJson",e)},expression:"display.showPropertiesJson"}},[i("json-viewer",{attrs:{value:t.propertiesJson,"expand-depth":5,copyable:""},scopedSlots:t._u([{key:"copy",fn:function(e){var o=e.copied;return[i("span",o?[t._v("复制成功")]:[t._v("复制")])]}}])})],1),i("div",{style:{padding:"1px 1px",height:"100%"}},[[i("Table",{staticStyle:{"margin-top":"20px"},attrs:{stripe:"",columns:t.columns,data:t.tableData,border:""},scopedSlots:t._u([{key:"action",fn:function(e){var o=e.row,n=e.index;return[i("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"success",size:"small"},on:{click:function(e){return t.goToShowConfig(o,n)}}},[t._v("查看")]),i("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.goToUpdateConfig(o,n)}}},[t._v("修改")]),i("Button",{staticStyle:{"margin-right":"10px"},attrs:{type:"error",size:"small"},on:{click:function(e){return t.goToDeleteConfig(o,n)}}},[t._v("删除")])]}}])})]],2)],1)],1)},n=[],r=(i("b0c0"),{name:"tables",data:function(){return{initInfo:{srcMha:"",srcMhaId:0,destMha:"",applierGroupId:0,srcDc:"",destDc:"",order:!0},columns:[{title:"序号",width:75,align:"center",fixed:"left",render:function(t,e){return t("span",e.index+1)}},{title:"库名",key:"namespace"},{title:"表名",key:"name"},{title:"操作",slot:"action",align:"center",width:200,fixed:"right"}],display:{showPropertiesJson:!1},propertiesJson:{},tableData:[],total:0,size:5,pageSizeOpts:[5,10,20,100]}},methods:{getAllTableVosInApplierGroup:function(){var t=this;console.log(this.initInfo.applierGroupId),this.axios.get("/api/drc/v1/dataMedia/vos?applierGroupId="+this.initInfo.applierGroupId).then((function(e){1===e.data.status?window.alert("查询相关配置表失败!"):t.tableData=e.data.data}))},goToTableConfigFlow:function(){this.$router.push({path:"/tables/configFlow",query:{srcMha:this.initInfo.srcMha,srcMhaId:this.initInfo.srcMhaId,destMha:this.initInfo.destMha,applierGroupId:this.initInfo.applierGroupId,srcDc:this.initInfo.srcDc,destDc:this.initInfo.destDc,order:this.initInfo.order,dataMediaId:0,namespace:"",name:""}})},goToShowConfig:function(t,e){},goToUpdateConfig:function(t,e){this.$router.push({path:"/tables/configFlow",query:{srcMha:this.initInfo.srcMha,srcMhaId:this.initInfo.srcMhaId,destMha:this.initInfo.destMha,applierGroupId:this.initInfo.applierGroupId,srcDc:this.initInfo.srcDc,destDc:this.initInfo.destDc,order:this.initInfo.order,dataMediaId:t.id,namespace:t.namespace,name:t.name}})},goToDeleteConfig:function(t,e){var i=this;console.log(t),this.axios.delete("/api/drc/v1/dataMedia/dataMediaConfig/"+t.id).then((function(t){1===t.data.status?window.alert("删除失败!"):(window.alert("删除成功!"),i.getAllTableVosInApplierGroup())}))},showPropertiesJson:function(){var t=this;console.log("showPropertiesJson"),console.log("/api/drc/v1/dataMedia/properties?applierGroupId="+this.initInfo.applierGroupId),this.axios.get("/api/drc/v1/dataMedia/properties?applierGroupId="+this.initInfo.applierGroupId).then((function(e){1===e.data.status?window.alert("查询配置失败!"):(t.display.showPropertiesJson=!0,t.propertiesJson=e.data.data)}))}},created:function(){this.initInfo={srcMha:this.$route.query.srcMha,srcMhaId:this.$route.query.srcMhaId,destMha:this.$route.query.destMha,applierGroupId:this.$route.query.applierGroupId,srcDc:this.$route.query.srcDc,destDc:this.$route.query.destDc,order:this.$route.query.order},console.log("initInfo:"),console.log(this.initInfo),this.getAllTableVosInApplierGroup()}}),s=r,a=i("2877"),p=Object(a["a"])(s,o,n,!1,null,"91e8498e",null);e["default"]=p.exports},b0c0:function(t,e,i){var o=i("83ab"),n=i("9bf2").f,r=Function.prototype,s=r.toString,a=/^\s*function ([^ (]*)/,p="name";o&&!(p in r)&&n(r,p,{configurable:!0,get:function(){try{return s.call(this).match(a)[1]}catch(t){return""}}})}}]);
//# sourceMappingURL=chunk-1efe2f6a.48849084.js.map