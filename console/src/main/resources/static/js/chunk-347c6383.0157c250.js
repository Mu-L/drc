(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-347c6383"],{"145a":function(e,t,a){},4895:function(e,t,a){(function(e){e(a("56b3"))})((function(e){"use strict";function t(t,n,o,i){if(o&&o.call){var s=o;o=null}else s=r(t,o,"rangeFinder");"number"==typeof n&&(n=e.Pos(n,0));var l=r(t,o,"minFoldSize");function c(e){var a=s(t,n);if(!a||a.to.line-a.from.line<l)return null;if("fold"===i)return a;for(var r=t.findMarksAt(a.from),o=0;o<r.length;++o)if(r[o].__isFold){if(!e)return null;a.cleared=!0,r[o].clear()}return a}var u=c(!0);if(r(t,o,"scanUp"))while(!u&&n.line>t.firstLine())n=e.Pos(n.line-1,0),u=c(!1);if(u&&!u.cleared&&"unfold"!==i){var d=a(t,o,u);e.on(d,"mousedown",(function(t){f.clear(),e.e_preventDefault(t)}));var f=t.markText(u.from,u.to,{replacedWith:d,clearOnEnter:r(t,o,"clearOnEnter"),__isFold:!0});f.on("clear",(function(a,n){e.signal(t,"unfold",t,a,n)})),e.signal(t,"fold",t,u.from,u.to)}}function a(e,t,a){var n=r(e,t,"widget");if("function"==typeof n&&(n=n(a.from,a.to)),"string"==typeof n){var o=document.createTextNode(n);n=document.createElement("span"),n.appendChild(o),n.className="CodeMirror-foldmarker"}else n&&(n=n.cloneNode(!0));return n}e.newFoldFunction=function(e,a){return function(n,r){t(n,r,{rangeFinder:e,widget:a})}},e.defineExtension("foldCode",(function(e,a,n){t(this,e,a,n)})),e.defineExtension("isFolded",(function(e){for(var t=this.findMarksAt(e),a=0;a<t.length;++a)if(t[a].__isFold)return!0})),e.commands.toggleFold=function(e){e.foldCode(e.getCursor())},e.commands.fold=function(e){e.foldCode(e.getCursor(),null,"fold")},e.commands.unfold=function(e){e.foldCode(e.getCursor(),{scanUp:!1},"unfold")},e.commands.foldAll=function(t){t.operation((function(){for(var a=t.firstLine(),n=t.lastLine();a<=n;a++)t.foldCode(e.Pos(a,0),{scanUp:!1},"fold")}))},e.commands.unfoldAll=function(t){t.operation((function(){for(var a=t.firstLine(),n=t.lastLine();a<=n;a++)t.foldCode(e.Pos(a,0),{scanUp:!1},"unfold")}))},e.registerHelper("fold","combine",(function(){var e=Array.prototype.slice.call(arguments,0);return function(t,a){for(var n=0;n<e.length;++n){var r=e[n](t,a);if(r)return r}}})),e.registerHelper("fold","auto",(function(e,t){for(var a=e.getHelpers(t,"fold"),n=0;n<a.length;n++){var r=a[n](e,t);if(r)return r}}));var n={rangeFinder:e.fold.auto,widget:"↔",minFoldSize:0,scanUp:!1,clearOnEnter:!0};function r(e,t,a){if(t&&void 0!==t[a])return t[a];var r=e.options.foldOptions;return r&&void 0!==r[a]?r[a]:n[a]}e.defineOption("foldOptions",null),e.defineExtension("foldOption",(function(e,t){return r(this,e,t)}))}))},"697e":function(e,t,a){},7252:function(e,t,a){"use strict";e.exports=function(e){if("number"!==typeof e)throw new TypeError("Expected a number");var t=e>0?Math.floor:Math.ceil;return{days:t(e/864e5),hours:t(e/36e5)%24,minutes:t(e/6e4)%60,seconds:t(e/1e3)%60,milliseconds:t(e)%1e3}}},"7a7a":function(e,t,a){},"86aa":function(e){e.exports=JSON.parse('{"addendum":"addenda","aircraft":"aircraft","alga":"algae","alumna":"alumnae","alumnus":"alumni","amoeba":"amoebae","analysis":"analyses","antenna":"antennae","antithesis":"antitheses","apex":"apices","appendix":"appendices","automaton":"automata","axis":"axes","bacillus":"bacilli","bacterium":"bacteria","barracks":"barracks","basis":"bases","beau":"beaux","bison":"bison","buffalo":"buffalo","bureau":"bureaus","cactus":"cacti","calf":"calves","carp":"carp","census":"censuses","chassis":"chassis","cherub":"cherubim","child":"children","château":"châteaus","cod":"cod","codex":"codices","concerto":"concerti","corpus":"corpora","crisis":"crises","criterion":"criteria","curriculum":"curricula","datum":"data","deer":"deer","diagnosis":"diagnoses","die":"dice","dwarf":"dwarfs","echo":"echoes","elf":"elves","elk":"elk","ellipsis":"ellipses","embargo":"embargoes","emphasis":"emphases","erratum":"errata","faux pas":"faux pas","fez":"fezes","firmware":"firmware","fish":"fish","focus":"foci","foot":"feet","formula":"formulae","fungus":"fungi","gallows":"gallows","genus":"genera","goose":"geese","graffito":"graffiti","grouse":"grouse","half":"halves","hero":"heroes","hoof":"hooves","hovercraft":"hovercraft","hypothesis":"hypotheses","index":"indices","kakapo":"kakapo","knife":"knives","larva":"larvae","leaf":"leaves","libretto":"libretti","life":"lives","loaf":"loaves","locus":"loci","louse":"lice","man":"men","matrix":"matrices","means":"means","medium":"media","memorandum":"memoranda","millennium":"millennia","minutia":"minutiae","moose":"moose","mouse":"mice","nebula":"nebulae","nemesis":"nemeses","neurosis":"neuroses","news":"news","nucleus":"nuclei","oasis":"oases","offspring":"offspring","opus":"opera","ovum":"ova","ox":"oxen","paralysis":"paralyses","parenthesis":"parentheses","person":"people","phenomenon":"phenomena","phylum":"phyla","pike":"pike","polyhedron":"polyhedra","potato":"potatoes","prognosis":"prognoses","quiz":"quizzes","radius":"radii","referendum":"referenda","salmon":"salmon","scarf":"scarves","self":"selves","series":"series","sheep":"sheep","shelf":"shelves","shrimp":"shrimp","spacecraft":"spacecraft","species":"species","spectrum":"spectra","squid":"squid","stimulus":"stimuli","stratum":"strata","swine":"swine","syllabus":"syllabi","symposium":"symposia","synopsis":"synopses","synthesis":"syntheses","tableau":"tableaus","that":"those","thesis":"theses","thief":"thieves","this":"these","tomato":"tomatoes","tooth":"teeth","trout":"trout","tuna":"tuna","vertebra":"vertebrae","vertex":"vertices","veto":"vetoes","vita":"vitae","vortex":"vortices","watercraft":"watercraft","wharf":"wharves","wife":"wives","wolf":"wolves","woman":"women"}')},a15b:function(e,t,a){"use strict";var n=a("23e7"),r=a("44ad"),o=a("fc6a"),i=a("a640"),s=[].join,l=r!=Object,c=i("join",",");n({target:"Array",proto:!0,forced:l||!c},{join:function(e){return s.call(o(this),void 0===e?",":e)}})},a3b8:function(e,t,a){"use strict";const n=a("7252"),r=a("afa5");e.exports=(e,t)=>{if(!Number.isFinite(e))throw new TypeError("Expected a finite number");if(t=t||{},e<1e3){const a="number"===typeof t.msDecimalDigits?t.msDecimalDigits:0;return(a?e.toFixed(a):Math.ceil(e))+(t.verbose?" "+r("millisecond",Math.ceil(e)):"ms")}const a=[],o=(e,n,o,i)=>{if(0===e)return;const s=t.verbose?" "+r(n,e):o;a.push((i||e)+s)},i=n(e);if(o(Math.trunc(i.days/365),"year","y"),o(i.days%365,"day","d"),o(i.hours,"hour","h"),o(i.minutes,"minute","m"),t.compact)return o(i.seconds,"second","s"),"~"+a[0];const s=e/1e3%60,l="number"===typeof t.secDecimalDigits?t.secDecimalDigits:1,c=s.toFixed(l).replace(/\.0$/,"");return o(s,"second","s",c),a.join(" ")}},afa5:function(e,t,a){"use strict";var n=a("86aa");e.exports=function(e,t,a){return"number"===typeof t&&(a=t),e in n?t=n[e]:"string"!==typeof t&&(t=(e.replace(/(?:s|x|z|ch|sh)$/i,"$&e").replace(/([^aeiou])y$/i,"$1ie")+"s").replace(/i?e?s$/i,(function(t){var a=e.slice(-1)===e.slice(-1).toLowerCase();return a?t.toLowerCase():t.toUpperCase()}))),1===a?e:t}},cbc8:function(e,t,a){(function(e){e(a("56b3"),a("4895"))})((function(e){"use strict";e.defineOption("foldGutter",!1,(function(t,r,o){o&&o!=e.Init&&(t.clearGutter(t.state.foldGutter.options.gutter),t.state.foldGutter=null,t.off("gutterClick",c),t.off("changes",d),t.off("viewportChange",f),t.off("fold",p),t.off("unfold",p),t.off("swapDoc",d),t.off("optionChange",u)),r&&(t.state.foldGutter=new a(n(r)),l(t),t.on("gutterClick",c),t.on("changes",d),t.on("viewportChange",f),t.on("fold",p),t.on("unfold",p),t.on("swapDoc",d),t.on("optionChange",u))}));var t=e.Pos;function a(e){this.options=e,this.from=this.to=0}function n(e){return!0===e&&(e={}),null==e.gutter&&(e.gutter="CodeMirror-foldgutter"),null==e.indicatorOpen&&(e.indicatorOpen="CodeMirror-foldgutter-open"),null==e.indicatorFolded&&(e.indicatorFolded="CodeMirror-foldgutter-folded"),e}function r(e,a){for(var n=e.findMarks(t(a,0),t(a+1,0)),r=0;r<n.length;++r)if(n[r].__isFold){var o=n[r].find(-1);if(o&&o.line===a)return n[r]}}function o(e){if("string"==typeof e){var t=document.createElement("div");return t.className=e+" CodeMirror-guttermarker-subtle",t}return e.cloneNode(!0)}function i(e,a,n){var i=e.state.foldGutter.options,l=a-1,c=e.foldOption(i,"minFoldSize"),u=e.foldOption(i,"rangeFinder"),d="string"==typeof i.indicatorFolded&&s(i.indicatorFolded),f="string"==typeof i.indicatorOpen&&s(i.indicatorOpen);e.eachLine(a,n,(function(a){++l;var n=null,s=a.gutterMarkers;if(s&&(s=s[i.gutter]),r(e,l)){if(d&&s&&d.test(s.className))return;n=o(i.indicatorFolded)}else{var p=t(l,0),m=u&&u(e,p);if(m&&m.to.line-m.from.line>=c){if(f&&s&&f.test(s.className))return;n=o(i.indicatorOpen)}}(n||s)&&e.setGutterMarker(a,i.gutter,n)}))}function s(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}function l(e){var t=e.getViewport(),a=e.state.foldGutter;a&&(e.operation((function(){i(e,t.from,t.to)})),a.from=t.from,a.to=t.to)}function c(e,a,n){var o=e.state.foldGutter;if(o){var i=o.options;if(n==i.gutter){var s=r(e,a);s?s.clear():e.foldCode(t(a,0),i)}}}function u(e,t){"mode"==t&&d(e)}function d(e){var t=e.state.foldGutter;if(t){var a=t.options;t.from=t.to=0,clearTimeout(t.changeUpdate),t.changeUpdate=setTimeout((function(){l(e)}),a.foldOnChangeTimeSpan||600)}}function f(e){var t=e.state.foldGutter;if(t){var a=t.options;clearTimeout(t.changeUpdate),t.changeUpdate=setTimeout((function(){var a=e.getViewport();t.from==t.to||a.from-t.to>20||t.from-a.to>20?l(e):e.operation((function(){a.from<t.from&&(i(e,a.from,t.from),t.from=a.from),a.to>t.to&&(i(e,t.to,a.to),t.to=a.to)}))}),a.updateViewportTimeSpan||400)}}function p(e,t){var a=e.state.foldGutter;if(a){var n=t.line;n>=a.from&&n<a.to&&i(e,n,n+1)}}}))},d5e0:function(e,t,a){(function(e){e(a("56b3"))})((function(e){"use strict";var t={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},a={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};e.defineMode("xml",(function(n,r){var o,i,s=n.indentUnit,l={},c=r.htmlMode?t:a;for(var u in c)l[u]=c[u];for(var u in r)l[u]=r[u];function d(e,t){function a(a){return t.tokenize=a,a(e,t)}var n,r=e.next();return"<"==r?e.eat("!")?e.eat("[")?e.match("CDATA[")?a(m("atom","]]>")):null:e.match("--")?a(m("comment","--\x3e")):e.match("DOCTYPE",!0,!0)?(e.eatWhile(/[\w\._\-]/),a(g(1))):null:e.eat("?")?(e.eatWhile(/[\w\._\-]/),t.tokenize=m("meta","?>"),"meta"):(o=e.eat("/")?"closeTag":"openTag",t.tokenize=f,"tag bracket"):"&"==r?(n=e.eat("#")?e.eat("x")?e.eatWhile(/[a-fA-F\d]/)&&e.eat(";"):e.eatWhile(/[\d]/)&&e.eat(";"):e.eatWhile(/[\w\.\-:]/)&&e.eat(";"),n?"atom":"error"):(e.eatWhile(/[^&<]/),null)}function f(e,t){var a=e.next();if(">"==a||"/"==a&&e.eat(">"))return t.tokenize=d,o=">"==a?"endTag":"selfcloseTag","tag bracket";if("="==a)return o="equals",null;if("<"==a){t.tokenize=d,t.state=y,t.tagName=t.tagStart=null;var n=t.tokenize(e,t);return n?n+" tag error":"tag error"}return/[\'\"]/.test(a)?(t.tokenize=p(a),t.stringStartCol=e.column(),t.tokenize(e,t)):(e.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function p(e){var t=function(t,a){while(!t.eol())if(t.next()==e){a.tokenize=f;break}return"string"};return t.isInAttribute=!0,t}function m(e,t){return function(a,n){while(!a.eol()){if(a.match(t)){n.tokenize=d;break}a.next()}return e}}function g(e){return function(t,a){var n;while(null!=(n=t.next())){if("<"==n)return a.tokenize=g(e+1),a.tokenize(t,a);if(">"==n){if(1==e){a.tokenize=d;break}return a.tokenize=g(e-1),a.tokenize(t,a)}}return"meta"}}function h(e){return e&&e.toLowerCase()}function v(e,t,a){this.prev=e.context,this.tagName=t||"",this.indent=e.indented,this.startOfLine=a,(l.doNotIndent.hasOwnProperty(t)||e.context&&e.context.noIndent)&&(this.noIndent=!0)}function b(e){e.context&&(e.context=e.context.prev)}function w(e,t){var a;while(1){if(!e.context)return;if(a=e.context.tagName,!l.contextGrabbers.hasOwnProperty(h(a))||!l.contextGrabbers[h(a)].hasOwnProperty(h(t)))return;b(e)}}function y(e,t,a){return"openTag"==e?(a.tagStart=t.column(),x):"closeTag"==e?k:y}function x(e,t,a){return"word"==e?(a.tagName=t.current(),i="tag",T):l.allowMissingTagName&&"endTag"==e?(i="tag bracket",T(e,t,a)):(i="error",x)}function k(e,t,a){if("word"==e){var n=t.current();return a.context&&a.context.tagName!=n&&l.implicitlyClosed.hasOwnProperty(h(a.context.tagName))&&b(a),a.context&&a.context.tagName==n||!1===l.matchClosing?(i="tag",D):(i="tag error",M)}return l.allowMissingTagName&&"endTag"==e?(i="tag bracket",D(e,t,a)):(i="error",M)}function D(e,t,a){return"endTag"!=e?(i="error",D):(b(a),y)}function M(e,t,a){return i="error",D(e,t,a)}function T(e,t,a){if("word"==e)return i="attribute",C;if("endTag"==e||"selfcloseTag"==e){var n=a.tagName,r=a.tagStart;return a.tagName=a.tagStart=null,"selfcloseTag"==e||l.autoSelfClosers.hasOwnProperty(h(n))?w(a,n):(w(a,n),a.context=new v(a,n,r==a.indented)),y}return i="error",T}function C(e,t,a){return"equals"==e?S:(l.allowMissing||(i="error"),T(e,t,a))}function S(e,t,a){return"string"==e?z:"word"==e&&l.allowUnquoted?(i="string",T):(i="error",T(e,t,a))}function z(e,t,a){return"string"==e?z:T(e,t,a)}return d.isInText=!0,{startState:function(e){var t={tokenize:d,state:y,indented:e||0,tagName:null,tagStart:null,context:null};return null!=e&&(t.baseIndent=e),t},token:function(e,t){if(!t.tagName&&e.sol()&&(t.indented=e.indentation()),e.eatSpace())return null;o=null;var a=t.tokenize(e,t);return(a||o)&&"comment"!=a&&(i=null,t.state=t.state(o||a,e,t),i&&(a="error"==i?a+" error":i)),a},indent:function(t,a,n){var r=t.context;if(t.tokenize.isInAttribute)return t.tagStart==t.indented?t.stringStartCol+1:t.indented+s;if(r&&r.noIndent)return e.Pass;if(t.tokenize!=f&&t.tokenize!=d)return n?n.match(/^(\s*)/)[0].length:0;if(t.tagName)return!1!==l.multilineTagIndentPastTag?t.tagStart+t.tagName.length+2:t.tagStart+s*(l.multilineTagIndentFactor||1);if(l.alignCDATA&&/<!\[CDATA\[/.test(a))return 0;var o=a&&/^<(\/)?([\w_:\.-]*)/.exec(a);if(o&&o[1])while(r){if(r.tagName==o[2]){r=r.prev;break}if(!l.implicitlyClosed.hasOwnProperty(h(r.tagName)))break;r=r.prev}else if(o)while(r){var i=l.contextGrabbers[h(r.tagName)];if(!i||!i.hasOwnProperty(h(o[2])))break;r=r.prev}while(r&&r.prev&&!r.startOfLine)r=r.prev;return r?r.indent+s:t.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:l.htmlMode?"html":"xml",helperType:l.htmlMode?"html":"xml",skipAttribute:function(e){e.state==S&&(e.state=T)},xmlCurrentTag:function(e){return e.tagName?{name:e.tagName,close:"closeTag"==e.type}:null},xmlCurrentContext:function(e){for(var t=[],a=e.context;a;a=a.prev)t.push(a.tagName);return t.reverse()}}})),e.defineMIME("text/xml","xml"),e.defineMIME("application/xml","xml"),e.mimeModes.hasOwnProperty("text/html")||e.defineMIME("text/html",{name:"xml",htmlMode:!0})}))},dab3:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("base-component",[a("Breadcrumb",{style:{margin:"15px 0 15px 185px",position:"fixed"}},[a("BreadcrumbItem",{attrs:{to:"/home"}},[e._v("首页")]),a("BreadcrumbItem",{attrs:{to:"/v2/migration"}},[e._v("DB 搬迁任务")])],1),a("Content",{staticClass:"content",style:{padding:"10px",background:"#fff",margin:"50px 0 1px 185px",zIndex:"1"}},[a("div",{staticStyle:{padding:"1px 1px"}},[a("Row",{attrs:{gutter:10,align:"middle"}},[a("Col",{attrs:{span:"15"}},[a("Card",{attrs:{padding:5},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("查询条件")]},proxy:!0}])},[a("Row",{attrs:{gutter:10}},[a("Col",{attrs:{span:"5"}},[a("Input",{attrs:{prefix:"ios-search",placeholder:"老集群"},on:{"on-enter":e.getMigrationTasks},model:{value:e.queryParam.oldMha,callback:function(t){e.$set(e.queryParam,"oldMha",t)},expression:"queryParam.oldMha"}})],1),a("Col",{attrs:{span:"5"}},[a("Input",{attrs:{prefix:"ios-search",placeholder:"新集群"},on:{"on-enter":e.getMigrationTasks},model:{value:e.queryParam.newMha,callback:function(t){e.$set(e.queryParam,"newMha",t)},expression:"queryParam.newMha"}})],1),a("Col",{attrs:{span:"5"}},[a("Input",{attrs:{prefix:"ios-search",placeholder:"操作人"},on:{"on-enter":e.getMigrationTasks},model:{value:e.queryParam.operator,callback:function(t){e.$set(e.queryParam,"operator",t)},expression:"queryParam.operator"}})],1),a("Col",{attrs:{span:"5"}},[a("Select",{attrs:{filterable:"",prefix:"ios-home",clearable:"",placeholder:"状态"},on:{"on-change":e.getMigrationTasks},model:{value:e.queryParam.status,callback:function(t){e.$set(e.queryParam,"status",t)},expression:"queryParam.status"}},e._l(e.status,(function(t){return a("Option",{key:t,attrs:{value:t}},[e._v(e._s(t))])})),1)],1)],1)],1)],1),a("Col",{attrs:{span:"1"}},[a("Button",{attrs:{type:"primary",icon:"ios-search",loading:e.dataLoading},on:{click:e.getMigrationTasks}},[e._v("查询")]),a("Button",{staticStyle:{"margin-top":"20px"},attrs:{icon:"md-refresh",loading:e.dataLoading},on:{click:e.resetParam}},[e._v("重置")])],1)],1),a("br"),a("Table",{attrs:{loading:e.dataLoading,stripe:"",border:"",columns:e.columns,data:e.migrationTasks},scopedSlots:e._u([{key:"action",fn:function(t){var n=t.row,r=t.index;return[a("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"success",size:"small"},on:{click:function(t){return e.getDetail(n,r)}}},[e._v(" 查看 ")]),a("Button",{attrs:{type:"info",size:"small"},on:{click:function(t){return e.getHistoryLog(n,r)}}},[e._v(" 日志 ")])]}}])}),a("div",{staticStyle:{"text-align":"center",margin:"16px 0"}},[a("Page",{attrs:{transfer:!0,total:e.total,current:e.current,"page-size-opts":[10,20,50,100],"page-size":10,"show-total":"","show-sizer":"","show-elevator":""},on:{"update:current":function(t){e.current=t},"on-change":e.getMigrationTasks,"on-page-size-change":e.handleChangeSize}})],1),a("Modal",{attrs:{width:"1200px"},model:{value:e.replicationDetail.show,callback:function(t){e.$set(e.replicationDetail,"show",t)},expression:"replicationDetail.show"}},[a("Divider",{attrs:{orientation:"left"}},[e._v("相关 DRC 延迟")]),a("Table",{attrs:{stripe:"",loading:e.replicationDetail.mhaReplicationDataLoading,columns:e.detailColumn,data:e.replicationDetail.data,border:""}}),a("Divider",{attrs:{orientation:"left"}},[e._v("相关 Messenger 延迟")]),a("Table",{attrs:{stripe:"",loading:e.replicationDetail.messengerDataLoading,columns:e.messengerDetailColumn,data:e.replicationDetail.messengerData,border:""}})],1),a("Modal",{attrs:{width:"500px"},model:{value:e.logDetail.show,callback:function(t){e.$set(e.logDetail,"show",t)},expression:"logDetail.show"}},[a("Timeline",e._l(e.logDetail.splitLog,(function(t){return a("TimelineItem",{key:t.time},[a("span",{staticClass:"time",style:{"font-size":"14px","font-weight":"bold"}},[e._v(e._s(t.time))]),a("br"),a("span",{staticClass:"content",style:{"margin-left":"0px","margin-top":"0px","font-size":"14px","font-weight":"bold",color:"blue"}},[e._v("操作: "+e._s(t.operate))]),a("br"),a("span",{staticClass:"content",style:{"margin-left":"0px","margin-top":"0px"}},[e._v("操作人："+e._s(t.operator))])])})),1)],1)],1)])],1)},r=[],o=a("53ca"),i=a("c7eb"),s=a("1da1"),l=(a("caad"),a("a15b"),a("b0c0"),a("d3b7"),a("a3b8")),c=a.n(l),u=(a("7a7a"),a("d5e0"),a("697e"),a("cbc8"),{name:"Application",data:function(){var e=this;function t(){return function(e,t){var a,n,r=t.row.delayInfoDto,o=t.row.srcMha.monitorSwitch,i=r.delay,s="";if(null!=i&&i<1e4)a="blue",n=c()(i);else{if(a="volcano",n=i?c()(i):0===o?"查询失败, 未打开延迟监控":"查询失败",r.srcTime){var l=new Date(r.srcTime);s+="源集群: "+l.toLocaleDateString()+" "+l.toLocaleTimeString()+"\n"}if(r.dstTime){var u=new Date(r.dstTime);r.dstMha?s+="端集群: ":s+="Messenger: ",s+=u.toLocaleDateString()+" "+u.toLocaleTimeString()}}return e("div",[e("Tag",{props:{color:a}},n),e("div",{style:{"white-space":"pre-wrap"}},s)])}}function a(){return function(e,t){var a,n,r=t.row.mhaDbDelayInfoDto.delay,o="";return null!=r&&r<1e4?(a="blue",n=c()(r)):(a="volcano",n=r?c()(r):"查询失败"),e("div",[e("Tag",{props:{color:a}},n),e("div",{style:{"white-space":"pre-wrap"}},o)])}}return{detailColumn:[{title:"状态",key:"status",width:100,align:"center",render:function(e,t){var a=t.row,n=a.mhaDbReplicationDto.drcStatus?"blue":"volcano",r=a.mhaDbReplicationDto.drcStatus?"已接入":"未接入";return e("Tag",{props:{color:n}},r)}},{title:"srcMha",width:150,key:"id",render:function(e,t){return e("p",t.row.mhaDbReplicationDto.src.mhaName)}},{title:"dstMha",width:150,key:"id",render:function(e,t){return e("p",t.row.mhaDbReplicationDto.dst.mhaName)}},{title:"delay",key:"delay",render:a()},{title:"dbName",key:"dbName",render:function(e,t){return e("p",t.row.mhaDbReplicationDto.src.dbName)}}],messengerDetailColumn:[{title:"状态",key:"status",width:100,align:"center",render:function(e,t){var a=t.row,n=1===a.status?"blue":"volcano",r=1===a.status?"已接入":"未接入";return e("Tag",{props:{color:n}},r)}},{title:"srcMha",width:150,key:"id",render:function(e,t){return e("p",t.row.srcMha.name)}},{title:"delay",key:"delay",render:t()},{title:"dbs",key:"dbs",render:function(e,t){return e("p",t.row.dbs.join(","))}}],columns:[{title:"状态",key:"status",width:200,align:"left",render:function(t,a){var n,r=a.row,o=r.status,l=!1;switch(["Starting","ReadyToSwitchDal"].includes(o)&&(l=!0),r.status){case"Success":n="success";break;case"Fail":n="error";break;default:n="blue";break}return r.dataLoading=!1,t("div",[t("Tag",{props:{color:n}},o),l&&t("Button",{on:{click:function(){var t=Object(s["a"])(Object(i["a"])().mark((function t(){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.dataLoading=!0,t.next=3,e.getTaskStatus(r,null);case 3:e.dataLoading=!1;case 4:case"end":return t.stop()}}),t)})));function a(){return t.apply(this,arguments)}return a}()},props:{loading:e.dataLoading,size:"small",shape:"circle",type:"default",icon:"md-refresh"}})])}},{title:"任务ID",width:80,key:"id",render:function(e,t){return e("p",t.row.id)}},{title:"DB",key:"srcMhaName",render:function(e,t){return e("p",t.row.dbs.join(","))}},{title:"老集群名",key:"srcMhaName",render:function(e,t){return e("p",t.row.oldMha)}},{title:"新集群名",key:"dstMhaName",render:function(e,t){return e("p",t.row.newMha)}},{title:"操作人",key:"operator",render:function(e,t){return e("p",t.row.operator)}},{title:"操作",slot:"action",align:"center"}],total:0,current:1,size:10,queryParam:{dbName:"",oldMha:"",newMha:"",status:"",operator:""},migrationTasks:[],bus:[],regions:[],status:[],replicationDetail:{show:!1,row:{},mhaReplicationDataLoading:!1,data:[],messengerDataLoading:!1,messengerData:[]},logDetail:{show:!1,splitLog:[]},dataLoading:!0}},computed:{},methods:{getBus:function(){var e=this;this.axios.get("/api/drc/v2/meta/bus/all").then((function(t){e.bus=t.data.data}))},getRegions:function(){var e=this;this.axios.get("/api/drc/v2/meta/regions/all").then((function(t){e.regions=t.data.data}))},getStatus:function(){var e=this;this.axios.get("/api/drc/v2/migration/allStatus").then((function(t){e.status=t.data.data}))},flattenObj:function(e){var t={};for(var a in e)if("object"!==Object(o["a"])(e[a])||Array.isArray(e[a]))t[a]=e[a];else{var n=this.flattenObj(e[a]);for(var r in n)t[a+"."+r]=n[r]}return t},resetParam:function(){this.queryParam={},this.current=1,this.getMigrationTasks()},getMigrationTasks:function(){var e=this,t=this.flattenObj(this.queryParam);t.pageIndex=this.current,t.pageSize=this.size,e.dataLoading=!0,e.axios.get("/api/drc/v2/migration/query",{params:t}).then((function(t){var a=t.data.data;a&&0!==a.totalCount?(e.total=a.totalCount,e.current=a.pageIndex,e.migrationTasks=a.data,e.$Message.success("查询成功")):(e.total=0,e.current=1,e.migrationTasks=[],e.$Message.warning("查询结果为空"))})).catch((function(t){e.$Message.error("查询异常: "+t)})).finally((function(){e.dataLoading=!1}))},handleChangeSize:function(e){var t=this;this.size=e,this.$nextTick((function(){t.getMigrationTasks()}))},getMhaDbReplicationDetail:function(e){var t=this;this.replicationDetail.mhaReplicationDataLoading=!0,this.replicationDetail.data=[],this.axios.get("/api/drc/v2/migration/mhaDbReplicationDelay?taskId="+e.id).then((function(a){1!==a.data.status?(t.replicationDetail.data=a.data.data,console.log(t.replicationDetail.data),t.replicationDetail.show=!0,t.replicationDetail.row=e,t.replicationDetail.mhaReplicationDataLoading=!1):t.$Message.warning("查询异常: "+a.data.message)})).catch((function(e){t.$Message.error("查询异常: "+e)})).finally((function(){}))},getMhaMessengerDetail:function(e){var t=this;this.replicationDetail.messengerDataLoading=!0,this.replicationDetail.messengerData=[],this.axios.post("/api/drc/v2/messenger/delay",{params:{mhas:[e.oldMha,e.newMha],dbs:e.dbs}}).then((function(e){1!==e.data.status?(t.replicationDetail.messengerData=e.data.data,console.log(t.replicationDetail.messengerData),t.replicationDetail.messengerDataLoading=!1):t.$Message.warning("查询异常: "+e.data.message)})).catch((function(e){t.$Message.error("查询异常: "+e)})).finally((function(){}))},getDetail:function(e,t){this.replicationDetail.show=!0,this.replicationDetail.row=e,this.getMhaDbReplicationDetail(e),this.getMhaMessengerDetail(e)},getHistoryLog:function(e,t){this.parseLog(e),this.logDetail.show=!0},parseLog:function(e){this.logDetail.splitLog=[];for(var t=e.log,a=t.split(";"),n=0;n<a.length;n++){var r=a[n].split(","),o={};o.operate=r[0].substring(9,r[0].length),o.operator=r[1].substring(10,r[1].length),o.time=r[2].substring(6,r[2].length),this.logDetail.splitLog.push(o)}},getTaskStatus:function(e,t){var a=this;return Object(s["a"])(Object(i["a"])().mark((function t(){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a.axios.get("/api/drc/v2/migration/status",{params:{taskId:e.id,careNewMha:"Starting"===e.status}}).then((function(t){if(1!==t.data.status){var n=t.data.data,r=e.status;r===n?a.$Message.success("状态不变"):(e.status=n,a.$Message.info({content:"刷新成功："+r+"->"+n,duration:10}))}else a.$Message.warning("查询异常: "+t.data.message)})).catch((function(e){a.$Message.error("查询异常: "+e)})).finally((function(){}));case 2:case"end":return t.stop()}}),t)})))()}},created:function(){var e=this;this.axios.get("/api/drc/v2/permission/ops/dbmigration").then((function(t){403!==t.data.status?(e.getMigrationTasks(),e.getStatus()):e.$router.push("/nopermission")}))}}),d=u,f=(a("f87a"),a("2877")),p=Object(f["a"])(d,n,r,!1,null,"7c448d42",null);t["default"]=p.exports},f87a:function(e,t,a){"use strict";a("145a")}}]);
//# sourceMappingURL=chunk-347c6383.0157c250.js.map