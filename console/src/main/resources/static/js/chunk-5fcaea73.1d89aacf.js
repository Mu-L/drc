(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5fcaea73","chunk-2d0cf100"],{"61b1":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{padding:"1px 1px"}},[a("Row",{attrs:{gutter:10,align:"middle"}},[a("Col",{attrs:{span:"22"}},[a("Card",{attrs:{padding:5},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("查询条件")]},proxy:!0}])},[a("Row",{attrs:{gutter:10}},[a("Col",{attrs:{span:"8"}},[a("Input",{attrs:{prefix:"ios-search",placeholder:"事务id"},on:{"on-enter":e.getData},model:{value:e.queryParam.gtid,callback:function(t){e.$set(e.queryParam,"gtid",t)},expression:"queryParam.gtid"}})],1),a("Col",{attrs:{span:"4"}},[a("Input",{attrs:{prefix:"ios-search",placeholder:"库名"},on:{"on-enter":e.getData},model:{value:e.queryParam.dbName,callback:function(t){e.$set(e.queryParam,"dbName",t)},expression:"queryParam.dbName"}})],1),a("Col",{attrs:{span:"4"}},[a("Input",{attrs:{prefix:"ios-search",placeholder:"表名"},on:{"on-enter":e.getData},model:{value:e.queryParam.tableName,callback:function(t){e.$set(e.queryParam,"tableName",t)},expression:"queryParam.tableName"}})],1),a("Col",{attrs:{span:"3"}},[a("DatePicker",{attrs:{type:"date",editable:e.editable,placeholder:"起始日期"},model:{value:e.queryParam.beginHandleTime,callback:function(t){e.$set(e.queryParam,"beginHandleTime",t)},expression:"queryParam.beginHandleTime"}})],1),a("Col",{attrs:{span:"3"}},[a("DatePicker",{attrs:{type:"date",editable:e.editable,placeholder:"结束日期"},model:{value:e.queryParam.endHandleTime,callback:function(t){e.$set(e.queryParam,"endHandleTime",t)},expression:"queryParam.endHandleTime"}})],1),a("Col",{attrs:{span:"2"}},[a("Select",{attrs:{filterable:"",clearable:"",placeholder:"执行结果"},on:{"on-change":e.getData},model:{value:e.queryParam.trxResult,callback:function(t){e.$set(e.queryParam,"trxResult",t)},expression:"queryParam.trxResult"}},e._l(e.resultOpts,(function(t){return a("Option",{key:t.val,attrs:{value:t.val}},[e._v(e._s(t.name))])})),1)],1)],1)],1)],1),a("Col",{attrs:{span:"1"}},[a("Button",{attrs:{type:"primary",icon:"ios-search",loading:e.dataLoading},on:{click:e.getData}},[e._v("查询")]),a("Button",{staticStyle:{"margin-top":"20px"},attrs:{icon:"md-refresh",loading:e.dataLoading},on:{click:e.resetParam}},[e._v("重置")])],1)],1),a("br"),a("Table",{attrs:{stripe:"",border:"",columns:e.columns,data:e.tableData},scopedSlots:e._u([{key:"action",fn:function(t){var r=t.row,n=t.index;return[a("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"success",size:"small"},on:{click:function(t){return e.queryRowsLog(r,n)}}},[e._v(" 查看 ")])]}}])}),a("div",{staticStyle:{"text-align":"center",margin:"16px 0"}},[a("Page",{attrs:{transfer:!0,total:e.total,current:e.current,"page-size-opts":[10,20,50,100],"page-size":10,"show-total":"","show-sizer":"","show-elevator":""},on:{"update:current":function(t){e.current=t},"on-change":e.getData,"on-page-size-change":e.handleChangeSize}})],1)],1)},n=[],l={name:"conflictRowsLog",props:{gtid:String},data:function(){return{editable:!1,dataLoading:!1,queryParam:{dbName:null,tableName:null,gtid:this.gtid,beginHandleTime:null,endHandleTime:null,rowResult:null},tableData:[{dbName:"db",tableName:"table",gtid:"c5ed128d-5b8b-11ee-ae5e-fa163e4168ae",rowResult:0,handleTime:"2023-09-23 10:00:00",srcDc:"shaxy",dstDc:"sinaws"}],columns:[{title:"事务ID",key:"gtid"},{title:"同步方向",key:"dc",width:200,render:function(e,t){var a=t.row,r="blue",n=a.srcDc+" -> "+a.dstDc;return e("Tag",{props:{color:r}},n)}},{title:"库名",key:"dbName",width:200},{title:"表名",key:"tableName",width:200},{title:"事务提交时间",key:"handleTime",width:200,sortable:!0},{title:"执行结果",key:"rowResult",width:150,align:"center",render:function(e,t){var a=t.row,r=0===a.rowResult?"blue":"volcano",n=0===a.rowResult?"commit":"rollBack";return e("Tag",{props:{color:r}},n)}},{title:"操作",slot:"action",width:150,align:"center"}],total:0,current:1,size:10,pageSizeOpts:[10,20,50,100],resultOpts:[{name:"commit",val:0},{name:"rollBack",val:1}]}},methods:{getData:function(){},getRowsData:function(){},resetParam:function(){this.queryParam={dbName:null,tableName:null,gtId:null,beginHandleTime:null,endHandleTime:null,rowResult:null}},queryRowsLog:function(e,t){},handleChangeSize:function(e){var t=this;this.size=e,this.$nextTick((function(){t.getData()}))}},created:function(){}},i=l,s=a("2877"),o=Object(s["a"])(i,r,n,!1,null,"232b5c8a",null);t["default"]=o.exports},ce4f:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("base-component",[a("Breadcrumb",{style:{margin:"15px 0 15px 185px",position:"fixed"}},[a("BreadcrumbItem",{attrs:{to:"/home"}},[e._v("首页")])],1),a("Content",{staticClass:"content",style:{padding:"10px",background:"#fff",margin:"50px 0 1px 185px",zIndex:"1"}},[a("Tabs",{model:{value:e.tabValue,callback:function(t){e.tabValue=t},expression:"tabValue"}},[a("TabPane",{attrs:{label:"冲突事务",name:"trxLog"}},[a("conflict-trx-log",{attrs:{gtid:e.gtid},on:{tabValueChanged:e.updateTabValue,gtidChanged:e.updateGtid}})],1),a("TabPane",{attrs:{label:"冲突行",name:"rowsLog"}},[e.refresh?a("conflict-rows-log",{attrs:{gtid:e.gtid}}):e._e()],1)],1)],1)],1)},n=[],l=a("61b1"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{padding:"1px 1px"}},[a("Row",{attrs:{gutter:10,align:"middle"}},[a("Col",{attrs:{span:"22"}},[a("Card",{attrs:{padding:5},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("查询条件")]},proxy:!0}])},[a("Row",{attrs:{gutter:10}},[a("Col",{attrs:{span:"8"}},[a("Input",{attrs:{prefix:"ios-search",placeholder:"事务id"},on:{"on-enter":e.getTrxData},model:{value:e.queryParam.gtid,callback:function(t){e.$set(e.queryParam,"gtid",t)},expression:"queryParam.gtid"}})],1),a("Col",{attrs:{span:"4"}},[a("Input",{attrs:{prefix:"ios-search",placeholder:"源MHA"},on:{"on-enter":e.getTrxData},model:{value:e.queryParam.srcMhaName,callback:function(t){e.$set(e.queryParam,"srcMhaName",t)},expression:"queryParam.srcMhaName"}})],1),a("Col",{attrs:{span:"4"}},[a("Input",{attrs:{prefix:"ios-search",placeholder:"目标MHA"},on:{"on-enter":e.getTrxData},model:{value:e.queryParam.dstMhaName,callback:function(t){e.$set(e.queryParam,"dstMhaName",t)},expression:"queryParam.dstMhaName"}})],1),a("Col",{attrs:{span:"3"}},[a("DatePicker",{attrs:{type:"date",editable:e.editable,"value-format":"timestamp",placeholder:"起始日期"},model:{value:e.queryParam.beginHandleTime,callback:function(t){e.$set(e.queryParam,"beginHandleTime",t)},expression:"queryParam.beginHandleTime"}})],1),a("Col",{attrs:{span:"3"}},[a("DatePicker",{attrs:{type:"date",editable:e.editable,placeholder:"结束日期"},model:{value:e.queryParam.endHandleTime,callback:function(t){e.$set(e.queryParam,"endHandleTime",t)},expression:"queryParam.endHandleTime"}})],1),a("Col",{attrs:{span:"2"}},[a("Select",{attrs:{filterable:"",clearable:"",placeholder:"执行结果"},on:{"on-change":e.getTrxData},model:{value:e.queryParam.trxResult,callback:function(t){e.$set(e.queryParam,"trxResult",t)},expression:"queryParam.trxResult"}},e._l(e.resultOpts,(function(t){return a("Option",{key:t.val,attrs:{value:t.val}},[e._v(e._s(t.name))])})),1)],1)],1)],1)],1),a("Col",{attrs:{span:"1"}},[a("Button",{attrs:{type:"primary",icon:"ios-search",loading:e.dataLoading},on:{click:e.getTrxData}},[e._v("查询")]),a("Button",{staticStyle:{"margin-top":"20px"},attrs:{icon:"md-refresh",loading:e.dataLoading},on:{click:e.resetParam}},[e._v("重置 ")])],1)],1),a("br"),a("Table",{attrs:{stripe:"",border:"",columns:e.columns,data:e.tableData},scopedSlots:e._u([{key:"action",fn:function(t){var r=t.row,n=t.index;return[a("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"success",size:"small"},on:{click:function(t){return e.queryRowsLog(r,n)}}},[e._v(" 查看 ")])]}}])}),a("div",{staticStyle:{"text-align":"center",margin:"16px 0"}},[a("Page",{attrs:{transfer:!0,total:e.total,current:e.current,"page-size-opts":[10,20,50,100],"page-size":10,"show-total":"","show-sizer":"","show-elevator":""},on:{"update:current":function(t){e.current=t},"on-change":e.getTrxData,"on-page-size-change":e.handleChangeSize}})],1)],1)},s=[],o={name:"conflictTrxLog",props:{gtid:String},data:function(){return{editable:!1,dataLoading:!1,queryParam:{srcMhaName:null,dstMhaName:null,gtid:this.gtid,beginHandleTime:null,endHandleTime:null,trxResult:null},tableData:[{srcMhaName:"testA",dstMhaName:"testB",gtid:"c5ed128d-5b8b-11ee-ae5e-fa163e4168ae",trxRowsNum:0,cflRowsNum:1,trxResult:0,handleTime:"2023-09-23 10:00:00"},{srcMhaName:"testB",dstMhaName:"testA",gtid:"c5ed128d-5b8b-11ee-ae5e",trxRowsNum:0,cflRowsNum:1,trxResult:1,handleTime:"2023-09-23 11:00:00"}],columns:[{title:"事务ID",key:"gtid"},{title:"源MHA",key:"srcMhaName",width:200},{title:"目标MHA",key:"dstMhaName",width:200},{title:"事务影响行数",key:"trxRowsNum",width:150,sortable:!0},{title:"冲突行数",key:"cflRowsNum",width:150,sortable:!0},{title:"事务提交时间",key:"handleTime",width:200,sortable:!0},{title:"执行结果",key:"trxResult",width:150,align:"center",render:function(e,t){var a=t.row,r=0===a.trxResult?"blue":"volcano",n=0===a.trxResult?"commit":"rollBack";return e("Tag",{props:{color:r}},n)}},{title:"操作",slot:"action",width:150,align:"center"}],total:0,current:1,size:10,pageSizeOpts:[10,20,50,100],resultOpts:[{name:"commit",val:0},{name:"rollBack",val:1}]}},methods:{getTrxData:function(){var e=new Date(this.queryParam.beginHandleTime).getTime();alert(e)},getRowsData:function(){},resetParam:function(){},queryRowsLog:function(e,t){this.$emit("tabValueChanged","rowsLog"),this.$emit("gtidChanged",e.gtid),this.tabVal="rowsLog"},handleChangeSize:function(e){var t=this;this.size=e,this.$nextTick((function(){t.getTrxData()}))}}},u=o,c=a("2877"),d=Object(c["a"])(u,i,s,!1,null,"08ee718d",null),m=d.exports,p={components:{conflictRowsLog:l["default"],conflictTrxLog:m},name:"conflictLog",data:function(){return{tabValue:"trxLog",gtid:"test111",refresh:!1}},watch:{tabValue:function(e,t){this.refresh="trxLog"===t}},methods:{jump:function(e){this.tabValue=e},updateTabValue:function(e){this.tabValue=e},updateGtid:function(e){this.gtid=e}}},g=p,h=Object(c["a"])(g,r,n,!1,null,"09dc65e6",null);t["default"]=h.exports}}]);
//# sourceMappingURL=chunk-5fcaea73.1d89aacf.js.map