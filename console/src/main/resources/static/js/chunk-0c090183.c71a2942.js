(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0c090183","chunk-39ef8bd8","chunk-6304b0b8"],{"057f":function(t,e,r){var o=r("fc6a"),i=r("241c").f,a={}.toString,n="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return i(t)}catch(e){return n.slice()}};t.exports.f=function(t){return n&&"[object Window]"==a.call(t)?s(t):i(o(t))}},"159b":function(t,e,r){var o=r("da84"),i=r("fdbc"),a=r("17c2"),n=r("9112");for(var s in i){var l=o[s],c=l&&l.prototype;if(c&&c.forEach!==a)try{n(c,"forEach",a)}catch(d){c.forEach=a}}},"17c2":function(t,e,r){"use strict";var o=r("b727").forEach,i=r("a640"),a=r("ae40"),n=i("forEach"),s=a("forEach");t.exports=n&&s?[].forEach:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}},"25f0":function(t,e,r){"use strict";var o=r("6eeb"),i=r("825a"),a=r("d039"),n=r("ad6d"),s="toString",l=RegExp.prototype,c=l[s],d=a((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),u=c.name!=s;(d||u)&&o(RegExp.prototype,s,(function(){var t=i(this),e=String(t.source),r=t.flags,o=String(void 0===r&&t instanceof RegExp&&!("flags"in l)?n.call(t):r);return"/"+e+"/"+o}),{unsafe:!0})},"27bb":function(t,e,r){},2909:function(t,e,r){"use strict";function o(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}r.d(e,"a",(function(){return n}));r("a4d3"),r("e01a"),r("d28b"),r("a630"),r("e260"),r("d3b7"),r("25f0"),r("3ca3"),r("ddb0");function i(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function n(t){return o(t)||i(t)||a()}},"3ca3":function(t,e,r){"use strict";var o=r("6547").charAt,i=r("69f3"),a=r("7dd0"),n="String Iterator",s=i.set,l=i.getterFor(n);a(String,"String",(function(t){s(this,{type:n,string:String(t),index:0})}),(function(){var t,e=l(this),r=e.string,i=e.index;return i>=r.length?{value:void 0,done:!0}:(t=o(r,i),e.index+=t.length,{value:t,done:!1})}))},4160:function(t,e,r){"use strict";var o=r("23e7"),i=r("17c2");o({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},"4df4":function(t,e,r){"use strict";var o=r("0366"),i=r("7b0b"),a=r("9bdd"),n=r("e95a"),s=r("50c4"),l=r("8418"),c=r("35a1");t.exports=function(t){var e,r,d,u,f,g,p=i(t),h="function"==typeof this?this:Array,v=arguments.length,b=v>1?arguments[1]:void 0,y=void 0!==b,L=c(p),x=0;if(y&&(b=o(b,v>2?arguments[2]:void 0,2)),void 0==L||h==Array&&n(L))for(e=s(p.length),r=new h(e);e>x;x++)g=y?b(p[x],x):p[x],l(r,x,g);else for(u=L.call(p),f=u.next,r=new h;!(d=f.call(u)).done;x++)g=y?a(u,b,[d.value,x],!0):d.value,l(r,x,g);return r.length=x,r}},6547:function(t,e,r){var o=r("a691"),i=r("1d80"),a=function(t){return function(e,r){var a,n,s=String(i(e)),l=o(r),c=s.length;return l<0||l>=c?t?"":void 0:(a=s.charCodeAt(l),a<55296||a>56319||l+1===c||(n=s.charCodeAt(l+1))<56320||n>57343?t?s.charAt(l):a:t?s.slice(l,l+2):n-56320+(a-55296<<10)+65536)}};t.exports={codeAt:a(!1),charAt:a(!0)}},7358:function(t,e,r){"use strict";r("d2da")},"746f":function(t,e,r){var o=r("428f"),i=r("5135"),a=r("e538"),n=r("9bf2").f;t.exports=function(t){var e=o.Symbol||(o.Symbol={});i(e,t)||n(e,t,{value:a.f(t)})}},"7ab6":function(t,e,r){"use strict";r("27bb")},8418:function(t,e,r){"use strict";var o=r("c04e"),i=r("9bf2"),a=r("5c6c");t.exports=function(t,e,r){var n=o(e);n in t?i.f(t,n,a(0,r)):t[n]=r}},a15b:function(t,e,r){"use strict";var o=r("23e7"),i=r("44ad"),a=r("fc6a"),n=r("a640"),s=[].join,l=i!=Object,c=n("join",",");o({target:"Array",proto:!0,forced:l||!c},{join:function(t){return s.call(a(this),void 0===t?",":t)}})},a4d3:function(t,e,r){"use strict";var o=r("23e7"),i=r("da84"),a=r("d066"),n=r("c430"),s=r("83ab"),l=r("4930"),c=r("fdbf"),d=r("d039"),u=r("5135"),f=r("e8b5"),g=r("861d"),p=r("825a"),h=r("7b0b"),v=r("fc6a"),b=r("c04e"),y=r("5c6c"),L=r("7c73"),x=r("df75"),m=r("241c"),S=r("057f"),w=r("7418"),R=r("06cf"),T=r("9bf2"),q=r("d1e7"),I=r("9112"),D=r("6eeb"),_=r("5692"),E=r("f772"),k=r("d012"),O=r("90e3"),C=r("b622"),A=r("e538"),M=r("746f"),z=r("d44e"),$=r("69f3"),j=r("b727").forEach,N=E("hidden"),P="Symbol",B="prototype",H=C("toPrimitive"),Q=$.set,V=$.getterFor(P),F=Object[B],W=i.Symbol,G=a("JSON","stringify"),J=R.f,U=T.f,K=S.f,X=q.f,Y=_("symbols"),Z=_("op-symbols"),tt=_("string-to-symbol-registry"),et=_("symbol-to-string-registry"),rt=_("wks"),ot=i.QObject,it=!ot||!ot[B]||!ot[B].findChild,at=s&&d((function(){return 7!=L(U({},"a",{get:function(){return U(this,"a",{value:7}).a}})).a}))?function(t,e,r){var o=J(F,e);o&&delete F[e],U(t,e,r),o&&t!==F&&U(F,e,o)}:U,nt=function(t,e){var r=Y[t]=L(W[B]);return Q(r,{type:P,tag:t,description:e}),s||(r.description=e),r},st=c?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof W},lt=function(t,e,r){t===F&&lt(Z,e,r),p(t);var o=b(e,!0);return p(r),u(Y,o)?(r.enumerable?(u(t,N)&&t[N][o]&&(t[N][o]=!1),r=L(r,{enumerable:y(0,!1)})):(u(t,N)||U(t,N,y(1,{})),t[N][o]=!0),at(t,o,r)):U(t,o,r)},ct=function(t,e){p(t);var r=v(e),o=x(r).concat(pt(r));return j(o,(function(e){s&&!ut.call(r,e)||lt(t,e,r[e])})),t},dt=function(t,e){return void 0===e?L(t):ct(L(t),e)},ut=function(t){var e=b(t,!0),r=X.call(this,e);return!(this===F&&u(Y,e)&&!u(Z,e))&&(!(r||!u(this,e)||!u(Y,e)||u(this,N)&&this[N][e])||r)},ft=function(t,e){var r=v(t),o=b(e,!0);if(r!==F||!u(Y,o)||u(Z,o)){var i=J(r,o);return!i||!u(Y,o)||u(r,N)&&r[N][o]||(i.enumerable=!0),i}},gt=function(t){var e=K(v(t)),r=[];return j(e,(function(t){u(Y,t)||u(k,t)||r.push(t)})),r},pt=function(t){var e=t===F,r=K(e?Z:v(t)),o=[];return j(r,(function(t){!u(Y,t)||e&&!u(F,t)||o.push(Y[t])})),o};if(l||(W=function(){if(this instanceof W)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=O(t),r=function(t){this===F&&r.call(Z,t),u(this,N)&&u(this[N],e)&&(this[N][e]=!1),at(this,e,y(1,t))};return s&&it&&at(F,e,{configurable:!0,set:r}),nt(e,t)},D(W[B],"toString",(function(){return V(this).tag})),D(W,"withoutSetter",(function(t){return nt(O(t),t)})),q.f=ut,T.f=lt,R.f=ft,m.f=S.f=gt,w.f=pt,A.f=function(t){return nt(C(t),t)},s&&(U(W[B],"description",{configurable:!0,get:function(){return V(this).description}}),n||D(F,"propertyIsEnumerable",ut,{unsafe:!0}))),o({global:!0,wrap:!0,forced:!l,sham:!l},{Symbol:W}),j(x(rt),(function(t){M(t)})),o({target:P,stat:!0,forced:!l},{for:function(t){var e=String(t);if(u(tt,e))return tt[e];var r=W(e);return tt[e]=r,et[r]=e,r},keyFor:function(t){if(!st(t))throw TypeError(t+" is not a symbol");if(u(et,t))return et[t]},useSetter:function(){it=!0},useSimple:function(){it=!1}}),o({target:"Object",stat:!0,forced:!l,sham:!s},{create:dt,defineProperty:lt,defineProperties:ct,getOwnPropertyDescriptor:ft}),o({target:"Object",stat:!0,forced:!l},{getOwnPropertyNames:gt,getOwnPropertySymbols:pt}),o({target:"Object",stat:!0,forced:d((function(){w.f(1)}))},{getOwnPropertySymbols:function(t){return w.f(h(t))}}),G){var ht=!l||d((function(){var t=W();return"[null]"!=G([t])||"{}"!=G({a:t})||"{}"!=G(Object(t))}));o({target:"JSON",stat:!0,forced:ht},{stringify:function(t,e,r){var o,i=[t],a=1;while(arguments.length>a)i.push(arguments[a++]);if(o=e,(g(e)||void 0!==t)&&!st(t))return f(e)||(e=function(t,e){if("function"==typeof o&&(e=o.call(this,t,e)),!st(e))return e}),i[1]=e,G.apply(null,i)}})}W[B][H]||I(W[B],H,W[B].valueOf),z(W,P),k[N]=!0},a630:function(t,e,r){var o=r("23e7"),i=r("4df4"),a=r("1c7e"),n=!a((function(t){Array.from(t)}));o({target:"Array",stat:!0,forced:n},{from:i})},a640:function(t,e,r){"use strict";var o=r("d039");t.exports=function(t,e){var r=[][t];return!!r&&o((function(){r.call(null,e||function(){throw 1},1)}))}},ad6d:function(t,e,r){"use strict";var o=r("825a");t.exports=function(){var t=o(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},d28b:function(t,e,r){var o=r("746f");o("iterator")},d2da:function(t,e,r){},d7e3:function(t,e,r){"use strict";r.r(e);var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("codemirror",{attrs:{options:t.options},model:{value:t.rowData,callback:function(e){t.rowData=e},expression:"rowData"}})],1)},i=[],a=r("8f94"),n=(r("0f7c"),r("ffda"),{name:"conflictRowsLogDetail",props:{rowData:String},components:{codemirror:a["codemirror"]},data:function(){return{options:{value:"",mode:"text/x-mysql",theme:"ambiance",lineWrapping:!0,height:100,readOnly:!0,lineNumbers:!0}}}}),s=n,l=(r("7358"),r("2877")),c=Object(l["a"])(s,o,i,!1,null,null,null);e["default"]=c.exports},ddb0:function(t,e,r){var o=r("da84"),i=r("fdbc"),a=r("e260"),n=r("9112"),s=r("b622"),l=s("iterator"),c=s("toStringTag"),d=a.values;for(var u in i){var f=o[u],g=f&&f.prototype;if(g){if(g[l]!==d)try{n(g,l,d)}catch(h){g[l]=d}if(g[c]||n(g,c,u),i[u])for(var p in a)if(g[p]!==a[p])try{n(g,p,a[p])}catch(h){g[p]=a[p]}}}},e01a:function(t,e,r){"use strict";var o=r("23e7"),i=r("83ab"),a=r("da84"),n=r("5135"),s=r("861d"),l=r("9bf2").f,c=r("e893"),d=a.Symbol;if(i&&"function"==typeof d&&(!("description"in d.prototype)||void 0!==d().description)){var u={},f=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof f?new d(t):void 0===t?d():d(t);return""===t&&(u[e]=!0),e};c(f,d);var g=f.prototype=d.prototype;g.constructor=f;var p=g.toString,h="Symbol(test)"==String(d("test")),v=/^Symbol\((.*)\)[^)]+$/;l(g,"description",{configurable:!0,get:function(){var t=s(this)?this.valueOf():this,e=p.call(t);if(n(u,t))return"";var r=h?e.slice(7,-1):e.replace(v,"$1");return""===r?void 0:r}}),o({global:!0,forced:!0},{Symbol:f})}},e538:function(t,e,r){var o=r("b622");e.f=o},ece4:function(t,e,r){"use strict";r.r(e);var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("base-component",{attrs:{isFather:t.isFather,subMenuName:["1"],fatherMenu:t.fatherMenu}},[r("Breadcrumb",{style:{margin:"15px 0 15px 185px",position:"fixed"}},[r("BreadcrumbItem",{attrs:{to:"/conflictLog"}},[t._v("冲突行")]),r("BreadcrumbItem",{attrs:{to:"/conflictApproval"}},[t._v("冲突审批")]),r("BreadcrumbItem",[t._v("冲突详情")])],1),r("Content",{staticClass:"content",style:{padding:"10px",background:"#fff",margin:"50px 0 1px 185px",zIndex:"1"}},[r("div",{style:{padding:"1px 1px",height:"100%"}},[r("Card",[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(" 自动冲突处理结果 ")]),"0"===t.queryType?r("div",{staticClass:"ivu-list-item-meta-title"},[t._v("事务提交结果： "),r("Button",{attrs:{loading:t.logTableLoading,size:"small",type:0==t.trxLog.trxResult?"success":"error"}},[t._v(" "+t._s(t.trxLog.trxResultStr)+" ")])],1):t._e(),r("div",{staticClass:"ivu-list-item-meta-title"},[t._v("所有机房当前冲突行记录： "),r("Tooltip",{attrs:{content:"数据一致性比对忽略字段过滤的列"}},[r("Button",{attrs:{loading:t.recordLoading,size:"small",type:1==t.trxLog.recordEqual?"success":"warning"},on:{click:t.getRecords}},[t._v(t._s(t.trxLog.diffStr))])],1)],1),r("Divider"),r("div",{staticClass:"ivu-list-item-meta-title"},[t._v("源机房("+t._s(t.trxLog.srcRegion)+")")]),t._l(t.srcRecords,(function(e,o){return r("Card",{key:o},[r("div",{staticClass:"ivu-list-item-meta-title"},[t._v("表名："+t._s(e.tableName)+" "),r("Tooltip",{attrs:{content:1==e.doubleSync?"双向同步":"单向同步"}},[r("Button",{attrs:{size:"small",type:1==e.doubleSync?"success":"primary"}},[t._v(" "+t._s(1==e.doubleSync?"双向同步":"单向同步")+" ")])],1)],1),r("Table",{attrs:{size:"small",columns:e.columns,data:e.records,border:""}})],1)})),r("Divider"),r("div",{staticClass:"ivu-list-item-meta-title"},[t._v("目标机房("+t._s(t.trxLog.dstRegion)+")")]),t._l(t.dstRecords,(function(e,o){return r("Card",{key:o},[r("div",{staticClass:"ivu-list-item-meta-title"},[t._v("表名："+t._s(e.tableName)+" "),r("Tooltip",{attrs:{content:1==e.doubleSync?"双向同步":"单向同步"}},[r("Button",{attrs:{size:"small",type:1==e.doubleSync?"success":"primary"}},[t._v(" "+t._s(1==e.doubleSync?"双向同步":"单向同步")+" ")])],1)],1),r("Table",{attrs:{size:"small",columns:e.columns,data:e.records,border:""}})],1)}))],2),r("Divider"),r("Card",[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(" DRC冲突处理流程 ")]),r("Table",{ref:"multipleTable",attrs:{stripe:"",loading:t.logTableLoading,columns:t.trxLog.columns,data:t.dataWithPage},on:{"on-selection-change":t.changeSelection}}),r("div",[r("Page",{attrs:{transfer:!0,total:t.trxLog.tableData.length,current:t.trxLog.current,"page-size-opts":t.trxLog.pageSizeOpts,"page-size":this.trxLog.size,"show-total":"","show-sizer":"","show-elevator":""},on:{"update:current":function(e){return t.$set(t.trxLog,"current",e)},"on-page-size-change":t.handleChangeSize}})],1)],1),r("Divider"),r("Card",[r("p",{attrs:{slot:"title"},slot:"title"},[t._v(" 选择冲突行自动冲突处理 ")]),r("p",[t._v("写入region")]),r("Row",{attrs:{gutter:10}},[r("Col",{attrs:{span:"3"}},[r("Select",{attrs:{filterable:"",clearable:"",placeholder:"选择写入region"},model:{value:t.writeSide,callback:function(e){t.writeSide=e},expression:"writeSide"}},t._l(t.regionOpt,(function(e){return r("Option",{key:e.key,attrs:{value:e.key}},[t._v(t._s(e.val))])})),1)],1),r("Col",{attrs:{span:"4"}},["2"!==t.queryType?r("Button",{attrs:{loading:t.sqlLoading,size:"middle",type:"success"},on:{click:t.generateHandleSql}},[t._v("生成SQL")]):t._e()],1),r("Col",{attrs:{span:"4"}},["2"===t.queryType?r("a",{attrs:{target:"_blank",href:this.approvalDetailUrl}},[t._v("审批链接")]):t._e()])],1),r("br"),r("div",{attrs:{loading:t.sqlLoading}},[r("codemirror",{attrs:{options:t.options},model:{value:t.handleSql,callback:function(e){t.handleSql=e},expression:"handleSql"}})],1),r("br"),"2"!==t.queryType?r("Button",{attrs:{loading:t.approvalLoading,size:"middle",type:"primary"},on:{click:t.generateApproval}},[t._v("提交审批")]):t._e(),t.showExecute?r("Button",{attrs:{disabled:"true"===t.disabled,loading:t.executeLoading,size:"middle",type:"primary"},on:{click:t.executeApproval}},[t._v("执行SQL")]):t._e()],1),r("Divider")],1)])],1)},i=[],a=(r("4160"),r("a15b"),r("fb6a"),r("d3b7"),r("159b"),r("2909")),n=r("d7e3"),s=r("8f94"),l=(r("0f7c"),r("ffda"),{name:"conflictLogDetail",props:{rowData:String},components:{codemirror:s["codemirror"]},data:function(){return{disabled:"",executeLoading:!1,showExecute:!1,approvalDetailUrl:"",approvalLoading:!1,handleSql:"",handleSqlList:[],showHandleSql:!1,multiData:[],sqlLoading:!1,writeSide:0,regionOpt:[],queryType:0,byRowLogIds:!1,rowLogIds:[],conflictTrxLogId:0,recordLoading:!1,logTableLoading:!1,approvalId:0,srcRecords:[],dstRecords:[],srcTable:{data:[],columns:[]},dstTable:{data:[],columns:[]},trxLog:{srcRegion:"",dstRegion:"",trxResult:null,trxResultStr:"",hasDiff:null,recordEqual:null,diffStr:"",tableData:[],columns:[{type:"selection",width:40,align:"center"},{type:"expand",width:40,render:function(t,e){var r=e.row;return t(n["default"],{props:{rowData:"/*原始SQL*/\n"+r.rawSql+"\n/*原始SQL处理结果: "+r.rawSqlResult+"*/\n\n/*冲突时行记录*/\n"+r.dstRowRecord+"\n\n/*冲突处理SQL*/\n"+r.handleSql+"\n/*冲突处理SQL处理结果: "+r.handleSqlResult+"*/"}})}},{title:"执行顺序",key:"rowId",width:100},{title:"表名",key:"tableName",width:250,tooltip:!0,render:function(t,e){var r=e.row,o=r.dbName+"."+r.tableName;return t("div",o)}},{title:"原始sql",key:"rawSql",tooltip:!0},{title:"处理结果",key:"rowResult",width:120,align:"center",render:function(t,e){var r=e.row,o=0===r.rowResult?"blue":"volcano",i=0===r.rowResult?"commit":"rollback";return t("Tag",{props:{color:o}},i)}}],total:0,current:1,size:10,pageSizeOpts:[10,20,50,100]},options:{value:"",mode:"text/x-mysql",theme:"ambiance",lineWrapping:!0,height:100,readOnly:!0,lineNumbers:!0}}},methods:{executeApproval:function(){var t=this;this.executeLoading=!0,this.axios.post("/api/drc/v2/log/approval/execute?approvalId="+this.approvalId).then((function(e){1===e.data.status?t.$Message.error("SQL执行失败! "+e.data.message):(t.$Message.success("SQL执行成功!"),t.disabled="true",t.getRecords())})).finally((function(){t.executeLoading=!1}))},getHandleSql:function(){var t=this;this.axios.get("/api/drc/v2/log/approval/detail?approvalId="+this.approvalId).then((function(e){if(1===e.data.status)t.$Message.error("查询冲突自动处理SQL失败!");else{var r=e.data;t.handleSqlList=r.data;var o=[];r.data.forEach((function(t){return o.push(t.autoHandleSql)})),t.handleSql=o.join("\n")}})).finally((function(){t.logTableLoading=!1}))},generateApproval:function(){var t=this;if(0!==this.handleSqlList.length){this.approvalLoading=!0;var e=[];this.handleSqlList.forEach((function(t){var r={rowLogId:t.rowLogId,handleSql:t.autoHandleSql};e.push(r)})),this.axios.post("/api/drc/v2/log/approval/create",{writeSide:this.writeSide,handleSqlDtos:e}).then((function(e){1===e.data.status?t.$Message.error("提交审批单失败！"):t.$Message.success("提交审批单成功")})).finally((function(){t.approvalLoading=!1}))}else this.$Message.warning("未生成SQL！")},generateHandleSql:function(){var t=this,e=this.multiData;if(void 0!==e&&null!==e&&0!==e.length){var r=[];e.forEach((function(t){return r.push(t.rowLogId)})),this.sqlLoading=!0,this.handleSql="",this.axios.post("/api/drc/v2/log/conflict/rows/handleSql",{writeSide:this.writeSide,rowLogIds:r}).then((function(e){var r=e.data;if(0===r.status){t.handleSqlList=r.data;var o=[];r.data.forEach((function(t){return o.push(t.autoHandleSql)})),t.handleSql=o.join("\n")}else t.$Message.error("自动生成SQL失败: "+r.message)})).finally((function(){t.sqlLoading=!1}))}else this.$Message.warning("请勾选！")},handleSpan:function(t){t.row,t.column,t.rowIndex;var e=t.columnIndex;if(0===e)return[0,0]},handleChangeSize:function(t){this.trxLog.size=t},getTrxLogDetail:function(){var t=this;this.logTableLoading=!0,this.axios.get("/api/drc/v2/log/conflict/detail?conflictTrxLogId="+this.conflictTrxLogId).then((function(e){if(1===e.data.status)t.$Message.error("查询冲突详情失败!");else{var r=e.data.data;t.trxLog.srcRegion=r.srcRegion,t.trxLog.dstRegion=r.dstRegion,t.trxLog.trxResult=r.trxResult,t.trxLog.trxResultStr=0===r.trxResult?"commit":"rollback",t.trxLog.tableData=r.rowsLogDetailViews,t.regionOpt=[{key:0,val:t.trxLog.dstRegion},{key:1,val:t.trxLog.srcRegion}]}})).finally((function(){t.logTableLoading=!1}))},getTrxLogDetail1:function(){var t=this;this.logTableLoading=!0,this.axios.get("/api/drc/v2/log/conflict/rows/detail?conflictRowLogIds="+this.rowLogIds).then((function(e){if(1===e.data.status)t.$Message.error("查询冲突详情失败!");else{var r=e.data.data;t.trxLog.srcRegion=r.srcRegion,t.trxLog.dstRegion=r.dstRegion,t.trxLog.trxResult=r.trxResult,t.trxLog.trxResultStr=0===r.trxResult?"commit":"rollback",t.trxLog.tableData=r.rowsLogDetailViews,t.regionOpt=[{key:0,val:t.trxLog.dstRegion},{key:1,val:t.trxLog.srcRegion}]}})).finally((function(){t.logTableLoading=!1}))},getTrxLogDetail2:function(){var t=this;this.logTableLoading=!0,this.axios.get("/api/drc/v2/log/approval/rows/detail?approvalId="+this.approvalId).then((function(e){if(1===e.data.status)t.$Message.error("查询冲突详情失败!");else{var r=e.data.data;t.trxLog.srcRegion=r.srcRegion,t.trxLog.dstRegion=r.dstRegion,t.trxLog.trxResult=r.trxResult,t.trxLog.trxResultStr=0===r.trxResult?"commit":"rollback",t.trxLog.tableData=r.rowsLogDetailViews,t.regionOpt=[{key:0,val:t.trxLog.dstRegion},{key:1,val:t.trxLog.srcRegion}]}})).finally((function(){t.logTableLoading=!1}))},getWriteSide:function(){var t=this;this.axios.get("/api/drc/v2/log/approval/writeSide?approvalId="+this.approvalId).then((function(e){1===e.data.status?t.$Message.error("查询写入region失败!"):t.writeSide=e.data.data}))},getTrxRecords:function(){var t=this;this.recordLoading=!0,this.axios.get("/api/drc/v2/log/conflict/records?conflictTrxLogId="+this.conflictTrxLogId+"&columnSize=12").then((function(e){if(1===e.data.status)t.trxLog.diffStr="数据比对失败";else{var r=e.data.data;t.trxLog.recordEqual=r.recordIsEqual,t.trxLog.diffStr=r.recordIsEqual?"数据一致":"数据不一致",t.srcRecords=r.srcRecords,t.dstRecords=r.dstRecords}})).finally((function(){t.recordLoading=!1}))},getTrxRecords1:function(){var t=this;this.recordLoading=!0,this.axios.get("/api/drc/v2/log/conflict/rows/records?conflictRowLogIds="+this.rowLogIds).then((function(e){if(1===e.data.status)t.trxLog.diffStr="数据比对失败";else{var r=e.data.data;t.trxLog.recordEqual=r.recordIsEqual,t.trxLog.diffStr=r.recordIsEqual?"数据一致":"数据不一致",t.srcRecords=r.srcRecords,t.dstRecords=r.dstRecords}})).finally((function(){t.recordLoading=!1}))},getTrxRecords2:function(){var t=this;this.recordLoading=!0,this.axios.get("/api/drc/v2/log/approval/rows/records?approvalId="+this.approvalId).then((function(e){if(1===e.data.status)t.trxLog.diffStr="数据比对失败";else{var r=e.data.data;t.trxLog.recordEqual=r.recordIsEqual,t.trxLog.diffStr=r.recordIsEqual?"数据一致":"数据不一致",t.srcRecords=r.srcRecords,t.dstRecords=r.dstRecords}})).finally((function(){t.recordLoading=!1}))},getRecords:function(){"0"===this.queryType?this.getTrxRecords():"1"===this.queryType?this.getTrxRecords1():"2"===this.queryType&&this.getTrxRecords2()},changeSelection:function(t){this.multiData=t}},computed:{dataWithPage:function(){var t=this.trxLog.tableData,e=this.trxLog.current*this.trxLog.size-this.trxLog.size,r=e+this.trxLog.size;return Object(a["a"])(t).slice(e,r)}},created:function(){this.conflictTrxLogId=this.$route.query.conflictTrxLogId,this.queryType=this.$route.query.queryType,this.approvalDetailUrl=this.$route.query.approvalDetailUrl,this.rowLogIds=this.$route.query.rowLogIds,this.approvalId=this.$route.query.approvalId,"0"===this.queryType?(this.getTrxLogDetail(),this.getTrxRecords()):"1"===this.queryType?(this.getTrxLogDetail1(),this.getTrxRecords1()):"2"===this.queryType&&(this.showExecute=this.$route.query.showExecute,this.disabled=this.$route.query.disabled,this.getWriteSide(),this.getTrxLogDetail2(),this.getTrxRecords2(),this.getHandleSql())}}),c=l,d=(r("7ab6"),r("2877")),u=Object(d["a"])(c,o,i,!1,null,null,null);e["default"]=u.exports},fb6a:function(t,e,r){"use strict";var o=r("23e7"),i=r("861d"),a=r("e8b5"),n=r("23cb"),s=r("50c4"),l=r("fc6a"),c=r("8418"),d=r("b622"),u=r("1dde"),f=r("ae40"),g=u("slice"),p=f("slice",{ACCESSORS:!0,0:0,1:2}),h=d("species"),v=[].slice,b=Math.max;o({target:"Array",proto:!0,forced:!g||!p},{slice:function(t,e){var r,o,d,u=l(this),f=s(u.length),g=n(t,f),p=n(void 0===e?f:e,f);if(a(u)&&(r=u.constructor,"function"!=typeof r||r!==Array&&!a(r.prototype)?i(r)&&(r=r[h],null===r&&(r=void 0)):r=void 0,r===Array||void 0===r))return v.call(u,g,p);for(o=new(void 0===r?Array:r)(b(p-g,0)),d=0;g<p;g++,d++)g in u&&c(o,d,u[g]);return o.length=d,o}})},fdbc:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=chunk-0c090183.c71a2942.js.map