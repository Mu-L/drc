(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-18cdadf2"],{"06c5":function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));i("a630"),i("fb6a"),i("b0c0"),i("d3b7"),i("ac1f"),i("00b4"),i("25f0"),i("3ca3");var a=i("6b75");function r(t,e){if(t){if("string"==typeof t)return Object(a["a"])(t,e);var i={}.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Object(a["a"])(t,e):void 0}}},2909:function(t,e,i){"use strict";i.d(e,"a",(function(){return l}));var a=i("6b75");function r(t){if(Array.isArray(t))return Object(a["a"])(t)}i("a4d3"),i("e01a"),i("d28b"),i("a630"),i("d3b7"),i("3ca3"),i("ddb0");function n(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var s=i("06c5");i("d9e2");function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(t){return r(t)||n(t)||Object(s["a"])(t)||c()}},"4df4":function(t,e,i){"use strict";var a=i("0366"),r=i("c65b"),n=i("7b0b"),s=i("9bdd"),c=i("e95a"),l=i("68ee"),o=i("07fa"),u=i("8418"),d=i("9a1f"),h=i("35a1"),f=Array;t.exports=function(t){var e=n(t),i=l(this),m=arguments.length,b=m>1?arguments[1]:void 0,p=void 0!==b;p&&(b=a(b,m>2?arguments[2]:void 0));var g,v,y,x,_,D,w=h(e),S=0;if(!w||this===f&&c(w))for(g=o(e),v=i?new this(g):f(g);g>S;S++)D=p?b(e[S],S):e[S],u(v,S,D);else for(v=i?new this:[],x=d(e,w),_=x.next;!(y=r(_,x)).done;S++)D=p?s(x,b,[y.value,S],!0):y.value,u(v,S,D);return v.length=S,v}},"6b75":function(t,e,i){"use strict";function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,a=Array(e);i<e;i++)a[i]=t[i];return a}i.d(e,"a",(function(){return a}))},"9bdd":function(t,e,i){"use strict";var a=i("825a"),r=i("2a62");t.exports=function(t,e,i,n){try{return n?e(a(i)[0],i[1]):e(i)}catch(s){r(t,"throw",s)}}},a630:function(t,e,i){"use strict";var a=i("23e7"),r=i("4df4"),n=i("1c7e"),s=!n((function(t){Array.from(t)}));a({target:"Array",stat:!0,forced:s},{from:r})},ff40:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t._self._c;return e("base-component",{attrs:{isFather:t.isFather,subMenuName:["1"],fatherMenu:t.fatherMenu}},[e("Breadcrumb",{style:{margin:"15px 0 15px 185px",position:"fixed"}},[e("BreadcrumbItem",{attrs:{to:"/home"}},[t._v("首页")]),e("BreadcrumbItem",[t._v("单元化路由校验")])],1),e("Content",{staticClass:"content",style:{padding:"10px",background:"#fff",margin:"50px 0 1px 185px",zIndex:"1"}},[e("div",{staticStyle:{padding:"1px 1px"}},[e("Card",[t._v(" 数据库名："),e("Input",{style:{width:"180px",marginRight:"10px"},model:{value:t.searchCondition.schemaName,callback:function(e){t.$set(t.searchCondition,"schemaName",e)},expression:"searchCondition.schemaName"}}),t._v(" 表名："),e("Input",{style:{width:"180px",marginRight:"10px"},model:{value:t.searchCondition.tableName,callback:function(e){t.$set(t.searchCondition,"tableName",e)},expression:"searchCondition.tableName"}}),e("Button",{style:{marginLeft:"10px"},attrs:{type:"primary"},on:{click:t.getVerificationResults}},[t._v("查询")]),e("Table",{staticStyle:{"margin-top":"20px"},attrs:{stripe:"",columns:t.columns,data:t.dataWithPage,size:"small"}}),e("Modal",{attrs:{title:"校验详情",width:"900px"},on:{"on-ok":t.clearDetail,"on-cancel":t.clearDetail},model:{value:t.verificationResultDetail,callback:function(e){t.verificationResultDetail=e},expression:"verificationResultDetail"}},[t._v(" "+t._s(this.detail.querySql)+" "),e("Row",{attrs:{gutter:5}},[e("i-col",{attrs:{span:"12"}},[e("List",{attrs:{border:""}},[e("ListItem",[t._v("字段名")]),e("ListItem",[t._v("原始值")]),e("ListItem",[t._v("更新值")])],1)],1),e("i-col",{attrs:{span:"12"}},[e("List",{attrs:{border:""}},[e("ListItem",[t._v(t._s(this.detail.columns))]),e("ListItem",[t._v(t._s(this.detail.beforeValues))]),e("ListItem",[t._v(t._s(this.detail.afterValues))])],1)],1)],1),t._v(" 单元化路由机房："+t._s(this.detail.expectedDc)+"（根据用户id名["+t._s(this.detail.uidName)+"]对应值和ucs策略号["+t._s(this.detail.ucsStrategyId)+"]获得） "),e("br"),t._v(" 实际写入机房："+t._s(this.detail.actualDc)+"（根据GTID["+t._s(this.detail.gtid)+"]获得） ")],1),e("div",{staticStyle:{"text-align":"center",margin:"16px 0"}},[e("Page",{attrs:{transfer:!0,total:t.verificationResults.length,current:t.current,"show-sizer":"","show-elevator":""},on:{"update:current":function(e){t.current=e},"on-page-size-change":t.handleChangeSize}})],1)],1)],1)])],1)},r=[],n=i("2909"),s=(i("fb6a"),i("e66c")),c={name:"unitRouteVerificationResult",data:function(){var t=this;return{isFather:!0,fatherMenu:"/unitRouteVerificationCluster",total:0,current:1,size:10,verificationResults:[],verificationResultDetail:!1,detail:{gtid:"",querySql:"",expectedDc:"",actualDc:"",columns:"",beforeValues:"",afterValues:"",uidName:"",ucsStrategyId:""},searchCondition:{schemaName:"",tableName:""},columns:[{title:"序号",width:75,align:"center",render:function(e,i){return e("span",i.index+1+(t.current-1)*t.size)}},{title:"库名",key:"schemaName",align:"center",resizable:!0},{title:"表名",key:"tableName",align:"center",resizable:!0},{title:"SQL",key:"querySql",align:"center",resizable:!0},{title:"单元化路由机房",key:"expectedDc",align:"center",resizable:!0},{title:"实际写入机房",key:"actualDc",align:"center",resizable:!0},{title:"执行时间",key:"executeTime",align:"center",resizable:!0,render:function(t,e){return t("div",Object(s["a"])(new Date(e.row.executeTime),"yyyy-MM-dd hh:mm:ss"))}},{title:"详情",align:"center",render:function(e,i){return e("div",[e("Button",{props:{type:"info",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.showDetail(i.row)}}},"查看")])}}]}},methods:{getVerificationResults:function(){var t=this;t.axios.get("/api/drc/v1/logs/unit/mhas/"+t.$route.query.clusterA+"?schemaName="+this.searchCondition.schemaName+"&tableName="+this.searchCondition.tableName).then((function(e){console.log(e),t.total=e.data.data.length,t.verificationResults=e.data.data}))},handleChangeSize:function(t){this.size=t},showDetail:function(t){this.verificationResultDetail=!0,this.detail.gtid=t.gtid,this.detail.querySql=t.querySql,this.detail.expectedDc=t.expectedDc,this.detail.actualDc=t.actualDc,this.detail.columns=t.columns,this.detail.beforeValues=t.beforeValues,this.detail.afterValues=t.afterValues,this.detail.uidName=t.uidName,this.detail.ucsStrategyId=t.ucsStrategyId},clearDetail:function(){this.detail.gtid="",this.detail.querySql="",this.detail.expectedDc="",this.detail.actualDc="",this.detail.columns="",this.detail.beforeValues="",this.detail.afterValues="",this.detail.uidName="",this.detail.ucsStrategyId=""}},computed:{dataWithPage:function(){var t=this.verificationResults,e=this.current*this.size-this.size,i=e+this.size;return Object(n["a"])(t).slice(e,i)}},created:function(){this.getVerificationResults()}},l=c,o=i("2877"),u=Object(o["a"])(l,a,r,!1,null,"33f126b2",null);e["default"]=u.exports}}]);
//# sourceMappingURL=chunk-18cdadf2.9ebcb66e.js.map