(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-121af281","chunk-6304b0b8"],{"0033":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("base-component",[r("Breadcrumb",{style:{margin:"15px 0 15px 185px",position:"fixed"}},[r("BreadcrumbItem",{attrs:{to:"/home"}},[t._v("首页")]),r("BreadcrumbItem",{attrs:{to:"/v2/messengersV2"}},[t._v("Messenger 同步")]),r("BreadcrumbItem",[t._v("Messenger 配置")])],1),r("Content",{staticClass:"content",style:{padding:"10px",background:"#ffffff",margin:"50px 0 1px 185px",zIndex:"1",top:"500px"}},[[r("Steps",{staticStyle:{width:"90%","margin-left":"50px","margin-bottom":"15px","margin-top":"50px"},attrs:{current:t.current}},[r("Step",{style:{cursor:"pointer"},attrs:{title:"录入Mha",content:""},nativeOn:{click:function(e){return t.jumpTo(0)}}}),r("Step",{style:{cursor:"pointer"},attrs:{title:"mha配置",content:"mha录入db信息"},nativeOn:{click:function(e){return t.jumpTo(1)}}}),r("Step",{style:{cursor:"pointer"},attrs:{title:"预检测",content:"检测mha配置"},nativeOn:{click:function(e){return t.jumpTo(2)}}}),r("Step",{style:{cursor:"pointer"},attrs:{title:"建立同步",content:"配置Replicator和Messenger实例"},nativeOn:{click:function(e){return t.jumpTo(3)}}})],1)],0===t.current?r("mhaInit",t._b({on:{mhaNameChanged:t.updateMhaName,dcChanged:t.updateDc}},"mhaInit",t.sharedInfo,!1)):t._e(),1===t.current?r("mhaConfig",t._b({on:{mhaNameChanged:t.updateMhaName,dcChanged:t.updateDc}},"mhaConfig",t.sharedInfo,!1)):t._e(),2===t.current?r("preCheck",t._b({},"preCheck",t.sharedInfo,!1)):t._e(),3===t.current?r("drcMqConfig",t._b({},"drcMqConfig",t.sharedInfo,!1)):t._e(),r("Divider")],2)],1)},a=[],o=(r("a9e3"),r("498a"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.hasResp?r("Alert",{staticStyle:{width:"65%","margin-left":"250px"},attrs:{type:t.status,"show-icon":""}},[t._v(" "+t._s(t.title)+" "),r("span",{attrs:{slot:"desc"},domProps:{innerHTML:t._s(t.message)},slot:"desc"})]):t._e(),r("Form",{ref:"mhaInfo",staticStyle:{"margin-top":"50px"},attrs:{model:t.mhaInfo,rules:t.ruleOfMhaInfo,"label-width":250}},[r("FormItem",{staticStyle:{width:"600px"},attrs:{label:"Mha名称",prop:"mhaName"}},[r("Input",{attrs:{placeholder:"请输入集群名"},on:{input:t.changeMhaName},model:{value:t.mhaInfo.mhaName,callback:function(e){t.$set(t.mhaInfo,"mhaName",e)},expression:"mhaInfo.mhaName"}})],1),r("FormItem",{attrs:{label:"源集群机房区域",prop:"dc"}},[r("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"选择机房区域"},on:{input:t.changeDc},model:{value:t.mhaInfo.dc,callback:function(e){t.$set(t.mhaInfo,"dc",e)},expression:"mhaInfo.dc"}},t._l(t.mhaInfo.drcZoneList,(function(e){return r("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1),r("FormItem",{attrs:{label:"Mha tag",prop:"srcDc"}},[r("Select",{staticStyle:{width:"200px"},attrs:{filterable:"","allow-create":"",placeholder:"选择tag"},on:{"on-create":t.handleCreateTag},model:{value:t.mhaInfo.tag,callback:function(e){t.$set(t.mhaInfo,"tag",e)},expression:"mhaInfo.tag"}},t._l(t.tagList,(function(e){return r("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])})),1)],1),r("FormItem",{staticStyle:{width:"600px"},attrs:{label:"BU名",prop:"buName"}},[r("Input",{attrs:{placeholder:"请输入BU名，自动绑定route策略"},model:{value:t.mhaInfo.buName,callback:function(e){t.$set(t.mhaInfo,"buName",e)},expression:"mhaInfo.buName"}})],1),r("FormItem",[r("Button",{on:{click:function(e){return t.handleReset("mhaInfo")}}},[t._v("重置")]),r("Button",{staticStyle:{"margin-left":"150px"},attrs:{type:"primary",loading:t.dataLoading},on:{click:function(e){return t.changeModal("mhaInfo")}}},[t._v("录入")]),r("Modal",{attrs:{title:"录入mha相关信息"},on:{"on-ok":function(e){return t.postMhaInfo("mhaInfo")}},model:{value:t.mhaInfo.modal,callback:function(e){t.$set(t.mhaInfo,"modal",e)},expression:"mhaInfo.modal"}},[r("p",[t._v(' 确定录入Mha: "'+t._s(t.mhaInfo.mhaName)+'" 吗？ 并且设置DC:"'+t._s(t.mhaInfo.dc)+'" BU:"'+t._s(t.mhaInfo.buName)+'" ')])])],1)],1)],1)}),i=[],s=(r("d3b7"),{name:"mhaInit.vue",props:{mhaName:String,dc:String},data:function(){return{mhaInfo:{mhaName:"",dc:"",buName:"",modal:!1,tag:"COMMON",drcZoneList:this.constant.dcList},tagList:this.constant.tagList,status:"",dataLoading:!1,title:"",message:"",hasResp:!1,ruleOfMhaInfo:{mhaName:[{required:!0,message:"源集群名不能为空",trigger:"blur"}],dc:[{required:!0,message:"源集群机房区域名 不能为空",trigger:"blur"}],buName:[{required:!0,message:"BU名不能为空",trigger:"blur"}]}}},methods:{postMhaInfo:function(t){var e=this,r=this;r.$refs[t].validate((function(t){t?(e.dataLoading=!0,e.hasResp=!1,r.axios.post("/api/drc/v2/config/messengerMha",{mhaName:e.mhaInfo.mhaName,dc:e.mhaInfo.dc,buName:e.mhaInfo.buName,tag:e.mhaInfo.tag}).then((function(t){r.hasResp=!0,0===t.data.status?(r.status="success",r.title="Mha录入完成!",r.message=t.data.message):(r.status="error",r.title="Mha录入失败!",r.message=t.data.message)})).catch((function(t){r.message="Mha录入异常: "+t})).finally((function(){e.dataLoading=!1}))):r.$Message.error("仍有必填项未填!")}))},handleReset:function(t){this.$refs[t].resetFields()},changeMhaName:function(){this.$emit("mhaNameChanged",this.mhaInfo.mhaName)},changeDc:function(){this.$emit("dcChanged",this.mhaInfo.dc)},changeModal:function(t){var e=this;this.$refs[t].validate((function(t){t?e.mhaInfo.modal=!0:e.$Message.error("仍有必填项未填!")}))}},handleCreateTag:function(t){this.constant.tagList.push(t)}}),c=s,l=r("2877"),u=Object(l["a"])(c,o,i,!1,null,"dc9e3d8a",null),d=u.exports,h=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.hasResp?r("Alert",{staticStyle:{width:"65%","margin-left":"250px"},attrs:{type:t.status,"show-icon":""}},[t._v(" "+t._s(t.title)+" "),r("span",{attrs:{slot:"desc"},domProps:{innerHTML:t._s(t.message)},slot:"desc"})]):t._e(),r("Form",{ref:"dbInfo",staticStyle:{float:"left","margin-top":"50px"},attrs:{model:t.dbInfo,rules:t.ruleMhaMachine,"label-width":250}},[r("FormItem",{staticStyle:{width:"600px"},attrs:{label:"源集群名",prop:"mhaName"}},[r("Input",{attrs:{placeholder:"请输入源集群名"},on:{input:t.changeMhaName},model:{value:t.dbInfo.mhaName,callback:function(e){t.$set(t.dbInfo,"mhaName",e)},expression:"dbInfo.mhaName"}})],1),r("FormItem",{attrs:{label:"添加Ip",prop:"ip"}},[r("Input",{attrs:{number:"",placeholder:"请输入录入DB的IP"},model:{value:t.dbInfo.ip,callback:function(e){t.$set(t.dbInfo,"ip",e)},expression:"dbInfo.ip"}})],1),r("FormItem",{attrs:{label:"Port",prop:"port"}},[r("Input",{attrs:{placeholder:"请输入录入DB端口"},model:{value:t.dbInfo.port,callback:function(e){t.$set(t.dbInfo,"port",e)},expression:"dbInfo.port"}})],1),r("FormItem",{attrs:{label:"DB机房",prop:"idc"}},[r("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"选择机房区域"},on:{input:t.changeDc},model:{value:t.dbInfo.idc,callback:function(e){t.$set(t.dbInfo,"idc",e)},expression:"dbInfo.idc"}},t._l(t.selectOption.drcZoneList,(function(e){return r("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1),r("FormItem",{attrs:{label:"UUID",prop:"uuid"}},[r("Input",{attrs:{placeholder:"请输入录入DB的uuid"},model:{value:t.dbInfo.uuid,callback:function(e){t.$set(t.dbInfo,"uuid",e)},expression:"dbInfo.uuid"}}),r("Button",{on:{click:t.queryUuid}},[t._v("连接查询")]),t.hasTest1?r("span",[r("Icon",{attrs:{type:t.testSuccess1?"ios-checkmark-circle":"ios-close-circle",color:t.testSuccess1?"green":"red"}}),t._v(" "+t._s(t.testSuccess1?"连接查询成功":"连接查询失败，请手动输入uuid")+" ")],1):t._e()],1),r("FormItem",{attrs:{label:"Master",prop:"master"}},[r("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"是否为Master"},model:{value:t.dbInfo.master,callback:function(e){t.$set(t.dbInfo,"master",e)},expression:"dbInfo.master"}},t._l(t.selectOption.isMaster,(function(e){return r("Option",{key:e.key,attrs:{value:e.value}},[t._v(t._s(e.key))])})),1)],1),r("FormItem",[r("Button",{attrs:{type:"primary"},on:{click:function(e){t.preCheckDbInfo("dbInfo")}}},[t._v("录入DB")]),r("br"),r("br")],1)],1),r("Modal",{attrs:{title:"录入左侧Mha Db信息"},on:{"on-ok":t.submitDbInfo},model:{value:t.dbInfo.modal,callback:function(e){t.$set(t.dbInfo,"modal",e)},expression:"dbInfo.modal"}},[r("p",[t._v("Mha: "+t._s(t.dbInfo.mhaName)+" ")]),r("p",[t._v(" db信息 [host: "+t._s(t.dbInfo.ip)+":"+t._s(t.dbInfo.port)+"]")]),r("p",[t._v(" db信息 [isMaster:"+t._s(t.dbInfo.master)+"]")]),r("p",[t._v(" db信息 [idc:"+t._s(t.dbInfo.idc)+"]")]),r("p",[t._v(" db信息 [uuid:"+t._s(t.dbInfo.uuid)+"]")])])],1)},f=[],m={name:"mhaConfig",props:{mhaName:String,dc:String},data:function(){var t=function(t,e,r){if(!/^[0-9]+$/.test(e))return r(new Error("请填写整数port"));r()},e=function(t,e,r){if(!/0|1/.test(e))return r(new Error("请填写整数port"));r()};return{result:"",status:"",title:"",message:"",hasResp:!1,hasTest1:!1,testSuccess1:!1,hasTest2:!1,testSuccess2:!1,dbInfo:{modal:!1,mhaName:this.mhaName,ip:"",port:"",idc:this.dc,uuid:"",master:1},selectOption:{isMaster:[{key:"Master",value:1},{key:"Slave",value:0}],drcZoneList:this.constant.dcList},ruleMhaMachine:{mhaName:[{required:!0,message:"mha集群名不能为空",trigger:"blur"}],ip:[{required:!0,message:"ip不能为空",trigger:"blur"}],port:[{required:!0,validator:t,trigger:"blur"}],idc:[{required:!0,message:"选择db区域",trigger:"blur"}],uuid:[{required:!0,message:"uuid不能为空",trigger:"blur"}],master:[{required:!0,validator:e,trigger:"blur"}]}}},methods:{queryUuid:function(){var t=this,e=this;console.log("/api/drc/v2/mha/uuid?mhaName="+this.dbInfo.mhaName+"&ip="+this.dbInfo.ip+"&port="+this.dbInfo.port+"&master="+this.dbInfo.master),e.axios.get("/api/drc/v2/mha/uuid?mhaName="+this.dbInfo.mhaName+"&ip="+this.dbInfo.ip+"&port="+this.dbInfo.port+"&master="+this.dbInfo.master).then((function(e){t.hasTest1=!0,0===e.data.status?(t.dbInfo.uuid=e.data.data,t.testSuccess1=!0):t.testSuccess1=!1}))},preCheckDbInfo:function(t){var e=this;this.$refs[t].validate((function(t){t?e.dbInfo.modal=!0:e.$Message.error("仍有必填项未填!")}))},submitDbInfo:function(){var t=this,e=this;e.axios.post("/api/drc/v2/mha/machineInfo",{mhaName:this.dbInfo.mhaName,master:this.dbInfo.master,mySQLInstance:{ip:this.dbInfo.ip,port:this.dbInfo.port,idc:this.dbInfo.idc,uuid:this.dbInfo.uuid}}).then((function(r){e.hasResp=!0,0===r.data.status?(e.status="success",e.title="mha:"+t.dbInfo.mhaName+"录入db成功!",e.message=r.data.message):(e.status="error",e.title="mha:"+t.dbInfo.mhaName+"录入db失败!",e.message=r.data.message)}))},changeMhaName:function(){this.$emit("mhaNameChanged",this.dbInfo.mhaName)},changeDc:function(){this.$emit("dcChanged",this.dbInfo.idc)}}},p=m,g=Object(l["a"])(p,h,f,!1,null,"474c1b8e",null),b=g.exports,v=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Form",{staticStyle:{float:"left","margin-top":"50px"},attrs:{model:t.mhaInfo,"label-width":250}},[r("FormItem",{staticStyle:{width:"600px"},attrs:{label:"源集群名",prop:"mhaName"}},[r("Row",[r("Col",{attrs:{span:"16"}},[r("Input",{attrs:{readonly:"",placeholder:"请输入源集群名"},model:{value:t.mhaInfo.mhaName,callback:function(e){t.$set(t.mhaInfo,"mhaName",e)},expression:"mhaInfo.mhaName"}})],1),r("Col",{attrs:{span:"5"}},[r("Button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",ghost:""},on:{click:function(e){return t.checkMySqlConfig(t.mhaInfo)}}},[t._v("配置校验")])],1)],1)],1),r("FormItem",{attrs:{label:"同步表",prop:"ip"}},[r("Row",[r("Col",{attrs:{span:"16"}},[r("Input",{attrs:{placeholder:"支持正则，默认全部"},model:{value:t.mhaInfo.nameFilter,callback:function(e){t.$set(t.mhaInfo,"nameFilter",e)},expression:"mhaInfo.nameFilter"}})],1),r("Col",{attrs:{span:"5"}},[r("Button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",ghost:""},on:{click:function(e){return t.checkMySqlTables(t.mhaInfo)}}},[t._v("表校验")])],1)],1)],1)],1),r("Modal",{attrs:{title:"预检测结果",width:"900px"},model:{value:t.configCheck.modal,callback:function(e){t.$set(t.configCheck,"modal",e)},expression:"configCheck.modal"}},[r("Form",{staticStyle:{width:"100%"}},[r("FormItem",{attrs:{label:"BINLOG [SHOULD BE: ON]"}},[r("Input",{attrs:{readonly:""},model:{value:t.configCheck.binlogMode,callback:function(e){t.$set(t.configCheck,"binlogMode",e)},expression:"configCheck.binlogMode"}})],1),r("FormItem",{attrs:{label:"BINLOG_FORMAT  [SHOULD BE: ROW]"}},[r("Input",{attrs:{readonly:""},model:{value:t.configCheck.binlogFormat,callback:function(e){t.$set(t.configCheck,"binlogFormat",e)},expression:"configCheck.binlogFormat"}})],1),r("FormItem",{attrs:{label:"binlogVersion1  [SHOULD BE: OFF]"}},[r("Input",{attrs:{readonly:""},model:{value:t.configCheck.binlogVersion1,callback:function(e){t.$set(t.configCheck,"binlogVersion1",e)},expression:"configCheck.binlogVersion1"}})],1),r("FormItem",{attrs:{label:"BTD [SHOULD BE: writeSet]"}},[r("Input",{attrs:{readonly:""},model:{value:t.configCheck.binlogTransactionDependency,callback:function(e){t.$set(t.configCheck,"binlogTransactionDependency",e)},expression:"configCheck.binlogTransactionDependency"}})],1),r("FormItem",{attrs:{label:"BinlogRowImage [SHOULD BE: FULL]"}},[r("Input",{attrs:{readonly:""},model:{value:t.configCheck.binlogRowImage,callback:function(e){t.$set(t.configCheck,"binlogRowImage",e)},expression:"configCheck.binlogRowImage"}})],1),r("FormItem",{attrs:{label:"BTDHS [SHOULD BE: 100k]"}},[r("Input",{attrs:{readonly:""},model:{value:t.configCheck.binlogTransactionDependencyHistorySize,callback:function(e){t.$set(t.configCheck,"binlogTransactionDependencyHistorySize",e)},expression:"configCheck.binlogTransactionDependencyHistorySize"}})],1),r("FormItem",{attrs:{label:"GTID_MODE [SHOULD BE: ON]"}},[r("Input",{attrs:{readonly:""},model:{value:t.configCheck.gtidMode,callback:function(e){t.$set(t.configCheck,"gtidMode",e)},expression:"configCheck.gtidMode"}})],1),r("FormItem",{attrs:{label:"DRC系统表数量 [SHOULD BE: 1/2]"}},[r("Input",{attrs:{readonly:""},model:{value:t.configCheck.drcTables,callback:function(e){t.$set(t.configCheck,"drcTables",e)},expression:"configCheck.drcTables"}})],1),r("FormItem",{attrs:{label:"自增步长"}},[r("Input",{attrs:{readonly:""},model:{value:t.configCheck.autoIncrementStep,callback:function(e){t.$set(t.configCheck,"autoIncrementStep",e)},expression:"configCheck.autoIncrementStep"}})],1),r("FormItem",{attrs:{label:"自增offSet"}},[r("Input",{attrs:{readonly:""},model:{value:t.configCheck.autoIncrementOffset,callback:function(e){t.$set(t.configCheck,"autoIncrementOffset",e)},expression:"configCheck.autoIncrementOffset"}})],1),r("FormItem",{attrs:{label:"DRC3对帐号 [SHOULD BE: three accounts ready]"}},[r("Input",{attrs:{readonly:""},model:{value:t.configCheck.drcAccounts,callback:function(e){t.$set(t.configCheck,"drcAccounts",e)},expression:"configCheck.drcAccounts"}})],1)],1)],1),r("Modal",{attrs:{title:"表检验",width:"1000px"},model:{value:t.tablesCheckModal,callback:function(e){t.tablesCheckModal=e},expression:"tablesCheckModal"}},[r("Card",[r("div",{attrs:{slot:"title"},slot:"title"},[r("span",[t._v("相关表")])]),r("Table",{attrs:{stripe:"",columns:t.columns,data:t.dataWithPage,border:""}}),r("div",{staticStyle:{"text-align":"center",margin:"16px 0"}},[r("Page",{attrs:{transfer:!0,total:t.tableData.length,current:t.current,"page-size-opts":t.pageSizeOpts,"page-size":this.size,"show-total":"","show-sizer":"","show-elevator":""},on:{"update:current":function(e){t.current=e},"on-page-size-change":t.handleChangeSize}})],1)],1)],1)],1)},y=[],I=(r("fb6a"),r("2909")),x={name:"preCheck",props:{mhaName:String,dc:String},data:function(){return{mhaInfo:{mhaName:this.mhaName,nameFilter:""},configCheck:{binlogMode:"",binlogFormat:"",binlogVersion1:"",binlogTransactionDependency:"",binlogRowImage:"",binlogTransactionDependencyHistorySize:0,gtidMode:"",drcTables:0,autoIncrementStep:0,autoIncrementOffset:0,drcAccounts:"",modal:!1},tablesCheckModal:!1,tableData:[],columns:[{title:"序号",width:75,align:"center",fixed:"left",render:function(t,e){return t("span",e.index+1)}},{title:"库名",key:"schema"},{title:"表名",key:"table"},{title:"无OnUpdate字段",key:"noOnUpdateColumn",width:100,align:"center",render:function(t,e){var r=e.row,n=r.noOnUpdateColumn?"True":"";return t("span",n)}},{title:"无OnUpdate字段索引",key:"noOnUpdateKey",width:100,align:"center",render:function(t,e){var r=e.row,n=r.noOnUpdateKey?"True":"";return t("span",n)}},{title:"无PkUk",key:"noPkUk",width:100,align:"center",render:function(t,e){var r=e.row,n=r.noPkUk?"True":"";return t("span",n)}},{title:"支持Truncate",key:"approveTruncate",width:100,align:"center",render:function(t,e){var r=e.row,n=r.approveTruncate?"True":"";return t("span",n)}},{title:"存在DefaultTime为0",key:"timeDefaultZero",width:100,align:"center",render:function(t,e){var r=e.row,n=r.timeDefaultZero?"True":"";return t("span",n)}},{title:"结果",width:100,align:"center",render:function(t,e){var r=e.row,n=r.noOnUpdateColumn||r.noOnUpdateKey||r.noPkUk||r.approveTruncate||r.timeDefaultZero,a=n?"volcano":"green",o=n?"错误":"正常";return t("Tag",{props:{color:a}},o)}}],total:0,current:1,size:5,pageSizeOpts:[5,10,20,100]}},computed:{dataWithPage:function(){var t=this.tableData,e=this.current*this.size-this.size,r=e+this.size;return Object(I["a"])(t).slice(e,r)}},methods:{checkMySqlConfig:function(t){var e=this;this.$Spin.show({render:function(t){return t("div",[t("Icon",{class:"demo-spin-icon-load",props:{size:18}}),t("div","检测中，请稍等...")])}}),this.axios.get("/api/drc/v2/mysql/preCheckMySqlConfig?mha="+this.mhaInfo.mhaName).then((function(t){console.log(t);var r=t.data.data;console.log(r),e.configCheck.binlogMode=r.binlogMode,e.configCheck.binlogFormat=r.binlogFormat,e.configCheck.binlogVersion1=r.binlogVersion1,e.configCheck.binlogTransactionDependency=r.binlogTransactionDependency,e.configCheck.binlogRowImage=r.binlogRowImage,e.configCheck.binlogTransactionDependencyHistorySize=r.binlogTransactionDependencyHistorySize,e.configCheck.gtidMode=r.gtidMode,e.configCheck.drcTables=r.drcTables,e.configCheck.autoIncrementStep=r.autoIncrementStep,e.configCheck.autoIncrementOffset=r.autoIncrementOffset,e.configCheck.drcAccounts=r.drcAccounts,e.$Spin.hide(),e.configCheck.modal=!0}))},checkMySqlTables:function(t){var e=this;this.$Spin.show({render:function(t){return t("div",[t("Icon",{class:"demo-spin-icon-load",props:{size:18}}),t("div","检测中，请稍等...")])}}),setTimeout((function(){e.$Spin.hide()}),8e4),this.axios.get("/api/drc/v1/build/preCheckMySqlTables?mha="+this.mhaInfo.mhaName+"&nameFilter="+this.mhaInfo.nameFilter).then((function(t){e.tableData=t.data.data,e.$Spin.hide(),e.tablesCheckModal=!0}))},handleChangeSize:function(t){this.size=t}}},k=x,w=Object(l["a"])(k,v,y,!1,null,"34ef6bc8",null),S=w.exports,C=r("6a95"),M={name:"buildMhaMessenger",components:{mhaInit:d,mhaConfig:b,preCheck:S,drcMqConfig:C["a"]},data:function(){return{current:0,sharedInfo:{mhaName:this.$route.query.mhaName,dc:""}}},methods:{jumpTo:function(t){this.current=t,this.hasResp=!1},next:function(){this.current=this.current+1,this.hasResp=!1},prev:function(){this.current=this.current-1,this.hasResp=!1},updateMhaName:function(t){this.sharedInfo.mhaName=t.trim()},updateDc:function(t){this.sharedInfo.dc=t}},created:function(){var t=this;this.axios.get("/api/drc/v2/permission/meta/mqReplication/modify").then((function(e){if(403!==e.data.status){var r=t.$route.query.step;"undefined"===typeof r?console.log("curStep undefined, do nothing"):t.jumpTo(Number(r))}else t.$router.push("/nopermission")}))}},N=M,_=Object(l["a"])(N,n,a,!1,null,"a3b34208",null);e["default"]=_.exports},"057f":function(t,e,r){var n=r("fc6a"),a=r("241c").f,o={}.toString,i="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return a(t)}catch(e){return i.slice()}};t.exports.f=function(t){return i&&"[object Window]"==o.call(t)?s(t):a(n(t))}},"159b":function(t,e,r){var n=r("da84"),a=r("fdbc"),o=r("17c2"),i=r("9112");for(var s in a){var c=n[s],l=c&&c.prototype;if(l&&l.forEach!==o)try{i(l,"forEach",o)}catch(u){l.forEach=o}}},"17c2":function(t,e,r){"use strict";var n=r("b727").forEach,a=r("a640"),o=r("ae40"),i=a("forEach"),s=o("forEach");t.exports=i&&s?[].forEach:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}},"1da1":function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));r("d3b7"),r("e6cf");function n(t,e,r,n,a,o,i){try{var s=t[o](i),c=s.value}catch(l){return void r(l)}s.done?e(c):Promise.resolve(c).then(n,a)}function a(t){return function(){var e=this,r=arguments;return new Promise((function(a,o){var i=t.apply(e,r);function s(t){n(i,a,o,s,c,"next",t)}function c(t){n(i,a,o,s,c,"throw",t)}s(void 0)}))}}},"25f0":function(t,e,r){"use strict";var n=r("6eeb"),a=r("825a"),o=r("d039"),i=r("ad6d"),s="toString",c=RegExp.prototype,l=c[s],u=o((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),d=l.name!=s;(u||d)&&n(RegExp.prototype,s,(function(){var t=a(this),e=String(t.source),r=t.flags,n=String(void 0===r&&t instanceof RegExp&&!("flags"in c)?i.call(t):r);return"/"+e+"/"+n}),{unsafe:!0})},2909:function(t,e,r){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}r.d(e,"a",(function(){return i}));r("a4d3"),r("e01a"),r("d28b"),r("a630"),r("e260"),r("d3b7"),r("25f0"),r("3ca3"),r("ddb0");function a(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function i(t){return n(t)||a(t)||o()}},"3ca3":function(t,e,r){"use strict";var n=r("6547").charAt,a=r("69f3"),o=r("7dd0"),i="String Iterator",s=a.set,c=a.getterFor(i);o(String,"String",(function(t){s(this,{type:i,string:String(t),index:0})}),(function(){var t,e=c(this),r=e.string,a=e.index;return a>=r.length?{value:void 0,done:!0}:(t=n(r,a),e.index+=t.length,{value:t,done:!1})}))},4160:function(t,e,r){"use strict";var n=r("23e7"),a=r("17c2");n({target:"Array",proto:!0,forced:[].forEach!=a},{forEach:a})},"498a":function(t,e,r){"use strict";var n=r("23e7"),a=r("58a8").trim,o=r("c8d2");n({target:"String",proto:!0,forced:o("trim")},{trim:function(){return a(this)}})},"4df4":function(t,e,r){"use strict";var n=r("0366"),a=r("7b0b"),o=r("9bdd"),i=r("e95a"),s=r("50c4"),c=r("8418"),l=r("35a1");t.exports=function(t){var e,r,u,d,h,f,m=a(t),p="function"==typeof this?this:Array,g=arguments.length,b=g>1?arguments[1]:void 0,v=void 0!==b,y=l(m),I=0;if(v&&(b=n(b,g>2?arguments[2]:void 0,2)),void 0==y||p==Array&&i(y))for(e=s(m.length),r=new p(e);e>I;I++)f=v?b(m[I],I):m[I],c(r,I,f);else for(d=y.call(m),h=d.next,r=new p;!(u=h.call(d)).done;I++)f=v?o(d,b,[u.value,I],!0):u.value,c(r,I,f);return r.length=I,r}},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,r){var n=r("1d80"),a=r("5899"),o="["+a+"]",i=RegExp("^"+o+o+"*"),s=RegExp(o+o+"*$"),c=function(t){return function(e){var r=String(n(e));return 1&t&&(r=r.replace(i,"")),2&t&&(r=r.replace(s,"")),r}};t.exports={start:c(1),end:c(2),trim:c(3)}},6547:function(t,e,r){var n=r("a691"),a=r("1d80"),o=function(t){return function(e,r){var o,i,s=String(a(e)),c=n(r),l=s.length;return c<0||c>=l?t?"":void 0:(o=s.charCodeAt(c),o<55296||o>56319||c+1===l||(i=s.charCodeAt(c+1))<56320||i>57343?t?s.charAt(c):o:t?s.slice(c,c+2):i-56320+(o-55296<<10)+65536)}};t.exports={codeAt:o(!1),charAt:o(!0)}},"6a95":function(t,e,r){"use strict";var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Row",[r("Form",{ref:"drc1",staticStyle:{float:"left","margin-top":"50px"},attrs:{model:t.drc,"label-width":250}},[r("FormItem",{staticStyle:{width:"600px"},attrs:{label:"集群名",prop:"mhaName"}},[r("Input",{attrs:{readonly:"",placeholder:"请输入集群名"},model:{value:t.drc.mhaName,callback:function(e){t.$set(t.drc,"mhaName",e)},expression:"drc.mhaName"}})],1),r("FormItem",{attrs:{label:"选择Replicator",prop:"replicator"}},[r("Select",{key:t.drc.currentInstances.replicator,staticStyle:{width:"300px"},attrs:{multiple:"",placeholder:"选择Replicator"},model:{value:t.drc.replicators,callback:function(e){t.$set(t.drc,"replicators",e)},expression:"drc.replicators"}},t._l(t.drc.replicatorList,(function(e){return r("Option",{key:e.ip,attrs:{value:e.ip}},[t._v(t._s(e.ip)+" — "+t._s(e.az)+" "+t._s(t.getRole(e.ip,t.drc.currentInstances.replicator))+" ")])})),1),t._v("   "),r("Button",{attrs:{type:"success"},on:{click:t.autoConfigReplicator}},[t._v("自动录入")])],1),t.showMhaApplierConfig()?r("FormItem",{attrs:{label:"选择Messenger",prop:"messenger"}},[r("Select",{key:t.drc.currentInstances.messenger,staticStyle:{width:"300px"},attrs:{multiple:"",placeholder:"选择集群Messenger"},model:{value:t.drc.messengers,callback:function(e){t.$set(t.drc,"messengers",e)},expression:"drc.messengers"}},t._l(t.drc.messengerList,(function(e){return r("Option",{key:e.ip,attrs:{value:e.ip}},[t._v(t._s(e.ip)+" ["+t._s(1===e.type?"A":7===e.type?"M":"")+"] — "+t._s(e.az)+" "+t._s(t.getRole(e.ip,t.drc.currentInstances.messenger))+" ")])})),1),t._v("   "),r("Button",{attrs:{type:"success"},on:{click:t.autoConfigMessenger}},[t._v("自动录入")])],1):t._e(),r("FormItem",{staticStyle:{width:"600px"},attrs:{label:"初始拉取位点R"}},[r("Input",{attrs:{placeholder:"变更replicator机器时，请输入binlog拉取位点"},model:{value:t.drc.rGtidExecuted,callback:function(e){t.$set(t.drc,"rGtidExecuted",e)},expression:"drc.rGtidExecuted"}}),r("Row",[r("Col",{attrs:{span:"12"}},[r("Button",{on:{click:t.queryMhaMachineGtid}},[t._v("查询mha位点")]),t.hasTest1?r("span",[r("Icon",{attrs:{type:t.testSuccess1?"ios-checkmark-circle":"ios-close-circle",color:t.testSuccess1?"green":"red"}}),t._v(" "+t._s(t.testSuccess1?"查询实时位点成功":"连接查询失败")+" ")],1):t._e()],1),r("Col",{attrs:{span:"12"}},[r("Button",{attrs:{type:"success"},on:{click:t.queryMhaGtidCheckRes}},[t._v("位点校验")])],1)],1)],1),r("FormItem",{staticStyle:{width:"600px"},attrs:{label:"mq配置"}},[r("Button",{attrs:{type:"primary",ghost:""},on:{click:t.goToMqConfigs}},[t._v("mq配置")])],1),t.showDbMhaApplierConfig()?r("FormItem",{staticStyle:{width:"600px"},attrs:{label:"DB Applier 配置"}},[r("Button",{attrs:{type:"primary",ghost:""},on:{click:t.getMhaDbMessenger}},[t._v("Db Applier 管理")])],1):t._e(),t.showMhaApplierConfig()?r("FormItem",{staticStyle:{width:"600px"},attrs:{label:"初始同步位点A"}},[r("Input",{attrs:{placeholder:"请输入DRC同步起始位点"},model:{value:t.drc.aGtidExecuted,callback:function(e){t.$set(t.drc,"aGtidExecuted",e)},expression:"drc.aGtidExecuted"}})],1):t._e()],1)],1),r("Form",{staticStyle:{"margin-top":"50px"},attrs:{"label-width":250}},[r("FormItem",[r("Row",[r("Col",{attrs:{span:"6"}},[r("Button",{on:{click:function(e){return t.handleReset("drc1")}}},[t._v("重置")])],1),r("Col",{attrs:{span:"6"}},[r("Button",{attrs:{type:"primary"},on:{click:function(e){t.preCheckConfigure()}}},[t._v("提交")])],1)],1)],1),r("Modal",{attrs:{title:"确认配置信息",width:"900px"},on:{"on-ok":t.submitConfig},model:{value:t.drc.reviewModal,callback:function(e){t.$set(t.drc,"reviewModal",e)},expression:"drc.reviewModal"}},[r("Form",{staticStyle:{width:"80%"}},[r("FormItem",{attrs:{label:"集群名"}},[r("Input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:30},readonly:""},model:{value:t.drc.mhaName,callback:function(e){t.$set(t.drc,"mhaName",e)},expression:"drc.mhaName"}})],1),r("FormItem",{attrs:{label:"集群Replicator"}},[r("Input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:30},readonly:""},model:{value:t.drc.replicators,callback:function(e){t.$set(t.drc,"replicators",e)},expression:"drc.replicators"}})],1),r("FormItem",{attrs:{label:"集群Messenger"}},[r("Input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:30},readonly:""},model:{value:t.drc.messengers,callback:function(e){t.$set(t.drc,"messengers",e)},expression:"drc.messengers"}})],1),r("FormItem",{attrs:{label:"新增Replicator的新增binlog拉取位点"}},[r("Input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:30},readonly:""},model:{value:t.drc.rGtidExecuted,callback:function(e){t.$set(t.drc,"rGtidExecuted",e)},expression:"drc.rGtidExecuted"}})],1),r("FormItem",{attrs:{label:"Messenger集群的起始位点"}},[r("Input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:30},readonly:""},model:{value:t.drc.aGtidExecuted,callback:function(e){t.$set(t.drc,"aGtidExecuted",e)},expression:"drc.aGtidExecuted"}})],1)],1)],1),r("Modal",{attrs:{title:"配置结果",width:"1200px"},model:{value:t.drc.resultModal,callback:function(e){t.$set(t.drc,"resultModal",e)},expression:"drc.resultModal"}},[r("Form",{staticStyle:{width:"100%"}},[r("FormItem",{attrs:{label:"集群配置"}},[r("Input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:30},readonly:""},model:{value:t.result,callback:function(e){t.result=e},expression:"result"}})],1)],1)],1),r("Modal",{attrs:{title:"存在一对多共用运行配置请确认",width:"900px"},on:{"on-ok":t.reviewConfigure},model:{value:t.drc.warnModal,callback:function(e){t.$set(t.drc,"warnModal",e)},expression:"drc.warnModal"}},[r("label",{staticStyle:{color:"black"}},[t._v("共用replicator配置的集群: ")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.drc.conflictMha,expression:"drc.conflictMha"}],domProps:{value:t.drc.conflictMha},on:{input:function(e){e.target.composing||t.$set(t.drc,"conflictMha",e.target.value)}}}),r("Divider"),r("div",[r("p",{staticStyle:{color:"red"}},[t._v("线上一对多replicator配置")]),r("ul",t._l(t.drc.replicators.share,(function(e){return r("ol",{key:e},[t._v(t._s(e))])})),0)]),r("Divider"),r("div",[r("p",{staticStyle:{color:"black"}},[t._v("修改后replicator配置")]),r("ul",t._l(t.drc.replicators.conflictCurrent,(function(e){return r("ol",{key:e},[t._v(t._s(e))])})),0)])],1),r("Modal",{attrs:{title:"gitd位点校验结果",width:"900px"},model:{value:t.gtidCheck.modal,callback:function(e){t.$set(t.gtidCheck,"modal",e)},expression:"gtidCheck.modal"}},[r("Form",{staticStyle:{width:"80%"}},[r("FormItem",{attrs:{label:"校验结果"}},[r("Input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:30},readonly:""},model:{value:t.gtidCheck.resVo.legal,callback:function(e){t.$set(t.gtidCheck.resVo,"legal",e)},expression:"gtidCheck.resVo.legal"}})],1),r("FormItem",{attrs:{label:"当前Mha"}},[r("Input",{attrs:{autosize:{minRows:1,maxRows:30},readonly:""},model:{value:t.gtidCheck.resVo.mha,callback:function(e){t.$set(t.gtidCheck.resVo,"mha",e)},expression:"gtidCheck.resVo.mha"}})],1),r("FormItem",{attrs:{label:"配置位点"}},[r("Input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:30},readonly:""},model:{value:t.gtidCheck.resVo.configGtid,callback:function(e){t.$set(t.gtidCheck.resVo,"configGtid",e)},expression:"gtidCheck.resVo.configGtid"}})],1),r("FormItem",{attrs:{label:"purgedGtid"}},[r("Input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:30},readonly:""},model:{value:t.gtidCheck.resVo.purgedGtid,callback:function(e){t.$set(t.gtidCheck.resVo,"purgedGtid",e)},expression:"gtidCheck.resVo.purgedGtid"}})],1)],1)],1)],1)],1)},a=[],o=(r("a4d3"),r("e01a"),r("d28b"),r("7db0"),r("4160"),r("a15b"),r("d3b7"),r("3ca3"),r("159b"),r("ddb0"),r("96cf"),r("1da1")),i={name:"drcMqConfig",props:{mhaName:String,dc:String},data:function(){return{hasTest1:!1,testSuccess1:!1,result:!1,gtidCheck:{modal:!1,resVo:{mha:"",legal:"",configGtid:"",purgedGtid:""}},drc:{reviewModal:!1,warnModal:!1,mhaName:this.mhaName,rGtidExecuted:"",aGtidExecuted:"",replicators:{},messengers:[],currentInstances:{messenger:[],replicator:[]},replicatorList:{},messengerList:[],dbMessengerSwitch:!1,dbMessengerList:[]}}},methods:{autoConfigReplicator:function(){var t=this;this.axios.get("/api/drc/v2/resource/mha/auto?mhaName="+this.drc.mhaName+"&type=0&selectedIps="+this.drc.replicators).then((function(e){console.log(e.data),t.drc.replicators=[],e.data.data.forEach((function(e){return t.drc.replicators.push(e.ip)}))}))},autoConfigMessenger:function(){var t=this;this.axios.get("/api/drc/v2/resource/mha/auto?mhaName="+this.drc.mhaName+"&type=7&selectedIps="+this.drc.messengers).then((function(e){console.log(e.data),t.drc.messengers=[],e.data.data.forEach((function(e){return t.drc.messengers.push(e.ip)}))}))},getResources:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.drc.messengerList=[],t.axios.get("/api/drc/v2/resource/mha/all?mhaName="+t.drc.mhaName+"&type=0").then((function(e){console.log(e.data),t.drc.replicatorList=e.data.data})),e.next=4,t.axios.get("/api/drc/v2/resource/mha/all?mhaName="+t.drc.mhaName+"&type=7").then((function(e){var r=e.data.data;r.forEach((function(e){var r=t.drc.messengerList.find((function(t){return t.ip===e.ip}));r||t.drc.messengerList.push(e)}))}));case 4:t.axios.get("/api/drc/v2/config/mha/dbMessenger?mhaName="+t.drc.mhaName+"&type=1").then((function(e){t.drc.dbMessengerList=e.data.data}));case 5:case"end":return e.stop()}}),e)})))()},refreshReplicatorInstances:function(){var t=this;this.axios.get("/api/drc/v2/remote/resource/replicatorInstances",{params:{mhaName:this.drc.mhaName,ips:this.drc.replicators.join(",")}}).then((function(e){var r=e.data.data;console.log("replicator instance: ",r),t.drc.currentInstances.replicator=r}))},refreshMessengerInstances:function(){var t=this;this.axios.get("/api/drc/v2/remote/resource/messengerInstances",{params:{mhaName:this.drc.mhaName,ips:this.drc.messengers.join(",")}}).then((function(e){var r=e.data.data;console.log("messenger instance: ",r),t.drc.currentInstances.messenger=r}))},getResourcesInUse:function(){var t=this;this.axios.get("/api/drc/v2/mha/replicator",{params:{mhaName:this.drc.mhaName}}).then((function(e){console.log(t.drc.mhaName+" replicators "+e.data.data),t.drc.replicators=[],e.data.data.forEach((function(e){return t.drc.replicators.push(e)})),t.refreshReplicatorInstances()})),this.axios.get("/api/drc/v2/mha/messenger",{params:{mhaName:this.drc.mhaName}}).then((function(e){var r=e.data.data;console.log(t.drc.mhaName+" messengers "+r),t.drc.messengers=r.ips,t.drc.aGtidExecuted=r.gtidInit,t.refreshMessengerInstances()}))},goToMqConfigs:function(){console.log("go to change mq config for "+this.drc.mhaName),this.$router.push({path:"/v2/mqConfigs",query:{mhaName:this.drc.mhaName}})},getMhaDbMessenger:function(){this.$router.push({path:"/dbMessengers",query:{mhaName:this.drc.mhaName}})},handleReset:function(t){this.$refs[t].resetFields()},preCheckConfigure:function(){var t=this,e={mhaName:this.drc.mhaName,replicatorIps:this.drc.replicators.join(","),messengerIps:this.drc.messengers.join(",")};console.log(e),this.axios.get("/api/drc/v2/mha/replicatorIps/check",{params:e}).then((function(e){var r=e.data.data;0===r.status?t.drc.reviewModal=!0:1===r.status?(t.drc.replicators.share=r.workingReplicatorIps,t.drc.replicators.conflictCurrent=t.drc.replicators,t.drc.conflictMha=r.conflictMha,t.drc.warnModal=!0):window.alert("config preCheck fail")}))},queryMhaMachineGtid:function(){var t=this;this.hasTest1=!1,this.drc.rGtidExecuted="";var e=this;console.log("/api/drc/v2/mha/gtid/executed?mha="+this.drc.mhaName),e.axios.get("/api/drc/v2/mha/gtid/executed?mha="+this.drc.mhaName).then((function(e){t.hasTest1=!0,0===e.data.status?(t.drc.rGtidExecuted=e.data.data,t.testSuccess1=!0):(t.testSuccess1=!1,t.$Message.warning("查询位点失败: "+e.data.message))})).catch((function(e){t.$Message.error("查询位点异常: "+e)}))},queryMhaGtidCheckRes:function(){var t=this;if(null!=this.drc.rGtidExecuted&&""!==this.drc.rGtidExecuted){var e=this;console.log("/api/drc/v2/mha/gtid/checkResult?mha="+this.drc.mhaName+"&configGtid="+this.drc.rGtidExecuted),e.axios.get("/api/drc/v2/mha/gtid/checkResult?mha="+this.drc.mhaName+"&configGtid="+this.drc.rGtidExecuted).then((function(e){0===e.data.status?(t.gtidCheck.resVo={mha:t.drc.mhaName,legal:!0===e.data.data.legal?"合理位点":"binlog已经被purge",configGtid:t.drc.rGtidExecuted,purgedGtid:e.data.data.purgedGtid},t.gtidCheck.modal=!0):console.log("api fail:/api/drc/v2/mha/gtid/checkResult?mha="+t.drc.mhaName+"&configGtid="+t.drc.rGtidExecuted)})).catch((function(e){t.$Message.error("校验位点异常: "+e)}))}else this.$Message.warning("位点为空！")},showDbMhaApplierConfig:function(){return this.drc.dbMessengerSwitch||this.hasAppliers(this.drc.dbMessengerList)},showMhaApplierConfig:function(){return!0},getRole:function(t,e){if(!e||0===e.length)return"";var r=!0,n=!1,a=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done);r=!0){var s=o.value;if(s.ip===t)return" — "+(s.master?"Master":"Slave")}}catch(c){n=!0,a=c}finally{try{r||null==i.return||i.return()}finally{if(n)throw a}}return""},hasAppliers:function(t){var e=!0,r=!1,n=void 0;try{for(var a,o=t[Symbol.iterator]();!(e=(a=o.next()).done);e=!0){var i=a.value;if(i.ips&&i.ips.length>0)return!0}}catch(s){r=!0,n=s}finally{try{e||null==o.return||o.return()}finally{if(r)throw n}}return!1},submitConfig:function(){var t=this,e=this;this.axios.post("/api/drc/v2/config/messenger/submitConfig",{mhaName:this.drc.mhaName,replicatorIps:this.drc.replicators,messengerIps:this.drc.messengers,aGtidExecuted:this.drc.aGtidExecuted,rGtidExecuted:this.drc.rGtidExecuted}).then((function(r){console.log(r.data),1!==r.data.status?(e.result=r.data.data,e.drc.reviewModal=!1,e.drc.resultModal=!0):t.$Message.warning({content:"提交失败："+r.data.message,duration:10})})).catch((function(e){t.$Message.error({content:"提交异常: "+e,duration:10})}))},reviewConfigure:function(){this.drc.reviewModal=!0}},created:function(){this.getResources(),this.getResourcesInUse()}},s=i,c=r("2877"),l=Object(c["a"])(s,n,a,!1,null,"0c6faf62",null);e["a"]=l.exports},7156:function(t,e,r){var n=r("861d"),a=r("d2bb");t.exports=function(t,e,r){var o,i;return a&&"function"==typeof(o=e.constructor)&&o!==r&&n(i=o.prototype)&&i!==r.prototype&&a(t,i),t}},"746f":function(t,e,r){var n=r("428f"),a=r("5135"),o=r("e538"),i=r("9bf2").f;t.exports=function(t){var e=n.Symbol||(n.Symbol={});a(e,t)||i(e,t,{value:o.f(t)})}},"7db0":function(t,e,r){"use strict";var n=r("23e7"),a=r("b727").find,o=r("44d2"),i=r("ae40"),s="find",c=!0,l=i(s);s in[]&&Array(1)[s]((function(){c=!1})),n({target:"Array",proto:!0,forced:c||!l},{find:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),o(s)},8418:function(t,e,r){"use strict";var n=r("c04e"),a=r("9bf2"),o=r("5c6c");t.exports=function(t,e,r){var i=n(e);i in t?a.f(t,i,o(0,r)):t[i]=r}},"96cf":function(t,e,r){var n=function(t){"use strict";var e,r=Object.prototype,n=r.hasOwnProperty,a="function"===typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function c(t,e,r,n){var a=e&&e.prototype instanceof p?e:p,o=Object.create(a.prototype),i=new _(n||[]);return o._invoke=S(t,r,i),o}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(n){return{type:"throw",arg:n}}}t.wrap=c;var u="suspendedStart",d="suspendedYield",h="executing",f="completed",m={};function p(){}function g(){}function b(){}var v={};v[o]=function(){return this};var y=Object.getPrototypeOf,I=y&&y(y(E([])));I&&I!==r&&n.call(I,o)&&(v=I);var x=b.prototype=p.prototype=Object.create(v);function k(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function w(t){function e(r,a,o,i){var s=l(t[r],t,a);if("throw"!==s.type){var c=s.arg,u=c.value;return u&&"object"===typeof u&&n.call(u,"__await")?Promise.resolve(u.__await).then((function(t){e("next",t,o,i)}),(function(t){e("throw",t,o,i)})):Promise.resolve(u).then((function(t){c.value=t,o(c)}),(function(t){return e("throw",t,o,i)}))}i(s.arg)}var r;function a(t,n){function a(){return new Promise((function(r,a){e(t,n,r,a)}))}return r=r?r.then(a,a):a()}this._invoke=a}function S(t,e,r){var n=u;return function(a,o){if(n===h)throw new Error("Generator is already running");if(n===f){if("throw"===a)throw o;return L()}r.method=a,r.arg=o;while(1){var i=r.delegate;if(i){var s=C(i,r);if(s){if(s===m)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===u)throw n=f,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=h;var c=l(t,e,r);if("normal"===c.type){if(n=r.done?f:d,c.arg===m)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n=f,r.method="throw",r.arg=c.arg)}}}function C(t,r){var n=t.iterator[r.method];if(n===e){if(r.delegate=null,"throw"===r.method){if(t.iterator["return"]&&(r.method="return",r.arg=e,C(t,r),"throw"===r.method))return m;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var a=l(n,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,m;var o=a.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function E(t){if(t){var r=t[o];if(r)return r.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function r(){while(++a<t.length)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}return{next:L}}function L(){return{value:e,done:!0}}return g.prototype=x.constructor=b,b.constructor=g,b[s]=g.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s in t||(t[s]="GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},k(w.prototype),w.prototype[i]=function(){return this},t.AsyncIterator=w,t.async=function(e,r,n,a){var o=new w(c(e,r,n,a));return t.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},k(x),x[s]="Generator",x[o]=function(){return this},x.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){while(e.length){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=E,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return s.type="throw",s.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;N(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:E(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}(t.exports);try{regeneratorRuntime=n}catch(a){Function("r","regeneratorRuntime = r")(n)}},a15b:function(t,e,r){"use strict";var n=r("23e7"),a=r("44ad"),o=r("fc6a"),i=r("a640"),s=[].join,c=a!=Object,l=i("join",",");n({target:"Array",proto:!0,forced:c||!l},{join:function(t){return s.call(o(this),void 0===t?",":t)}})},a4d3:function(t,e,r){"use strict";var n=r("23e7"),a=r("da84"),o=r("d066"),i=r("c430"),s=r("83ab"),c=r("4930"),l=r("fdbf"),u=r("d039"),d=r("5135"),h=r("e8b5"),f=r("861d"),m=r("825a"),p=r("7b0b"),g=r("fc6a"),b=r("c04e"),v=r("5c6c"),y=r("7c73"),I=r("df75"),x=r("241c"),k=r("057f"),w=r("7418"),S=r("06cf"),C=r("9bf2"),M=r("d1e7"),N=r("9112"),_=r("6eeb"),E=r("5692"),L=r("f772"),O=r("d012"),R=r("90e3"),F=r("b622"),T=r("e538"),$=r("746f"),D=r("d44e"),G=r("69f3"),A=r("b727").forEach,j=L("hidden"),B="Symbol",q="prototype",P=F("toPrimitive"),z=G.set,U=G.getterFor(B),V=Object[q],H=a.Symbol,Z=o("JSON","stringify"),J=S.f,W=C.f,Y=k.f,K=M.f,Q=E("symbols"),X=E("op-symbols"),tt=E("string-to-symbol-registry"),et=E("symbol-to-string-registry"),rt=E("wks"),nt=a.QObject,at=!nt||!nt[q]||!nt[q].findChild,ot=s&&u((function(){return 7!=y(W({},"a",{get:function(){return W(this,"a",{value:7}).a}})).a}))?function(t,e,r){var n=J(V,e);n&&delete V[e],W(t,e,r),n&&t!==V&&W(V,e,n)}:W,it=function(t,e){var r=Q[t]=y(H[q]);return z(r,{type:B,tag:t,description:e}),s||(r.description=e),r},st=l?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof H},ct=function(t,e,r){t===V&&ct(X,e,r),m(t);var n=b(e,!0);return m(r),d(Q,n)?(r.enumerable?(d(t,j)&&t[j][n]&&(t[j][n]=!1),r=y(r,{enumerable:v(0,!1)})):(d(t,j)||W(t,j,v(1,{})),t[j][n]=!0),ot(t,n,r)):W(t,n,r)},lt=function(t,e){m(t);var r=g(e),n=I(r).concat(mt(r));return A(n,(function(e){s&&!dt.call(r,e)||ct(t,e,r[e])})),t},ut=function(t,e){return void 0===e?y(t):lt(y(t),e)},dt=function(t){var e=b(t,!0),r=K.call(this,e);return!(this===V&&d(Q,e)&&!d(X,e))&&(!(r||!d(this,e)||!d(Q,e)||d(this,j)&&this[j][e])||r)},ht=function(t,e){var r=g(t),n=b(e,!0);if(r!==V||!d(Q,n)||d(X,n)){var a=J(r,n);return!a||!d(Q,n)||d(r,j)&&r[j][n]||(a.enumerable=!0),a}},ft=function(t){var e=Y(g(t)),r=[];return A(e,(function(t){d(Q,t)||d(O,t)||r.push(t)})),r},mt=function(t){var e=t===V,r=Y(e?X:g(t)),n=[];return A(r,(function(t){!d(Q,t)||e&&!d(V,t)||n.push(Q[t])})),n};if(c||(H=function(){if(this instanceof H)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=R(t),r=function(t){this===V&&r.call(X,t),d(this,j)&&d(this[j],e)&&(this[j][e]=!1),ot(this,e,v(1,t))};return s&&at&&ot(V,e,{configurable:!0,set:r}),it(e,t)},_(H[q],"toString",(function(){return U(this).tag})),_(H,"withoutSetter",(function(t){return it(R(t),t)})),M.f=dt,C.f=ct,S.f=ht,x.f=k.f=ft,w.f=mt,T.f=function(t){return it(F(t),t)},s&&(W(H[q],"description",{configurable:!0,get:function(){return U(this).description}}),i||_(V,"propertyIsEnumerable",dt,{unsafe:!0}))),n({global:!0,wrap:!0,forced:!c,sham:!c},{Symbol:H}),A(I(rt),(function(t){$(t)})),n({target:B,stat:!0,forced:!c},{for:function(t){var e=String(t);if(d(tt,e))return tt[e];var r=H(e);return tt[e]=r,et[r]=e,r},keyFor:function(t){if(!st(t))throw TypeError(t+" is not a symbol");if(d(et,t))return et[t]},useSetter:function(){at=!0},useSimple:function(){at=!1}}),n({target:"Object",stat:!0,forced:!c,sham:!s},{create:ut,defineProperty:ct,defineProperties:lt,getOwnPropertyDescriptor:ht}),n({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:ft,getOwnPropertySymbols:mt}),n({target:"Object",stat:!0,forced:u((function(){w.f(1)}))},{getOwnPropertySymbols:function(t){return w.f(p(t))}}),Z){var pt=!c||u((function(){var t=H();return"[null]"!=Z([t])||"{}"!=Z({a:t})||"{}"!=Z(Object(t))}));n({target:"JSON",stat:!0,forced:pt},{stringify:function(t,e,r){var n,a=[t],o=1;while(arguments.length>o)a.push(arguments[o++]);if(n=e,(f(e)||void 0!==t)&&!st(t))return h(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!st(e))return e}),a[1]=e,Z.apply(null,a)}})}H[q][P]||N(H[q],P,H[q].valueOf),D(H,B),O[j]=!0},a630:function(t,e,r){var n=r("23e7"),a=r("4df4"),o=r("1c7e"),i=!o((function(t){Array.from(t)}));n({target:"Array",stat:!0,forced:i},{from:a})},a640:function(t,e,r){"use strict";var n=r("d039");t.exports=function(t,e){var r=[][t];return!!r&&n((function(){r.call(null,e||function(){throw 1},1)}))}},a9e3:function(t,e,r){"use strict";var n=r("83ab"),a=r("da84"),o=r("94ca"),i=r("6eeb"),s=r("5135"),c=r("c6b6"),l=r("7156"),u=r("c04e"),d=r("d039"),h=r("7c73"),f=r("241c").f,m=r("06cf").f,p=r("9bf2").f,g=r("58a8").trim,b="Number",v=a[b],y=v.prototype,I=c(h(y))==b,x=function(t){var e,r,n,a,o,i,s,c,l=u(t,!1);if("string"==typeof l&&l.length>2)if(l=g(l),e=l.charCodeAt(0),43===e||45===e){if(r=l.charCodeAt(2),88===r||120===r)return NaN}else if(48===e){switch(l.charCodeAt(1)){case 66:case 98:n=2,a=49;break;case 79:case 111:n=8,a=55;break;default:return+l}for(o=l.slice(2),i=o.length,s=0;s<i;s++)if(c=o.charCodeAt(s),c<48||c>a)return NaN;return parseInt(o,n)}return+l};if(o(b,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var k,w=function(t){var e=arguments.length<1?0:t,r=this;return r instanceof w&&(I?d((function(){y.valueOf.call(r)})):c(r)!=b)?l(new v(x(e)),r,w):x(e)},S=n?f(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),C=0;S.length>C;C++)s(v,k=S[C])&&!s(w,k)&&p(w,k,m(v,k));w.prototype=y,y.constructor=w,i(a,b,w)}},ad6d:function(t,e,r){"use strict";var n=r("825a");t.exports=function(){var t=n(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},c8d2:function(t,e,r){var n=r("d039"),a=r("5899"),o="​᠎";t.exports=function(t){return n((function(){return!!a[t]()||o[t]()!=o||a[t].name!==t}))}},d28b:function(t,e,r){var n=r("746f");n("iterator")},ddb0:function(t,e,r){var n=r("da84"),a=r("fdbc"),o=r("e260"),i=r("9112"),s=r("b622"),c=s("iterator"),l=s("toStringTag"),u=o.values;for(var d in a){var h=n[d],f=h&&h.prototype;if(f){if(f[c]!==u)try{i(f,c,u)}catch(p){f[c]=u}if(f[l]||i(f,l,d),a[d])for(var m in o)if(f[m]!==o[m])try{i(f,m,o[m])}catch(p){f[m]=o[m]}}}},e01a:function(t,e,r){"use strict";var n=r("23e7"),a=r("83ab"),o=r("da84"),i=r("5135"),s=r("861d"),c=r("9bf2").f,l=r("e893"),u=o.Symbol;if(a&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var d={},h=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof h?new u(t):void 0===t?u():u(t);return""===t&&(d[e]=!0),e};l(h,u);var f=h.prototype=u.prototype;f.constructor=h;var m=f.toString,p="Symbol(test)"==String(u("test")),g=/^Symbol\((.*)\)[^)]+$/;c(f,"description",{configurable:!0,get:function(){var t=s(this)?this.valueOf():this,e=m.call(t);if(i(d,t))return"";var r=p?e.slice(7,-1):e.replace(g,"$1");return""===r?void 0:r}}),n({global:!0,forced:!0},{Symbol:h})}},e538:function(t,e,r){var n=r("b622");e.f=n},fb6a:function(t,e,r){"use strict";var n=r("23e7"),a=r("861d"),o=r("e8b5"),i=r("23cb"),s=r("50c4"),c=r("fc6a"),l=r("8418"),u=r("b622"),d=r("1dde"),h=r("ae40"),f=d("slice"),m=h("slice",{ACCESSORS:!0,0:0,1:2}),p=u("species"),g=[].slice,b=Math.max;n({target:"Array",proto:!0,forced:!f||!m},{slice:function(t,e){var r,n,u,d=c(this),h=s(d.length),f=i(t,h),m=i(void 0===e?h:e,h);if(o(d)&&(r=d.constructor,"function"!=typeof r||r!==Array&&!o(r.prototype)?a(r)&&(r=r[p],null===r&&(r=void 0)):r=void 0,r===Array||void 0===r))return g.call(d,f,m);for(n=new(void 0===r?Array:r)(b(m-f,0)),u=0;f<m;f++,u++)f in d&&l(n,u,d[f]);return n.length=u,n}})},fdbc:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=chunk-121af281.7ff84c94.js.map