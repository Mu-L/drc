(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4473b73e"],{"00b4":function(e,t,o){"use strict";o("ac1f");var n=o("23e7"),r=o("c65b"),i=o("1626"),s=o("825a"),a=o("577e"),l=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},!0===t.test("abc")&&e}(),c=/./.test;n({target:"RegExp",proto:!0,forced:!l},{test:function(e){var t=s(this),o=a(e),n=t.exec;if(!i(n))return r(c,t,o);var l=r(n,t,o);return null!==l&&(s(l),!0)}})},"0251":function(e,t,o){"use strict";o.r(t);o("b0c0");var n=function(){var e=this,t=e._self._c;return t("base-component",[t("Breadcrumb",{style:{margin:"15px 0 15px 185px",position:"fixed"}},[t("BreadcrumbItem",{attrs:{to:{path:"/v2/mhaReplications",query:{srcMhaName:this.commonInfo.srcMhaName,dstMhaName:this.commonInfo.dstMhaName,preciseSearchMode:!0}}}},[e._v("首页 ")]),t("BreadcrumbItem",{attrs:{to:{path:"/drcV2",query:{step:3,srcMhaName:this.commonInfo.srcMhaName,dstMhaName:this.commonInfo.dstMhaName,srcDc:this.commonInfo.srcDc,dstDc:this.commonInfo.dstDc,order:this.commonInfo.order}}}},[e._v("DRC-MHA 配置 ")]),t("BreadcrumbItem",{attrs:{to:"/v2/mhaDbReplications"}},[e._v("DB 复制链路")]),t("BreadcrumbItem",{attrs:{to:{path:"/dbTables",query:{srcMhaName:this.commonInfo.srcMhaName,dstMhaName:this.commonInfo.dstMhaName,srcDc:this.commonInfo.srcDc,dstDc:this.commonInfo.dstDc}}}},[e._v("同步表 ")]),t("BreadcrumbItem",[e._v("同步表配置")])],1),t("Content",{staticClass:"content",style:{padding:"10px",background:"#ffffff",margin:"50px 0 1px 185px",zIndex:"1"}},[t("span",{staticStyle:{"margin-top":"10px",color:"#464c5b","font-weight":"600"}},[e._v(e._s(e.commonInfo.srcMhaName)+"("+e._s(e.commonInfo.srcDc)+") ==> "+e._s(e.commonInfo.dstMhaName)+"("+e._s(e.commonInfo.dstDc)+")")]),t("br"),t("br"),e.showMsg?t("Alert",{attrs:{type:"warning","show-icon":"",closable:""},scopedSlots:e._u([{key:"desc",fn:function(){return[e._v(e._s(e.message))]},proxy:!0}],null,!1,964728714)},[e._v(" "+e._s(e.title)+" ")]):e._e(),t("Row",{attrs:{gutter:10,align:"middle"}},[t("Col",{attrs:{span:"13"}},[t("Form",{ref:"commonInfo",attrs:{model:e.commonInfo,rules:e.ruleInline,"label-width":100}},[t("FormItem",{attrs:{prop:"dbName",label:"库名",required:!0}},[t("Input",{attrs:{type:"text",readonly:e.update,placeholder:"请输入库名（支持正则）"},model:{value:e.commonInfo.dbName,callback:function(t){e.$set(e.commonInfo,"dbName",t)},expression:"commonInfo.dbName"}})],1),t("FormItem",{attrs:{prop:"tableName",label:"表名",required:!0}},[t("Input",{attrs:{type:"text",readonly:e.show,placeholder:"请输入表名（支持正则）"},model:{value:e.commonInfo.tableName,callback:function(t){e.$set(e.commonInfo,"tableName",t)},expression:"commonInfo.tableName"}})],1),t("FormItem",{attrs:{label:"行过滤"}},[t("i-switch",{attrs:{disabled:e.show,size:"large"},scopedSlots:e._u([{key:"open",fn:function(){return[t("span",[e._v("On")])]},proxy:!0},{key:"close",fn:function(){return[t("span",[e._v("Off")])]},proxy:!0}]),model:{value:e.formItem.switch.rowsFilter,callback:function(t){e.$set(e.formItem.switch,"rowsFilter",t)},expression:"formItem.switch.rowsFilter"}})],1),e.formItem.switch.rowsFilter?t("Card",{staticStyle:{"margin-left":"100px"},scopedSlots:e._u([{key:"title",fn:function(){return[t("Icon",{attrs:{type:"md-settings"}}),e._v(" 行过滤配置 ")]},proxy:!0}],null,!1,2915474430)},[t("FormItem",{attrs:{label:"模式"}},[t("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"选择行过滤模式"},model:{value:e.rowsFilterConfig.mode,callback:function(t){e.$set(e.rowsFilterConfig,"mode",t)},expression:"rowsFilterConfig.mode"}},e._l(e.rowsFilterConfig.modes,(function(o){return t("Option",{key:o.mode,attrs:{value:o.mode}},[e._v(e._s(o.name)+" ")])})),1)],1),e.useTripUdlOrUidMode?t("div",[e.fillContextByRegion?t("FormItem",{attrs:{label:"规则内容"}},[t("Select",{staticStyle:{width:"200px"},attrs:{multiple:"",placeholder:"Region 选择"},model:{value:e.configInTripUid.regionsChosen,callback:function(t){e.$set(e.configInTripUid,"regionsChosen",t)},expression:"configInTripUid.regionsChosen"}},e._l(e.constants.regionsForChose,(function(o){return t("Option",{key:o,attrs:{value:o}},[e._v(e._s(o))])})),1)],1):e._e(),e.showUdlConfigDetail?t("div",[t("Divider",[e._v("UDL配置")]),t("FormItem",{attrs:{label:"UDL字段"}},[t("Select",{staticStyle:{width:"200px"},attrs:{filterable:"","allow-create":"",multiple:"",placeholder:"不选默认则无UDL配置"},on:{"on-create":e.handleCreateUDLColumn},model:{value:e.rowsFilterConfig.udlColumns,callback:function(t){e.$set(e.rowsFilterConfig,"udlColumns",t)},expression:"rowsFilterConfig.udlColumns"}},e._l(e.columnsForChose,(function(o){return t("Option",{key:o,attrs:{value:o}},[e._v(e._s(o))])})),1)],1),e.hasUdlColumn?t("FormItem",{attrs:{label:"DRC UDL策略id"}},[t("Select",{staticStyle:{width:"200px"},attrs:{filterable:"","allow-create":"",placeholder:"请选择ucs策略id"},model:{value:e.rowsFilterConfig.drcStrategyId,callback:function(t){e.$set(e.rowsFilterConfig,"drcStrategyId",t)},expression:"rowsFilterConfig.drcStrategyId"}},e._l(e.constants.drcStrategyIdsForChose,(function(o){return t("Option",{key:o,attrs:{value:o}},[e._v(e._s(o)+" ")])})),1)],1):e._e()],1):e._e(),e.showUidConfigDetail?t("div",[t("Divider",[e._v("UID配置")]),t("FormItem",{attrs:{label:"UID字段"}},[t("Select",{staticStyle:{width:"200px"},attrs:{filterable:"","allow-create":"",multiple:"",placeholder:"不选默认则无UID配置"},on:{"on-create":e.handleCreateUDLColumn},model:{value:e.rowsFilterConfig.columns,callback:function(t){e.$set(e.rowsFilterConfig,"columns",t)},expression:"rowsFilterConfig.columns"}},e._l(e.columnsForChose,(function(o){return t("Option",{key:o,attrs:{value:o}},[e._v(e._s(o))])})),1)],1),e.hasUidColumn?t("FormItem",{attrs:{label:"fetchMode"}},[t("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"选择"},on:{"on-change":function(t){return e.fetchModeChange()}},model:{value:e.rowsFilterConfig.fetchMode,callback:function(t){e.$set(e.rowsFilterConfig,"fetchMode",t)},expression:"rowsFilterConfig.fetchMode"}},e._l(e.rowsFilterConfig.fetchModeForChose,(function(o){return t("Option",{key:o.k,attrs:{value:o.v}},[e._v(e._s(o.k)+" ")])})),1)],1):e._e(),e.hasUidColumn?t("FormItem",{attrs:{label:"空处理"}},[t("Checkbox",{model:{value:e.rowsFilterConfig.illegalArgument,callback:function(t){e.$set(e.rowsFilterConfig,"illegalArgument",t)},expression:"rowsFilterConfig.illegalArgument"}},[e._v("【字段为空时】同步")])],1):e._e()],1):e._e()],1):e.useCustomSoaMode?t("div",[t("FormItem",{attrs:{label:"相关字段"}},[t("Select",{staticStyle:{width:"200px"},attrs:{filterable:"","allow-create":"",multiple:"",placeholder:"选择相关字段"},on:{"on-create":e.handleCreateUDLColumn},model:{value:e.rowsFilterConfig.columns,callback:function(t){e.$set(e.rowsFilterConfig,"columns",t)},expression:"rowsFilterConfig.columns"}},e._l(e.columnsForChose,(function(e){return t("Option",{key:e,attrs:{value:e,lable:e}})})),1)],1),t("FormItem",{attrs:{label:"ServiceCode"}},[t("Select",{staticStyle:{width:"200px"},attrs:{filterable:"","allow-create":"",placeholder:"请选择soaServiceCode"},on:{"on-create":e.handleCreateSoaServiceCode},model:{value:e.rowsFilterConfig.drcStrategyId,callback:function(t){e.$set(e.rowsFilterConfig,"drcStrategyId",t)},expression:"rowsFilterConfig.drcStrategyId"}},e._l(e.rowsFilterConfig.serviceCodeForChose,(function(o){return t("Option",{key:o,attrs:{value:o}},[e._v(e._s(o)+" ")])})),1)],1),t("FormItem",{attrs:{label:"服务名"}},[t("Select",{staticStyle:{width:"200px"},attrs:{filterable:"","allow-create":"",placeholder:"请选择服务名"},on:{"on-create":e.handleCreateSoaServiceName},model:{value:e.rowsFilterConfig.context,callback:function(t){e.$set(e.rowsFilterConfig,"context",t)},expression:"rowsFilterConfig.context"}},e._l(e.rowsFilterConfig.serviceNameForChose,(function(o){return t("Option",{key:o,attrs:{value:o}},[e._v(e._s(o)+" ")])})),1)],1)],1):t("div",[t("FormItem",{attrs:{label:"规则内容"}},[t("Input",{staticStyle:{width:"250px"},attrs:{type:"textarea",placeholder:"请输入行过滤内容"},model:{value:e.rowsFilterConfig.context,callback:function(t){e.$set(e.rowsFilterConfig,"context",t)},expression:"rowsFilterConfig.context"}})],1),t("FormItem",{attrs:{label:"相关字段"}},[t("Select",{staticStyle:{width:"200px"},attrs:{filterable:"","allow-create":"",multiple:"",placeholder:"选择相关字段"},on:{"on-create":e.handleCreateUDLColumn},model:{value:e.rowsFilterConfig.columns,callback:function(t){e.$set(e.rowsFilterConfig,"columns",t)},expression:"rowsFilterConfig.columns"}},e._l(e.columnsForChose,(function(e){return t("Option",{key:e,attrs:{value:e,lable:e}})})),1)],1)],1)],1):e._e(),t("FormItem",{attrs:{label:"字段过滤"}},[t("i-switch",{attrs:{disabled:e.show,size:"large"},scopedSlots:e._u([{key:"open",fn:function(){return[t("span",[e._v("On")])]},proxy:!0},{key:"close",fn:function(){return[t("span",[e._v("Off")])]},proxy:!0}]),model:{value:e.formItem.switch.columnsFilter,callback:function(t){e.$set(e.formItem.switch,"columnsFilter",t)},expression:"formItem.switch.columnsFilter"}})],1),e.formItem.switch.columnsFilter?t("Card",{staticStyle:{"margin-left":"100px"},scopedSlots:e._u([{key:"title",fn:function(){return[t("Icon",{attrs:{type:"md-settings"}}),e._v(" 字段过滤配置 ")]},proxy:!0}],null,!1,495830608)},[t("FormItem",{attrs:{label:"模式"}},[t("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"选择字段过滤模式"},model:{value:e.columnsFilterConfig.mode,callback:function(t){e.$set(e.columnsFilterConfig,"mode",t)},expression:"columnsFilterConfig.mode"}},e._l(e.columnsFilterConfig.modes,(function(o){return t("Option",{key:o.mode,attrs:{value:o.mode}},[e._v(e._s(o.name)+" ")])})),1)],1),t("FormItem",{attrs:{label:"字段"}},[t("Select",{staticStyle:{width:"200px"},attrs:{filterable:"","allow-create":"",multiple:"",placeholder:"选择相关的字段"},on:{"on-create":e.handleCreateUDLColumn},model:{value:e.columnsFilterConfig.columns,callback:function(t){e.$set(e.columnsFilterConfig,"columns",t)},expression:"columnsFilterConfig.columns"}},e._l(e.columnsForChose,(function(o){return t("Option",{key:o,attrs:{value:o}},[e._v(e._s(o))])})),1)],1)],1):e._e(),t("br"),e.show?e._e():t("FormItem",[t("Button",{attrs:{type:"primary",loading:e.dataLoading},on:{click:e.submitAll}},[e._v("提交")])],1)],1)],1),t("Col",{attrs:{span:"11"}},[t("Divider",{staticStyle:{"margin-top":"1px"}},[e._v("预览：同步表")]),t("Button",{attrs:{type:"primary",loading:e.tableLoading},on:{click:e.checkMysqlTablesInSrcMha}},[e._v("检查同步表")]),t("Table",{attrs:{size:"small",height:e.tableHeight,loading:e.tableLoading,stripe:"",columns:e.nameFilterCheck.columns,data:e.dataWithPage,border:""}}),t("div",[t("Page",{attrs:{transfer:!0,total:e.commonInfo.tableData.length,current:e.nameFilterCheck.current,"page-size-opts":e.nameFilterCheck.pageSizeOpts,"page-size":this.nameFilterCheck.size,"show-total":"","show-sizer":"","show-elevator":""},on:{"update:current":function(t){return e.$set(e.nameFilterCheck,"current",t)},"on-page-size-change":e.handleChangeSize}})],1)],1)],1)],1)],1)},r=[],i=o("2909"),s=(o("caad"),o("a15b"),o("14d9"),o("fb6a"),o("a9e3"),o("b64b"),o("2532"),{data:function(){return{currentStep:0,dataLoading:!1,tableLoading:!1,update:!1,batchUpdate:!1,show:!1,message:"",showMsg:!1,title:"",tableHeight:80,submit:!0,constants:{regionsForChose:["SGP","SIN","SH","FRA"],drcStrategyIdsForChose:[2000000002],filterMode:{JAVA_REGEX:0,TRIP_UDL:1,AVIATOR_REGEX:3,TRIP_UDL_UID:5,CUSTOM_SOA:6},fetchMode:{RPC:0,BlackList:1,WhiteList:2,BlackList_Global:3}},rowsFilterConfig:{mode:1,drcStrategyId:2000000002,routeStrategyId:0,udlColumns:[],columns:[],context:"",illegalArgument:!1,fetchMode:0,modes:[{name:"trip_udl",mode:1},{name:"java_regex",mode:0},{name:"aviator_regex",mode:3},{name:"trip_udl_uid",mode:5},{name:"custom_soa",mode:6}],fetchModeForChose:[{k:"RPC调用",v:0},{k:"BlackList",v:1},{k:"WhiteList",v:2},{k:"BlackListGlobal",v:3}],serviceCodeForChose:[32578],serviceNameForChose:["DataSyncService","FilterRowService"]},columnsForChose:[],configInTripUid:{regionsChosen:[]},columnsFilterConfig:{mode:Number,columns:[],modes:[{name:"exclude",mode:0},{name:"include",mode:1},{name:"regex",mode:2}]},formItem:{switch:{rowsFilter:!1,columnsFilter:!1}},commonInfo:{srcMhaName:"",srcMhaId:0,dstMhaName:"",srcDc:"",dstDc:"",order:!0,testIds:[],dbReplicationIds:[],dbReplicationId:0,dbName:"",tableName:"",tableData:[],rowsFilterDetail:{mode:"trip-uld",row:null},colsFilterDetail:{mode:null,row:null},switch:{rowsFilter:!1,columnsFilter:!1}},ruleInline:{dbName:[{required:!0,message:"请输入库名",trigger:"blur"}],tableName:[{required:!0,message:"请输入表名",trigger:"blur"}]},nameFilterCheck:{columns:[{title:"序号",width:75,align:"center",fixed:"left",render:function(e,t){return e("span",t.index+1)}},{title:"库名",key:"schema",resizable:!0},{title:"表名",key:"table",resizable:!0},{title:"结果",align:"center",render:function(e,t){var o=t.row,n="ok"!==o.res?"volcano":"green",r=o.res;return e("Tag",{props:{color:n}},r)}}],total:0,current:1,size:10,pageSizeOpts:[10,20,50,100]}}},methods:{submitAll:function(){var e=this;console.log("dbReplicationId: "+this.commonInfo.dbReplicationId),console.log("dbReplicationIds: "+this.commonInfo.dbReplicationIds),console.log("testIds: "+this.commonInfo.testIds),this.submit=!0;var t=this.getRowsFilterParam(),o=this.getColumnsFilterParam();if(this.submit){this.dataLoading=!0;var n={dbReplicationIds:this.commonInfo.dbReplicationIds,srcMhaName:this.commonInfo.srcMhaName,dstMhaName:this.commonInfo.dstMhaName,dbName:this.commonInfo.dbName,tableName:this.commonInfo.tableName,rowsFilterCreateParam:t,columnsFilterCreateParam:o};this.axios.post("/api/drc/v2/config/dbReplications",n).then((function(t){e.dataLoading=!1,1===t.data.status?e.$Message.error({content:"提交失败! "+t.data.message,duration:2}):(e.update=!0,e.show=!0,e.$Message.success("提交成功！"))}))}},checkMysqlTablesInSrcMha:function(){this.nameFilterCheck.current=1,this.getCommonColumns(),this.checkMySqlTables(this.commonInfo.srcMhaName,this.commonInfo.dbName+"\\."+this.commonInfo.tableName)},checkMySqlTables:function(e,t){var o=this;console.log("nameFilter:"+t),null==t&&(t=""),this.tableLoading=!0,this.axios.get("/api/drc/v2/mysql/preCheckMySqlTables?mha="+e+"&nameFilter="+t).then((function(e){o.tableLoading=!1,o.commonInfo.tableData=e.data.data,o.commonInfo.tableData.length<10?o.tableHeight=40*(o.commonInfo.tableData.length+1):o.tableHeight=440}))},handleChangeSize:function(e){this.nameFilterCheck.size=e},getRowsFilterParam:function(){if(!this.formItem.switch.rowsFilter)return null;if(this.useTripUdlOrUidMode){if(!this.hasUidColumn&&!this.hasUdlColumn)return this.$Message.warning("uid 与 uld字段不能同时为空！"),void(this.submit=!1);if(this.fillContextByRegion?this.rowsFilterConfig.context=this.configInTripUid.regionsChosen.join(","):this.rowsFilterConfig.context="//filter by config",this.fillContextByRegion&&(""===this.rowsFilterConfig.context||void 0===this.rowsFilterConfig.context||"//filter by config"===this.rowsFilterConfig.context))return this.$Message.warning("context 不能为空！"),void(this.submit=!1)}if(""!==this.rowsFilterConfig.mode&&void 0!==this.rowsFilterConfig.mode&&(0!==this.rowsFilterConfig.columns.length||0!==this.rowsFilterConfig.udlColumns.length)){var e={dbName:this.dbName,tableName:this.tableName,mode:this.rowsFilterConfig.mode,columns:0===this.rowsFilterConfig.columns.length?null:this.rowsFilterConfig.columns,udlColumns:0===this.rowsFilterConfig.udlColumns.length?null:this.rowsFilterConfig.udlColumns,drcStrategyId:0!==this.rowsFilterConfig.udlColumns.length||this.useCustomSoaMode?this.rowsFilterConfig.drcStrategyId:null,routeStrategyId:this.rowsFilterConfig.routeStrategyId,illegalArgument:this.rowsFilterConfig.illegalArgument,fetchMode:this.rowsFilterConfig.fetchMode,context:""===this.rowsFilterConfig.context?null:this.rowsFilterConfig.context};return e}this.$Message.warning("缺少行过滤配置 禁止提交"),this.submit=!1},getRowsFilterConfig:function(){var e=this;this.axios.get("/api/drc/v2/config/rowsFilter?dbReplicationId="+this.commonInfo.dbReplicationId).then((function(t){if(1===t.data.status)e.$Message.error("查询行过滤配置失败!");else{var o=t.data.data;null==o||(e.formItem.switch.rowsFilter=!0,e.rowsFilterConfig.context=o.context,e.rowsFilterConfig.mode=o.mode,e.useTripUdlOrUidMode?e.configInTripUid.regionsChosen=o.context.split(","):e.configInTripUid={regionsChosen:[]},e.rowsFilterConfig.columns=null===o.columns?[]:o.columns,null!==o.udlColumns&&(e.rowsFilterConfig.udlColumns=o.udlColumns),e.rowsFilterConfig.drcStrategyId=0===o.drcStrategyId?null:o.drcStrategyId,e.rowsFilterConfig.routeStrategyId=o.routeStrategyId,e.rowsFilterConfig.illegalArgument=o.illegalArgument,e.rowsFilterConfig.fetchMode=o.fetchMode)}}))},getCommonColumns:function(){var e=this;this.axios.get("/api/drc/v2/mysql/commonColumns?&mhaName="+this.commonInfo.srcMhaName+"&namespace="+this.commonInfo.dbName+"&name="+this.commonInfo.tableName).then((function(t){1===t.data.status?(e.$Message.error("查询公共列名失败，请手动添加！"),e.columnsForChose=[]):(console.log(t.data.data),e.columnsForChose=t.data.data,0===e.columnsForChose.length&&e.$Message.warning("查询无公共字段！"))}))},fetchModeChange:function(){1===this.rowsFilterConfig.fetchMode||3===this.rowsFilterConfig.fetchMode?this.rowsFilterConfig.illegalArgument=!0:this.rowsFilterConfig.illegalArgument=!1},getColumnsFilterParam:function(){if(this.formItem.switch.columnsFilter){var e={mode:this.columnsFilterConfig.mode,columns:this.columnsFilterConfig.columns};return e}return null},getColumnsFilterConfig:function(){var e=this;this.axios.get("/api/drc/v2/config/columnsFilter?dbReplicationId="+this.commonInfo.dbReplicationId).then((function(t){if(1===t.data.status)e.$Message.error("查询字段过滤配置失败!");else{var o=t.data.data;null==o||(e.columnsFilterConfig.mode=o.mode,e.columnsFilterConfig.columns=o.columns,e.formItem.switch.columnsFilter=!0)}}))},contains:function(e,t){var o=e.length;while(o--)if(e[o]===t)return!0;return!1},handleCreateUDLColumn:function(e){var t=this;this.showMsg=!1,"无UDL"===e||this.contains(this.columnsForChose,e)?alert("已有项禁止创建"):""!==e&&void 0!==e&&null!==e?this.axios.get("/api/drc/v2/mysql//columnCheck?mhaName="+this.commonInfo.srcMhaName+"&namespace="+this.commonInfo.dbName+"&name="+this.commonInfo.tableName+"&column="+e).then((function(o){if(1===o.data.status)t.$Message.error("查询字段:"+e+"失败！"+o.data.data),t.columnsForChose.push(e);else{var n=o.data.data;0!==n.length&&(t.showMsg=!0,t.title="以下表无字段"+e,t.message=n),t.columnsForChose.push(e)}})):alert("字段不能为空")},handleCreateColumn:function(e){this.contains(this.columnsForChose,e)?alert("已有项禁止创建"):""!==e&&void 0!==e&&null!==e?this.columnsForChose.push(e):alert("字段不能为空")},handleCreateSoaServiceCode:function(e){this.contains(this.rowsFilterConfig.serviceCodeForChose,e)?alert("已有项禁止创建"):""!==e&&void 0!==e&&null!==e&&0!==e?this.rowsFilterConfig.serviceCodeForChose.push(e):alert("serviceCode不能为空")},handleCreateSoaServiceName:function(e){this.contains(this.rowsFilterConfig.serviceNameForChose,e)?alert("已有项禁止创建"):""!==e&&void 0!==e&&null!==e?this.rowsFilterConfig.serviceNameForChose.push(e):alert("serviceName不能为空")},notice:function(){this.batchUpdate&&void 0!==this.commonInfo.dbReplicationIds&&this.$Message.info("共选中"+this.commonInfo.dbReplicationIds.length+"行")},init:function(){this.notice(),void 0!==this.commonInfo.dbReplicationId&&(this.getRowsFilterConfig(),this.getColumnsFilterConfig())}},computed:{dataWithPage:function(){var e=this.commonInfo.tableData,t=this.nameFilterCheck.current*this.nameFilterCheck.size-this.nameFilterCheck.size,o=t+this.nameFilterCheck.size;return Object(i["a"])(e).slice(t,o)},useTripUdlOrUidMode:function(){return[this.constants.filterMode.TRIP_UDL,this.constants.filterMode.TRIP_UDL_UID].includes(this.rowsFilterConfig.mode)},useCustomSoaMode:function(){return[this.constants.filterMode.CUSTOM_SOA].includes(this.rowsFilterConfig.mode)},hasUdlColumn:function(){return 0!==this.rowsFilterConfig.udlColumns.length},fillContextByRegion:function(){return this.rowsFilterConfig.fetchMode===this.constants.fetchMode.RPC},hasUidColumn:function(){return 0!==this.rowsFilterConfig.columns.length},showUdlConfigDetail:function(){return this.rowsFilterConfig.mode===this.constants.filterMode.TRIP_UDL_UID||this.hasUdlLegalConfig||!this.hasUidLegalConfig},showUidConfigDetail:function(){return this.rowsFilterConfig.mode===this.constants.filterMode.TRIP_UDL_UID||this.hasUidLegalConfig||!this.hasUdlLegalConfig},hasUdlLegalConfig:function(){return 0!==this.rowsFilterConfig.udlColumns.length&&null!=this.rowsFilterConfig.drcStrategyId&&this.rowsFilterConfig.drcStrategyId>0},hasUidLegalConfig:function(){return this.hasUidColumn}},created:function(){var e=this;this.axios.get("/api/drc/v2/permission/meta/mhaReplication/modify").then((function(t){if(403!==t.data.status){var o=[];void 0!==e.$route.query.dbReplicationIds&&(o=JSON.parse(e.$route.query.dbReplicationIds)),console.log("dbReplicationIds:"+o),e.commonInfo={srcMhaName:e.$route.query.srcMhaName,srcMhaId:e.$route.query.srcMhaId,dstMhaName:e.$route.query.dstMhaName,srcDc:e.$route.query.srcDc,dstDc:e.$route.query.dstDc,dbName:e.$route.query.dbName,tableName:e.$route.query.tableName,dbReplicationId:e.$route.query.dbReplicationId,dbReplicationIds:o,tableData:[]},e.update=!0===e.$route.query.update||"true"===e.$route.query.update,e.batchUpdate=!0===e.$route.query.batchUpdate||"true"===e.$route.query.batchUpdate,e.show=!0===e.$route.query.show||"true"===e.$route.query.show;var n=void 0!==e.commonInfo.dbName&&void 0!==e.commonInfo.tableName;n&&e.checkMysqlTablesInSrcMha(),console.log("commonInfo"),console.log(e.commonInfo),e.init()}else e.$router.push("/nopermission")}))}}),a=s,l=o("2877"),c=Object(l["a"])(a,n,r,!1,null,null,null);t["default"]=c.exports},"06c5":function(e,t,o){"use strict";o.d(t,"a",(function(){return r}));o("a630"),o("fb6a"),o("b0c0"),o("d3b7"),o("ac1f"),o("00b4"),o("25f0"),o("3ca3");var n=o("6b75");function r(e,t){if(e){if("string"==typeof e)return Object(n["a"])(e,t);var o={}.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?Object(n["a"])(e,t):void 0}}},"107c":function(e,t,o){"use strict";var n=o("d039"),r=o("cfe9"),i=r.RegExp;e.exports=n((function(){var e=i("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},2532:function(e,t,o){"use strict";var n=o("23e7"),r=o("e330"),i=o("5a34"),s=o("1d80"),a=o("577e"),l=o("ab13"),c=r("".indexOf);n({target:"String",proto:!0,forced:!l("includes")},{includes:function(e){return!!~c(a(s(this)),a(i(e)),arguments.length>1?arguments[1]:void 0)}})},"25f0":function(e,t,o){"use strict";var n=o("5e77").PROPER,r=o("cb2d"),i=o("825a"),s=o("577e"),a=o("d039"),l=o("90d8"),c="toString",u=RegExp.prototype,d=u[c],m=a((function(){return"/a/b"!==d.call({source:"a",flags:"b"})})),f=n&&d.name!==c;(m||f)&&r(u,c,(function(){var e=i(this),t=s(e.source),o=s(l(e));return"/"+t+"/"+o}),{unsafe:!0})},2909:function(e,t,o){"use strict";o.d(t,"a",(function(){return l}));var n=o("6b75");function r(e){if(Array.isArray(e))return Object(n["a"])(e)}o("a4d3"),o("e01a"),o("d28b"),o("a630"),o("d3b7"),o("3ca3"),o("ddb0");function i(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}var s=o("06c5");o("d9e2");function a(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e){return r(e)||i(e)||Object(s["a"])(e)||a()}},"408a":function(e,t,o){"use strict";var n=o("e330");e.exports=n(1..valueOf)},"44e7":function(e,t,o){"use strict";var n=o("861d"),r=o("c6b6"),i=o("b622"),s=i("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[s])?!!t:"RegExp"===r(e))}},"4df4":function(e,t,o){"use strict";var n=o("0366"),r=o("c65b"),i=o("7b0b"),s=o("9bdd"),a=o("e95a"),l=o("68ee"),c=o("07fa"),u=o("8418"),d=o("9a1f"),m=o("35a1"),f=Array;e.exports=function(e){var t=i(e),o=l(this),h=arguments.length,g=h>1?arguments[1]:void 0,p=void 0!==g;p&&(g=n(g,h>2?arguments[2]:void 0));var C,b,I,v,F,w,y=m(t),x=0;if(!y||this===f&&a(y))for(C=c(t),b=o?new this(C):f(C);C>x;x++)w=p?g(t[x],x):t[x],u(b,x,w);else for(b=o?new this:[],v=d(t,y),F=v.next;!(I=r(F,v)).done;x++)w=p?s(v,g,[I.value,x],!0):I.value,u(b,x,w);return b.length=x,b}},5899:function(e,t,o){"use strict";e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,o){"use strict";var n=o("e330"),r=o("1d80"),i=o("577e"),s=o("5899"),a=n("".replace),l=RegExp("^["+s+"]+"),c=RegExp("(^|[^"+s+"])["+s+"]+$"),u=function(e){return function(t){var o=i(r(t));return 1&e&&(o=a(o,l,"")),2&e&&(o=a(o,c,"$1")),o}};e.exports={start:u(1),end:u(2),trim:u(3)}},"5a34":function(e,t,o){"use strict";var n=o("44e7"),r=TypeError;e.exports=function(e){if(n(e))throw new r("The method doesn't accept regular expressions");return e}},"6b75":function(e,t,o){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=Array(t);o<t;o++)n[o]=e[o];return n}o.d(t,"a",(function(){return n}))},"90d8":function(e,t,o){"use strict";var n=o("c65b"),r=o("1a2d"),i=o("3a9b"),s=o("ad6d"),a=RegExp.prototype;e.exports=function(e){var t=e.flags;return void 0!==t||"flags"in a||r(e,"flags")||!i(a,e)?t:n(s,e)}},9263:function(e,t,o){"use strict";var n=o("c65b"),r=o("e330"),i=o("577e"),s=o("ad6d"),a=o("9f7f"),l=o("5692"),c=o("7c73"),u=o("69f3").get,d=o("fce3"),m=o("107c"),f=l("native-string-replace",String.prototype.replace),h=RegExp.prototype.exec,g=h,p=r("".charAt),C=r("".indexOf),b=r("".replace),I=r("".slice),v=function(){var e=/a/,t=/b*/g;return n(h,e,"a"),n(h,t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),F=a.BROKEN_CARET,w=void 0!==/()??/.exec("")[1],y=v||w||F||d||m;y&&(g=function(e){var t,o,r,a,l,d,m,y=this,x=u(y),S=i(e),_=x.raw;if(_)return _.lastIndex=y.lastIndex,t=n(g,_,S),y.lastIndex=_.lastIndex,t;var M=x.groups,N=F&&y.sticky,k=n(s,y),R=y.source,U=0,D=S;if(N&&(k=b(k,"y",""),-1===C(k,"g")&&(k+="g"),D=I(S,y.lastIndex),y.lastIndex>0&&(!y.multiline||y.multiline&&"\n"!==p(S,y.lastIndex-1))&&(R="(?: "+R+")",D=" "+D,U++),o=new RegExp("^(?:"+R+")",k)),w&&(o=new RegExp("^"+R+"$(?!\\s)",k)),v&&(r=y.lastIndex),a=n(h,N?o:y,D),N?a?(a.input=I(a.input,U),a[0]=I(a[0],U),a.index=y.lastIndex,y.lastIndex+=a[0].length):y.lastIndex=0:v&&a&&(y.lastIndex=y.global?a.index+a[0].length:r),w&&a&&a.length>1&&n(f,a[0],o,(function(){for(l=1;l<arguments.length-2;l++)void 0===arguments[l]&&(a[l]=void 0)})),a&&M)for(a.groups=d=c(null),l=0;l<M.length;l++)m=M[l],d[m[0]]=a[m[1]];return a}),e.exports=g},"9bdd":function(e,t,o){"use strict";var n=o("825a"),r=o("2a62");e.exports=function(e,t,o,i){try{return i?t(n(o)[0],o[1]):t(o)}catch(s){r(e,"throw",s)}}},"9f7f":function(e,t,o){"use strict";var n=o("d039"),r=o("cfe9"),i=r.RegExp,s=n((function(){var e=i("a","y");return e.lastIndex=2,null!==e.exec("abcd")})),a=s||n((function(){return!i("a","y").sticky})),l=s||n((function(){var e=i("^r","gy");return e.lastIndex=2,null!==e.exec("str")}));e.exports={BROKEN_CARET:l,MISSED_STICKY:a,UNSUPPORTED_Y:s}},a15b:function(e,t,o){"use strict";var n=o("23e7"),r=o("e330"),i=o("44ad"),s=o("fc6a"),a=o("a640"),l=r([].join),c=i!==Object,u=c||!a("join",",");n({target:"Array",proto:!0,forced:u},{join:function(e){return l(s(this),void 0===e?",":e)}})},a630:function(e,t,o){"use strict";var n=o("23e7"),r=o("4df4"),i=o("1c7e"),s=!i((function(e){Array.from(e)}));n({target:"Array",stat:!0,forced:s},{from:r})},a640:function(e,t,o){"use strict";var n=o("d039");e.exports=function(e,t){var o=[][e];return!!o&&n((function(){o.call(null,t||function(){return 1},1)}))}},a9e3:function(e,t,o){"use strict";var n=o("23e7"),r=o("c430"),i=o("83ab"),s=o("cfe9"),a=o("428f"),l=o("e330"),c=o("94ca"),u=o("1a2d"),d=o("7156"),m=o("3a9b"),f=o("d9b5"),h=o("c04e"),g=o("d039"),p=o("241c").f,C=o("06cf").f,b=o("9bf2").f,I=o("408a"),v=o("58a8").trim,F="Number",w=s[F],y=a[F],x=w.prototype,S=s.TypeError,_=l("".slice),M=l("".charCodeAt),N=function(e){var t=h(e,"number");return"bigint"==typeof t?t:k(t)},k=function(e){var t,o,n,r,i,s,a,l,c=h(e,"number");if(f(c))throw new S("Cannot convert a Symbol value to a number");if("string"==typeof c&&c.length>2)if(c=v(c),t=M(c,0),43===t||45===t){if(o=M(c,2),88===o||120===o)return NaN}else if(48===t){switch(M(c,1)){case 66:case 98:n=2,r=49;break;case 79:case 111:n=8,r=55;break;default:return+c}for(i=_(c,2),s=i.length,a=0;a<s;a++)if(l=M(i,a),l<48||l>r)return NaN;return parseInt(i,n)}return+c},R=c(F,!w(" 0o1")||!w("0b1")||w("+0x1")),U=function(e){return m(x,e)&&g((function(){I(e)}))},D=function(e){var t=arguments.length<1?0:w(N(e));return U(this)?d(Object(t),this,D):t};D.prototype=x,R&&!r&&(x.constructor=D),n({global:!0,constructor:!0,wrap:!0,forced:R},{Number:D});var $=function(e,t){for(var o,n=i?p(t):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),r=0;n.length>r;r++)u(t,o=n[r])&&!u(e,o)&&b(e,o,C(t,o))};r&&y&&$(a[F],y),(R||r)&&$(a[F],w)},ab13:function(e,t,o){"use strict";var n=o("b622"),r=n("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(o){try{return t[r]=!1,"/./"[e](t)}catch(n){}}return!1}},ac1f:function(e,t,o){"use strict";var n=o("23e7"),r=o("9263");n({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},ad6d:function(e,t,o){"use strict";var n=o("825a");e.exports=function(){var e=n(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},fce3:function(e,t,o){"use strict";var n=o("d039"),r=o("cfe9"),i=r.RegExp;e.exports=n((function(){var e=i(".","s");return!(e.dotAll&&e.test("\n")&&"s"===e.flags)}))}}]);
//# sourceMappingURL=chunk-4473b73e.ed932a8b.js.map