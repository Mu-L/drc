(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0f00cd"],{"9b5c":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.hasResp?a("Alert",{staticStyle:{width:"65%","margin-left":"250px"},attrs:{type:t.status,"show-icon":""}},[t._v(" "+t._s(t.title)+" "),a("span",{attrs:{slot:"desc"},domProps:{innerHTML:t._s(t.message)},slot:"desc"})]):t._e(),a("Form",{ref:"build",staticStyle:{"margin-top":"50px"},attrs:{model:t.build,rules:t.ruleBuild,"label-width":250}},[a("FormItem",{staticStyle:{width:"600px"},attrs:{label:"源Mha集群名",prop:"srcMhaName"}},[a("Input",{attrs:{placeholder:"请输入源集群名"},on:{input:t.changeSrcMha},model:{value:t.build.srcMhaName,callback:function(e){t.$set(t.build,"srcMhaName",e)},expression:"build.srcMhaName"}})],1),a("FormItem",{attrs:{label:"源集群机房区域",prop:"srcDc"}},[a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"选择机房区域"},on:{input:t.changeSrcDc},model:{value:t.build.srcDc,callback:function(e){t.$set(t.build,"srcDc",e)},expression:"build.srcDc"}},t._l(t.build.drcZoneList,(function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1),a("FormItem",{attrs:{label:"源Mha tag",prop:"srcTag"}},[a("Select",{staticStyle:{width:"200px"},attrs:{filterable:"","allow-create":"",placeholder:"选择tag"},on:{"on-create":t.handleCreateTag},model:{value:t.build.srcTag,callback:function(e){t.$set(t.build,"srcTag",e)},expression:"build.srcTag"}},t._l(t.tagList,(function(e){return a("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])})),1)],1),a("FormItem",{staticStyle:{width:"600px"},attrs:{label:"目标Mha集群名",prop:"dstMhaName"}},[a("Input",{attrs:{placeholder:"请输入目标集群名"},on:{input:t.changeDstMha},model:{value:t.build.dstMhaName,callback:function(e){t.$set(t.build,"dstMhaName",e)},expression:"build.dstMhaName"}})],1),a("FormItem",{attrs:{label:"目标集群机房区域",prop:"dstDc"}},[a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"选择机房区域"},on:{input:t.changeDstDc},model:{value:t.build.dstDc,callback:function(e){t.$set(t.build,"dstDc",e)},expression:"build.dstDc"}},t._l(t.build.drcZoneList,(function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1),a("FormItem",{attrs:{label:"目标Mha tag",prop:"dstTag"}},[a("Select",{staticStyle:{width:"200px"},attrs:{filterable:"","allow-create":"",placeholder:"选择tag"},on:{"on-create":t.handleCreateTag},model:{value:t.build.dstTag,callback:function(e){t.$set(t.build,"dstTag",e)},expression:"build.dstTag"}},t._l(t.tagList,(function(e){return a("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])})),1)],1),a("FormItem",{staticStyle:{width:"600px"},attrs:{label:"BU名",prop:"buName"}},[a("Input",{attrs:{placeholder:"请输入BU名，自动绑定route策略"},on:{input:t.changeBu},model:{value:t.build.buName,callback:function(e){t.$set(t.build,"buName",e)},expression:"build.buName"}})],1),a("FormItem",[a("Button",{on:{click:function(e){return t.handleReset("build")}}},[t._v("重置")]),a("Button",{staticStyle:{"margin-left":"150px"},attrs:{type:"primary"},on:{click:function(e){return t.changeModal("build")}}},[t._v("新建DRC同步集群")]),a("Modal",{attrs:{title:"创建DRC"},on:{"on-ok":function(e){return t.postBuild("build")}},model:{value:t.build.modal,callback:function(e){t.$set(t.build,"modal",e)},expression:"build.modal"}},[a("p",[t._v('确定创建新DRC "'+t._s(t.build.srcMhaName)+"("+t._s(t.build.srcDc)+')" -> "'+t._s(t.build.dstMhaName)+"("+t._s(t.build.dstDc)+')" 吗？')])])],1)],1)],1)},i=[],l={name:"mhaBuild",props:{srcMhaName:String,dstMhaName:String,srcDc:String,dstDc:String},data:function(){return{status:"",title:"",message:"",hasResp:!1,build:{modal:!1,srcMhaName:this.srcMhaName,dstMhaName:this.dstMhaName,buName:"",srcDc:this.srcDc,dstDc:this.dstDc,drcZoneList:this.constant.dcList,srcTag:"COMMON",dstTag:"COMMON"},tagList:this.constant.tagList,ruleBuild:{srcMhaName:[{required:!0,message:"源集群名不能为空",trigger:"blur"}],dstMhaName:[{required:!0,message:"目标集群名不能为空",trigger:"blur"}],srcDc:[{required:!0,message:"选择源集群区域",trigger:"change"}],dstDc:[{required:!0,message:"选择目标集群区域",trigger:"change"}],buName:[{required:!0,message:"BU名不能为空",trigger:"blur"}]}}},methods:{postBuild:function(t){var e=this,a=this;a.$refs[t].validate((function(t){t?(e.hasResp=!1,a.axios.post("/api/drc/v2/config/mha",{buName:e.build.buName,srcMhaName:e.build.srcMhaName,dstMhaName:e.build.dstMhaName,srcDc:e.build.srcDc,dstDc:e.build.dstDc,srcTag:e.build.srcTag,dstTag:e.build.dstTag}).then((function(t){a.hasResp=!0,0===t.data.status?(a.status="success",a.title="集群创建完成!",a.message=t.data.message):(a.status="error",a.title="集群创建失败!",a.message=t.data.message)}))):a.$Message.error("仍有必填项未填!")}))},handleReset:function(t){this.$refs[t].resetFields()},changeSrcMha:function(){this.$emit("srcMhaNameChanged",this.build.srcMhaName)},changeDstMha:function(){this.$emit("dstMhaNameChanged",this.build.dstMhaName)},changeSrcDc:function(){this.$emit("srcDcChanged",this.build.srcDc)},changeDstDc:function(){this.$emit("dstDcChanged",this.build.dstDc)},changeBu:function(){this.$emit("buNameChanged",this.build.buName)},changeModal:function(t){var e=this;this.$refs[t].validate((function(t){t?e.build.modal=!0:e.$Message.error("仍有必填项未填!")}))},handleCreateTag:function(t){this.constant.tagList.push(t)}}},r=l,c=a("2877"),d=Object(c["a"])(r,s,i,!1,null,"1d00a7d6",null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-2d0f00cd.0d6e87cf.js.map