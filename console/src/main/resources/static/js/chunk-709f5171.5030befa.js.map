{"version":3,"sources":["webpack:///./src/views/handleConflict.vue?3fc4","webpack:///./src/views/handleConflict.vue?8050","webpack:///src/views/handleConflict.vue","webpack:///./src/views/handleConflict.vue?7d89","webpack:///./src/views/handleConflict.vue?a88a"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","isFather","fatherMenu","style","margin","position","_v","staticClass","padding","background","zIndex","height","slot","getConflictLogStatus","_e","lastResult","commit","success","error","_s","isDiffTransaction","diffTransaction","srcDc","_l","srcTableItem","index","key","staticStyle","column","record","destDc","destTableItem","on","$event","refreshEditor","ref","cmOptions","model","value","callback","$$v","rawSqlList","expression","rawSqlExecutedResultList","destCurrentRecordList","conflictHandleSqlList","conflictHandleSqlExecutedResultList","operateCmOptions","operateCode1","marginLeft","SubmitSrcSql","operateCode2","SubmitDestSql","okSubmitSrcSql","cancelSubmitSrcSql","$set","okSubmitDestSql","cancelSubmitDestSql","okSubmitResult","operationStatus","operationMsg","staticRenderFns","component"],"mappings":"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CqC,IAAI,sBAAsBnC,MAAM,CAAC,QAAUN,EAAI0C,WAAWC,MAAM,CAACC,MAAO5C,EAAgB,aAAE6C,SAAS,SAAUC,GAAM9C,EAAIyD,aAAaX,GAAKE,WAAW,mBAAmB,IAAI,IAAI,GAAG5C,EAAG,QAAQ,CAACE,MAAM,CAAC,MAAQ,OAAO,MAAQ,UAAUgC,GAAG,CAAC,QAAQtC,EAAIgE,eAAe,YAAYhE,EAAIgE,gBAAgBrB,MAAM,CAACC,MAAO3C,KAAiB,aAAE4C,SAAS,SAAUC,GAAM9C,EAAI6D,KAAK5D,KAAM,eAAgB6C,IAAME,WAAW,sBAAsB,CAAC5C,EAAG,OAAO,CAACA,EAAG,WAAW,CAACE,MAAM,CAAC,MAAQ,SAAS,CAACF,EAAG,QAAQ,CAACE,MAAM,CAAC,KAAOL,KAAKgE,gBAAgB,YAAY,KAAK,CAACjE,EAAIY,GAAG,QAAQZ,EAAIyB,GAAGxB,KAAKiE,kBAAkB,IAAI,IAAI,IAAI,MAAM,IACtjMC,EAAkB,G,oCCyItB,G,oBAAA,CACA,qBACA,YACA,4BAEA,gBACA,OACA,wBACA,qBACA,mBACA,aACA,iBACA,kBACA,gBACA,kBACA,cACA,YACA,sBACA,mBACA,gBACA,gBACA,gBACA,iBACA,cACA,4BACA,yBACA,yBACA,uCACA,cACA,SACA,UACA,cACA,eACA,gBACA,iBACA,gBACA,gBACA,WACA,SACA,oBACA,iBACA,gBACA,WACA,YACA,eACA,gBAEA,kBACA,SACA,oBACA,iBACA,gBACA,kBAIA,SACA,4BACA,WACA,0EACA,kBACA,kBACA,0BAEA,yBACA,gCACA,eACA,oCACA,gEACA,0DACA,0DACA,sFACA,oCACA,0BACA,4BACA,oCACA,sCACA,qCACA,uCACA,0CACA,4CACA,gDACA,kEACA,2BACA,6CAIA,mCACA,uBACA,kDACA,GACA,sBAEA,oLACA,oBACA,yDACA,CACA,4CACA,sBACA,uBACA,qBAEA,kBACA,8BACA,kBACA,0BAEA,+BAEA,OACA,4DAjBA,IAmBA,8BACA,sBAEA,0BACA,qBACA,qBACA,sBACA,qBACA,yBAEA,oCACA,uBACA,mDACA,GACA,uBAEA,qLACA,oBACA,yDACA,CACA,4CACA,uBACA,sBACA,qBAEA,kBACA,8BACA,kBACA,0BAEA,+BAEA,OACA,4DAjBA,IAmBA,+BACA,uBAEA,oCACA,uBACA,iCACA,iCACA,iCACA,iCACA,mCACA,IACA,mCAGA,mBACA,2BC7SwV,I,wBCQpVC,EAAY,eACd,EACArE,EACAoE,GACA,EACA,KACA,KACA,MAIa,aAAAC,E","file":"js/chunk-709f5171.5030befa.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./handleConflict.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('base-component',{attrs:{\"isFather\":_vm.isFather,\"subMenuName\":['1'],\"fatherMenu\":_vm.fatherMenu}},[_c('Breadcrumb',{style:({margin: '15px 0 15px 185px', position: 'fixed'})},[_c('BreadcrumbItem',{attrs:{\"to\":\"/home\"}},[_vm._v(\"首页\")]),_c('BreadcrumbItem',{attrs:{\"to\":\"/monitor\"}},[_vm._v(\"冲突日志\")]),_c('BreadcrumbItem',[_vm._v(\"当前结果及自助处理\")])],1),_c('Content',{staticClass:\"content\",style:({padding: '10px', background: '#fff', margin: '50px 0 1px 185px', zIndex: '1'})},[_c('div',{style:({padding: '1px 1px',height: '100%'})},[_c('Card',[_c('p',{attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(\" 自动冲突处理结果 \")]),(_vm.getConflictLogStatus === 1)?_c('div',{staticClass:\"ivu-list-item-meta-title\"},[_vm._v(\" getCurrentConflictLog occur exception \")]):_vm._e(),_c('div',{staticClass:\"ivu-list-item-meta-title\"},[_vm._v(\"事务提交结果： \"),_c('Tag',{attrs:{\"color\":_vm.lastResult==_vm.commit?_vm.success:_vm.error,\"size\":\"medium\"}},[_vm._v(_vm._s(_vm.lastResult))])],1),_c('div',{staticClass:\"ivu-list-item-meta-title\"},[_vm._v(\"所有机房当前冲突事务记录： \"),_c('Tag',{attrs:{\"color\":_vm.isDiffTransaction==false?_vm.success:_vm.error,\"size\":\"medium\"}},[_vm._v(_vm._s(_vm.diffTransaction))])],1),_c('Divider'),_c('div',{staticClass:\"ivu-list-item-meta-title\"},[_vm._v(\"源机房当前值(\"+_vm._s(_vm.srcDc)+\")\")]),_vm._l((_vm.srcTableItems),function(srcTableItem,index){return _c('Table',{key:index,staticStyle:{\"margin-top\":\"20px\"},attrs:{\"columns\":srcTableItem.column,\"data\":srcTableItem.record,\"size\":\"small\"}})}),_c('Divider'),_c('div',{staticClass:\"ivu-list-item-meta-title\"},[_vm._v(\"目标机房当前值(\"+_vm._s(_vm.destDc)+\")\")]),_vm._l((_vm.destTableItems),function(destTableItem,index){return _c('Table',{key:index,staticStyle:{\"margin-top\":\"20px\"},attrs:{\"columns\":destTableItem.column,\"data\":destTableItem.record,\"size\":\"small\"}})})],2),_c('Divider'),_c('Collapse',[_c('div',{on:{\"click\":function($event){return _vm.refreshEditor()}}},[_c('Panel',{attrs:{\"name\":\"1\"},on:{\"click\":_vm.refreshEditor}},[_vm._v(\" 自动冲突处理流程 \"),_c('div',{attrs:{\"slot\":\"content\"},slot:\"content\"},[_c('div',{staticClass:\"ivu-list-item-meta-title\"},[_vm._v(\"原SQL\")]),_c('codemirror',{ref:\"cm1\",attrs:{\"options\":_vm.cmOptions},model:{value:(_vm.rawSqlList),callback:function ($$v) {_vm.rawSqlList=$$v},expression:\"rawSqlList\"}}),_c('Divider'),_c('div',{staticClass:\"ivu-list-item-meta-title\"},[_vm._v(\"原SQL处理结果\")]),_c('codemirror',{ref:\"cm2\",attrs:{\"options\":_vm.cmOptions},model:{value:(_vm.rawSqlExecutedResultList),callback:function ($$v) {_vm.rawSqlExecutedResultList=$$v},expression:\"rawSqlExecutedResultList\"}}),_c('Divider'),_c('div',{staticClass:\"ivu-list-item-meta-title\"},[_vm._v(\"冲突时Record\")]),_c('codemirror',{ref:\"cm3\",attrs:{\"options\":_vm.cmOptions},model:{value:(_vm.destCurrentRecordList),callback:function ($$v) {_vm.destCurrentRecordList=$$v},expression:\"destCurrentRecordList\"}}),_c('Divider'),_c('div',{staticClass:\"ivu-list-item-meta-title\"},[_vm._v(\"冲突处理SQL\")]),_c('codemirror',{ref:\"cm4\",attrs:{\"options\":_vm.cmOptions},model:{value:(_vm.conflictHandleSqlList),callback:function ($$v) {_vm.conflictHandleSqlList=$$v},expression:\"conflictHandleSqlList\"}}),_c('Divider'),_c('div',{staticClass:\"ivu-list-item-meta-title\"},[_vm._v(\"冲突处理SQL结果\")]),_c('codemirror',{ref:\"cm5\",attrs:{\"options\":_vm.cmOptions},model:{value:(_vm.conflictHandleSqlExecutedResultList),callback:function ($$v) {_vm.conflictHandleSqlExecutedResultList=$$v},expression:\"conflictHandleSqlExecutedResultList\"}})],1)])],1)]),_c('Divider'),_c('Card',[_c('p',{attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(\" 冲突自助处理 \")]),_c('Form',[_c('FormItem',[_c('div',{staticClass:\"ivu-list-item-meta-title\"},[_vm._v(\"源机房(\"+_vm._s(_vm.srcDc)+\")\")])]),_c('FormItem',{attrs:{\"label\":\"操作SQL\"}},[_c('codemirror',{attrs:{\"options\":_vm.operateCmOptions},model:{value:(_vm.operateCode1),callback:function ($$v) {_vm.operateCode1=$$v},expression:\"operateCode1\"}})],1)],1),_c('Button',{style:({marginLeft: '1000px'}),attrs:{\"type\":\"primary\"},on:{\"click\":_vm.SubmitSrcSql}},[_vm._v(\" 提交 \")]),_c('Divider'),_c('Form',[_c('FormItem',[_c('div',{staticClass:\"ivu-list-item-meta-title\"},[_vm._v(\"目标机房(\"+_vm._s(_vm.destDc)+\")\")])]),_c('FormItem',{attrs:{\"label\":\"操作SQL\"}},[_c('codemirror',{attrs:{\"options\":_vm.operateCmOptions},model:{value:(_vm.operateCode2),callback:function ($$v) {_vm.operateCode2=$$v},expression:\"operateCode2\"}})],1),_c('Button',{style:({marginLeft: '1000px'}),attrs:{\"type\":\"primary\"},on:{\"click\":_vm.SubmitDestSql}},[_vm._v(\" 提交 \")]),_c('Divider')],1)],1),_c('Modal',{attrs:{\"title\":\"执行SQL\",\"width\":\"1000px\"},on:{\"on-ok\":_vm.okSubmitSrcSql,\"on-cancel\":_vm.cancelSubmitSrcSql},model:{value:(this.submitSrcSql),callback:function ($$v) {_vm.$set(this, \"submitSrcSql\", $$v)},expression:\"this.submitSrcSql\"}},[_c('Form',[_c('FormItem',{attrs:{\"label\":\"执行机房\"}},[_c('Tag',{attrs:{\"color\":\"blue\"}},[_vm._v(_vm._s(_vm.srcDc))])],1),_c('FormItem',{attrs:{\"label\":\"执行SQL\"}},[_c('codemirror',{ref:\"submitSrcSqlEditor\",attrs:{\"options\":_vm.cmOptions},model:{value:(_vm.operateCode1),callback:function ($$v) {_vm.operateCode1=$$v},expression:\"operateCode1\"}})],1)],1)],1),_c('Modal',{attrs:{\"title\":\"执行SQL\",\"width\":\"1000px\"},on:{\"on-ok\":_vm.okSubmitDestSql,\"on-cancel\":_vm.cancelSubmitDestSql},model:{value:(this.submitDestSql),callback:function ($$v) {_vm.$set(this, \"submitDestSql\", $$v)},expression:\"this.submitDestSql\"}},[_c('Form',[_c('FormItem',{attrs:{\"label\":\"执行机房\"}},[_c('Tag',{attrs:{\"color\":\"blue\"}},[_vm._v(_vm._s(_vm.destDc))])],1),_c('FormItem',{attrs:{\"label\":\"执行SQL\"}},[_c('codemirror',{ref:\"submitDestSqlEditor\",attrs:{\"options\":_vm.cmOptions},model:{value:(_vm.operateCode2),callback:function ($$v) {_vm.operateCode2=$$v},expression:\"operateCode2\"}})],1)],1)],1),_c('Modal',{attrs:{\"title\":\"执行结果\",\"width\":\"1000px\"},on:{\"on-ok\":_vm.okSubmitResult,\"on-cancel\":_vm.okSubmitResult},model:{value:(this.submitResult),callback:function ($$v) {_vm.$set(this, \"submitResult\", $$v)},expression:\"this.submitResult\"}},[_c('Form',[_c('FormItem',{attrs:{\"label\":\"执行结果\"}},[_c('Alert',{attrs:{\"type\":this.operationStatus,\"show-icon\":\"\"}},[_vm._v(\"执行结果：\"+_vm._s(this.operationMsg))])],1)],1)],1)],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <base-component :isFather=\"isFather\" :subMenuName=\"['1']\" :fatherMenu=\"fatherMenu\">\n    <Breadcrumb :style=\"{margin: '15px 0 15px 185px', position: 'fixed'}\">\n      <BreadcrumbItem to=\"/home\">首页</BreadcrumbItem>\n      <BreadcrumbItem to=\"/monitor\">冲突日志</BreadcrumbItem>\n      <BreadcrumbItem>当前结果及自助处理</BreadcrumbItem>\n    </Breadcrumb>\n    <Content class=\"content\" :style=\"{padding: '10px', background: '#fff', margin: '50px 0 1px 185px', zIndex: '1'}\">\n      <div :style=\"{padding: '1px 1px',height: '100%'}\">\n        <Card>\n          <p slot=\"title\">\n            自动冲突处理结果\n          </p>\n          <div v-if=\"getConflictLogStatus === 1\" class=\"ivu-list-item-meta-title\">\n            getCurrentConflictLog occur exception\n          </div>\n          <div class=\"ivu-list-item-meta-title\">事务提交结果：\n            <Tag :color=\"lastResult==commit?success:error\" size=\"medium\">{{lastResult}}</Tag>\n          </div>\n          <div class=\"ivu-list-item-meta-title\">所有机房当前冲突事务记录：\n            <Tag :color=\"isDiffTransaction==false?success:error\" size=\"medium\">{{diffTransaction}}</Tag>\n          </div>\n          <Divider/>\n          <div class=\"ivu-list-item-meta-title\">源机房当前值({{srcDc}})</div>\n          <Table style=\"margin-top: 20px\" v-for=\"(srcTableItem, index) in srcTableItems\" :key=\"index\"\n                 :columns=\"srcTableItem.column\" :data=\"srcTableItem.record\" size=\"small\"></Table>\n          <Divider/>\n          <div class=\"ivu-list-item-meta-title\">目标机房当前值({{destDc}})</div>\n          <Table style=\"margin-top: 20px\" v-for=\"(destTableItem, index) in destTableItems\" :key=\"index\"\n                 :columns=\"destTableItem.column\" :data=\"destTableItem.record\" size=\"small\"></Table>\n        </Card>\n        <Divider/>\n        <Collapse>\n          <div @click=\"refreshEditor()\">\n            <Panel name=\"1\" @click=\"refreshEditor\">\n              自动冲突处理流程\n              <div slot=\"content\">\n                <div class=\"ivu-list-item-meta-title\">原SQL</div>\n                <codemirror ref=\"cm1\" v-model=\"rawSqlList\" :options=\"cmOptions\"\n                ></codemirror>\n                <Divider/>\n                <div class=\"ivu-list-item-meta-title\">原SQL处理结果</div>\n                <codemirror ref=\"cm2\" v-model=\"rawSqlExecutedResultList\" :options=\"cmOptions\"></codemirror>\n                <Divider/>\n                <div class=\"ivu-list-item-meta-title\">冲突时Record</div>\n                <codemirror ref=\"cm3\" v-model=\"destCurrentRecordList\" :options=\"cmOptions\"></codemirror>\n                <Divider/>\n                <div class=\"ivu-list-item-meta-title\">冲突处理SQL</div>\n                <codemirror ref=\"cm4\" v-model=\"conflictHandleSqlList\" :options=\"cmOptions\"></codemirror>\n                <Divider/>\n                <div class=\"ivu-list-item-meta-title\">冲突处理SQL结果</div>\n                <codemirror ref=\"cm5\" v-model=\"conflictHandleSqlExecutedResultList\" :options=\"cmOptions\"></codemirror>\n              </div>\n            </Panel>\n          </div>\n        </Collapse>\n        <Divider/>\n        <Card>\n          <p slot=\"title\">\n            冲突自助处理\n          </p>\n          <Form>\n            <FormItem>\n              <div class=\"ivu-list-item-meta-title\">源机房({{srcDc}})</div>\n            </FormItem>\n            <FormItem label=\"操作SQL\">\n              <codemirror v-model=\"operateCode1\" :options=\"operateCmOptions\"></codemirror>\n            </FormItem>\n          </Form>\n          <Button :style=\"{marginLeft: '1000px'}\" type=\"primary\" @click=\"SubmitSrcSql\">\n            提交\n          </Button>\n          <Divider/>\n          <Form>\n            <FormItem>\n              <div class=\"ivu-list-item-meta-title\">目标机房({{destDc}})</div>\n            </FormItem>\n            <FormItem label=\"操作SQL\">\n              <codemirror v-model=\"operateCode2\" :options=\"operateCmOptions\"></codemirror>\n            </FormItem>\n            <Button :style=\"{marginLeft: '1000px'}\" type=\"primary\" @click=\"SubmitDestSql\">\n              提交\n            </Button>\n            <Divider/>\n          </Form>\n        </Card>\n        <Modal\n          v-model=\"this.submitSrcSql\"\n          title=\"执行SQL\"\n          width=\"1000px\"\n          @on-ok=\"okSubmitSrcSql\"\n          @on-cancel=\"cancelSubmitSrcSql\">\n          <Form>\n            <FormItem label=\"执行机房\">\n              <Tag color=\"blue\">{{srcDc}}</Tag>\n            </FormItem>\n            <FormItem label=\"执行SQL\">\n              <codemirror ref=\"submitSrcSqlEditor\" v-model=\"operateCode1\" :options=\"cmOptions\"></codemirror>\n            </FormItem>\n          </Form>\n        </Modal>\n        <Modal\n          v-model=\"this.submitDestSql\"\n          title=\"执行SQL\"\n          width=\"1000px\"\n          @on-ok=\"okSubmitDestSql\"\n          @on-cancel=\"cancelSubmitDestSql\">\n          <Form>\n            <FormItem label=\"执行机房\">\n              <Tag color=\"blue\">{{destDc}}</Tag>\n            </FormItem>\n            <FormItem label=\"执行SQL\">\n              <codemirror ref=\"submitDestSqlEditor\" v-model=\"operateCode2\" :options=\"cmOptions\"></codemirror>\n            </FormItem>\n          </Form>\n        </Modal>\n        <Modal\n          v-model=\"this.submitResult\"\n          title=\"执行结果\"\n          width=\"1000px\"\n          @on-ok=\"okSubmitResult\"\n          @on-cancel=\"okSubmitResult\">\n          <Form>\n            <FormItem label=\"执行结果\">\n              <Alert :type=\"this.operationStatus\" show-icon>执行结果：{{ this.operationMsg }}</Alert>\n            </FormItem>\n          </Form>\n        </Modal>\n      </div>\n    </Content>\n  </base-component>\n</template>\n\n<script>\nimport { codemirror } from 'vue-codemirror'\nimport 'codemirror/theme/ambiance.css'\nimport 'codemirror/mode/sql/sql.js'\n\nexport default {\n  name: 'hadleConflict',\n  components: {\n    codemirror\n  },\n  data () {\n    return {\n      getConflictLogStatus: '',\n      isDiffTransaction: true,\n      diffTransaction: '',\n      collapse: '1',\n      srcTableItems: [],\n      destTableItems: [],\n      commit: 'commit',\n      success: 'success',\n      error: 'error',\n      isFather: true,\n      fatherMenu: '/monitor',\n      operationStatus: '',\n      operationMsg: '',\n      submitResult: false,\n      submitSrcSql: false,\n      submitDestSql: false,\n      rawSqlList: '',\n      rawSqlExecutedResultList: '',\n      destCurrentRecordList: '',\n      conflictHandleSqlList: '',\n      conflictHandleSqlExecutedResultList: '',\n      lastResult: '',\n      srcDc: '',\n      destDc: '',\n      srcMhaName: '',\n      destMhaName: '',\n      curSrcRecord: '',\n      curDestRecord: '',\n      operateCode1: '',\n      operateCode2: '',\n      cmOptions: {\n        value: '',\n        mode: 'text/x-mysql',\n        theme: 'ambiance',\n        lineWrapping: true,\n        height: 100,\n        readOnly: true,\n        lineNumbers: true,\n        autoRefresh: true\n      },\n      operateCmOptions: {\n        value: '',\n        mode: 'text/x-mysql',\n        theme: 'ambiance',\n        lineWrapping: true,\n        autoRefresh: true\n      }\n    }\n  },\n  methods: {\n    getCurrentRecord () {\n      const that = this\n      this.axios.get('/api/drc/v1/logs/record/conflicts/' + this.$route.query.id)\n        .then(res => {\n          if (res.data.status === 1) {\n            that.getConflictLogStatus = 1\n          } else {\n            that.getConflictLogStatus = 0\n            console.log('test record data')\n            console.log(res)\n            that.rawSqlList = res.data.data.rawSqlList\n            that.rawSqlExecutedResultList = res.data.data.rawSqlExecutedResultList\n            that.destCurrentRecordList = res.data.data.destCurrentRecordList\n            that.conflictHandleSqlList = res.data.data.conflictHandleSqlList\n            that.conflictHandleSqlExecutedResultList = res.data.data.conflictHandleSqlExecutedResultList\n            that.lastResult = res.data.data.lastResult\n            that.srcDc = res.data.data.srcDc\n            that.destDc = res.data.data.destDc\n            that.srcMhaName = res.data.data.srcMhaName\n            that.destMhaName = res.data.data.destMhaName\n            that.curSrcRecord = res.data.data.srcRecord\n            that.curDestRecord = res.data.data.destRecord\n            that.srcTableItems = res.data.data.srcTableItems\n            that.destTableItems = res.data.data.destTableItems\n            that.isDiffTransaction = res.data.data.diffTransaction\n            that.diffTransaction = res.data.data.diffTransaction === true ? '数据不一致' : '数据一致'\n            console.log('test column')\n            console.log(that.destTableItems[0].column)\n          }\n        })\n    },\n    SubmitSrcSql () {\n      setTimeout(() => {\n        this.$refs.submitSrcSqlEditor.codemirror.refresh()\n      }, 1)\n      this.submitSrcSql = true\n    },\n    async okSubmitSrcSql () {\n      const that = this\n      await this.$axios.post('/api/drc/v1/logs/record/conflicts/update',\n        {\n          userName: sessionStorage.getItem('userName'),\n          mhaName0: this.srcMhaName,\n          mhaName1: this.destMhaName,\n          sql: this.operateCode1\n        })\n        .then(res => {\n          that.operationMsg = res.data.message\n          if (res.data.status === 1) {\n            that.operationStatus = 'error'\n          } else {\n            that.operationStatus = 'success'\n          }\n        })\n      this.submitResult = true\n    },\n    cancelSubmitSrcSql () {\n      this.submitSrcSql = false\n    },\n    okSubmitResult () {\n      this.submitResult = false\n      this.submitSrcSql = false\n      this.submitDestSql = false\n      this.operationMsg = ''\n      this.operationStatus = ''\n    },\n    SubmitDestSql () {\n      setTimeout(() => {\n        this.$refs.submitDestSqlEditor.codemirror.refresh()\n      }, 1)\n      this.submitDestSql = true\n    },\n    async okSubmitDestSql () {\n      const that = this\n      await this.$axios.post('/api/drc/v1/logs/record/conflicts/update',\n        {\n          userName: sessionStorage.getItem('userName'),\n          mhaName0: this.destMhaName,\n          mhaName1: this.srcMhaName,\n          sql: this.operateCode2\n        })\n        .then(res => {\n          that.operationMsg = res.data.message\n          if (res.data.status === 1) {\n            that.operationStatus = 'error'\n          } else {\n            that.operationStatus = 'success'\n          }\n        })\n      this.submitResult = true\n    },\n    cancelSubmitDestSql () {\n      this.submitDestSql = false\n    },\n    refreshEditor () {\n      setTimeout(() => {\n        this.$refs.cm1.codemirror.refresh()\n        this.$refs.cm2.codemirror.refresh()\n        this.$refs.cm3.codemirror.refresh()\n        this.$refs.cm4.codemirror.refresh()\n        this.$refs.cm5.codemirror.refresh()\n      }, 10)\n      console.log('hello code mirror')\n    }\n  },\n  created () {\n    this.getCurrentRecord()\n  }\n}\n</script>\n\n<style>\n.ivu-table .table-info-cell-extra-column-add {\n  background-color: #2db7f5;\n  color: #fff;\n}\n\n.ivu-table .table-info-cell-extra-column-diff {\n  background-color: #ff6600;\n  color: #fff;\n}\n\n.CodeMirror {\n  /* Set height, width, borders, and global font properties here */\n  font-family: monospace;\n  height: auto;\n  color: black;\n  direction: ltr;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./handleConflict.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./handleConflict.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./handleConflict.vue?vue&type=template&id=63104f31&\"\nimport script from \"./handleConflict.vue?vue&type=script&lang=js&\"\nexport * from \"./handleConflict.vue?vue&type=script&lang=js&\"\nimport style0 from \"./handleConflict.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}