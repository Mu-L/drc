(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4ef18b6b"],{"057f":function(t,e,a){var r=a("fc6a"),i=a("241c").f,n={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return i(t)}catch(e){return o.slice()}};t.exports.f=function(t){return o&&"[object Window]"==n.call(t)?s(t):i(r(t))}},1431:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("base-component",[a("Breadcrumb",{style:{margin:"15px 0 15px 185px",position:"fixed"}},[a("BreadcrumbItem",{attrs:{to:"/home"}},[t._v("首页")]),a("BreadcrumbItem",{attrs:{to:"/applicationForm"}},[t._v("DRC审批")]),a("BreadcrumbItem",[t._v("DRC申请")])],1),a("Content",{staticClass:"content",style:{padding:"10px",background:"#fff",margin:"50px 0 1px 185px",zIndex:"1"}},[a("div",{staticStyle:{padding:"1px 1px"}},[a("Form",{ref:"buildParam",attrs:{model:t.buildParam,rules:t.ruleValidate,"label-width":140,disabled:t.showDetail}},[a("FormItem",{attrs:{label:"同步DB",prop:"dbName"}},[a("Input",{attrs:{placeholder:"输入同步DB"},model:{value:t.buildParam.dbName,callback:function(e){t.$set(t.buildParam,"dbName",e)},expression:"buildParam.dbName"}})],1),a("FormItem",{attrs:{label:"同步表",prop:"tableName"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:5},placeholder:"输入同步表,多表用,分隔; 不填默认同步所有表"},model:{value:t.buildParam.tableName,callback:function(e){t.$set(t.buildParam,"tableName",e)},expression:"buildParam.tableName"}})],1),a("FormItem",{attrs:{label:"同步方向",required:!0}},[a("Row",[a("Col",{attrs:{span:"11"}},[a("Card",{attrs:{bordered:!0},scopedSlots:t._u([{key:"title",fn:function(){return[a("Icon",{attrs:{type:"ios-pin"}}),t._v(" 源 region ")]},proxy:!0}])},[a("FormItem",{attrs:{prop:"srcRegion"}},[a("Select",{attrs:{filterable:"",clearable:"",placeholder:"地域"},model:{value:t.buildParam.srcRegion,callback:function(e){t.$set(t.buildParam,"srcRegion",e)},expression:"buildParam.srcRegion"}},t._l(t.regionOptions,(function(e){return a("Option",{key:e,attrs:{value:e,label:e}},[t._v(" "+t._s(e)+" ")])})),1)],1)],1)],1),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}},[a("Button",{attrs:{size:"middle",shape:"circle",type:"default"},on:{click:function(e){return t.reverseRegion()}}},[t._v(" -> ")])],1),a("Col",{attrs:{span:"11"}},[a("Card",{attrs:{bordered:!0},scopedSlots:t._u([{key:"title",fn:function(){return[a("Icon",{attrs:{type:"ios-pin"}}),t._v(" 目标 region ")]},proxy:!0}])},[a("FormItem",{attrs:{prop:"dstRegion"}},[a("Select",{attrs:{filterable:"",clearable:"",placeholder:"地域",prop:"dstRegion"},model:{value:t.buildParam.dstRegion,callback:function(e){t.$set(t.buildParam,"dstRegion",e)},expression:"buildParam.dstRegion"}},t._l(t.regionOptions,(function(e){return a("Option",{key:e,attrs:{value:e,label:e}},[t._v(" "+t._s(e)+" ")])})),1)],1)],1)],1)],1)],1),a("FormItem",{attrs:{label:"过滤方式",prop:"filterType"}},[a("Select",{model:{value:t.buildParam.filterType,callback:function(e){t.$set(t.buildParam,"filterType",e)},expression:"buildParam.filterType"}},t._l(t.filterTypeOpts,(function(e){return a("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])})),1)],1),a("FormItem",{attrs:{label:"BU",prop:"buName"}},[a("Select",{attrs:{filterable:"",prefix:"ios-home",placeholder:"部门"},on:{"on-change":t.autoSetTag},model:{value:t.buildParam.buName,callback:function(e){t.$set(t.buildParam,"buName",e)},expression:"buildParam.buName"}},t._l(t.bus,(function(e){return a("Option",{key:e.buName,attrs:{value:e.buName}},[t._v(t._s(e.buName))])})),1)],1),a("FormItem",{attrs:{label:"Tag",prop:"tag"}},[a("Select",{attrs:{filterable:"","allow-create":""},on:{"on-create":t.handleCreateTag},model:{value:t.buildParam.tag,callback:function(e){t.$set(t.buildParam,"tag",e)},expression:"buildParam.tag"}},t._l(t.tags,(function(e){return a("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])})),1)],1),a("FormItem",{attrs:{label:"是否刷存量数据",prop:"flushExistingData"}},[a("RadioGroup",{model:{value:t.buildParam.flushExistingData,callback:function(e){t.$set(t.buildParam,"flushExistingData",e)},expression:"buildParam.flushExistingData"}},[a("Radio",{attrs:{label:"0"}},[t._v("否")]),a("Radio",{attrs:{label:"1"}},[t._v("是")])],1)],1),a("FormItem",{attrs:{label:"是否订单相关",prop:"orderRelated"}},[a("RadioGroup",{model:{value:t.buildParam.orderRelated,callback:function(e){t.$set(t.buildParam,"orderRelated",e)},expression:"buildParam.orderRelated"}},[a("Radio",{attrs:{label:"0"}},[t._v("否")]),a("Radio",{attrs:{label:"1"}},[t._v("是")])],1)],1),a("FormItem",{attrs:{label:"同步开始位点",prop:"gtidInit"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"输入同步开始位点"},model:{value:t.buildParam.gtidInit,callback:function(e){t.$set(t.buildParam,"gtidInit",e)},expression:"buildParam.gtidInit"}})],1),a("FormItem",{attrs:{label:"中断影响",prop:"disruptionImpact"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:2},placeholder:"中断影响"},model:{value:t.buildParam.disruptionImpact,callback:function(e){t.$set(t.buildParam,"disruptionImpact",e)},expression:"buildParam.disruptionImpact"}})],1),a("FormItem",{attrs:{label:"tps",prop:"tps"}},[a("Input",{attrs:{placeholder:"tps"},model:{value:t.buildParam.tps,callback:function(e){t.$set(t.buildParam,"tps",e)},expression:"buildParam.tps"}})],1),a("FormItem",{attrs:{label:"申请人",prop:"applicant"}},[a("Input",{attrs:{placeholder:"申请人"},model:{value:t.buildParam.applicant,callback:function(e){t.$set(t.buildParam,"applicant",e)},expression:"buildParam.applicant"}})],1),a("FormItem",{attrs:{label:"备注",prop:"remark"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"备注"},model:{value:t.buildParam.remark,callback:function(e){t.$set(t.buildParam,"remark",e)},expression:"buildParam.remark"}})],1),t.showDetail?t._e():a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("buildParam")}}},[t._v("提交")]),a("Button",{staticStyle:{"margin-left":"20px"},on:{click:function(e){return t.handleReset("buildParam")}}},[t._v("重置")])],1)],1),t.showDetail?a("Button",{staticStyle:{"margin-left":"80px"},attrs:{type:"primary"},on:{click:function(e){return t.toDrcBuild()}}},[t._v("审批")]):t._e()],1)])],1)},i=[],n=(a("a4d3"),a("e01a"),a("caad"),a("2532"),{name:"applicationBuild",data:function(){return{applicationFormId:null,buildLoading:!1,showDetail:!1,bus:[],tags:this.constant.tagList,regionOptions:[],filterTypeOpts:["ALL","UDL"],replicationTypeOpts:[{name:"单向同步",val:0},{name:"双向同步",val:1}],buildParam:{dbName:"",tableName:"",srcRegion:"",dstRegion:"",filterType:"ALL",buName:"",tps:"",description:"",disruptionImpact:"",tag:"",flushExistingData:"0",orderRelated:"0",gtidInit:"",remark:"",applicant:""},ruleValidate:{dbName:[{required:!0,message:"请输入同步DB",trigger:"blur"}],applicant:[{required:!0,message:"请输入申请人",trigger:"blur"}],filterType:[{required:!0,message:"请选择过滤类型",trigger:"change"}],flushExistingData:[{required:!0,message:"请选择是否刷存量数据",trigger:"change"}],orderRelated:[{required:!0,message:"请选择是否订单相关",trigger:"change"}],srcRegion:[{required:!0,message:"请选择源region",trigger:"change"}],dstRegion:[{required:!0,message:"请选择目标region",trigger:"change"}],buName:[{required:!0,message:"请选择BU",trigger:"change"}],tag:[{required:!0,message:"请选择tag",trigger:"change"}]}}},methods:{handleCreateTag:function(t){this.constant.tagList.push(t),this.tags.push(t)},reverseRegion:function(){var t=this.buildParam.srcRegion;this.buildParam.srcRegion=this.buildParam.dstRegion,this.buildParam.dstRegion=t},getRegions:function(){var t=this;this.axios.get("/api/drc/v2/autoconfig/region/all").then((function(e){t.regionOptions=e.data.data}))},autoSetTag:function(){"FLT"===this.buildParam.buName?this.buildParam.tag="FLT":"HTL"===this.buildParam.buName?this.buildParam.tag="HTL":this.buildParam.tag="COMMON"},getBus:function(){var t=this;this.axios.get("/api/drc/v2/meta/bus/all").then((function(e){t.bus=e.data.data}))},toDrcBuild:function(){var t=this;this.axios.post("/api/drc/v2/application/approve?applicationFormId="+this.applicationFormId).then((function(e){1===e.data.status?t.$Message.error(e.data.message):t.$router.push({path:"/drcBuild",query:{dalClusterName:t.buildParam.dbName+"_dalcluster",tableName:t.changeTableName(t.buildParam.tableName),srcRegion:t.buildParam.srcRegion,dstRegion:t.buildParam.dstRegion,filterType:t.buildParam.filterType,buName:t.buildParam.buName,tag:t.buildParam.tag,flushExistingData:t.buildParam.flushExistingData,gtidInit:t.buildParam.gtidInit,applicationFormId:t.applicationFormId}})}))},changeTableName:function(t){return null===t||""===t?".*":t.includes(",")?"("+t.replaceAll(",","|")+")":t},handleSubmit:function(t){this.validate(t),console.log(this.buildParam)},submit:function(){var t=this;this.dataLoading=!0;var e={dbName:this.buildParam.dbName,tableName:this.buildParam.tableName,srcRegion:this.buildParam.srcRegion,dstRegion:this.buildParam.dstRegion,filterType:this.buildParam.filterType,buName:this.buildParam.buName,tps:this.buildParam.tps,description:this.buildParam.description,disruptionImpact:this.buildParam.disruptionImpact,tag:this.buildParam.tag,flushExistingData:this.buildParam.flushExistingData,orderRelated:this.buildParam.orderRelated,gtidInit:this.buildParam.gtidInit,remark:this.buildParam.remark,applicant:this.buildParam.applicant};this.axios.post("/api/drc/v2/application/",e).then((function(e){t.dataLoading=!1,1===e.data.status?t.$Message.error({content:"提交失败! "+e.data.message,duration:2}):t.$Message.success("提交成功！")}))},validate:function(t){var e=this;this.$refs[t].validate((function(t){t?e.submit():e.$Message.error("仍有必填项未填!")}))},handleReset:function(t){this.$refs[t].resetFields()},init:function(){this.showDetail=this.$route.query.showDetail,this.buildParam={dbName:this.$route.query.dbName,tableName:this.$route.query.tableName,srcRegion:this.$route.query.srcRegion,dstRegion:this.$route.query.dstRegion,filterType:this.$route.query.filterType,buName:this.$route.query.buName,tps:this.$route.query.tps,description:this.$route.query.description,disruptionImpact:this.$route.query.disruptionImpact,tag:this.$route.query.tag,flushExistingData:this.$route.query.flushExistingData,orderRelated:this.$route.query.orderRelated,gtidInit:this.$route.query.gtidInit,remark:this.$route.query.remark,applicant:this.$route.query.applicant},this.applicationFormId=this.$route.query.applicationFormId}},created:function(){this.getBus(),this.getRegions(),this.init()}}),o=n,s=a("2877"),l=Object(s["a"])(o,r,i,!1,null,"6c718dfc",null);e["default"]=l.exports},2532:function(t,e,a){"use strict";var r=a("23e7"),i=a("5a34"),n=a("1d80"),o=a("ab13");r({target:"String",proto:!0,forced:!o("includes")},{includes:function(t){return!!~String(n(this)).indexOf(i(t),arguments.length>1?arguments[1]:void 0)}})},"44e7":function(t,e,a){var r=a("861d"),i=a("c6b6"),n=a("b622"),o=n("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==i(t))}},"5a34":function(t,e,a){var r=a("44e7");t.exports=function(t){if(r(t))throw TypeError("The method doesn't accept regular expressions");return t}},"746f":function(t,e,a){var r=a("428f"),i=a("5135"),n=a("e538"),o=a("9bf2").f;t.exports=function(t){var e=r.Symbol||(r.Symbol={});i(e,t)||o(e,t,{value:n.f(t)})}},a4d3:function(t,e,a){"use strict";var r=a("23e7"),i=a("da84"),n=a("d066"),o=a("c430"),s=a("83ab"),l=a("4930"),u=a("fdbf"),c=a("d039"),d=a("5135"),m=a("e8b5"),p=a("861d"),b=a("825a"),f=a("7b0b"),g=a("fc6a"),h=a("c04e"),v=a("5c6c"),y=a("7c73"),P=a("df75"),x=a("241c"),R=a("057f"),I=a("7418"),N=a("06cf"),w=a("9bf2"),S=a("d1e7"),$=a("9112"),k=a("6eeb"),O=a("5692"),_=a("f772"),F=a("d012"),T=a("90e3"),q=a("b622"),D=a("e538"),B=a("746f"),E=a("d44e"),C=a("69f3"),L=a("b727").forEach,j=_("hidden"),z="Symbol",M="prototype",J=q("toPrimitive"),A=C.set,U=C.getterFor(z),G=Object[M],H=i.Symbol,V=n("JSON","stringify"),Q=N.f,W=w.f,K=R.f,X=S.f,Y=O("symbols"),Z=O("op-symbols"),tt=O("string-to-symbol-registry"),et=O("symbol-to-string-registry"),at=O("wks"),rt=i.QObject,it=!rt||!rt[M]||!rt[M].findChild,nt=s&&c((function(){return 7!=y(W({},"a",{get:function(){return W(this,"a",{value:7}).a}})).a}))?function(t,e,a){var r=Q(G,e);r&&delete G[e],W(t,e,a),r&&t!==G&&W(G,e,r)}:W,ot=function(t,e){var a=Y[t]=y(H[M]);return A(a,{type:z,tag:t,description:e}),s||(a.description=e),a},st=u?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof H},lt=function(t,e,a){t===G&&lt(Z,e,a),b(t);var r=h(e,!0);return b(a),d(Y,r)?(a.enumerable?(d(t,j)&&t[j][r]&&(t[j][r]=!1),a=y(a,{enumerable:v(0,!1)})):(d(t,j)||W(t,j,v(1,{})),t[j][r]=!0),nt(t,r,a)):W(t,r,a)},ut=function(t,e){b(t);var a=g(e),r=P(a).concat(bt(a));return L(r,(function(e){s&&!dt.call(a,e)||lt(t,e,a[e])})),t},ct=function(t,e){return void 0===e?y(t):ut(y(t),e)},dt=function(t){var e=h(t,!0),a=X.call(this,e);return!(this===G&&d(Y,e)&&!d(Z,e))&&(!(a||!d(this,e)||!d(Y,e)||d(this,j)&&this[j][e])||a)},mt=function(t,e){var a=g(t),r=h(e,!0);if(a!==G||!d(Y,r)||d(Z,r)){var i=Q(a,r);return!i||!d(Y,r)||d(a,j)&&a[j][r]||(i.enumerable=!0),i}},pt=function(t){var e=K(g(t)),a=[];return L(e,(function(t){d(Y,t)||d(F,t)||a.push(t)})),a},bt=function(t){var e=t===G,a=K(e?Z:g(t)),r=[];return L(a,(function(t){!d(Y,t)||e&&!d(G,t)||r.push(Y[t])})),r};if(l||(H=function(){if(this instanceof H)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=T(t),a=function(t){this===G&&a.call(Z,t),d(this,j)&&d(this[j],e)&&(this[j][e]=!1),nt(this,e,v(1,t))};return s&&it&&nt(G,e,{configurable:!0,set:a}),ot(e,t)},k(H[M],"toString",(function(){return U(this).tag})),k(H,"withoutSetter",(function(t){return ot(T(t),t)})),S.f=dt,w.f=lt,N.f=mt,x.f=R.f=pt,I.f=bt,D.f=function(t){return ot(q(t),t)},s&&(W(H[M],"description",{configurable:!0,get:function(){return U(this).description}}),o||k(G,"propertyIsEnumerable",dt,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!l,sham:!l},{Symbol:H}),L(P(at),(function(t){B(t)})),r({target:z,stat:!0,forced:!l},{for:function(t){var e=String(t);if(d(tt,e))return tt[e];var a=H(e);return tt[e]=a,et[a]=e,a},keyFor:function(t){if(!st(t))throw TypeError(t+" is not a symbol");if(d(et,t))return et[t]},useSetter:function(){it=!0},useSimple:function(){it=!1}}),r({target:"Object",stat:!0,forced:!l,sham:!s},{create:ct,defineProperty:lt,defineProperties:ut,getOwnPropertyDescriptor:mt}),r({target:"Object",stat:!0,forced:!l},{getOwnPropertyNames:pt,getOwnPropertySymbols:bt}),r({target:"Object",stat:!0,forced:c((function(){I.f(1)}))},{getOwnPropertySymbols:function(t){return I.f(f(t))}}),V){var ft=!l||c((function(){var t=H();return"[null]"!=V([t])||"{}"!=V({a:t})||"{}"!=V(Object(t))}));r({target:"JSON",stat:!0,forced:ft},{stringify:function(t,e,a){var r,i=[t],n=1;while(arguments.length>n)i.push(arguments[n++]);if(r=e,(p(e)||void 0!==t)&&!st(t))return m(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!st(e))return e}),i[1]=e,V.apply(null,i)}})}H[M][J]||$(H[M],J,H[M].valueOf),E(H,z),F[j]=!0},ab13:function(t,e,a){var r=a("b622"),i=r("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(a){try{return e[i]=!1,"/./"[t](e)}catch(r){}}return!1}},e01a:function(t,e,a){"use strict";var r=a("23e7"),i=a("83ab"),n=a("da84"),o=a("5135"),s=a("861d"),l=a("9bf2").f,u=a("e893"),c=n.Symbol;if(i&&"function"==typeof c&&(!("description"in c.prototype)||void 0!==c().description)){var d={},m=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof m?new c(t):void 0===t?c():c(t);return""===t&&(d[e]=!0),e};u(m,c);var p=m.prototype=c.prototype;p.constructor=m;var b=p.toString,f="Symbol(test)"==String(c("test")),g=/^Symbol\((.*)\)[^)]+$/;l(p,"description",{configurable:!0,get:function(){var t=s(this)?this.valueOf():this,e=b.call(t);if(o(d,t))return"";var a=f?e.slice(7,-1):e.replace(g,"$1");return""===a?void 0:a}}),r({global:!0,forced:!0},{Symbol:m})}},e538:function(t,e,a){var r=a("b622");e.f=r}}]);
//# sourceMappingURL=chunk-4ef18b6b.3d05f452.js.map