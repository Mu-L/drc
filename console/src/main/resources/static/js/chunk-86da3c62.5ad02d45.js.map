{"version":3,"sources":["webpack:///./src/views/v2/meta/dbDrcBuildV2.vue?a779","webpack:///./node_modules/core-js/modules/es.string.includes.js","webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack:///./node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack:///./node_modules/core-js/internals/is-regexp.js","webpack:///./node_modules/core-js/modules/es.string.trim.js","webpack:///./node_modules/core-js/internals/not-a-regexp.js","webpack:///./src/views/v2/meta/dbDrcBuildV2.vue?b9d6","webpack:///./src/components/v2/dbDrcBuild/tables.vue?7f5d","webpack:///./src/components/v2/dbDrcBuild/dbReplicationConfig.vue?ad7c","webpack:///./src/components/v2/dbDrcBuild/dbTablesPreview.vue?0f72","webpack:///src/components/v2/dbDrcBuild/dbTablesPreview.vue","webpack:///./src/components/v2/dbDrcBuild/dbTablesPreview.vue?33f5","webpack:///./src/components/v2/dbDrcBuild/dbTablesPreview.vue","webpack:///src/components/v2/dbDrcBuild/dbReplicationConfig.vue","webpack:///./src/components/v2/dbDrcBuild/dbReplicationConfig.vue?2f3b","webpack:///./src/components/v2/dbDrcBuild/dbReplicationConfig.vue","webpack:///src/components/v2/dbDrcBuild/tables.vue","webpack:///./src/components/v2/dbDrcBuild/tables.vue?af3c","webpack:///./src/components/v2/dbDrcBuild/tables.vue","webpack:///./src/components/v2/dbDrcBuild/mhaReplicationPanel.vue?022c","webpack:///./src/components/v2/dbDrcBuild/mhaDbReplicationPanel.vue?efd5","webpack:///src/components/v2/dbDrcBuild/mhaDbReplicationPanel.vue","webpack:///./src/components/v2/dbDrcBuild/mhaDbReplicationPanel.vue?a6a7","webpack:///./src/components/v2/dbDrcBuild/mhaDbReplicationPanel.vue","webpack:///src/components/v2/dbDrcBuild/mhaReplicationPanel.vue","webpack:///./src/components/v2/dbDrcBuild/mhaReplicationPanel.vue?aa73","webpack:///./src/components/v2/dbDrcBuild/mhaReplicationPanel.vue","webpack:///./src/components/v2/dbDrcBuild/mhaPreview.vue?7357","webpack:///src/components/v2/dbDrcBuild/mhaPreview.vue","webpack:///./src/components/v2/dbDrcBuild/mhaPreview.vue?c2d2","webpack:///./src/components/v2/dbDrcBuild/mhaPreview.vue","webpack:///src/views/v2/meta/dbDrcBuildV2.vue","webpack:///./src/views/v2/meta/dbDrcBuildV2.vue?df9b","webpack:///./src/views/v2/meta/dbDrcBuildV2.vue?7197","webpack:///./node_modules/core-js/internals/array-fill.js","webpack:///./node_modules/core-js/internals/correct-is-regexp-logic.js","webpack:///./node_modules/core-js/internals/string-trim-forced.js","webpack:///./node_modules/core-js/modules/es.array.fill.js"],"names":["$","notARegExp","requireObjectCoercible","correctIsRegExpLogic","target","proto","forced","includes","searchString","String","this","indexOf","arguments","length","undefined","_arrayWithHoles","r","Array","isArray","_iterableToArrayLimit","l","t","Symbol","iterator","e","n","i","u","a","f","o","call","next","Object","done","push","value","_nonIterableRest","TypeError","_slicedToArray","arrayWithHoles","iterableToArrayLimit","unsupportedIterableToArray","nonIterableRest","isObject","classof","wellKnownSymbol","MATCH","module","exports","it","isRegExp","$trim","trim","forcedStringTrimMethod","_vm","_h","$createElement","_c","_self","style","margin","position","attrs","_v","staticClass","padding","background","zIndex","staticStyle","formItem","meta","fixDb","getExistDb","dataLoading","on","selectDb","model","callback","$$v","$set","expression","_l","option","index","key","dbName","_s","afterSelectExistReplication","selectedExistReplication","items","srcRegionName","dstRegionName","goToCreateReplication","createModal","existReplicationRegionOptions","getDrcConfig","_e","drcConfig","logicTableSummaryDtos","configDataLoading","dbNames","mhaReplications","staticRenderFns","height","ref","columns","tableData","scopedSlots","_u","fn","row","$event","goToUpdateConfig","goToDeleteConfig","goToInsertConfig","actionTitle","editModal","selectedRow","srcRegion","dstRegion","action","finishConfig","formAction","alertInfo","message","proxy","title","type","_k","keyCode","preventDefault","afterEnterTableName","switch","commonColumnLoading","getCommonColumns","rowsFilterCreateParam","constants","rowsFilter","item","mode","name","configInTripUid","fetchModeChange","k","v","columnsFilterCreateParam","colsFilter","handleCreateColumn","tableName","buildMode","buttonTypeMap","get","submitAll","buttonTextMap","dbTableLoading","getTableInfo","table","dbTableColumn","preCheckTablePage","checkTableDataList","dbTablePage","current","pageSizeOpts","size","val","component","replication","srcMha","dstMha","openModal","mhaDbReplications","openDetailModal","refInFor","dcName","goToSwitchAppliers","afterSwitchRegion","region","getRegionOptions","dbMhaTableLoading","getDalInfo","dbMhaTableColumn","preCheckMhaReplicationPage","previewDataList","dbMhaTablePage","createReplication","toObject","toAbsoluteIndex","toLength","O","argumentsLength","end","endPos","METHOD_NAME","regexp","fails","whitespaces","non","fill","addToUnscopables"],"mappings":"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A,CACA,uBACA,OACA,YACA,cACA,qBACA,qBACA,mBAEA,kBACA,gBACA,OACA,sBACA,kBACA,OACA,eACA,CACA,UACA,SACA,oBAGA,CACA,WACA,aACA,cAEA,CACA,WACA,YACA,cAEA,CACA,WACA,eACA,qBACA,YACA,iCACA,QACA,gBACA,OACA,UAEA,MAIA,aACA,QACA,UACA,QACA,+BAKA,SACA,4KAEA,GADA,wBACA,8BACA,8BACA,iCACA,iGAIA,0BACA,mEAIA,kDACA,oEAGA,8BACA,+DAGA,qCACA,oDACA,qBACA,YACA,gBACA,8BACA,8BACA,kBACA,6BAIA,kBACA,kBACA,UACA,EADA,iBACA,2FACA,kBACA,8BACA,uBACA,wDAEA,iDAGA,mBACA,0CAEA,oBACA,uBACA,2CAnDA,IAqDA,uBACA,SACA,eACA,wDAMA,cANA,CACA,4BACA,eACA,gBAMA,WAGA,UACA,6BACA,8BACA,iEACA,gCACA,sCAGA,mBACA,kDACA,uBCjKuX,I,YCOnXC,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIa,EAAAA,E,QCyKf,GACA,+BACA,oBACA,gBACA,YACA,iBAEA,2BACA,OACA,cACA,iBACA,iBACA,cACA,mBAEA,mBACA,gBACA,OACA,MACA,kBACA,kBACA,oBACA,2BAEA,UACA,YACA,YACA,eACA,uDACA,6DACA,YACA,iBACA,mBAGA,QACA,cACA,eAEA,WACA,YACA,YACA,aACA,WACA,gBACA,SACA,gBAEA,WACA,MACA,YACA,YACA,oBAEA,OACA,CACA,gBACA,QAEA,CACA,kBACA,QAEA,CACA,qBACA,QAEA,CACA,cACA,QAEA,CACA,oBACA,SAGA,iBACA,MACA,MACA,KACA,OAEA,wBACA,YAEA,mBACA,CACA,UACA,KAEA,CACA,cACA,KAEA,CACA,cACA,KAEA,CACA,oBACA,OAIA,YACA,OACA,CACA,eACA,QAEA,CACA,eACA,QAEA,CACA,aACA,UAIA,qBAGA,sBACA,OACA,qBACA,kBACA,CACA,YACA,cAEA,CACA,YACA,iBACA,qBACA,YACA,WACA,WACA,gBACA,iBACA,UACA,MACA,CACA,cACA,kBAEA,mCAKA,CACA,aACA,iBACA,qBACA,YACA,WACA,WACA,gBACA,iBACA,UACA,MACA,CACA,cACA,kBAEA,oCAMA,gBACA,QACA,UACA,OACA,4BAEA,kBACA,eACA,CACA,WACA,SACA,eACA,aACA,qBACA,SACA,OACA,aAIA,CACA,WACA,aACA,cAEA,CACA,WACA,YACA,cAEA,CACA,WACA,eACA,qBACA,YACA,iCACA,QACA,gBACA,OACA,UAEA,MAIA,aACA,QACA,UACA,OACA,6BAGA,WACA,QACA,eACA,WACA,cAEA,uBACA,mBACA,iBACA,qBAEA,uBACA,qBACA,mBACA,qBAEA,eACA,iBACA,yBAGA,SACA,qBACA,SAeA,OAdA,8BACA,wBACA,+BACA,+BACA,+BAEA,wBACA,mCAGA,oBACA,oCAEA,8BACA,GAEA,yBACA,SA4BA,OA3BA,8CACA,uBACA,+BACA,+BAEA,oBACA,mCACA,yEACA,0EAEA,0DACA,kCACA,2BACA,yBACA,6GAEA,kEAGA,0BACA,6DAEA,kCACA,0BACA,mEAEA,eACA,GAEA,mMACA,0FACA,kBACA,qBACA,mCACA,CACA,kBACA,UAGA,gCAGA,mDACA,6CACA,sBACA,yEAEA,uCACA,kBAGA,uEACA,sBACA,0DAEA,wFACA,mEACA,mEACA,4DAGA,0CAhCA,IAkCA,mMACA,0FACA,kBACA,qBACA,oCACA,CACA,kBACA,UAGA,gCACA,gDACA,2DAGA,0CAfA,IAiBA,sLAGA,OAFA,gBACA,wCACA,kCACA,oDACA,yBACA,kBACA,kBACA,oDAEA,iDACA,mDAEA,mBACA,oCACA,oBACA,4BACA,0CAjBA,IAmBA,+BACA,yDACA,iBAGA,6BAIA,gDAHA,iBAKA,mMACA,2DADA,IAGA,uBACA,SACA,eACA,wDAMA,cANA,CACA,4BACA,eACA,gBAMA,UAEA,uKACA,0CACA,8BAKA,GAJA,0BACA,oDACA,qDACA,qDACA,sBACA,sDACA,2EAEA,gCACA,2EAEA,sDACA,2EAEA,gCACA,6EAEA,sDACA,0EAEA,4EAvBA,IA0BA,iLASA,OARA,IACA,iBACA,oBACA,2BACA,mBACA,oBAGA,SACA,qEACA,kBACA,aACA,eACA,GACA,2BACA,mBACA,2BACA,yBACA,yBACA,sBAEA,uCACA,oBACA,yBACA,kCAGA,mBACA,gCAEA,oBACA,oBACA,0CAjCA,IAmCA,qCACA,OACA,OACA,yBACA,kBACA,cACA,WACA,WACA,mBACA,cAGA,wCACA,OACA,UACA,cAIA,UACA,6BACA,8BACA,yFACA,gCACA,qCAEA,+BACA,8KAEA,wBACA,kEAEA,+BACA,yGAEA,wBACA,+DAEA,+BACA,+JAEA,+BACA,+JAEA,6BACA,gLAEA,6BACA,2BAGA,mBACA,iBCrrB2X,ICOvX,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIa,I,QCaf,GACA,cACA,mCACA,OACA,cACA,cACA,iBACA,iBACA,gBACA,qBAEA,kBACA,gBACA,OACA,eACA,YACA,wBACA,oBACA,kBACA,wBAEA,WACA,SAEA,SACA,CACA,WACA,aACA,aACA,qBACA,YACA,sCAGA,CACA,aACA,kBACA,aACA,qBACA,YACA,wBACA,wBACA,YAOA,SACA,YACA,OACA,eAEA,OACA,YACA,OACA,gBAEA,UAhBA,SACA,OACA,cAEA,OAiBA,CACA,WACA,aACA,cACA,eACA,kBAKA,SACA,gLACA,mBACA,qCACA,8DAHA,IAKA,mLACA,gBACA,mCACA,8DAHA,IAKA,mLACA,gBACA,qCACA,8DAHA,IAKA,wBACA,sBACA,uBACA,wBAGA,UACA,uBACA,8CAGA,sBCpI8W,ICO1W,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIa,I,QClBX,EAAS,WAAa,IAAI/G,EAAI7C,KAAS8C,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,MAAM,CAAEM,QAAS,UAAUsC,OAAQ,SAAU,CAAC9C,EAAG,WAAW,CAACmB,MAAM,CAACzC,MAAOmB,EAAS,MAAEuB,SAAS,SAAUC,GAAMxB,EAAInB,MAAM2C,GAAKE,WAAW,UAAU1B,EAAI2B,GAAI3B,EAAmB,iBAAE,SAASgH,EAAYnF,GAAO,OAAO1B,EAAG,QAAQ,CAAC2B,IAAIkF,EAAYC,OAAO3B,KAAM,KAAK0B,EAAYE,OAAO5B,KAAK9E,MAAM,CAAC,KAAOtD,OAAO2E,IAAQwB,YAAYrD,EAAIsD,GAAG,CAAC,CAACxB,IAAI,UAAUyB,GAAG,WAAW,MAAO,CAACpD,EAAG,SAAS,CAACW,YAAY,CAAC,gBAAgB,QAAQN,MAAM,CAAC,KAAO,oBAAoBY,GAAG,CAAC,MAAQ,SAASqC,GAAQ,OAAOzD,EAAImH,UAAUtF,MAAU,CAAC7B,EAAIS,GAAG,WAAWN,EAAG,2BAA2B,CAACK,MAAM,CAAC,sBAAsBwG,EAAYI,qBAAqBjH,EAAG,QAAQ,CAACK,MAAM,CAAC,MAAQ,SAAS,eAAc,GAAMc,MAAM,CAACzC,MAAOmB,EAAIqH,gBAAgBxF,GAAQN,SAAS,SAAUC,GAAMxB,EAAIyB,KAAKzB,EAAIqH,gBAAiBxF,EAAOL,IAAME,WAAW,2BAA2B,CAAE1B,EAAIqH,gBAAgBxF,GAAQ1B,EAAG,eAAe,CAAC+C,IAAI,+BAA+BoE,UAAS,EAAK9G,MAAM,CAAC,eAAewG,EAAYC,OAAO3B,KAAK,SAAS0B,EAAYC,OAAOM,OAAO,eAAeP,EAAYE,OAAO5B,KAAK,SAAS0B,EAAYE,OAAOK,UAAUvH,EAAI0C,MAAM,KAAK6B,OAAM,IAAO,MAAK,IAAO,CAACvE,EAAIS,GAAG,IAAIT,EAAIgC,GAAGgF,EAAYC,OAAO3B,KAAO,OAAS0B,EAAYE,OAAO5B,MAAM,UAAS,GAAGnF,EAAG,MAAMA,EAAG,SAAS,CAACK,MAAM,CAAC,KAAO,UAAU,KAAO,WAAWY,GAAG,CAAC,MAAQpB,EAAIwH,qBAAqB,CAACxH,EAAIS,GAAG,sBAAsB,IACv6C,EAAkB,GCDlB,G,oBAAS,WAAa,IAAIT,EAAI7C,KAAS8C,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,QAAQ,CAACK,MAAM,CAAC,OAAS,GAAG,OAAS,GAAG,QAAUR,EAAImD,QAAQ,KAAOnD,EAAIoH,uBACxK,EAAkB,G,2CCOtB,GACA,6BACA,OACA,yBAEA,2BACA,OACA,YACA,oBACA,SACA,CACA,WACA,SACA,qBACA,YACA,SACA,UACA,KACA,2BACA,cACA,MACA,SACA,MACA,aACA,MACA,YACA,MACA,QACA,MACA,KACA,MAEA,mBACA,OACA,OACA,aACA,YAEA,IACA,iBACA,kBAGA,KAGA,CACA,WACA,gBACA,UACA,eACA,2BACA,iBACA,eACA,2DACA,IACA,yKACA,wDACA,qDAFA,IAIA,OACA,2BACA,aACA,eACA,eACA,wBAKA,qBACA,IACA,IADA,QAmBA,OAjBA,gBACA,eACA,qBACA,4BAEA,EADA,YACA,UAEA,YAGA,QACA,WAGA,QACA,aAEA,SACA,OACA,UAEA,KAGA,CACA,aACA,gBACA,qBACA,iCAGA,CACA,gBACA,gBACA,qBACA,0CAMA,SACA,sBACA,0BACA,iCAEA,8KAGA,GAFA,GACA,iCAEA,4CACA,kEAGA,sBACA,2DACA,kBACA,kBACA,2CACA,OAGA,0FACA,yCACA,+EAEA,oDAEA,mBACA,eACA,kCAEA,oBACA,yBACA,0CA5BA,KA+BA,UACA,0BACA,8BACA,8CACA,gCACA,YAGA,mBACA,kBCvK6X,ICOzX,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIa,I,gCCef,GACA,2BACA,uDACA,OACA,uBAEA,kBACA,gBACA,OACA,YACA,mBACA,iBAGA,SACA,sBACA,sCAEA,yCACA,qBACA,kBACA,qBACA,yBACA,gBACA,uBAIA,qCACA,yBACA,eACA,oBACA,2DACA,kBACA,aACA,eACA,EACA,2BAEA,0CAGA,mBACA,gCAEA,oBACA,iBACA,uBAGA,2BACA,6CACA,OACA,yBACA,yBACA,6CACA,6BAMA,mBACA,2DChG2X,ICOvX,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIa,I,QClBX,EAAS,WAAa,IAAIpH,EAAI7C,KAAS8C,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CA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CACA,0CAGA,kBACA,kBACA,uBACA,GACA,oBACA,gDACA,sDAEA,kDAGA,mBACA,0CAEA,oBACA,gCACA,0CA5BA,IA8BA,uLAQA,OAPA,GACA,uCACA,uCACA,iBAEA,oBACA,2BACA,0BACA,iEACA,kBACA,aACA,eACA,GACA,2BACA,yBACA,yBACA,qBAEA,oBACA,yBACA,8BACA,2CAGA,mBACA,gCAEA,oBACA,oBACA,0CA9BA,IAgCA,8MAGA,UACA,sCACA,2BACA,kGACA,mCACA,sCAGA,mBACA,0BClRkX,ICO9W,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIa,I,QC6Cf,GACA,yDACA,gBACA,OACA,aACA,SAEA,eACA,qBACA,gGACA,UACA,mBACA,oBAEA,aACA,MACA,gCACA,8CACA,8CACA,8BACA,iBACA,aACA,oCAIA,SACA,qBACA,SAIA,OAHA,0BACA,wCACA,wCACA,GAEA,sLACA,iFACA,WAGA,OADA,IACA,0BACA,iDACA,QACA,YAGA,kBACA,kBACA,EACA,mBAEA,gCAGA,mBACA,kCAEA,oBACA,oBACA,0CAxBA,IA0BA,wLACA,4DACA,2DAFA,IAIA,kLAIA,GAHA,sBACA,cACA,gBACA,eACA,yBACA,kEAGA,qFAGA,qFAGA,wCACA,qDACA,QACA,gBACA,8BACA,iCAGA,kBACA,kBACA,uBACA,GACA,cACA,kCAEA,8CAGA,mBACA,gCAEA,oBACA,0BACA,2CAtCA,IAwCA,iMACA,uEACA,yCACA,iCACA,iCACA,2DALA,IAOA,wMAIA,OAHA,IACA,iBACA,wCACA,yBACA,sEACA,QACA,mBAGA,kBACA,kBACA,uBACA,GACA,uCACA,+CACA,oFAGA,0BACA,0BACA,mCAGA,mBACA,oCAEA,oBACA,oBACA,0CA7BA,IA+BA,qLACA,gEADA,IAGA,qBACA,sBACA,OACA,wBACA,sCACA,sCACA,yBAGA,uBAGA,uBACA,SACA,eACA,wDAMA,cANA,CACA,4BACA,eACA,gBAMA,WAGA,YACA,8BAEA,sFACA,oBAIA,gBACA,qCACA,kBALA,qCChPoX,ICQhX,I,UAAY,eACd,EACA,EACAuC,GACA,EACA,KACA,KACA,OAIa,gB,6CClBf,IAAImF,EAAW,EAAQ,QACnBC,EAAkB,EAAQ,QAC1BC,EAAW,EAAQ,QAIvB5I,EAAOC,QAAU,SAAcb,GAC7B,IAAIyJ,EAAIH,EAAShL,MACbG,EAAS+K,EAASC,EAAEhL,QACpBiL,EAAkBlL,UAAUC,OAC5BuE,EAAQuG,EAAgBG,EAAkB,EAAIlL,UAAU,QAAKE,EAAWD,GACxEkL,EAAMD,EAAkB,EAAIlL,UAAU,QAAKE,EAC3CkL,OAAiBlL,IAARiL,EAAoBlL,EAAS8K,EAAgBI,EAAKlL,GAC/D,MAAOmL,EAAS5G,EAAOyG,EAAEzG,KAAWhD,EACpC,OAAOyJ,I,qBCfT,IAAI/I,EAAkB,EAAQ,QAE1BC,EAAQD,EAAgB,SAE5BE,EAAOC,QAAU,SAAUgJ,GACzB,IAAIC,EAAS,IACb,IACE,MAAMD,GAAaC,GACnB,MAAO1K,GACP,IAEE,OADA0K,EAAOnJ,IAAS,EACT,MAAMkJ,GAAaC,GAC1B,MAAOrK,KACT,OAAO,I,qBCbX,IAAIsK,EAAQ,EAAQ,QAChBC,EAAc,EAAQ,QAEtBC,EAAM,MAIVrJ,EAAOC,QAAU,SAAUgJ,GACzB,OAAOE,GAAM,WACX,QAASC,EAAYH,MAAkBI,EAAIJ,MAAkBI,GAAOD,EAAYH,GAAapD,OAASoD,O,qBCT1G,IAAIjM,EAAI,EAAQ,QACZsM,EAAO,EAAQ,QACfC,EAAmB,EAAQ,QAI/BvM,EAAE,CAAEI,OAAQ,QAASC,OAAO,GAAQ,CAClCiM,KAAMA,IAIRC,EAAiB","file":"js/chunk-86da3c62.5ad02d45.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dbDrcBuildV2.vue?vue&type=style&index=0&lang=css&\"","'use strict';\nvar $ = require('../internals/export');\nvar notARegExp = require('../internals/not-a-regexp');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar correctIsRegExpLogic = require('../internals/correct-is-regexp-logic');\n\n// `String.prototype.includes` method\n// https://tc39.github.io/ecma262/#sec-string.prototype.includes\n$({ target: 'String', proto: true, forced: !correctIsRegExpLogic('includes') }, {\n  includes: function includes(searchString /* , position = 0 */) {\n    return !!~String(requireObjectCoercible(this))\n      .indexOf(notARegExp(searchString), arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","function _arrayWithHoles(r) {\n  if (Array.isArray(r)) return r;\n}\nexport { _arrayWithHoles as default };","function _iterableToArrayLimit(r, l) {\n  var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"];\n  if (null != t) {\n    var e,\n      n,\n      i,\n      u,\n      a = [],\n      f = !0,\n      o = !1;\n    try {\n      if (i = (t = t.call(r)).next, 0 === l) {\n        if (Object(t) !== t) return;\n        f = !1;\n      } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0);\n    } catch (r) {\n      o = !0, n = r;\n    } finally {\n      try {\n        if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return;\n      } finally {\n        if (o) throw n;\n      }\n    }\n    return a;\n  }\n}\nexport { _iterableToArrayLimit as default };","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nexport { _nonIterableRest as default };","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nfunction _slicedToArray(r, e) {\n  return arrayWithHoles(r) || iterableToArrayLimit(r, e) || unsupportedIterableToArray(r, e) || nonIterableRest();\n}\nexport { _slicedToArray as default };","var isObject = require('../internals/is-object');\nvar classof = require('../internals/classof-raw');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar MATCH = wellKnownSymbol('match');\n\n// `IsRegExp` abstract operation\n// https://tc39.github.io/ecma262/#sec-isregexp\nmodule.exports = function (it) {\n  var isRegExp;\n  return isObject(it) && ((isRegExp = it[MATCH]) !== undefined ? !!isRegExp : classof(it) == 'RegExp');\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar $trim = require('../internals/string-trim').trim;\nvar forcedStringTrimMethod = require('../internals/string-trim-forced');\n\n// `String.prototype.trim` method\n// https://tc39.github.io/ecma262/#sec-string.prototype.trim\n$({ target: 'String', proto: true, forced: forcedStringTrimMethod('trim') }, {\n  trim: function trim() {\n    return $trim(this);\n  }\n});\n","var isRegExp = require('../internals/is-regexp');\n\nmodule.exports = function (it) {\n  if (isRegExp(it)) {\n    throw TypeError(\"The method doesn't accept regular expressions\");\n  } return it;\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('base-component',[_c('Breadcrumb',{style:({margin: '15px 0 15px 185px', position: 'fixed'})},[_c('BreadcrumbItem',{attrs:{\"to\":\"/home\"}},[_vm._v(\"首页\")]),_c('BreadcrumbItem',{attrs:{\"to\":\"/v2/dbDrcBuildV2\"}},[_vm._v(\"DB粒度 DRC 同步\")])],1),_c('Content',{staticClass:\"content\",style:({padding: '10px', background: '#ffffff', margin: '50px 0 111px 185px', zIndex: '1'})},[_c('Row',{attrs:{\"gutter\":10,\"align\":\"middle\"}},[_c('Col',{attrs:{\"span\":\"18\"}},[_c('Form',{staticStyle:{\"margin-right\":\"20px\",\"margin-top\":\"10px\"},attrs:{\"model\":_vm.formItem,\"label-width\":100}},[_c('FormItem',{attrs:{\"label\":\"数据库\",\"required\":true}},[_c('Select',{attrs:{\"filterable\":\"\",\"disabled\":!!_vm.meta.fixDb,\"placeholder\":\"请搜索数据库信息\",\"remote-method\":_vm.getExistDb,\"loading\":_vm.dataLoading},on:{\"on-change\":_vm.selectDb},model:{value:(_vm.meta.dbName),callback:function ($$v) {_vm.$set(_vm.meta, \"dbName\", $$v)},expression:\"meta.dbName\"}},_vm._l((_vm.meta.dbOptions),function(option,index){return _c('Option',{key:index,attrs:{\"value\":option.dbName}},[_vm._v(\" \"+_vm._s(option.dbName)+\" \")])}),1)],1),_c('FormItem',{attrs:{\"label\":\"同步方向\",\"required\":true}},[_c('RadioGroup',{attrs:{\"button-style\":\"solid\"},on:{\"on-change\":_vm.afterSelectExistReplication},model:{value:(_vm.selectedExistReplication),callback:function ($$v) {_vm.selectedExistReplication=$$v},expression:\"selectedExistReplication\"}},_vm._l((_vm.meta.existReplicationRegionOptions),function(items){return _c('Radio',{key:items.srcRegionName+' -> '+items.dstRegionName,attrs:{\"label\":items.srcRegionName+' -> '+items.dstRegionName,\"border\":\"\"}},[_vm._v(\" \"+_vm._s(items.srcRegionName + ' -> ' + items.dstRegionName)+\" \")])}),1),_c('Button',{attrs:{\"type\":\"primary\",\"icon\":\"md-add\",\"ghost\":\"\"},on:{\"click\":_vm.goToCreateReplication}},[_vm._v(\"新增\")]),_c('Modal',{attrs:{\"width\":\"1200px\",\"footer-hide\":true,\"title\":\"创建同步\"},model:{value:(_vm.createModal.open),callback:function ($$v) {_vm.$set(_vm.createModal, \"open\", $$v)},expression:\"createModal.open\"}},[(_vm.createModal.open)?_c('mha-preview',{attrs:{\"db-name\":_vm.meta.dbName,\"exist-replication-region-options\":_vm.meta.existReplicationRegionOptions},on:{\"updated\":_vm.getDrcConfig}}):_vm._e()],1)],1),_c('Divider',{attrs:{\"orientation\":\"left\"}},[_vm._v(\"同步表\")]),_c('Card',{staticStyle:{\"width\":\"100%\"}},[_c('tables',{attrs:{\"table-data\":_vm.drcConfig.logicTableSummaryDtos,\"data-loading\":_vm.configDataLoading,\"src-region\":_vm.meta.srcRegionName,\"dst-region\":_vm.meta.dstRegionName,\"db-name\":_vm.meta.dbName,\"db-names\":_vm.drcConfig.dbNames},on:{\"updated\":_vm.getDrcConfig}})],1),_c('Divider',{attrs:{\"orientation\":\"left\"}},[_vm._v(\"同步DB\")]),_c('Card',{staticStyle:{\"width\":\"100%\"}},[_c('mha-replication-panel',{attrs:{\"mha-replications\":_vm.drcConfig.mhaReplications},on:{\"updated\":_vm.getDrcConfig}})],1)],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{style:({padding: '1px 1px',height: '100%'})},[_c('Table',{ref:\"multipleTable\",staticStyle:{\"margin-top\":\"20px\"},attrs:{\"stripe\":\"\",\"columns\":_vm.columns,\"data\":_vm.tableData,\"loading\":_vm.dataLoading,\"border\":\"\"},scopedSlots:_vm._u([{key:\"action\",fn:function(ref){\nvar row = ref.row;\nvar index = ref.index;\nreturn [_c('Button',{staticStyle:{\"margin-right\":\"5px\"},attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.goToUpdateConfig(row, index)}}},[_vm._v(\"修改 \")]),_c('Button',{staticStyle:{\"margin-right\":\"5px\"},attrs:{\"type\":\"error\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.goToDeleteConfig(row, index)}}},[_vm._v(\"删除 \")])]}}])}),_c('br'),_c('Button',{attrs:{\"type\":\"success\",\"icon\":\"md-add\"},on:{\"click\":_vm.goToInsertConfig}},[_vm._v(\" 新增 \")]),_c('Modal',{attrs:{\"width\":\"1200px\",\"footer-hide\":true,\"title\":_vm.actionTitle},model:{value:(_vm.editModal.open),callback:function ($$v) {_vm.$set(_vm.editModal, \"open\", $$v)},expression:\"editModal.open\"}},[(_vm.editModal.open)?_c('db-replication-config',{ref:\"dbReplicationConfigComponent\",attrs:{\"config-data\":_vm.selectedRow,\"src-region\":_vm.srcRegion,\"dst-region\":_vm.dstRegion,\"db-names\":_vm.dbNames,\"form-action\":_vm.action},on:{\"finished\":_vm.finishConfig}}):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{style:({padding: '1px 1px',height: '100%'})},[_c('Row',{attrs:{\"gutter\":10,\"align\":\"middle\"}},[_c('Col',{attrs:{\"span\":\"13\"}},[_c('Form',{staticStyle:{\"margin-right\":\"20px\",\"margin-top\":\"10px\"},attrs:{\"model\":_vm.formItem,\"disabled\":_vm.formAction === 'delete',\"label-width\":100}},[(_vm.alertInfo.show)?_c('Alert',{attrs:{\"type\":\"warning\",\"show-icon\":\"\",\"closable\":\"\"},scopedSlots:_vm._u([{key:\"desc\",fn:function(){return [_vm._v(_vm._s(_vm.alertInfo.message))]},proxy:true}],null,false,3041357252)},[_vm._v(\" \"+_vm._s(_vm.alertInfo.title)+\" \")]):_vm._e(),(_vm.alertInfo.successShow)?_c('Alert',{attrs:{\"type\":\"success\",\"show-icon\":\"\",\"closable\":\"\"},scopedSlots:_vm._u([{key:\"desc\",fn:function(){return [_vm._v(_vm._s(_vm.alertInfo.message))]},proxy:true}],null,false,3041357252)},[_vm._v(\" \"+_vm._s(_vm.alertInfo.title)+\" \")]):_vm._e(),_c('FormItem',{attrs:{\"prop\":\"dbName\",\"label\":\"库名\",\"required\":true}},[_c('Input',{attrs:{\"type\":\"textarea\",\"autosize\":true,\"readonly\":true,\"border\":false,\"placeholder\":\"请输入库名（支持正则）\"},model:{value:(_vm.formItem.dbName),callback:function ($$v) {_vm.$set(_vm.formItem, \"dbName\", $$v)},expression:\"formItem.dbName\"}})],1),_c('FormItem',{attrs:{\"label\":\"同步表\",\"required\":true}},[_c('Input',{attrs:{\"placeholder\":\"请输入正则表达式\"},on:{\"on-keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"space\",32,$event.key,[\" \",\"Spacebar\"])){ return null; }$event.preventDefault();},\"on-blur\":_vm.afterEnterTableName},model:{value:(_vm.formItem.tableName),callback:function ($$v) {_vm.$set(_vm.formItem, \"tableName\", $$v)},expression:\"formItem.tableName\"}})],1),_c('FormItem',{attrs:{\"label\":\"行过滤\"}},[_c('i-switch',{attrs:{\"size\":\"large\"},scopedSlots:_vm._u([{key:\"open\",fn:function(){return [_c('span',[_vm._v(\"On\")])]},proxy:true},{key:\"close\",fn:function(){return [_c('span',[_vm._v(\"Off\")])]},proxy:true}]),model:{value:(_vm.formItem.switch.rowsFilter),callback:function ($$v) {_vm.$set(_vm.formItem.switch, \"rowsFilter\", $$v)},expression:\"formItem.switch.rowsFilter\"}})],1),(_vm.formItem.switch.rowsFilter)?_c('Card',{staticStyle:{\"margin-left\":\"100px\"},scopedSlots:_vm._u([{key:\"title\",fn:function(){return [_c('Icon',{attrs:{\"type\":\"md-settings\"}}),_vm._v(\" 行过滤配置 \"),_c('Button',{staticStyle:{\"margin-left\":\"50px\"},attrs:{\"icon\":\"ios-refresh\",\"size\":\"small\",\"type\":\"primary\",\"loading\":_vm.commonColumnLoading},on:{\"click\":_vm.getCommonColumns}},[_vm._v(\"获取公共字段 \")])]},proxy:true}],null,false,571298879)},[_c('FormItem',{attrs:{\"label\":\"模式\"}},[_c('Select',{staticStyle:{\"width\":\"200px\"},attrs:{\"placeholder\":\"选择行过滤模式\"},model:{value:(_vm.formItem.rowsFilterCreateParam.mode),callback:function ($$v) {_vm.$set(_vm.formItem.rowsFilterCreateParam, \"mode\", $$v)},expression:\"formItem.rowsFilterCreateParam.mode\"}},_vm._l((_vm.formItem.constants.rowsFilter.modes),function(item){return _c('Option',{key:item.mode,attrs:{\"value\":item.mode}},[_vm._v(\" \"+_vm._s(item.name)+\" \")])}),1)],1),(_vm.useTripUdlOrUidMode)?_c('div',[(_vm.fillContextByRegion)?_c('FormItem',{attrs:{\"label\":\"规则内容\"}},[_c('Select',{staticStyle:{\"width\":\"200px\"},attrs:{\"multiple\":\"\",\"placeholder\":\"Region 选择\"},model:{value:(_vm.formItem.rowsFilter.configInTripUid.regionsChosen),callback:function ($$v) {_vm.$set(_vm.formItem.rowsFilter.configInTripUid, \"regionsChosen\", $$v)},expression:\"formItem.rowsFilter.configInTripUid.regionsChosen\"}},_vm._l((_vm.formItem.constants.rowsFilter.regionsForChose),function(item){return _c('Option',{key:item,attrs:{\"value\":item}},[_vm._v(\" \"+_vm._s(item)+\" \")])}),1)],1):_vm._e(),(_vm.showUdlConfigDetail)?_c('div',[_c('Divider',[_vm._v(\"UDL配置\")]),_c('FormItem',{attrs:{\"label\":\"UDL字段\"}},[_c('Select',{staticStyle:{\"width\":\"200px\"},attrs:{\"filterable\":\"\",\"allow-create\":\"\",\"multiple\":\"\",\"disabled\":_vm.commonColumnLoading,\"placeholder\":\"不选默认则无UDL配置\"},model:{value:(_vm.formItem.rowsFilterCreateParam.udlColumns),callback:function ($$v) {_vm.$set(_vm.formItem.rowsFilterCreateParam, \"udlColumns\", $$v)},expression:\"formItem.rowsFilterCreateParam.udlColumns\"}},_vm._l((_vm.formItem.constants.columnsForChose),function(item){return _c('Option',{key:item,attrs:{\"value\":item}},[_vm._v(_vm._s(item)+\" \")])}),1)],1),(_vm.hasUdlColumn)?_c('FormItem',{attrs:{\"label\":\"DRC UDL策略id\"}},[_c('Select',{staticStyle:{\"width\":\"200px\"},attrs:{\"filterable\":\"\",\"allow-create\":\"\",\"placeholder\":\"请选择ucs策略id\"},model:{value:(_vm.formItem.rowsFilterCreateParam.drcStrategyId),callback:function ($$v) {_vm.$set(_vm.formItem.rowsFilterCreateParam, \"drcStrategyId\", $$v)},expression:\"formItem.rowsFilterCreateParam.drcStrategyId\"}},_vm._l((_vm.formItem.constants.rowsFilter.drcStrategyIdsForChose),function(item){return _c('Option',{key:item,attrs:{\"value\":item}},[_vm._v(_vm._s(item)+\" \")])}),1)],1):_vm._e()],1):_vm._e(),(_vm.showUidConfigDetail)?_c('div',[_c('Divider',[_vm._v(\"UID配置\")]),_c('FormItem',{attrs:{\"label\":\"UID字段\"}},[_c('Select',{staticStyle:{\"width\":\"200px\"},attrs:{\"filterable\":\"\",\"allow-create\":\"\",\"multiple\":\"\",\"disabled\":_vm.commonColumnLoading,\"placeholder\":\"不选默认则无UID配置\"},model:{value:(_vm.formItem.rowsFilterCreateParam.columns),callback:function ($$v) {_vm.$set(_vm.formItem.rowsFilterCreateParam, \"columns\", $$v)},expression:\"formItem.rowsFilterCreateParam.columns\"}},_vm._l((_vm.formItem.constants.columnsForChose),function(item){return _c('Option',{key:item,attrs:{\"value\":item}},[_vm._v(_vm._s(item)+\" \")])}),1)],1),(_vm.hasUidColumn)?_c('FormItem',{attrs:{\"label\":\"fetchMode\"}},[_c('Select',{staticStyle:{\"width\":\"200px\"},attrs:{\"placeholder\":\"选择\"},on:{\"on-change\":function($event){return _vm.fetchModeChange()}},model:{value:(_vm.formItem.rowsFilterCreateParam.fetchMode),callback:function ($$v) {_vm.$set(_vm.formItem.rowsFilterCreateParam, \"fetchMode\", $$v)},expression:\"formItem.rowsFilterCreateParam.fetchMode\"}},_vm._l((_vm.formItem.constants.rowsFilter.fetchModeForChose),function(item){return _c('Option',{key:item.k,attrs:{\"value\":item.v}},[_vm._v(\" \"+_vm._s(item.k)+\" \")])}),1)],1):_vm._e(),(_vm.hasUidColumn)?_c('FormItem',{attrs:{\"label\":\"空处理\"}},[_c('Checkbox',{model:{value:(_vm.formItem.rowsFilterCreateParam.illegalArgument),callback:function ($$v) {_vm.$set(_vm.formItem.rowsFilterCreateParam, \"illegalArgument\", $$v)},expression:\"formItem.rowsFilterCreateParam.illegalArgument\"}},[_vm._v(\"【字段为空时】同步\")])],1):_vm._e()],1):_vm._e()],1):_c('div',[_c('FormItem',{attrs:{\"label\":\"规则内容\"}},[_c('Input',{staticStyle:{\"width\":\"250px\"},attrs:{\"type\":\"textarea\",\"placeholder\":\"请输入行过滤内容\"},model:{value:(_vm.formItem.rowsFilterCreateParam.context),callback:function ($$v) {_vm.$set(_vm.formItem.rowsFilterCreateParam, \"context\", $$v)},expression:\"formItem.rowsFilterCreateParam.context\"}})],1),_c('FormItem',{attrs:{\"label\":\"相关字段\"}},[_c('Select',{staticStyle:{\"width\":\"200px\"},attrs:{\"filterable\":\"\",\"allow-create\":\"\",\"multiple\":\"\",\"placeholder\":\"选择相关字段\"},model:{value:(_vm.formItem.rowsFilterCreateParam.columns),callback:function ($$v) {_vm.$set(_vm.formItem.rowsFilterCreateParam, \"columns\", $$v)},expression:\"formItem.rowsFilterCreateParam.columns\"}},_vm._l((_vm.formItem.constants.columnsForChose),function(item){return _c('Option',{key:item,attrs:{\"value\":item,\"lable\":item}})}),1)],1)],1)],1):_vm._e(),_c('FormItem',{attrs:{\"label\":\"列过滤\"}},[_c('i-switch',{attrs:{\"size\":\"large\"},scopedSlots:_vm._u([{key:\"open\",fn:function(){return [_c('span',[_vm._v(\"On\")])]},proxy:true},{key:\"close\",fn:function(){return [_c('span',[_vm._v(\"Off\")])]},proxy:true}]),model:{value:(_vm.formItem.switch.colsFilter),callback:function ($$v) {_vm.$set(_vm.formItem.switch, \"colsFilter\", $$v)},expression:\"formItem.switch.colsFilter\"}})],1),(_vm.formItem.switch.colsFilter)?_c('Card',{staticStyle:{\"margin-left\":\"100px\"},scopedSlots:_vm._u([{key:\"title\",fn:function(){return [_c('Icon',{attrs:{\"type\":\"md-settings\"}}),_vm._v(\" 列过滤配置 \"),_c('Button',{staticStyle:{\"margin-left\":\"50px\"},attrs:{\"icon\":\"ios-refresh\",\"size\":\"small\",\"type\":\"primary\",\"loading\":_vm.commonColumnLoading},on:{\"click\":_vm.getCommonColumns}},[_vm._v(\"获取公共字段 \")])]},proxy:true}],null,false,2228726756)},[_c('FormItem',{attrs:{\"label\":\"模式\"}},[_c('Select',{staticStyle:{\"width\":\"200px\"},attrs:{\"placeholder\":\"选择字段过滤模式\"},model:{value:(_vm.formItem.columnsFilterCreateParam.mode),callback:function ($$v) {_vm.$set(_vm.formItem.columnsFilterCreateParam, \"mode\", $$v)},expression:\"formItem.columnsFilterCreateParam.mode\"}},_vm._l((_vm.formItem.constants.colsFilter.modes),function(item){return _c('Option',{key:item.mode,attrs:{\"value\":item.mode}},[_vm._v(\" \"+_vm._s(item.name)+\" \")])}),1)],1),_c('FormItem',{attrs:{\"label\":\"字段\"}},[_c('Select',{staticStyle:{\"width\":\"200px\"},attrs:{\"filterable\":\"\",\"allow-create\":\"\",\"multiple\":\"\",\"placeholder\":\"选择相关的字段\",\"disabled\":_vm.commonColumnLoading},on:{\"on-create\":_vm.handleCreateColumn},model:{value:(_vm.formItem.columnsFilterCreateParam.columns),callback:function ($$v) {_vm.$set(_vm.formItem.columnsFilterCreateParam, \"columns\", $$v)},expression:\"formItem.columnsFilterCreateParam.columns\"}},_vm._l((_vm.formItem.constants.columnsForChose),function(item){return _c('Option',{key:item,attrs:{\"value\":item}},[_vm._v(_vm._s(item)+\" \")])}),1)],1)],1):_vm._e(),_c('br'),_c('Row',[_c('Col',{attrs:{\"span\":\"6\",\"offset\":\"8\"}}),_c('Col',{attrs:{\"span\":\"6\",\"offset\":\"4\"}})],1)],1)],1),_c('Col',{attrs:{\"span\":\"11\"}},[_c('db-tables-preview',{attrs:{\"src-region-name\":_vm.srcRegion,\"dst-region-name\":_vm.dstRegion,\"db-name\":_vm.formItem.dbName,\"table-names\":_vm.formItem.tableName,\"mode\":_vm.formItem.buildMode}})],1)],1),_c('Divider'),_c('Button',{staticStyle:{\"margin-left\":\"50px\"},attrs:{\"type\":_vm.buttonTypeMap.get(_vm.formAction),\"loading\":_vm.dataLoading || _vm.commonColumnLoading},on:{\"click\":_vm.submitAll}},[_vm._v(_vm._s(_vm.buttonTextMap.get(_vm.formAction))+\" \")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{style:({padding: '1px 1px',height: '100%'})},[_c('Divider',{staticStyle:{\"margin-top\":\"50px\"}},[_vm._v(\"预览：同步表\")]),_c('Button',{staticStyle:{\"margin-bottom\":\"5px\"},attrs:{\"type\":\"primary\",\"loading\":_vm.dbTableLoading},on:{\"click\":_vm.getTableInfo}},[_vm._v(\" 检查同步表 \")]),_c('Table',{attrs:{\"size\":\"small\",\"loading\":_vm.dbTableLoading,\"stripe\":\"\",\"columns\":_vm.table.dbTableColumn,\"data\":_vm.preCheckTablePage,\"border\":\"\"}}),_c('div',[_c('Page',{attrs:{\"transfer\":true,\"total\":_vm.checkTableDataList.length,\"current\":_vm.table.dbTablePage.current,\"page-size-opts\":_vm.table.dbTablePage.pageSizeOpts,\"page-size\":_vm.table.dbTablePage.size,\"show-total\":\"\",\"show-sizer\":\"\",\"show-elevator\":\"\"},on:{\"update:current\":function($event){return _vm.$set(_vm.table.dbTablePage, \"current\", $event)},\"on-change\":function (val) {_vm.table.dbTablePage.current = val},\"on-page-size-change\":function (val) {_vm.table.dbTablePage.size = val}}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div :style=\"{padding: '1px 1px',height: '100%'}\">\n    <Divider style=\"margin-top: 50px\">预览：同步表</Divider>\n    <Button type=\"primary\" :loading=\"dbTableLoading\" @click=\"getTableInfo\" style=\"margin-bottom: 5px\">\n      检查同步表\n    </Button>\n    <Table size=\"small\" :loading=\"dbTableLoading\" stripe :columns=\"table.dbTableColumn\"\n           :data=\"preCheckTablePage\" border></Table>\n    <div>\n      <Page\n        :transfer=\"true\"\n        :total=\"checkTableDataList.length\"\n        :current.sync=\"table.dbTablePage.current\"\n        :page-size-opts=\"table.dbTablePage.pageSizeOpts\"\n        :page-size=\"table.dbTablePage.size\"\n        show-total\n        show-sizer\n        show-elevator\n        @on-change=\"(val) => {table.dbTablePage.current = val}\"\n        @on-page-size-change=\"(val) => {table.dbTablePage.size = val}\"></Page>\n    </div>\n  </div>\n</template>\n\n<script>\n\nexport default {\n  name: 'dbTablesPreview',\n  props: {\n    mode: Number,\n    dbName: String,\n    srcRegionName: String,\n    dstRegionName: String,\n    tableNames: String\n  },\n  emits: ['updated'],\n  data () {\n    return {\n      checkTableDataList: [],\n      dbTableLoading: false,\n      table: {\n        dbTableColumn: [\n          {\n            title: '序',\n            width: 50,\n            key: 'indexForShow'\n            // resizable: true\n          },\n          {\n            title: '库名',\n            key: 'schema',\n            resizable: true\n          },\n          {\n            title: '表名',\n            key: 'table',\n            resizable: true\n          },\n          {\n            title: '结果',\n            align: 'center',\n            render: (h, params) => {\n              const row = params.row\n              const color = row.res !== 'ok' ? 'volcano' : 'green'\n              const text = row.res\n              return h('Tag', {\n                props: {\n                  color: color\n                }\n              }, text)\n            }\n          }\n        ],\n        dbTablePage: {\n          total: 0,\n          current: 1,\n          size: 10,\n          pageSizeOpts: [5, 10, 20, 100]\n        }\n      }\n    }\n  },\n  methods: {\n    async getTableInfo () {\n      this.checkTableDataList = []\n      this.table.dbTablePage.current = 1\n      if (this.mode === 1) {\n        if (!this.dalClusterName) {\n          this.$Message.warning('请先填写 dalcluster')\n          return\n        }\n      } else {\n        if (!this.dbName) {\n          this.$Message.warning('请先填写数据库')\n          return\n        }\n      }\n      if (!this.srcRegionName || !this.dstRegionName) {\n        this.$Message.warning('请先填写同步方向')\n        return\n      }\n      if (!this.tableNames) {\n        this.$Message.warning('请先填写表名')\n        return\n      }\n      this.dbTableLoading = true\n      await this.axios.get('/api/drc/v2/autoconfig/preCheckTable', {\n        params: this.flattenObj({\n          mode: this.mode,\n          dbName: this.dbName,\n          srcRegionName: this.srcRegionName,\n          dstRegionName: this.dstRegionName,\n          tblsFilterDetail: {\n            tableNames: this.tableNames\n          }\n        })\n      })\n        .then(response => {\n          const data = response.data.data\n          if (data) {\n            for (const [index, val] of data.entries()) {\n              val.indexForShow = index\n            }\n            this.checkTableDataList = data\n            this.$Message.success('同步表检测成功, 共找到 ' + data.length + ' 个表')\n          } else {\n            this.$Message.warning('同步表检测失败：' + response.data.message)\n          }\n        })\n        .catch(message => {\n          this.$Message.error('查询dalcluster异常: ' + message)\n        })\n        .finally(() => {\n          this.dbTableLoading = false\n        })\n    },\n    flattenObj (ob) {\n      const result = {}\n      for (const i in ob) {\n        if ((typeof ob[i]) === 'object' && !Array.isArray(ob[i])) {\n          const temp = this.flattenObj(ob[i])\n          for (const j in temp) {\n            result[i + '.' + j] = temp[j]\n          }\n        } else {\n          result[i] = ob[i]\n        }\n      }\n      return result\n    }\n  },\n  computed: {\n    preCheckTablePage () {\n      const data = this.checkTableDataList\n      const start = (this.table.dbTablePage.current - 1) * this.table.dbTablePage.size\n      const end = start + this.table.dbTablePage.size\n      return [...data].slice(start, end)\n    }\n  },\n  created () {\n    if (this.tableNames && this.tableNames.trim().length > 0) {\n      this.getTableInfo()\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dbTablesPreview.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dbTablesPreview.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./dbTablesPreview.vue?vue&type=template&id=4164dffe&scoped=true&\"\nimport script from \"./dbTablesPreview.vue?vue&type=script&lang=js&\"\nexport * from \"./dbTablesPreview.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4164dffe\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div :style=\"{padding: '1px 1px',height: '100%'}\">\n    <Row :gutter=10 align=\"middle\">\n      <Col span=\"13\">\n        <Form :model=\"formItem\" :disabled=\"formAction === 'delete'\" :label-width=\"100\"\n              style=\"margin-right: 20px;margin-top: 10px\">\n          <Alert type=\"warning\" show-icon v-if=\"alertInfo.show\" closable>\n            {{ alertInfo.title }}\n            <template #desc>{{ alertInfo.message }}</template>\n          </Alert>\n          <Alert type=\"success\" show-icon v-if=\"alertInfo.successShow\" closable>\n            {{ alertInfo.title }}\n            <template #desc>{{ alertInfo.message }}</template>\n          </Alert>\n          <FormItem prop=\"dbName\" label=\"库名\" :required=true>\n            <Input type=\"textarea\" v-model=\"formItem.dbName\" :autosize=\"true\" :readonly=\"true\" :border=\"false\"\n                   placeholder=\"请输入库名（支持正则）\"/>\n          </FormItem>\n          <FormItem label=\"同步表\" :required=true>\n            <Input @on-keydown.space.prevent v-model=\"formItem.tableName\" placeholder=\"请输入正则表达式\"\n                   @on-blur=\"afterEnterTableName\"></Input>\n          </FormItem>\n          <FormItem label=\"行过滤\">\n            <i-switch v-model=\"formItem.switch.rowsFilter\" size=\"large\">\n              <template #open>\n                <span>On</span>\n              </template>\n              <template #close>\n                <span>Off</span>\n              </template>\n            </i-switch>\n          </FormItem>\n          <Card v-if=\"formItem.switch.rowsFilter\" style=\"margin-left: 100px\">\n            <template #title>\n              <Icon type=\"md-settings\"/>\n              行过滤配置\n              <Button icon=\"ios-refresh\" size=\"small\" type=\"primary\" :loading=\"commonColumnLoading\"\n                      @click=\"getCommonColumns\" style=\"margin-left: 50px\">获取公共字段\n              </Button>\n            </template>\n            <FormItem label=\"模式\">\n              <Select v-model=\"formItem.rowsFilterCreateParam.mode\" style=\"width: 200px\" placeholder=\"选择行过滤模式\">\n                <Option v-for=\"item in formItem.constants.rowsFilter.modes\" :value=\"item.mode\" :key=\"item.mode\">\n                  {{ item.name }}\n                </Option>\n              </Select>\n            </FormItem>\n            <div v-if=\"useTripUdlOrUidMode\">\n              <FormItem label=\"规则内容\" v-if=\"fillContextByRegion\">\n                <Select v-model=\"formItem.rowsFilter.configInTripUid.regionsChosen\" multiple\n                        style=\"width: 200px\" placeholder=\"Region 选择\">\n                  <Option v-for=\"item in formItem.constants.rowsFilter.regionsForChose\" :value=\"item\" :key=\"item\">\n                    {{ item }}\n                  </Option>\n                </Select>\n              </FormItem>\n              <div v-if=\"showUdlConfigDetail\">\n                <Divider>UDL配置</Divider>\n                <FormItem label=\"UDL字段\">\n                  <Select v-model=\"formItem.rowsFilterCreateParam.udlColumns\" filterable allow-create multiple\n                          :disabled=\"commonColumnLoading\"\n                          style=\"width: 200px\" placeholder=\"不选默认则无UDL配置\">\n                    <Option v-for=\"item in formItem.constants.columnsForChose\" :value=\"item\" :key=\"item\">{{\n                        item\n                      }}\n                    </Option>\n                  </Select>\n                </FormItem>\n                <FormItem label=\"DRC UDL策略id\" v-if=\"hasUdlColumn\">\n                  <Select v-model=\"formItem.rowsFilterCreateParam.drcStrategyId\" filterable allow-create\n                          style=\"width: 200px\"\n                          placeholder=\"请选择ucs策略id\">\n                    <Option v-for=\"item in formItem.constants.rowsFilter.drcStrategyIdsForChose\" :value=\"item\"\n                            :key=\"item\">{{ item }}\n                    </Option>\n                  </Select>\n                </FormItem>\n              </div>\n              <div v-if=\"showUidConfigDetail\">\n                <Divider>UID配置</Divider>\n                <FormItem label=\"UID字段\">\n                  <Select v-model=\"formItem.rowsFilterCreateParam.columns\" filterable allow-create multiple\n                          :disabled=\"commonColumnLoading\"\n                          style=\"width: 200px\" placeholder=\"不选默认则无UID配置\">\n                    <Option v-for=\"item in formItem.constants.columnsForChose\" :value=\"item\" :key=\"item\">{{\n                        item\n                      }}\n                    </Option>\n                  </Select>\n                </FormItem>\n                <FormItem label=\"fetchMode\" v-if=\"hasUidColumn\">\n                  <Select v-model=\"formItem.rowsFilterCreateParam.fetchMode\" style=\"width: 200px\" placeholder=\"选择\"\n                          @on-change=\"fetchModeChange()\">\n                    <Option v-for=\"item in formItem.constants.rowsFilter.fetchModeForChose\" :value=\"item.v\"\n                            :key=\"item.k\">\n                      {{ item.k }}\n                    </Option>\n                  </Select>\n                </FormItem>\n                <FormItem v-if=\"hasUidColumn\" label=\"空处理\">\n                  <Checkbox v-model=\"formItem.rowsFilterCreateParam.illegalArgument\">【字段为空时】同步</Checkbox>\n                </FormItem>\n              </div>\n            </div>\n            <div v-else>\n              <FormItem label=\"规则内容\">\n                <Input type=\"textarea\"\n                       v-model=\"formItem.rowsFilterCreateParam.context\" style=\"width: 250px\"\n                       placeholder=\"请输入行过滤内容\"/>\n              </FormItem>\n              <FormItem label=\"相关字段\">\n                <Select v-model=\"formItem.rowsFilterCreateParam.columns\" filterable allow-create multiple\n                        style=\"width: 200px\" placeholder=\"选择相关字段\">\n                  <Option v-for=\"item in formItem.constants.columnsForChose\" :value=\"item\" :key=\"item\"\n                          :lable=\"item\"></Option>\n                </Select>\n              </FormItem>\n            </div>\n          </Card>\n\n          <FormItem label=\"列过滤\">\n            <i-switch v-model=\"formItem.switch.colsFilter\" size=\"large\">\n              <template #open>\n                <span>On</span>\n              </template>\n              <template #close>\n                <span>Off</span>\n              </template>\n            </i-switch>\n          </FormItem>\n          <Card v-if=\"formItem.switch.colsFilter\" style=\"margin-left: 100px\">\n            <template #title>\n              <Icon type=\"md-settings\"/>\n              列过滤配置\n              <Button icon=\"ios-refresh\" size=\"small\" type=\"primary\" :loading=\"commonColumnLoading\"\n                      @click=\"getCommonColumns\" style=\"margin-left: 50px\">获取公共字段\n              </Button>\n            </template>\n            <FormItem label=\"模式\">\n              <Select v-model=\"formItem.columnsFilterCreateParam.mode\" style=\"width: 200px\"\n                      placeholder=\"选择字段过滤模式\">\n                <Option v-for=\"item in formItem.constants.colsFilter.modes\" :value=\"item.mode\" :key=\"item.mode\">\n                  {{ item.name }}\n                </Option>\n              </Select>\n            </FormItem>\n            <FormItem label=\"字段\">\n              <Select v-model=\"formItem.columnsFilterCreateParam.columns\" filterable allow-create\n                      @on-create=\"handleCreateColumn\" multiple style=\"width: 200px\" placeholder=\"选择相关的字段\"\n                      :disabled=\"commonColumnLoading\">\n                <Option v-for=\"item in formItem.constants.columnsForChose\" :value=\"item\" :key=\"item\">{{\n                    item\n                  }}\n                </Option>\n              </Select>\n            </FormItem>\n          </Card>\n          <br/>\n          <Row>\n            <Col span=\"6\" offset=\"8\"></Col>\n            <Col span=\"6\" offset=\"4\">\n            </Col>\n          </Row>\n        </Form>\n      </Col>\n      <Col span=\"11\">\n        <db-tables-preview :src-region-name=\"srcRegion\"\n                           :dst-region-name=\"dstRegion\"\n                           :db-name=\"formItem.dbName\"\n                           :table-names=\"formItem.tableName\"\n                           :mode=\"formItem.buildMode\"\n        />\n      </Col>\n    </Row>\n    <Divider></Divider>\n    <Button :type=\"buttonTypeMap.get(formAction)\" @click=\"submitAll\" style=\"margin-left: 50px\"\n            :loading=\"dataLoading || commonColumnLoading\">{{\n        buttonTextMap.get(formAction)\n      }}\n    </Button>\n  </div>\n</template>\n\n<script>\n\nimport DbTablesPreview from '@/components/v2/dbDrcBuild/dbTablesPreview.vue'\n\nexport default {\n  components: { DbTablesPreview },\n  FORM_ACTION_OPTION: {\n    CREATE: 'create',\n    EDIT: 'edit',\n    DELETE: 'delete'\n  },\n  name: 'dbReplicationConfig',\n  props: {\n    configData: {},\n    srcRegion: String,\n    dstRegion: String,\n    dbNames: Array,\n    formAction: String\n  },\n  emits: ['finished'],\n  data () {\n    return {\n      meta: {\n        rowsFilterId: null,\n        colsFilterId: null,\n        dbReplicationIds: [],\n        originLogicTableConfig: {}\n      },\n      formItem: {\n        buildMode: 2,\n        dbName: null,\n        tableName: null,\n        rowsFilterCreateParam: this.rowsFilterCreateParamInit(),\n        columnsFilterCreateParam: this.columnsFilterCreateParamInit(),\n        rowsFilter: {\n          configInTripUid: {\n            regionsChosen: []\n          }\n        },\n        switch: {\n          rowsFilter: false,\n          colsFilter: false\n        },\n        constants: {\n          rowsFilter: {\n            filterMode: {\n              JAVA_REGEX: 0,\n              TRIP_UDL: 1,\n              AVIATOR_REGEX: 3,\n              CUSTOM: 4,\n              TRIP_UDL_UID: 5\n            },\n            fetchMode: {\n              RPC: 0,\n              BlackList: 1,\n              WhiteList: 2,\n              BlackList_Global: 3\n            },\n            modes: [\n              {\n                name: 'trip_udl',\n                mode: 1\n              },\n              {\n                name: 'java_regex',\n                mode: 0\n              },\n              {\n                name: 'aviator_regex',\n                mode: 3\n              },\n              {\n                name: 'custom',\n                mode: 4\n              },\n              {\n                name: 'trip_udl_uid',\n                mode: 5\n              }\n            ],\n            regionsForChose: [\n              'SGP',\n              'SIN',\n              'SH',\n              'FRA'\n            ],\n            drcStrategyIdsForChose: [\n              2000000002\n            ],\n            fetchModeForChose: [\n              {\n                k: 'RPC调用',\n                v: 0\n              },\n              {\n                k: 'BlackList',\n                v: 1\n              },\n              {\n                k: 'WhiteList',\n                v: 2\n              },\n              {\n                k: 'BlackListGlobal',\n                v: 3\n              }\n            ]\n          },\n          colsFilter: {\n            modes: [\n              {\n                name: 'exclude',\n                mode: 0\n              },\n              {\n                name: 'include',\n                mode: 1\n              },\n              {\n                name: 'regex',\n                mode: 2\n              }\n            ]\n          },\n          columnsForChose: []\n        }\n      },\n      checkTableDataList: [],\n      table: {\n        dbMhaTableLoading: false,\n        dbMhaTableColumn: [\n          {\n            title: 'DB名',\n            key: 'dbName'\n          },\n          {\n            title: '源集群',\n            key: 'srcMhaName',\n            render: (h, params) => {\n              const row = params.row\n              const mha = row.srcMha\n              if (mha != null) {\n                return h('div', [\n                  h('span', mha.name),\n                  h('span', {\n                    style:\n                      {\n                        float: 'right',\n                        color: '#ababab'\n                      }\n                  }, mha.regionName + '(' + mha.dcName + ')')\n                ])\n              }\n            }\n          },\n          {\n            title: '目标集群',\n            key: 'dstMhaName',\n            render: (h, params) => {\n              const row = params.row\n              const mha = row.dstMha\n              if (mha != null) {\n                return h('div', [\n                  h('span', mha.name),\n                  h('span', {\n                    style:\n                      {\n                        float: 'right',\n                        color: '#ababab'\n                      }\n                  }, mha.regionName + '(' + mha.dcName + ')')\n                ])\n              }\n            }\n          }\n        ],\n        dbMhaTablePage: {\n          total: 0,\n          current: 1,\n          size: 5,\n          pageSizeOpts: [5, 10, 20, 100]\n        },\n        dbTableLoading: false,\n        dbTableColumn: [\n          {\n            title: '序号',\n            width: 75,\n            align: 'center',\n            fixed: 'left',\n            render: (h, params) => {\n              return h(\n                'span',\n                params.index + 1\n              )\n            }\n          },\n          {\n            title: '库名',\n            key: 'schema',\n            resizable: true\n          },\n          {\n            title: '表名',\n            key: 'table',\n            resizable: true\n          },\n          {\n            title: '结果',\n            align: 'center',\n            render: (h, params) => {\n              const row = params.row\n              const color = row.res !== 'ok' ? 'volcano' : 'green'\n              const text = row.res\n              return h('Tag', {\n                props: {\n                  color: color\n                }\n              }, text)\n            }\n          }\n        ],\n        dbTablePage: {\n          total: 0,\n          current: 1,\n          size: 5,\n          pageSizeOpts: [5, 10, 20, 100]\n        }\n      },\n      alertInfo: {\n        show: false,\n        successShow: false,\n        title: null,\n        message: null\n      },\n      buttonTextMap: new Map([\n        ['create', '新增表同步'],\n        ['edit', '更新表同步'],\n        ['delete', '删除表同步']\n      ]),\n      buttonTypeMap: new Map([\n        ['create', 'success'],\n        ['edit', 'primary'],\n        ['delete', 'error']\n      ]),\n      dataLoading: false,\n      successSubmit: false,\n      commonColumnLoading: false\n    }\n  },\n  methods: {\n    getParams: function () {\n      const param = {}\n      param.buName = this.formItem.buName\n      param.tag = this.formItem.tag\n      param.mode = this.formItem.buildMode\n      param.srcRegionName = this.srcRegion\n      param.dstRegionName = this.dstRegion\n\n      if (this.gtidConfigurable) {\n        param.gtidInit = this.formItem.gtidInit\n      }\n\n      param.tblsFilterDetail = {\n        tableNames: this.formItem.tableName\n      }\n      param.dbName = this.formItem.dbName\n      return param\n    },\n    getEditParams: function () {\n      const param = {}\n      param.dbReplicationIds = this.meta.dbReplicationIds\n      param.dbNames = this.dbNames\n      param.srcRegionName = this.srcRegion\n      param.dstRegionName = this.dstRegion\n\n      param.logicTableConfig = {\n        logicTable: this.formItem.tableName,\n        rowsFilterId: this.formItem.switch.rowsFilter ? this.meta.rowsFilterId : null,\n        colsFilterId: this.formItem.switch.colsFilter ? this.meta.colsFilterId : null\n      }\n      param.originLogicTableConfig = this.meta.originLogicTableConfig\n      if (this.formItem.switch.rowsFilter) {\n        if (this.useTripUdlOrUidMode) {\n          if (this.fillContextByRegion) {\n            this.formItem.rowsFilterCreateParam.context = this.formItem.rowsFilter.configInTripUid.regionsChosen.join(',')\n          } else {\n            this.formItem.rowsFilterCreateParam.context = '//filter by config'\n          }\n        }\n        param.openRowsFilterConfig = true\n        param.rowsFilterCreateParam = this.formItem.rowsFilterCreateParam\n      }\n      if (this.formItem.switch.colsFilter) {\n        param.openColsFilterConfig = true\n        param.columnsFilterCreateParam = this.formItem.columnsFilterCreateParam\n      }\n      console.log(param)\n      return param\n    },\n    async getRowsFilterConfig () {\n      await this.axios.get('/api/drc/v2/autoconfig/getRowsFilterView?rowsFilterId=' + this.meta.rowsFilterId)\n        .then(response => {\n          if (response.data.status === 1) {\n            this.$Message.error('查询行过滤配置失败!')\n          } else {\n            const res = response.data.data\n            if (res == null) {\n              // empty config\n            } else {\n              this.formItem.switch.rowsFilter = true\n              // rowsFilterConfig.context和onfigInTripUid.regionsChosen要放在前面\n              // 不然会失效\n              this.formItem.rowsFilterCreateParam.context = res.context\n              this.formItem.rowsFilterCreateParam.mode = res.mode\n              if (this.useTripUdlOrUidMode) {\n                this.formItem.rowsFilter.configInTripUid.regionsChosen = res.context.split(',')\n              } else {\n                this.formItem.rowsFilter.configInTripUid = {\n                  regionsChosen: []\n                }\n              }\n              this.formItem.rowsFilterCreateParam.columns = res.columns === null ? [] : res.columns\n              if (res.udlColumns !== null) {\n                this.formItem.rowsFilterCreateParam.udlColumns = res.udlColumns\n              }\n              this.formItem.rowsFilterCreateParam.drcStrategyId = res.drcStrategyId === 0 ? null : res.drcStrategyId\n              this.formItem.rowsFilterCreateParam.routeStrategyId = res.routeStrategyId\n              this.formItem.rowsFilterCreateParam.illegalArgument = res.illegalArgument\n              this.formItem.rowsFilterCreateParam.fetchMode = res.fetchMode\n            }\n          }\n        })\n    },\n    async getColsFilterConfig () {\n      await this.axios.get('/api/drc/v2/autoconfig/getColsFilterView?colsFilterId=' + this.meta.colsFilterId)\n        .then(response => {\n          if (response.data.status === 1) {\n            this.$Message.error('查询字段过滤配置失败!')\n          } else {\n            const res = response.data.data\n            if (res == null) {\n              // empty config\n            } else {\n              this.formItem.switch.colsFilter = true\n              this.formItem.columnsFilterCreateParam.mode = res.mode\n              this.formItem.columnsFilterCreateParam.columns = res.columns\n            }\n          }\n        })\n    },\n    async getCommonColumns () {\n      const params = this.getParams()\n      this.formItem.constants.columnsForChose = []\n      this.commonColumnLoading = true\n      await this.axios.get('/api/drc/v2/autoconfig/commonColumns', {\n        params: this.flattenObj(params)\n      }).then(response => {\n        if (response.data.status === 1) {\n          this.$Message.error('查询公共列名失败，请手动添加：' + response.data.message)\n        } else {\n          this.formItem.constants.columnsForChose = response.data.data\n          this.$Message.info('查询公共列名数：' + response.data.data.length)\n        }\n      }).catch(message => {\n        this.$Message.error('查询公共列名异常: ' + message)\n      }).finally(() => {\n        this.commonColumnLoading = false\n      })\n    },\n    handleCreateColumn (val) {\n      if (this.contains(this.formItem.constants.columnsForChose, val)) {\n        alert('已有项禁止创建')\n        return\n      }\n      if (val === '' || val === undefined || val === null) {\n        alert('字段不能为空')\n        return\n      }\n      this.formItem.constants.columnsForChose.push(val)\n    },\n    async afterEnterTableName () {\n      await this.getTableInfo()\n    },\n    flattenObj (ob) {\n      const result = {}\n      for (const i in ob) {\n        if ((typeof ob[i]) === 'object' && !Array.isArray(ob[i])) {\n          const temp = this.flattenObj(ob[i])\n          for (const j in temp) {\n            result[i + '.' + j] = temp[j]\n          }\n        } else {\n          result[i] = ob[i]\n        }\n      }\n      return result\n    },\n    async refresh () {\n      this.formItem.dbName = this.dbNames.join(',')\n      if (this.configData) {\n        console.log('edit panel')\n        this.formItem.tableName = this.configData.config.logicTable\n        this.meta.rowsFilterId = this.configData.config.rowsFilterId\n        this.meta.colsFilterId = this.configData.config.colsFilterId\n        this.getCommonColumns()\n        if (this.meta.rowsFilterId) {\n          await this.getRowsFilterConfig(this.meta.rowsFilterId)\n        } else {\n          this.formItem.switch.rowsFilter = false\n          this.formItem.rowsFilterCreateParam = this.rowsFilterCreateParamInit()\n        }\n        if (this.meta.colsFilterId) {\n          await this.getColsFilterConfig(this.meta.colsFilterId)\n        } else {\n          this.formItem.switch.colsFilter = false\n          this.formItem.columnsFilterCreateParam = this.columnsFilterCreateParamInit()\n        }\n        this.meta.dbReplicationIds = this.configData.dbReplicationIds\n        this.meta.originLogicTableConfig = this.configData.config\n      } else {\n        console.log('insert new config')\n      }\n    },\n    async submitAll () {\n      const that = this\n      that.dataLoading = true\n      that.alertInfo.show = false\n      that.alertInfo.successShow = false\n      that.successSubmit = false\n      const params = this.getEditParams()\n      // if (!this.checkParam(params)) {\n      //   return\n      // }\n      await that.axios.post('/api/drc/v2/autoconfig/dbReplication/' + this.formAction, params)\n        .then(response => {\n          const data = response.data\n          const success = data.status === 0\n          if (success) {\n            that.$Message.success('提交成功')\n            that.successSubmit = true\n            that.alertInfo.successShow = true\n            that.alertInfo.message = null\n            that.alertInfo.title = '提交成功'\n            that.$emit('finished')\n          } else {\n            that.$Message.warning('提交失败: ' + data.message)\n            that.alertInfo.show = true\n            that.alertInfo.title = '提交失败'\n            that.alertInfo.message = data.message\n          }\n        })\n        .catch(message => {\n          that.$Message.error('提交异常: ' + message)\n        })\n        .finally(() => {\n          that.dataLoading = false\n        })\n    },\n    rowsFilterCreateParamInit () {\n      return {\n        mode: 1,\n        drcStrategyId: 2000000002,\n        routeStrategyId: 0,\n        udlColumns: [],\n        columns: [],\n        context: '',\n        illegalArgument: false,\n        fetchMode: 0\n      }\n    },\n    columnsFilterCreateParamInit () {\n      return {\n        mode: null,\n        columns: []\n      }\n    }\n  },\n  computed: {\n    preCheckTablePage () {\n      const data = this.checkTableDataList\n      const start = this.table.dbTablePage.current * this.table.dbTablePage.size - this.table.dbTablePage.size\n      const end = start + this.table.dbTablePage.size\n      return [...data].slice(start, end)\n    },\n    useTripUdlOrUidMode () {\n      return [this.formItem.constants.rowsFilter.filterMode.TRIP_UDL, this.formItem.constants.rowsFilter.filterMode.TRIP_UDL_UID].includes(this.formItem.rowsFilterCreateParam.mode)\n    },\n    hasUdlColumn () {\n      return this.formItem.rowsFilterCreateParam.udlColumns.length !== 0\n    },\n    fillContextByRegion () {\n      return this.formItem.rowsFilterCreateParam.fetchMode === this.formItem.constants.rowsFilter.fetchMode.RPC\n    },\n    hasUidColumn () {\n      return this.formItem.rowsFilterCreateParam.columns.length !== 0\n    },\n    showUdlConfigDetail () {\n      return this.formItem.rowsFilterCreateParam.mode === this.formItem.constants.rowsFilter.filterMode.TRIP_UDL_UID || this.hasUdlLegalConfig || !this.hasUidLegalConfig\n    },\n    showUidConfigDetail () {\n      return this.formItem.rowsFilterCreateParam.mode === this.formItem.constants.rowsFilter.filterMode.TRIP_UDL_UID || this.hasUidLegalConfig || !this.hasUdlLegalConfig\n    },\n    hasUdlLegalConfig () {\n      return this.formItem.rowsFilterCreateParam.udlColumns.length !== 0 && this.formItem.rowsFilterCreateParam.drcStrategyId != null && this.formItem.rowsFilterCreateParam.drcStrategyId > 0\n    },\n    hasUidLegalConfig () {\n      return this.hasUidColumn\n    }\n  },\n  created () {\n    this.refresh()\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dbReplicationConfig.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dbReplicationConfig.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./dbReplicationConfig.vue?vue&type=template&id=8b2ede76&scoped=true&\"\nimport script from \"./dbReplicationConfig.vue?vue&type=script&lang=js&\"\nexport * from \"./dbReplicationConfig.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8b2ede76\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div :style=\"{padding: '1px 1px',height: '100%'}\">\n    <Table style=\"margin-top: 20px\" stripe :columns=\"columns\" :data=\"tableData\" :loading=\"dataLoading\" border\n           ref=\"multipleTable\">\n      <template slot=\"action\" slot-scope=\"{ row, index }\">\n        <Button type=\"primary\" size=\"small\" style=\"margin-right: 5px\" @click=\"goToUpdateConfig(row, index)\">修改\n        </Button>\n        <Button type=\"error\" size=\"small\" style=\"margin-right: 5px\" @click=\"goToDeleteConfig(row, index)\">删除\n        </Button>\n      </template>\n    </Table>\n    <br/>\n    <Button type=\"success\" @click=\"goToInsertConfig\" icon=\"md-add\">\n      新增\n    </Button>\n    <Modal v-model=\"editModal.open\" width=\"1200px\" :footer-hide=\"true\" :title=\"actionTitle\">\n      <db-replication-config ref=\"dbReplicationConfigComponent\" @finished=\"finishConfig\"\n                             v-if=\"editModal.open\"\n                             :config-data=\"selectedRow\"\n                             :src-region=\"srcRegion\"\n                             :dst-region=\"dstRegion\"\n                             :db-names=\"dbNames\"\n                             :form-action=\"action\"\n      />\n    </Modal>\n  </div>\n</template>\n\n<script>\nimport DbReplicationConfig from '@/components/v2/dbDrcBuild/dbReplicationConfig.vue'\n\nexport default {\n  name: 'tables',\n  components: { DbReplicationConfig },\n  props: {\n    dbName: String,\n    dbNames: Array,\n    srcRegion: String,\n    dstRegion: String,\n    tableData: Array,\n    dataLoading: Boolean\n  },\n  emits: ['updated'],\n  data () {\n    return {\n      selectedRow: {},\n      action: null,\n      actionTitleMap: new Map([\n        ['create', '新增 表同步'],\n        ['edit', '更新 表同步'],\n        ['delete', '⚠️删除 表同步']\n      ]),\n      editModal: {\n        open: false\n      },\n      columns: [\n        {\n          title: '表名',\n          key: 'config',\n          minWidth: 300,\n          render: (h, params) => {\n            const row = params.row\n            return h('div', row.config.logicTable)\n          }\n        },\n        {\n          title: '过滤规则',\n          key: 'filterTypes',\n          minWidth: 100,\n          render: (h, params) => {\n            const row = params.row\n            const rowsFilterId = row.config.rowsFilterId\n            const colsFilterId = row.config.colsFilterId\n            if (!rowsFilterId && !colsFilterId) {\n              return h('Tag', {\n                props: {\n                  color: 'red'\n                }\n              }, '无')\n            } else {\n              return h('div', [\n                rowsFilterId && h('Tag', {\n                  props: {\n                    color: 'blue'\n                  }\n                }, '行过滤'),\n                colsFilterId && h('Tag', {\n                  props: {\n                    color: 'green'\n                  }\n                }, '字段过滤')\n              ])\n            }\n          }\n        },\n        {\n          title: '操作',\n          minWidth: 100,\n          slot: 'action',\n          align: 'center',\n          fixed: 'right'\n        }\n      ]\n    }\n  },\n  methods: {\n    async goToInsertConfig () {\n      this.selectedRow = null\n      this.action = DbReplicationConfig.FORM_ACTION_OPTION.CREATE\n      this.editModal.open = true\n    },\n    async goToUpdateConfig (row, index) {\n      this.selectedRow = row\n      this.action = DbReplicationConfig.FORM_ACTION_OPTION.EDIT\n      this.editModal.open = true\n    },\n    async goToDeleteConfig (row, index) {\n      this.selectedRow = row\n      this.action = DbReplicationConfig.FORM_ACTION_OPTION.DELETE\n      this.editModal.open = true\n    },\n    finishConfig () {\n      this.selectedRow = null\n      this.editModal.open = false\n      this.$emit('updated')\n    }\n  },\n  computed: {\n    actionTitle () {\n      return this.actionTitleMap.get(this.action)\n    }\n  },\n  created () {\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tables.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tables.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./tables.vue?vue&type=template&id=6250ec54&scoped=true&\"\nimport script from \"./tables.vue?vue&type=script&lang=js&\"\nexport * from \"./tables.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6250ec54\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{style:({padding: '1px 1px',height: '100%'})},[_c('Collapse',{model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}},_vm._l((_vm.mhaReplications),function(replication,index){return _c('Panel',{key:replication.srcMha.name +'->'+replication.dstMha.name,attrs:{\"name\":String(index)},scopedSlots:_vm._u([{key:\"content\",fn:function(){return [_c('Button',{staticStyle:{\"margin-bottom\":\"10px\"},attrs:{\"icon\":\"ios-open-outline\"},on:{\"click\":function($event){return _vm.openModal(index)}}},[_vm._v(\" 打开详情\")]),_c('mha-db-replication-panel',{attrs:{\"mha-db-replications\":replication.mhaDbReplications}}),_c('Modal',{attrs:{\"width\":\"1500px\",\"footer-hide\":true},model:{value:(_vm.openDetailModal[index]),callback:function ($$v) {_vm.$set(_vm.openDetailModal, index, $$v)},expression:\"openDetailModal[index]\"}},[(_vm.openDetailModal[index])?_c('drc-build-v2',{ref:\"dbReplicationConfigComponent\",refInFor:true,attrs:{\"src-mha-name\":replication.srcMha.name,\"src-dc\":replication.srcMha.dcName,\"dst-mha-name\":replication.dstMha.name,\"dst-dc\":replication.dstMha.dcName}}):_vm._e()],1)]},proxy:true}],null,true)},[_vm._v(\" \"+_vm._s(replication.srcMha.name + ' -> ' + replication.dstMha.name)+\" \")])}),1),_c('br'),_c('Button',{attrs:{\"type\":\"primary\",\"icon\":\"md-sync\"},on:{\"click\":_vm.goToSwitchAppliers}},[_vm._v(\" 切换Applier生效配置 \")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Table',{attrs:{\"stripe\":\"\",\"border\":\"\",\"columns\":_vm.columns,\"data\":_vm.mhaDbReplications}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <Table stripe border :columns=\"columns\" :data=\"mhaDbReplications\">\n  </Table>\n</template>\n\n<script>\nimport prettyMilliseconds from 'pretty-ms'\n\nexport default {\n  name: 'mhaDbReplicationPanel',\n  props: {\n    mhaDbReplications: Array\n  },\n  data () {\n    return {\n      value: ['1'],\n      delayDataLoading: false,\n      columns: [\n        {\n          title: '类型',\n          width: 80,\n          render: (h, params) => {\n            const row = params.row\n            let text = 'none'\n            let type = 'error'\n            let disabled = false\n            switch (row.transmissionType) {\n              case 'simplex':\n                text = '单'\n                type = 'info'\n                break\n              case 'duplex':\n                text = '双'\n                type = 'success'\n                break\n              default:\n                text = '无'\n                disabled = true\n                break\n            }\n            return h('Button', {\n              props: {\n                type: type,\n                size: 'small',\n                disabled: disabled\n              },\n              on: {\n                click: () => {\n                  this.showModal(row)\n                }\n              }\n            }, text)\n          }\n        },\n        {\n          title: '延迟',\n          key: 'drcStatus',\n          width: 100,\n          align: 'center',\n          renderHeader: (h, params) => {\n            return h('span', [\n              h('span', '延迟'),\n              this.replicationIds && this.replicationIds.length !== 0 && h('Button', {\n                on: {\n                  click: async () => {\n                    await this.getDelay()\n                  }\n                },\n                props: {\n                  loading: this.delayDataLoading,\n                  size: 'small',\n                  shape: 'circle',\n                  type: 'default',\n                  icon: 'md-refresh'\n                }\n              })\n            ])\n          },\n          render: (h, params) => {\n            const row = params.row\n            let color, text\n            if (row.drcStatus === true) {\n              if (row.delay != null) {\n                console.log(row.delay)\n                text = prettyMilliseconds(row.delay, { compact: true })\n                if (row.delay > 10000) {\n                  color = 'warning'\n                } else {\n                  color = 'success'\n                }\n              } else {\n                text = '已接入'\n                color = 'blue'\n              }\n            } else {\n              text = '未接入'\n              color = 'default'\n            }\n            return h('Tag', {\n              props: {\n                color: color\n              }\n            }, text)\n          }\n        },\n        {\n          title: 'DB 名',\n          key: 'srcDbName',\n          render: (h, params) => {\n            return h('p', params.row.src.dbName)\n          }\n        },\n        {\n          title: 'applier',\n          key: 'srcDbName',\n          render: (h, params) => {\n            return h('p', params.row.dbApplierDto.ips)\n          }\n        }\n      ]\n    }\n  },\n  methods: {\n    showModal (row) {\n      console.log('show modal')\n      this.$Message.info('还未上线，敬请期待')\n    },\n    async getDelay () {\n      const param = {\n        replicationIds: this.replicationIds\n      }\n      if (param.replicationIds.length === 0) {\n        console.log('skip delay search')\n        return\n      }\n      this.delayDataLoading = true\n      this.axios.get('/api/drc/v2/replication/db/delay', { params: param })\n        .then(response => {\n          const delays = response.data.data\n          const emptyResult = delays == null || !Array.isArray(delays) || delays.length === 0\n          if (emptyResult) {\n            return\n          }\n          const dataMap = new Map(delays.map(e => [e.srcMha + '->' + e.dstMha + '->' + e.dbName, e.delay]))\n          this.mhaDbReplications.forEach(line => {\n            this.$set(line, 'delay', dataMap.get(line.src.mhaName + '->' + line.dst.mhaName + '->' + line.src.dbName))\n          })\n          console.log('replications', this.mhaDbReplications)\n        })\n        .catch(message => {\n          console.log(message)\n          this.$Message.error('查询延迟异常: ' + message)\n        })\n        .finally(() => {\n          this.delayDataLoading = false\n        })\n    }\n  },\n  computed: {\n    replicationIds () {\n      return this.mhaDbReplications\n        .filter(item => item.drcStatus === true)\n        .map(item => item.id)\n        .join(',')\n    }\n  },\n  created () {\n    this.getDelay()\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mhaDbReplicationPanel.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mhaDbReplicationPanel.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./mhaDbReplicationPanel.vue?vue&type=template&id=16494cca&scoped=true&\"\nimport script from \"./mhaDbReplicationPanel.vue?vue&type=script&lang=js&\"\nexport * from \"./mhaDbReplicationPanel.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"16494cca\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div :style=\"{padding: '1px 1px',height: '100%'}\">\n    <Collapse v-model=\"value\">\n      <Panel v-for=\"(replication, index) in mhaReplications\"\n             :key=\"replication.srcMha.name +'->'+replication.dstMha.name\"\n             :name=\"String(index)\">\n        {{ replication.srcMha.name + ' -> ' + replication.dstMha.name }}\n        <template #content>\n          <Button icon=\"ios-open-outline\" @click=\"openModal(index)\" style=\"margin-bottom: 10px\"> 打开详情</Button>\n          <mha-db-replication-panel :mha-db-replications=\"replication.mhaDbReplications\"/>\n          <Modal v-model=\"openDetailModal[index]\" width=\"1500px\" :footer-hide=\"true\">\n            <drc-build-v2 ref=\"dbReplicationConfigComponent\" v-if=\"openDetailModal[index]\"\n                          :src-mha-name=\"replication.srcMha.name\"\n                          :src-dc=\"replication.srcMha.dcName\"\n                          :dst-mha-name=\"replication.dstMha.name\"\n                          :dst-dc=\"replication.dstMha.dcName\"\n            />\n          </Modal>\n        </template>\n      </Panel>\n    </Collapse>\n    <br/>\n    <Button type=\"primary\" @click=\"goToSwitchAppliers\" icon=\"md-sync\">\n      切换Applier生效配置\n    </Button>\n  </div>\n</template>\n\n<script>\nimport MhaDbReplicationPanel from '@/components/v2/dbDrcBuild/mhaDbReplicationPanel.vue'\nimport DrcBuildV2 from '@/views/v2/meta/buildStep/drcBuildV2.vue'\nimport mhaDbReplications from '@/views/v2/meta/mhaDbReplications.vue'\n\nexport default {\n  name: 'mhaReplicationPanel',\n  components: { DrcBuildV2, MhaDbReplicationPanel },\n  props: {\n    mhaReplications: Array\n  },\n  emits: ['updated'],\n  data () {\n    return {\n      value: ['0'],\n      openDetailModal: [],\n      dataLoading: false\n    }\n  },\n  methods: {\n    openModal (index) {\n      this.$set(this.openDetailModal, index, true)\n    },\n    goToSwitchAppliers () {\n      this.$Modal.confirm({\n        title: '切换Applier',\n        content: '<p>请确认</p>',\n        loading: this.dataLoading,\n        onOk: () => {\n          this.switchAppliers()\n        }\n      })\n    },\n    switchAppliers () {\n      const params = this.getSwitchParams()\n      console.log(params)\n      this.dataLoading = true\n      this.axios.post('/api/drc/v2/autoconfig/switchAppliers', params)\n        .then(response => {\n          const data = response.data\n          const success = data.status === 0\n          if (success) {\n            this.$Message.success('提交成功')\n          } else {\n            this.$Message.warning('提交失败: ' + data.message)\n          }\n        })\n        .catch(message => {\n          this.$Message.error('提交异常: ' + message)\n        })\n        .finally(() => {\n          this.dataLoading = false\n          this.$emit('updated')\n        })\n    },\n    getSwitchParams () {\n      return this.mhaReplications.map((item) => {\n        return {\n          srcMhaName: item.srcMha.name,\n          dstMhaName: item.dstMha.name,\n          dbNames: item.mhaDbReplications.map((mhaDbReplication) => {\n            return mhaDbReplication.src.dbName\n          })\n        }\n      })\n    }\n  },\n  created () {\n    this.openDetailModal = Array(mhaDbReplications.length).fill(false)\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mhaReplicationPanel.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mhaReplicationPanel.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./mhaReplicationPanel.vue?vue&type=template&id=fd7a1678&scoped=true&\"\nimport script from \"./mhaReplicationPanel.vue?vue&type=script&lang=js&\"\nexport * from \"./mhaReplicationPanel.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"fd7a1678\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{style:({padding: '1px 1px',height: '100%'})},[_c('Row',[(_vm.alertInfo.show)?_c('Alert',{attrs:{\"type\":\"warning\",\"show-icon\":\"\",\"closable\":\"\"},scopedSlots:_vm._u([{key:\"desc\",fn:function(){return [_vm._v(_vm._s(_vm.alertInfo.message))]},proxy:true}],null,false,3041357252)},[_vm._v(\" \"+_vm._s(_vm.alertInfo.title)+\" \")]):_vm._e(),(_vm.alertInfo.successShow)?_c('Alert',{attrs:{\"type\":\"success\",\"show-icon\":\"\",\"closable\":\"\"},scopedSlots:_vm._u([{key:\"desc\",fn:function(){return [_vm._v(_vm._s(_vm.alertInfo.message))]},proxy:true}],null,false,3041357252)},[_vm._v(\" \"+_vm._s(_vm.alertInfo.title)+\" \")]):_vm._e(),_c('Col',{attrs:{\"span\":\"12\"}},[_c('Row',{staticStyle:{\"margin-right\":\"20px\"}},[_c('Divider',[_vm._v(\"1. 选择同步方向\")]),_c('Col',{attrs:{\"span\":\"11\"}},[_c('Card',{attrs:{\"bordered\":true},scopedSlots:_vm._u([{key:\"title\",fn:function(){return [_c('Icon',{attrs:{\"type\":\"ios-pin\"}}),_vm._v(\" 源 region \")]},proxy:true}])},[_c('Select',{attrs:{\"filterable\":\"\",\"clearable\":\"\",\"placeholder\":\"地域\"},on:{\"on-change\":_vm.afterSwitchRegion},model:{value:(_vm.formItem.srcRegionName),callback:function ($$v) {_vm.$set(_vm.formItem, \"srcRegionName\", $$v)},expression:\"formItem.srcRegionName\"}},_vm._l((_vm.meta.regionOptions),function(region){return _c('Option',{key:region,attrs:{\"value\":region,\"label\":region}},[_vm._v(\" \"+_vm._s(region)+\" \")])}),1)],1)],1),_c('Col',{staticStyle:{\"text-align\":\"center\"},attrs:{\"span\":\"2\"}},[_c('Button',{attrs:{\"size\":\"small\",\"shape\":\"circle\",\"type\":\"default\",\"loading\":_vm.dataLoading},on:{\"click\":_vm.getRegionOptions}},[_vm._v(\" -> \")])],1),_c('Col',{attrs:{\"span\":\"11\"}},[_c('Card',{attrs:{\"bordered\":true},scopedSlots:_vm._u([{key:\"title\",fn:function(){return [_c('Icon',{attrs:{\"type\":\"ios-pin\"}}),_vm._v(\" 目标 region \")]},proxy:true}])},[_c('Select',{attrs:{\"filterable\":\"\",\"clearable\":\"\",\"placeholder\":\"地域\"},on:{\"on-change\":_vm.afterSwitchRegion},model:{value:(_vm.formItem.dstRegionName),callback:function ($$v) {_vm.$set(_vm.formItem, \"dstRegionName\", $$v)},expression:\"formItem.dstRegionName\"}},_vm._l((_vm.meta.regionOptions),function(region){return _c('Option',{key:region,attrs:{\"value\":region,\"label\":region}},[_vm._v(\" \"+_vm._s(region)+\" \")])}),1)],1)],1)],1)],1),_c('Col',{attrs:{\"span\":\"12\"}},[_c('Row',[_c('Divider',[_vm._v(\"2. 预览：同步集群\")]),_c('Button',{staticStyle:{\"margin-bottom\":\"5px\"},attrs:{\"type\":\"primary\",\"loading\":_vm.table.dbMhaTableLoading},on:{\"click\":_vm.getDalInfo}},[_vm._v(\" 检查同步集群 \")]),_c('Table',{attrs:{\"size\":\"small\",\"loading\":_vm.table.dbMhaTableLoading,\"stripe\":\"\",\"columns\":_vm.table.dbMhaTableColumn,\"data\":_vm.preCheckMhaReplicationPage,\"border\":\"\"}}),_c('div',[_c('Page',{attrs:{\"transfer\":true,\"total\":_vm.previewDataList.length,\"current\":_vm.table.dbMhaTablePage.current,\"page-size-opts\":_vm.table.dbMhaTablePage.pageSizeOpts,\"page-size\":_vm.table.dbMhaTablePage.size,\"show-total\":\"\",\"show-sizer\":\"\",\"show-elevator\":\"\"},on:{\"update:current\":function($event){return _vm.$set(_vm.table.dbMhaTablePage, \"current\", $event)},\"on-page-size-change\":function (val) {_vm.table.dbMhaTablePage.size = val}}})],1)],1)],1)],1),_c('Divider'),_c('Button',{attrs:{\"loading\":_vm.dataLoading,\"type\":\"primary\"},on:{\"click\":_vm.createReplication}},[_vm._v(\"提交\")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div :style=\"{padding: '1px 1px',height: '100%'}\">\n    <Row>\n      <Alert type=\"warning\" show-icon v-if=\"alertInfo.show\" closable>\n        {{ alertInfo.title }}\n        <template #desc>{{ alertInfo.message }}</template>\n      </Alert>\n      <Alert type=\"success\" show-icon v-if=\"alertInfo.successShow\" closable>\n        {{ alertInfo.title }}\n        <template #desc>{{ alertInfo.message }}</template>\n      </Alert>\n      <Col span=\"12\">\n        <Row style=\"margin-right: 20px\">\n          <Divider>1. 选择同步方向</Divider>\n          <Col span=\"11\">\n            <Card :bordered=\"true\">\n              <template #title>\n                <Icon type=\"ios-pin\"/>\n                源 region\n              </template>\n              <Select filterable clearable v-model=\"formItem.srcRegionName\" placeholder=\"地域\"\n                      @on-change=\"afterSwitchRegion\">\n                <Option v-for=\"region in meta.regionOptions\" :value=\"region\" :key=\"region\" :label=\"region\">\n                  {{ region }}\n                </Option>\n              </Select>\n            </Card>\n          </Col>\n          <Col span=\"2\" style=\"text-align: center\">\n            <Button size=\"small\" shape=\"circle\" type=\"default\" :loading=\"dataLoading\" @click=\"getRegionOptions\">\n              ->\n            </Button>\n          </Col>\n          <Col span=\"11\">\n            <Card :bordered=\"true\">\n              <template #title>\n                <Icon type=\"ios-pin\"/>\n                目标 region\n              </template>\n              <Select filterable clearable v-model=\"formItem.dstRegionName\" placeholder=\"地域\"\n                      @on-change=\"afterSwitchRegion\">\n                <Option v-for=\"region in meta.regionOptions\" :value=\"region\" :key=\"region\" :label=\"region\">\n                  {{ region }}\n                </Option>\n              </Select>\n            </Card>\n          </Col>\n        </Row>\n      </Col>\n      <Col span=\"12\">\n        <Row>\n          <Divider>2. 预览：同步集群</Divider>\n          <Button type=\"primary\" :loading=\"table.dbMhaTableLoading\" @click=\"getDalInfo\" style=\"margin-bottom: 5px\">\n            检查同步集群\n          </Button>\n          <Table size=\"small\" :loading=\"table.dbMhaTableLoading\" stripe :columns=\"table.dbMhaTableColumn\"\n                 :data=\"preCheckMhaReplicationPage\" border></Table>\n          <div>\n            <Page\n              :transfer=\"true\"\n              :total=\"previewDataList.length\"\n              :current.sync=\"table.dbMhaTablePage.current\"\n              :page-size-opts=\"table.dbMhaTablePage.pageSizeOpts\"\n              :page-size=\"table.dbMhaTablePage.size\"\n              show-total\n              show-sizer\n              show-elevator\n              @on-page-size-change=\"(val) => {table.dbMhaTablePage.size = val}\"></Page>\n          </div>\n        </Row>\n      </Col>\n    </Row>\n    <Divider></Divider>\n    <Button @click=\"createReplication\" :loading=\"dataLoading\" type=\"primary\">提交</Button>\n\n  </div>\n</template>\n\n<script>\n\nexport default {\n  name: 'mhaPreview',\n  components: {},\n  props: {\n    dbName: String,\n    existReplicationRegionOptions: Array\n  },\n  emits: ['updated'],\n  data () {\n    return {\n      meta: {\n        regionOptions: [],\n        existReplicationRegionOptions: []\n      },\n      alertInfo: {\n        show: false,\n        successShow: false,\n        title: null,\n        message: null\n      },\n      formItem: {\n        srcRegionName: null,\n        dstRegionName: null\n      },\n      dataLoading: false,\n      constants: {\n        DAL_CLUSTER_MODE: 1\n      },\n      previewDataList: [],\n      table: {\n        dbMhaTableLoading: false,\n        dbMhaTableColumn: [\n          {\n            title: 'DB名',\n            key: 'dbName'\n          },\n          {\n            title: '源集群',\n            key: 'srcMhaName',\n            render: (h, params) => {\n              const row = params.row\n              const mha = row.srcMha\n              if (mha != null) {\n                return h('div', [\n                  h('span', mha.name),\n                  h('span', {\n                    style:\n                      {\n                        float: 'right',\n                        color: '#ababab'\n                      }\n                  }, mha.regionName + '(' + mha.dcName + ')')\n                ])\n              }\n            }\n          },\n          {\n            title: '目标集群',\n            key: 'dstMhaName',\n            render: (h, params) => {\n              const row = params.row\n              const mha = row.dstMha\n              if (mha != null) {\n                return h('div', [\n                  h('span', mha.name),\n                  h('span', {\n                    style:\n                      {\n                        float: 'right',\n                        color: '#ababab'\n                      }\n                  }, mha.regionName + '(' + mha.dcName + ')')\n                ])\n              }\n            }\n          }\n        ],\n        dbMhaTablePage: {\n          total: 0,\n          current: 1,\n          size: 5,\n          pageSizeOpts: [5, 10, 20, 100]\n        }\n      }\n    }\n  },\n  methods: {\n    async getRegionOptions () {\n      this.dataLoading = true\n      this.meta.regionOptions = []\n      await this.axios.get('/api/drc/v2/autoconfig/regionOptions', {\n        params: {\n          mode: this.constants.DAL_CLUSTER_MODE,\n          dbName: this.dbName\n        }\n      })\n        .then(response => {\n          const data = response.data.data\n          const success = data && response.data.status === 0\n          if (success) {\n            this.meta.regionOptions = data\n            if (data.indexOf(this.formItem.srcRegionName) === -1) {\n              this.formItem.srcRegionName = null\n            }\n            if (data.indexOf(this.formItem.dstRegionName) === -1) {\n              this.formItem.dstRegionName = null\n            }\n          } else {\n            this.formItem.srcRegionName = null\n            this.formItem.dstRegionName = null\n            this.$Message.warning('查询可选地域失败')\n          }\n        })\n        .catch(message => {\n          this.$Message.error('查询可选地域失败: ' + message)\n        })\n        .finally(() => {\n          this.dataLoading = false\n        })\n    },\n    async getDalInfo () {\n      this.previewDataList = []\n      this.table.dbMhaTablePage.current = 1\n      this.table.dbMhaTableLoading = true\n      await this.axios.get('/api/drc/v2/autoconfig/preCheck', {\n        params: {\n          mode: this.constants.DAL_CLUSTER_MODE,\n          dbName: this.dbName,\n          srcRegionName: this.formItem.srcRegionName,\n          dstRegionName: this.formItem.dstRegionName\n        }\n      })\n        .then(response => {\n          const data = response.data.data\n          const success = data && response.data.status === 0\n          if (success) {\n            this.previewDataList = data\n            console.log('total: ' + this.previewDataList.length)\n            this.$Message.success('同步集群检测成功, 共找到 ' + data.length + ' 个DB')\n          } else {\n            this.$Message.warning('同步集群检测失败：' + response.data.message)\n          }\n        })\n        .catch(message => {\n          this.$Message.error('查询dalcluster异常: ' + message)\n        })\n        .finally(() => {\n          this.table.dbMhaTableLoading = false\n        })\n    },\n    async createReplication () {\n      const params = {\n        srcRegionName: this.formItem.srcRegionName,\n        dstRegionName: this.formItem.dstRegionName,\n        dbName: this.dbName\n      }\n      this.alertInfo.show = false\n      this.alertInfo.successShow = false\n      this.dataLoading = true\n      await this.axios.post('/api/drc/v2/autoconfig/mhaDbReplication/create', params)\n        .then(response => {\n          const data = response.data\n          const success = data.status === 0\n          if (success) {\n            this.alertInfo.successShow = true\n            this.alertInfo.message = null\n            this.alertInfo.title = '提交成功'\n            this.$emit('updated')\n          } else {\n            this.alertInfo.show = true\n            this.alertInfo.title = '提交失败'\n            this.alertInfo.message = data.message\n            this.$Message.warning('提交失败: ' + data.message)\n          }\n        })\n        .catch(message => {\n          this.$Message.error('提交异常: ' + message)\n        })\n        .finally(() => {\n          this.dataLoading = false\n        })\n    },\n    async afterSwitchRegion () {\n    }\n  },\n  computed: {\n    preCheckMhaReplicationPage () {\n      const data = this.previewDataList\n      const start = this.table.dbMhaTablePage.current * this.table.dbMhaTablePage.size - this.table.dbMhaTablePage.size\n      const end = start + this.table.dbMhaTablePage.size\n      return [...data].slice(start, end)\n    }\n  },\n  created () {\n    this.getRegionOptions()\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mhaPreview.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mhaPreview.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./mhaPreview.vue?vue&type=template&id=3043c002&scoped=true&\"\nimport script from \"./mhaPreview.vue?vue&type=script&lang=js&\"\nexport * from \"./mhaPreview.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3043c002\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <base-component>\n    <Breadcrumb :style=\"{margin: '15px 0 15px 185px', position: 'fixed'}\">\n      <BreadcrumbItem to=\"/home\">首页</BreadcrumbItem>\n      <BreadcrumbItem to=\"/v2/dbDrcBuildV2\">DB粒度 DRC 同步</BreadcrumbItem>\n    </Breadcrumb>\n    <Content class=\"content\"\n             :style=\"{padding: '10px', background: '#ffffff', margin: '50px 0 111px 185px', zIndex: '1'}\">\n      <Row :gutter=10 align=\"middle\">\n        <Col span=\"18\">\n          <Form :model=\"formItem\" :label-width=\"100\" style=\"margin-right: 20px;margin-top: 10px\">\n            <FormItem label=\"数据库\" :required=true>\n              <Select\n                v-model=\"meta.dbName\"\n                filterable\n                :disabled=\"!!meta.fixDb\"\n                placeholder=\"请搜索数据库信息\"\n                @on-change=\"selectDb\"\n                :remote-method=\"getExistDb\"\n                :loading=\"dataLoading\">\n                <Option v-for=\"(option, index) in meta.dbOptions\" :value=\"option.dbName\" :key=\"index\">\n                  {{ option.dbName }}\n                </Option>\n              </Select>\n            </FormItem>\n            <FormItem label=\"同步方向\" :required=true>\n              <RadioGroup v-model=\"selectedExistReplication\" button-style=\"solid\"\n                          @on-change=\"afterSelectExistReplication\">\n                <Radio v-for=\"items in meta.existReplicationRegionOptions\"\n                       :key=\"items.srcRegionName+' -> '+items.dstRegionName\"\n                       :label=\"items.srcRegionName+' -> '+items.dstRegionName\" border>\n                  {{ items.srcRegionName + ' -> ' + items.dstRegionName }}\n                </Radio>\n              </RadioGroup>\n              <Button type=\"primary\" icon=\"md-add\" ghost @click=\"goToCreateReplication\">新增</Button>\n              <Modal v-model=\"createModal.open\" width=\"1200px\" :footer-hide=\"true\" title=\"创建同步\">\n                <mha-preview v-if=\"createModal.open\" :db-name=\"meta.dbName\" @updated=\"getDrcConfig\"\n                             :exist-replication-region-options=\"meta.existReplicationRegionOptions\"></mha-preview>\n              </Modal>\n            </FormItem>\n            <Divider orientation=\"left\">同步表</Divider>\n            <Card style=\"width:100%\">\n              <tables :table-data=\"drcConfig.logicTableSummaryDtos\" :data-loading=\"configDataLoading\"\n                      :src-region=\"meta.srcRegionName\" :dst-region=\"meta.dstRegionName\" :db-name=\"meta.dbName\"\n                      :db-names=\"drcConfig.dbNames\" @updated=\"getDrcConfig\"\n              />\n            </Card>\n            <Divider orientation=\"left\">同步DB</Divider>\n            <Card style=\"width:100%\">\n              <mha-replication-panel :mha-replications=\"drcConfig.mhaReplications\" @updated=\"getDrcConfig\"/>\n            </Card>\n          </Form>\n        </Col>\n      </Row>\n    </Content>\n  </base-component>\n</template>\n<script>\n\nimport tables from '@/components/v2/dbDrcBuild/tables.vue'\nimport MhaReplicationPanel from '@/components/v2/dbDrcBuild/mhaReplicationPanel.vue'\nimport MhaPreview from '@/components/v2/dbDrcBuild/mhaPreview.vue'\n\nexport default {\n  components: { MhaPreview, MhaReplicationPanel, tables },\n  data () {\n    return {\n      createModal: {\n        open: false\n      },\n      dataLoading: false,\n      configDataLoading: false,\n      selectedExistReplication: this.$route.query.srcRegionName + ' -> ' + this.$route.query.dstRegionName,\n      formItem: {\n        srcRegionName: null,\n        dstRegionName: null\n      },\n      drcConfig: {},\n      meta: {\n        dbName: this.$route.query.dbName,\n        srcRegionName: this.$route.query.srcRegionName,\n        dstRegionName: this.$route.query.dstRegionName,\n        fixDb: this.$route.query.fixDb,\n        regionOptions: [],\n        dbOptions: [],\n        existReplicationRegionOptions: []\n      }\n    }\n  },\n  methods: {\n    getParams: function () {\n      const param = {}\n      param.dbName = this.meta.dbName\n      param.srcRegionName = this.meta.srcRegionName\n      param.dstRegionName = this.meta.dstRegionName\n      return param\n    },\n    async getExistDb (dbName) {\n      if (dbName === null || dbName.length === null || dbName.length <= 0) {\n        return []\n      }\n      const that = this\n      that.dataLoading = true\n      await that.axios.get('/api/drc/v2/autoconfig/getExistDb', {\n        params: {\n          dbName: dbName\n        }\n      })\n        .then(response => {\n          const data = response.data.data\n          if (data) {\n            that.meta.dbOptions = data\n          } else {\n            that.$Message.warning('查询DB失败')\n          }\n        })\n        .catch(message => {\n          that.$Message.error('查询DB异常: ' + message)\n        })\n        .finally(() => {\n          that.dataLoading = false\n        })\n    },\n    async selectDb () {\n      await this.getExistReplicationRegionOptions()\n      await this.getDrcConfig()\n    },\n    async getDrcConfig () {\n      this.createModal.open = false\n      this.resetPath()\n      const params = this.getParams()\n      this.drcConfig = {}\n      if (!params.dbName) {\n        this.$Message.warning('请先填写数据库')\n        return\n      }\n      if (!params.srcRegionName || !params.dstRegionName) {\n        return\n      }\n      if (params.srcRegionName === params.dstRegionName) {\n        return\n      }\n      this.configDataLoading = true\n      await this.axios.get('/api/drc/v2/autoconfig/getDbDrcConfig', {\n        params: {\n          dbName: params.dbName,\n          srcRegionName: params.srcRegionName,\n          dstRegionName: params.dstRegionName\n        }\n      })\n        .then(response => {\n          const data = response.data.data\n          const success = data && response.data.status === 0\n          if (success) {\n            this.drcConfig = data\n            this.$Message.success('查询DRC配置成功 ')\n          } else {\n            this.$Message.warning('查询失败：' + response.data.message)\n          }\n        })\n        .catch(message => {\n          this.$Message.error('查询异常: ' + message)\n        })\n        .finally(() => {\n          this.configDataLoading = false\n        })\n    },\n    async afterSelectExistReplication () {\n      console.log('afterSelectExistReplication ', this.selectedExistReplication)\n      const ret = this.selectedExistReplication.split('->')\n      this.meta.srcRegionName = ret[0].trim()\n      this.meta.dstRegionName = ret[1].trim()\n      this.getDrcConfig()\n    },\n    async getExistReplicationRegionOptions () {\n      const that = this\n      that.dataLoading = true\n      that.meta.existReplicationRegionOptions = []\n      const params = this.getParams()\n      await that.axios.get('/api/drc/v2/autoconfig/getExistDbReplicationDirections', {\n        params: {\n          dbName: params.dbName\n        }\n      })\n        .then(response => {\n          const data = response.data.data\n          const success = data && response.data.status === 0\n          if (success) {\n            that.meta.existReplicationRegionOptions = data\n            if (that.meta.existReplicationRegionOptions.length > 0) {\n              that.$Message.success('查询到 ' + that.meta.existReplicationRegionOptions.length + ' 个可选同步方向')\n            }\n          } else {\n            that.meta.srcRegionName = null\n            that.meta.dstRegionName = null\n            that.$Message.warning('查询可选地域失败')\n          }\n        })\n        .catch(message => {\n          that.$Message.error('查询可选地域失败: ' + message)\n        })\n        .finally(() => {\n          that.dataLoading = false\n        })\n    },\n    async goToCreateReplication () {\n      this.createModal.open = true\n    },\n    resetPath () {\n      this.$router.replace({\n        query: {\n          dbName: this.meta.dbName,\n          srcRegionName: this.meta.srcRegionName,\n          dstRegionName: this.meta.dstRegionName,\n          fixDb: this.meta.fixDb\n        }\n        // eslint-disable-next-line handle-callback-err\n      }).catch(() => {\n      })\n    },\n    flattenObj (ob) {\n      const result = {}\n      for (const i in ob) {\n        if ((typeof ob[i]) === 'object' && !Array.isArray(ob[i])) {\n          const temp = this.flattenObj(ob[i])\n          for (const j in temp) {\n            result[i + '.' + j] = temp[j]\n          }\n        } else {\n          result[i] = ob[i]\n        }\n      }\n      return result\n    }\n  },\n  computed: {},\n  created () {\n    // this.getRegions()\n    this.axios.get('/api/drc/v2/permission/meta/mhaReplication/modify').then((response) => {\n      if (response.data.status === 403) {\n        this.$router.push('/nopermission')\n        return\n      }\n      if (this.meta.dbName) {\n        this.getExistReplicationRegionOptions()\n        this.getDrcConfig()\n      }\n    })\n  }\n}\n</script>\n\n<style>\n.drawer-footer {\n  width: 100%;\n  bottom: 0;\n  left: 0;\n  border-top: 1px solid #e8e8e8;\n  padding: 10px 16px;\n  text-align: right;\n  background: #fff;\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dbDrcBuildV2.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dbDrcBuildV2.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./dbDrcBuildV2.vue?vue&type=template&id=1ca54bee&\"\nimport script from \"./dbDrcBuildV2.vue?vue&type=script&lang=js&\"\nexport * from \"./dbDrcBuildV2.vue?vue&type=script&lang=js&\"\nimport style0 from \"./dbDrcBuildV2.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar toObject = require('../internals/to-object');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toLength = require('../internals/to-length');\n\n// `Array.prototype.fill` method implementation\n// https://tc39.github.io/ecma262/#sec-array.prototype.fill\nmodule.exports = function fill(value /* , start = 0, end = @length */) {\n  var O = toObject(this);\n  var length = toLength(O.length);\n  var argumentsLength = arguments.length;\n  var index = toAbsoluteIndex(argumentsLength > 1 ? arguments[1] : undefined, length);\n  var end = argumentsLength > 2 ? arguments[2] : undefined;\n  var endPos = end === undefined ? length : toAbsoluteIndex(end, length);\n  while (endPos > index) O[index++] = value;\n  return O;\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar MATCH = wellKnownSymbol('match');\n\nmodule.exports = function (METHOD_NAME) {\n  var regexp = /./;\n  try {\n    '/./'[METHOD_NAME](regexp);\n  } catch (e) {\n    try {\n      regexp[MATCH] = false;\n      return '/./'[METHOD_NAME](regexp);\n    } catch (f) { /* empty */ }\n  } return false;\n};\n","var fails = require('../internals/fails');\nvar whitespaces = require('../internals/whitespaces');\n\nvar non = '\\u200B\\u0085\\u180E';\n\n// check that a method works with the correct list\n// of whitespaces and has a correct name\nmodule.exports = function (METHOD_NAME) {\n  return fails(function () {\n    return !!whitespaces[METHOD_NAME]() || non[METHOD_NAME]() != non || whitespaces[METHOD_NAME].name !== METHOD_NAME;\n  });\n};\n","var $ = require('../internals/export');\nvar fill = require('../internals/array-fill');\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// `Array.prototype.fill` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.fill\n$({ target: 'Array', proto: true }, {\n  fill: fill\n});\n\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('fill');\n"],"sourceRoot":""}