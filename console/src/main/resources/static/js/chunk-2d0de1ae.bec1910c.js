(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0de1ae"],{"83da":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("base-component",[i("Breadcrumb",{style:{margin:"15px 0 15px 185px",position:"fixed"}},[i("BreadcrumbItem",{attrs:{to:"/home"}},[t._v("首页")]),i("BreadcrumbItem",{attrs:{to:{path:"/drcV2",query:{step:3,srcMhaName:this.initInfo.srcMhaName,dstMhaName:this.initInfo.dstMhaName,srcDc:this.initInfo.srcDc,dstDc:this.initInfo.dstDc,order:this.initInfo.order}}}},[t._v("DRC配置V2 ")]),i("BreadcrumbItem",[t._v("同步表")])],1),i("Content",{staticClass:"content",style:{padding:"10px",background:"#fff",margin:"50px 0 1px 185px",zIndex:"1"}},[i("Row",[i("Col",{attrs:{span:"20"}},[i("span",{staticStyle:{"margin-top":"10px",color:"#464c5b","font-weight":"600"}},[t._v(t._s(t.initInfo.srcMhaName)+"("+t._s(t.initInfo.srcDc)+")==>"+t._s(t.initInfo.dstMhaName)+"("+t._s(t.initInfo.dstDc)+")")])]),i("Col",{attrs:{span:"2"}},[i("Button",{staticStyle:{"margin-top":"10px","text-align":"right"},attrs:{type:"primary",ghost:""},on:{click:t.goTodbReplicationConfig}},[t._v("添加 ")])],1)],1),i("Modal",{attrs:{title:"Applier properties",width:"800px"},model:{value:t.display.showPropertiesJson,callback:function(e){t.$set(t.display,"showPropertiesJson",e)},expression:"display.showPropertiesJson"}},[i("json-viewer",{attrs:{value:t.propertiesJson,"expand-depth":5,copyable:""},scopedSlots:t._u([{key:"copy",fn:function(e){var a=e.copied;return[i("span",a?[t._v("复制成功")]:[t._v("复制")])]}}])})],1),i("div",{style:{padding:"1px 1px",height:"100%"}},[[i("Table",{staticStyle:{"margin-top":"20px"},attrs:{stripe:"",columns:t.columns,data:t.tableData,border:""},scopedSlots:t._u([{key:"action",fn:function(e){var a=e.row,o=e.index;return[i("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"success",size:"small"},on:{click:function(e){return t.goToShowConfig(a,o)}}},[t._v("查看 ")]),i("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.goToUpdateConfig(a,o)}}},[t._v("修改 ")]),i("Button",{staticStyle:{"margin-right":"10px"},attrs:{type:"error",size:"small"},on:{click:function(e){return t.preDeleteDbReplication(a,o)}}},[t._v(" 删除 ")])]}}])})]],2),i("Modal",{attrs:{title:"确认删除以下同步表"},on:{"on-ok":t.deleteDbReplication,"on-cancel":t.clearDeleteDbReplication},model:{value:t.deleteModal,callback:function(e){t.deleteModal=e},expression:"deleteModal"}},[i("p",[i("span",[t._v("db: ")]),i("span",{staticStyle:{color:"red","font-size":"16px"}},[t._v(t._s(t.deleteDbReplicationInfo.dbName))]),i("span",[t._v(" ,table: ")]),i("span",{staticStyle:{color:"red","font-size":"20px"}},[t._v(t._s(t.deleteDbReplicationInfo.logicTableName))])])])],1)],1)},o=[],n={name:"tables",data:function(){return{initInfo:{srcMhaName:"",srcMhaId:0,dstMhaName:"",dbReplicationId:0,srcDc:"",dstDc:"",order:!0},deleteModal:!1,deleteDbReplicationInfo:{dbReplicationId:0,dbName:"",logicTableName:""},columns:[{title:"序号",width:75,align:"center",fixed:"left",render:function(t,e){return t("span",e.index+1)}},{title:"库名",key:"dbName"},{title:"表名",key:"logicTableName"},{title:"操作",slot:"action",align:"center",width:200,fixed:"right"}],display:{showPropertiesJson:!1},propertiesJson:{},tableData:[],total:0,size:5,pageSizeOpts:[5,10,20,100]}},methods:{getDbReplications:function(){var t=this;this.axios.get("/api/drc/v2/config/dbReplication?srcMhaName="+this.initInfo.srcMhaName+"&dstMhaName="+this.initInfo.dstMhaName).then((function(e){1===e.data.status?window.alert("查询相关配置表失败!"):t.tableData=e.data.data}))},goTodbReplicationConfig:function(){this.$router.push({path:"/dbReplicationConfig",query:{srcMhaName:this.initInfo.srcMhaName,srcMhaId:this.initInfo.srcMhaId,dstMhaName:this.initInfo.dstMhaName,srcDc:this.initInfo.srcDc,dstDc:this.initInfo.dstDc,order:this.initInfo.order,dbName:"",tableName:""}})},goToShowConfig:function(t,e){},goToUpdateConfig:function(t,e){this.$router.push({path:"/dbReplicationConfig",query:{srcMhaName:this.initInfo.srcMhaName,dstMhaName:this.initInfo.dstMhaName,srcDc:this.initInfo.srcDc,dstDc:this.initInfo.dstDc,order:this.initInfo.order,dbName:t.dbName,tableName:t.logicTableName,dbReplicationId:t.dbReplicationId,update:0}})},preDeleteDbReplication:function(t,e){this.deleteDbReplicationInfo={dbReplicationId:t.dbReplicationId,dbName:t.dbName,logicTableName:t.logicTableName},this.deleteModal=!0},clearDeleteDbReplication:function(t,e){this.deleteDbReplicationInfo={dbReplicationId:0,dbName:"",logicTableName:""},this.deleteModal=!1},deleteDbReplication:function(){var t=this;this.axios.delete("/api/drc/v2/config/dbReplication?dbReplicationId="+this.deleteDbReplicationInfo.dbReplicationId).then((function(e){1===e.data.status?t.$Message.warning("删除失败!"+e.data.message):(t.$Message.success("删除成功!"),t.getDbReplications())}))}},created:function(){this.initInfo={srcMhaName:this.$route.query.srcMhaName,srcMhaId:this.$route.query.srcMhaId,dstMhaName:this.$route.query.dstMhaName,applierGroupId:this.$route.query.applierGroupId,srcDc:this.$route.query.srcDc,dstDc:this.$route.query.dstDc,order:this.$route.query.order},console.log("initInfo:"),console.log(this.initInfo),this.getDbReplications()}},s=n,r=i("2877"),c=Object(r["a"])(s,a,o,!1,null,"44395950",null);e["default"]=c.exports}}]);
//# sourceMappingURL=chunk-2d0de1ae.bec1910c.js.map