{"version":3,"sources":["webpack:///./node_modules/core-js/modules/web.dom-collections.for-each.js","webpack:///./node_modules/core-js/internals/array-for-each.js","webpack:///./node_modules/core-js/modules/es.array.for-each.js","webpack:///./node_modules/core-js/modules/es.set.js","webpack:///./node_modules/parse-ms/index.js","webpack:///./node_modules/core-js/internals/create-html.js","webpack:///./node_modules/core-js/modules/es.string.link.js","webpack:///./node_modules/core-js/modules/es.array.join.js","webpack:///./node_modules/pretty-ms/index.js","webpack:///./node_modules/core-js/internals/array-method-is-strict.js","webpack:///./node_modules/core-js/internals/string-html-forced.js","webpack:///./node_modules/plur/index.js","webpack:///./node_modules/core-js/modules/es.function.name.js","webpack:///./node_modules/core-js/modules/es.string.fixed.js","webpack:///./node_modules/core-js/modules/es.array.map.js","webpack:///./src/views/v2/meta/mhaReplicationDetails.vue?95b1","webpack:///./src/views/v2/meta/mhaReplicationDetails.vue?99a2","webpack:///src/views/v2/meta/mhaReplicationDetails.vue","webpack:///./src/views/v2/meta/mhaReplicationDetails.vue?d87d","webpack:///./src/views/v2/meta/mhaReplicationDetails.vue?ba0d"],"names":["global","DOMIterables","forEach","createNonEnumerableProperty","COLLECTION_NAME","Collection","CollectionPrototype","prototype","error","$forEach","arrayMethodIsStrict","arrayMethodUsesToLength","STRICT_METHOD","USES_TO_LENGTH","module","exports","callbackfn","this","arguments","length","undefined","$","target","proto","forced","collection","collectionStrong","init","ms","TypeError","roundTowardZero","Math","floor","ceil","days","hours","minutes","seconds","milliseconds","requireObjectCoercible","quot","string","tag","attribute","value","S","String","p1","replace","createHTML","forcedStringHTMLMethod","link","url","IndexedObject","toIndexedObject","nativeJoin","join","ES3_STRINGS","Object","separator","call","parseMs","plur","opts","Number","isFinite","msDecimalDigits","toFixed","verbose","ret","add","val","long","short","valStr","postfix","push","parsed","trunc","compact","sec","secDecimalDigits","secStr","fails","METHOD_NAME","argument","method","test","toLowerCase","split","irregularPlurals","str","plural","count","m","isTailLowerCase","slice","toUpperCase","DESCRIPTORS","defineProperty","f","FunctionPrototype","Function","FunctionPrototypeToString","toString","nameRE","NAME","configurable","get","match","fixed","$map","map","arrayMethodHasSpeciesSupport","HAS_SPECIES_SUPPORT","render","_vm","_h","$createElement","_c","_self","attrs","on","$event","showMore","queryParam","mhaNames","model","callback","$$v","$set","expression","dataLoading","_v","ref","staticStyle","graphData","isShowNodeMenuPanel","isShowNodeTipsPanel","nodeMenuPanelPosition","graphOptions","onNodeClick","onLineClick","scopedSlots","_u","key","fn","node","_s","data","mha","regionName","name","style","left","x","top","y","staticClass","current","buName","_e","directives","rawName","linkMenuPanelPosition","srcMha","dstMha","_l","item","index","stopPropagation","replicationId","text","staticRenderFns","components","props","mhaIdList","Array","mhaNameList","operations","graphInit","graph","currentLink","mhaNameRequested","Set","mhaNameShown","replicationIdShown","rootId","nodes","lines","clear","reset","isEmpty","appendNode","has","id","width","height","styleClass","appendLine","replication","from","to","selected","color","appendDataToGraph","appendJsonData","console","log","setJsonData","hasShow","mhaName","deepenClickedNode","nodeObject","queryAll","e","defaultLineColor","defaultLineWidth","defaultNodeBorderWidth","defaultNodeShape","defaultNodeBorderColor","defaultNodeColor","allowSwitchLineShape","allowSwitchNodeShape","checkedLineColor","defaultLineShape","moveToCenterWhenRefresh","useAnimationWhenRefresh","layouts","defaultJunctionPoint","mounted","$refs","seeksRelationGraph","methods","filteredNameList","relatedMhaNames","axios","getDelay","replicationIds","replications","param","$copyText","then","showNodeTips","lineObject","showLineMenus","clientX","basePosition","clientY","setTimeout","hideNodeTips","component"],"mappings":"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","file":"js/chunk-493c9cb6.4e329b42.js","sourcesContent":["var global = require('../internals/global');\nvar DOMIterables = require('../internals/dom-iterables');\nvar forEach = require('../internals/array-for-each');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\n\nfor (var COLLECTION_NAME in DOMIterables) {\n  var Collection = global[COLLECTION_NAME];\n  var CollectionPrototype = Collection && Collection.prototype;\n  // some Chrome versions have non-configurable methods on DOMTokenList\n  if (CollectionPrototype && CollectionPrototype.forEach !== forEach) try {\n    createNonEnumerableProperty(CollectionPrototype, 'forEach', forEach);\n  } catch (error) {\n    CollectionPrototype.forEach = forEach;\n  }\n}\n","'use strict';\nvar $forEach = require('../internals/array-iteration').forEach;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar STRICT_METHOD = arrayMethodIsStrict('forEach');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('forEach');\n\n// `Array.prototype.forEach` method implementation\n// https://tc39.github.io/ecma262/#sec-array.prototype.foreach\nmodule.exports = (!STRICT_METHOD || !USES_TO_LENGTH) ? function forEach(callbackfn /* , thisArg */) {\n  return $forEach(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n} : [].forEach;\n","'use strict';\nvar $ = require('../internals/export');\nvar forEach = require('../internals/array-for-each');\n\n// `Array.prototype.forEach` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.foreach\n$({ target: 'Array', proto: true, forced: [].forEach != forEach }, {\n  forEach: forEach\n});\n","'use strict';\nvar collection = require('../internals/collection');\nvar collectionStrong = require('../internals/collection-strong');\n\n// `Set` constructor\n// https://tc39.github.io/ecma262/#sec-set-objects\nmodule.exports = collection('Set', function (init) {\n  return function Set() { return init(this, arguments.length ? arguments[0] : undefined); };\n}, collectionStrong);\n","'use strict';\nmodule.exports = function (ms) {\n\tif (typeof ms !== 'number') {\n\t\tthrow new TypeError('Expected a number');\n\t}\n\n\tvar roundTowardZero = ms > 0 ? Math.floor : Math.ceil;\n\n\treturn {\n\t\tdays: roundTowardZero(ms / 86400000),\n\t\thours: roundTowardZero(ms / 3600000) % 24,\n\t\tminutes: roundTowardZero(ms / 60000) % 60,\n\t\tseconds: roundTowardZero(ms / 1000) % 60,\n\t\tmilliseconds: roundTowardZero(ms) % 1000\n\t};\n};\n","var requireObjectCoercible = require('../internals/require-object-coercible');\n\nvar quot = /\"/g;\n\n// B.2.3.2.1 CreateHTML(string, tag, attribute, value)\n// https://tc39.github.io/ecma262/#sec-createhtml\nmodule.exports = function (string, tag, attribute, value) {\n  var S = String(requireObjectCoercible(string));\n  var p1 = '<' + tag;\n  if (attribute !== '') p1 += ' ' + attribute + '=\"' + String(value).replace(quot, '&quot;') + '\"';\n  return p1 + '>' + S + '</' + tag + '>';\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar createHTML = require('../internals/create-html');\nvar forcedStringHTMLMethod = require('../internals/string-html-forced');\n\n// `String.prototype.link` method\n// https://tc39.github.io/ecma262/#sec-string.prototype.link\n$({ target: 'String', proto: true, forced: forcedStringHTMLMethod('link') }, {\n  link: function link(url) {\n    return createHTML(this, 'a', 'href', url);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar IndexedObject = require('../internals/indexed-object');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar nativeJoin = [].join;\n\nvar ES3_STRINGS = IndexedObject != Object;\nvar STRICT_METHOD = arrayMethodIsStrict('join', ',');\n\n// `Array.prototype.join` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.join\n$({ target: 'Array', proto: true, forced: ES3_STRINGS || !STRICT_METHOD }, {\n  join: function join(separator) {\n    return nativeJoin.call(toIndexedObject(this), separator === undefined ? ',' : separator);\n  }\n});\n","'use strict';\nconst parseMs = require('parse-ms');\nconst plur = require('plur');\n\nmodule.exports = (ms, opts) => {\n\tif (!Number.isFinite(ms)) {\n\t\tthrow new TypeError('Expected a finite number');\n\t}\n\n\topts = opts || {};\n\n\tif (ms < 1000) {\n\t\tconst msDecimalDigits = typeof opts.msDecimalDigits === 'number' ? opts.msDecimalDigits : 0;\n\t\treturn (msDecimalDigits ? ms.toFixed(msDecimalDigits) : Math.ceil(ms)) + (opts.verbose ? ' ' + plur('millisecond', Math.ceil(ms)) : 'ms');\n\t}\n\n\tconst ret = [];\n\n\tconst add = (val, long, short, valStr) => {\n\t\tif (val === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst postfix = opts.verbose ? ' ' + plur(long, val) : short;\n\n\t\tret.push((valStr || val) + postfix);\n\t};\n\n\tconst parsed = parseMs(ms);\n\n\tadd(Math.trunc(parsed.days / 365), 'year', 'y');\n\tadd(parsed.days % 365, 'day', 'd');\n\tadd(parsed.hours, 'hour', 'h');\n\tadd(parsed.minutes, 'minute', 'm');\n\n\tif (opts.compact) {\n\t\tadd(parsed.seconds, 'second', 's');\n\t\treturn '~' + ret[0];\n\t}\n\n\tconst sec = ms / 1000 % 60;\n\tconst secDecimalDigits = typeof opts.secDecimalDigits === 'number' ? opts.secDecimalDigits : 1;\n\tconst secStr = sec.toFixed(secDecimalDigits).replace(/\\.0$/, '');\n\tadd(sec, 'second', 's', secStr);\n\n\treturn ret.join(' ');\n};\n","'use strict';\nvar fails = require('../internals/fails');\n\nmodule.exports = function (METHOD_NAME, argument) {\n  var method = [][METHOD_NAME];\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call,no-throw-literal\n    method.call(null, argument || function () { throw 1; }, 1);\n  });\n};\n","var fails = require('../internals/fails');\n\n// check the existence of a method, lowercase\n// of a tag and escaping quotes in arguments\nmodule.exports = function (METHOD_NAME) {\n  return fails(function () {\n    var test = ''[METHOD_NAME]('\"');\n    return test !== test.toLowerCase() || test.split('\"').length > 3;\n  });\n};\n","'use strict';\nvar irregularPlurals = require('irregular-plurals');\n\nmodule.exports = function (str, plural, count) {\n\tif (typeof plural === 'number') {\n\t\tcount = plural;\n\t}\n\n\tif (str in irregularPlurals) {\n\t\tplural = irregularPlurals[str];\n\t} else if (typeof plural !== 'string') {\n\t\tplural = (str.replace(/(?:s|x|z|ch|sh)$/i, '$&e').replace(/([^aeiou])y$/i, '$1ie') + 's')\n\t\t\t.replace(/i?e?s$/i, function (m) {\n\t\t\t\tvar isTailLowerCase = str.slice(-1) === str.slice(-1).toLowerCase();\n\t\t\t\treturn isTailLowerCase ? m.toLowerCase() : m.toUpperCase();\n\t\t\t});\n\t}\n\n\treturn count === 1 ? str : plural;\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar FunctionPrototypeToString = FunctionPrototype.toString;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.github.io/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !(NAME in FunctionPrototype)) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return FunctionPrototypeToString.call(this).match(nameRE)[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n","'use strict';\nvar $ = require('../internals/export');\nvar createHTML = require('../internals/create-html');\nvar forcedStringHTMLMethod = require('../internals/string-html-forced');\n\n// `String.prototype.fixed` method\n// https://tc39.github.io/ecma262/#sec-string.prototype.fixed\n$({ target: 'String', proto: true, forced: forcedStringHTMLMethod('fixed') }, {\n  fixed: function fixed() {\n    return createHTML(this, 'tt', '', '');\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar $map = require('../internals/array-iteration').map;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('map');\n// FF49- issue\nvar USES_TO_LENGTH = arrayMethodUsesToLength('map');\n\n// `Array.prototype.map` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.map\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH }, {\n  map: function map(callbackfn /* , thisArg */) {\n    return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mhaReplicationDetails.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Row',{attrs:{\"gutter\":10}},[_c('Col',{attrs:{\"span\":\"10\"}},[_c('Input',{attrs:{\"prefix\":\"ios-search\",\"placeholder\":\"请输入集群名\"},on:{\"on-enter\":function($event){return _vm.showMore([_vm.queryParam.mhaNames], true)}},model:{value:(_vm.queryParam.mhaNames),callback:function ($$v) {_vm.$set(_vm.queryParam, \"mhaNames\", $$v)},expression:\"queryParam.mhaNames\"}})],1),_c('Col',{attrs:{\"span\":\"10\"}},[_c('Col',{attrs:{\"span\":\"3\"}},[_c('Button',{attrs:{\"type\":\"primary\",\"icon\":\"ios-search\",\"loading\":_vm.dataLoading},on:{\"click\":function($event){return _vm.showMore([_vm.queryParam.mhaNames], true)}}},[_vm._v(\"查询所有\")])],1)],1)],1),_c('div',{ref:\"myPage\",staticStyle:{\"height\":\"calc(100vh - 35vh)\",\"width\":\"calc(100vw - 20vw)\"},on:{\"click\":function($event){_vm.graphData.isShowNodeMenuPanel = false; _vm.graphData.isShowNodeTipsPanel = false; _vm.graphData.nodeMenuPanelPosition.fixed = false}}},[_c('RelationGraph',{ref:\"seeksRelationGraph\",attrs:{\"options\":_vm.graphOptions,\"on-node-click\":_vm.onNodeClick,\"on-line-click\":_vm.onLineClick},scopedSlots:_vm._u([{key:\"node\",fn:function(ref){\nvar node = ref.node;\nreturn _c('div',{},[_c('Tag',{staticStyle:{\"position\":\"absolute\",\"width\":\"auto\",\"height\":\"25px\",\"margin-top\":\"-10px\",\"margin-left\":\"15px\",\"text-align\":\"center\",\"font-size\":\"15px\"},attrs:{\"color\":\"success\"}},[_vm._v(_vm._s(node.data.mha.regionName))]),_c('div',{staticStyle:{\"font-weight\":\"bold\",\"position\":\"absolute\",\"width\":\"auto\",\"height\":\"auto\",\"left\":\"50%\",\"top\":\"50%\",\"-webkit-transform\":\"translate(-50%, -50%)\",\"transform\":\"translate(-50%, -50%)\",\"text-align\":\"center\"}},[_vm._v(_vm._s(node.data.mha.name))])],1)}}])})],1),(_vm.graphData.isShowNodeTipsPanel)?_c('div',{staticStyle:{\"z-index\":\"999\",\"padding\":\"10px\",\"background-color\":\"#ffffff\",\"border\":\"#eeeeee solid 1px\",\"box-shadow\":\"0px 0px 8px #cccccc\",\"position\":\"absolute\"},style:({left: _vm.graphData.nodeMenuPanelPosition.x + 'px', top: _vm.graphData.nodeMenuPanelPosition.y + 'px' })},[_c('div',{staticClass:\"c-node-menu-item\"},[_vm._v(\"名称: \"+_vm._s(_vm.current.node.mha.name))]),_c('div',{staticClass:\"c-node-menu-item\"},[_vm._v(\"部门: \"+_vm._s(_vm.current.node.mha.buName))]),_c('div',{staticClass:\"c-node-menu-item\"},[_vm._v(\"地域: \"+_vm._s(_vm.current.node.mha.regionName))])]):_vm._e(),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.graphData.isShowNodeMenuPanel),expression:\"graphData.isShowNodeMenuPanel\"}],staticStyle:{\"z-index\":\"999\",\"padding\":\"10px\",\"background-color\":\"#ffffff\",\"border\":\"#eeeeee solid 1px\",\"box-shadow\":\"0px 0px 8px #cccccc\",\"position\":\"absolute\"},style:({left: _vm.graphData.linkMenuPanelPosition.x + 'px', top: _vm.graphData.linkMenuPanelPosition.y + 'px' })},[_c('div',{staticStyle:{\"line-height\":\"25px\",\"padding-left\":\"10px\",\"color\":\"#888888\",\"font-size\":\"12px\"}},[_vm._v(_vm._s(_vm.current.link.srcMha.name +' -> '+_vm.current.link.dstMha.name))]),_c('div',{staticStyle:{\"line-height\":\"25px\",\"padding-left\":\"10px\",\"color\":\"#888888\",\"font-size\":\"12px\"}},[_vm._v(\"操作:\")]),_c('div',{attrs:{\"id\":\"operationsDiv\"}},_vm._l((_vm.operations),function(item,index){return _c('div',{key:index},[_c('div',{staticClass:\"c-node-menu-item\",on:{\"click\":function($event){$event.stopPropagation();return item.method(_vm.current.link.srcMha.name, _vm.current.link.dstMha.name, _vm.current.link.replicationId)}}},[_vm._v(_vm._s(item.text))])])}),0)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n\r\n    <Row :gutter=10>\r\n      <Col span=\"10\">\r\n        <Input prefix=\"ios-search\" v-model=\"queryParam.mhaNames\" placeholder=\"请输入集群名\"\r\n               @on-enter=\"showMore([queryParam.mhaNames], true)\">\r\n        </Input>\r\n      </Col>\r\n      <Col span=\"10\">\r\n        <Col span=\"3\">\r\n          <Button type=\"primary\" icon=\"ios-search\" :loading=\"dataLoading\" @click=\"showMore([queryParam.mhaNames], true)\">查询所有</Button>\r\n        </Col>\r\n      </Col>\r\n    </Row>\r\n    <div ref=\"myPage\" style=\"height:calc(100vh - 35vh);width: calc(100vw - 20vw)\" @click=\"graphData.isShowNodeMenuPanel = false; graphData.isShowNodeTipsPanel = false; graphData.nodeMenuPanelPosition.fixed = false\">\r\n      <RelationGraph\r\n        ref=\"seeksRelationGraph\"\r\n        :options=\"graphOptions\"\r\n        :on-node-click=\"onNodeClick\"\r\n        :on-line-click=\"onLineClick\"\r\n      >\r\n        <div slot=\"node\" slot-scope=\"{node}\">\r\n<!--          <div style=\"color: #ffffff;font-size: 16px;position: absolute;width: auto;height:25px;line-height: 25px;margin-top:5px;margin-left:0px;text-align: center;background-color: rgb(0,80,41);\">-->\r\n<!--            {{ node.data.mha.regionName }}-->\r\n<!--          </div>-->\r\n          <Tag  color=\"success\" style=\"position: absolute;width: auto;height:25px;margin-top:-10px;margin-left:15px;text-align: center;font-size: 15px\">{{ node.data.mha.regionName }}</Tag>\r\n          <div style=\" font-weight:bold; position: absolute;width: auto;height:auto;left:50%;top:50%;-webkit-transform: translate(-50%, -50%);transform: translate(-50%, -50%);text-align: center;\">{{ node.data.mha.name }}</div>\r\n        </div>\r\n      </RelationGraph>\r\n    </div>\r\n\r\n    <div v-if=\"graphData.isShowNodeTipsPanel\" :style=\"{left: graphData.nodeMenuPanelPosition.x + 'px', top: graphData.nodeMenuPanelPosition.y + 'px' }\" style=\"z-index: 999;padding:10px;background-color: #ffffff;border:#eeeeee solid 1px;box-shadow: 0px 0px 8px #cccccc;position: absolute;\">\r\n      <div class=\"c-node-menu-item\">名称: {{current.node.mha.name}}</div>\r\n      <div class=\"c-node-menu-item\">部门: {{current.node.mha.buName}}</div>\r\n      <div class=\"c-node-menu-item\">地域: {{current.node.mha.regionName}}</div>\r\n    </div>\r\n\r\n    <div v-show=\"graphData.isShowNodeMenuPanel\" :style=\"{left: graphData.linkMenuPanelPosition.x + 'px', top: graphData.linkMenuPanelPosition.y + 'px' }\" style=\"z-index: 999;padding:10px;background-color: #ffffff;border:#eeeeee solid 1px;box-shadow: 0px 0px 8px #cccccc;position: absolute;\">\r\n      <div style=\"line-height: 25px;padding-left: 10px;color: #888888;font-size: 12px;\">{{current.link.srcMha.name +' -> '+current.link.dstMha.name}}</div>\r\n      <div style=\"line-height: 25px;padding-left: 10px;color: #888888;font-size: 12px;\">操作:</div>\r\n      <div id=\"operationsDiv\">\r\n        <div v-for=\"(item, index) in operations\" :key=\"index\">\r\n          <div class=\"c-node-menu-item\" @click.stop=\"item.method(current.link.srcMha.name, current.link.dstMha.name, current.link.replicationId)\">{{ item.text }}</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport prettyMilliseconds from 'pretty-ms'\r\n\r\nexport default {\r\n  name: 'MhaGraph',\r\n  components: {},\r\n  props: {\r\n    mhaIdList: Array,\r\n    mhaNameList: Array,\r\n    operations: Array\r\n  },\r\n  data () {\r\n    return {\r\n      dataLoading: false,\r\n      graphData: {\r\n        graphInit: false,\r\n        graph: null,\r\n        currentLink: null,\r\n        mhaNameRequested: new Set(),\r\n        mhaNameShown: new Set(),\r\n        replicationIdShown: new Set(),\r\n        isShowNodeMenuPanel: false,\r\n        isShowNodeTipsPanel: false,\r\n        nodeMenuPanelPosition: { x: 0, y: 0, fixed: false },\r\n        linkMenuPanelPosition: { x: 0, y: 0 },\r\n        rootId: '',\r\n        nodes: [\r\n          // { id: '3365', text: '节点-1', myicon: 'el-icon-star-on' },\r\n          // { id: '2', text: '节点-2', myicon: 'el-icon-setting' }\r\n        ],\r\n        lines: [\r\n          // { from: '3365', to: '2', text: '投资 双向' },\r\n          // { from: '2', to: '3365', text: '投资 双向' }\r\n        ],\r\n        clear: function () {\r\n          this.nodes = []\r\n          this.lines = []\r\n        },\r\n        reset: function () {\r\n          this.graphInit = false\r\n          this.mhaNameRequested.clear()\r\n          this.mhaNameShown.clear()\r\n          this.replicationIdShown.clear()\r\n          this.nodes = []\r\n          this.lines = []\r\n        },\r\n        isEmpty: function () {\r\n          return this.nodes == null || this.lines == null || this.nodes.length === 0 || this.lines.length === 0\r\n        },\r\n        appendNode: function (mha) {\r\n          if (!this.mhaNameShown.has(mha.name + '')) {\r\n            this.mhaNameShown.add(mha.name + '')\r\n            this.nodes.push({\r\n              id: mha.id + '',\r\n              text: mha.name + '\\n' + mha.regionName,\r\n              data: {\r\n                mha: mha\r\n              },\r\n              width: 100,\r\n              height: 100,\r\n              styleClass: 'c-g-center'\r\n            })\r\n          }\r\n        },\r\n        appendLine: function (replication) {\r\n          if (!this.replicationIdShown.has(replication.replicationId + '')) {\r\n            this.replicationIdShown.add(replication.replicationId + '')\r\n            this.lines.push({\r\n              from: replication.srcMha.id + '',\r\n              to: replication.dstMha.id + '',\r\n              selected: true,\r\n              color: '#2c2c2c',\r\n              styleClass: 'node-line',\r\n              data: {\r\n                replication: replication\r\n              }\r\n            })\r\n          }\r\n        },\r\n        appendDataToGraph (queryAll) {\r\n          const graph = this.graph\r\n          // eslint-disable-next-line camelcase\r\n          if (!this.graphInit) {\r\n            this.graphInit = true\r\n            graph.setJsonData(this, (graphInstance) => {\r\n              // 这些写上当图谱初始化完成后需要执行的代码\r\n              this.deepenClickedNode(null, queryAll)\r\n              console.log('init graph success')\r\n            })\r\n          } else {\r\n            graph.appendJsonData(this, (graphInstance) => {\r\n              // 更新图\r\n              console.log('refresh graph success')\r\n            })\r\n          }\r\n        },\r\n        hasShow (mhaName) {\r\n          if (this.mhaNameRequested.has(mhaName)) {\r\n            return true\r\n          } else {\r\n            this.mhaNameRequested.add(mhaName)\r\n            return false\r\n          }\r\n        },\r\n        deepenClickedNode (nodeObject, queryAll) {\r\n          const color = 'rgb(0,166,81)'\r\n          if (nodeObject != null) {\r\n            nodeObject.color = color\r\n          } else {\r\n            // refresh all\r\n            const nodes = this.graph.getNodes()\r\n            nodes.forEach(e => {\r\n              if (queryAll || this.mhaNameRequested.has(e.data.mha.name)) {\r\n                e.color = color\r\n              }\r\n            })\r\n          }\r\n        }\r\n      },\r\n      graphOptions: {\r\n        defaultLineColor: '#333333',\r\n        defaultLineWidth: 1,\r\n        defaultNodeBorderWidth: 1,\r\n        defaultNodeShape: 0,\r\n        defaultNodeBorderColor: 'rgb(194,194,194)',\r\n        defaultNodeColor: 'rgba(66,66,66)',\r\n        allowSwitchLineShape: true,\r\n        allowSwitchNodeShape: true,\r\n        checkedLineColor: 'rgba(30, 144, 255, 1)', // 当线条被选中时的颜色\r\n        defaultLineShape: 1,\r\n        moveToCenterWhenRefresh: true,\r\n        useAnimationWhenRefresh: true,\r\n        layouts: [\r\n          {\r\n            label: '自动布局',\r\n            layoutName: 'force',\r\n            layoutClassName: 'seeks-layout-force'\r\n          }\r\n        ],\r\n        defaultJunctionPoint: 'border'\r\n        // 这里可以参考\"Graph 图谱\"中的参数进行设置\r\n      },\r\n      current: {\r\n        node: {\r\n          mha: {}\r\n        },\r\n        link: {\r\n          srcMha: {},\r\n          dstMha: {},\r\n          replicationId: 0\r\n        }\r\n      },\r\n      queryParam: {\r\n        mhaNames: ''\r\n      }\r\n    }\r\n  },\r\n  mounted () {\r\n    const mhaIdList = this.mhaIdList\r\n    const mhaNameList = this.mhaNameList\r\n    console.log('mount mhaId: ' + mhaIdList)\r\n    this.graphData.graph = this.$refs.seeksRelationGraph\r\n    this.graphData.rootId = mhaIdList[0]\r\n    this.showMore(mhaNameList, false)\r\n  },\r\n  methods: {\r\n    showMore (mhaNameList, queryAll) {\r\n      if (queryAll) {\r\n        this.graphData.reset()\r\n      } else {\r\n        this.graphData.clear()\r\n      }\r\n      const filteredNameList = mhaNameList.filter(mhaName => {\r\n        return !this.graphData.hasShow(mhaName)\r\n      })\r\n      if (filteredNameList == null || filteredNameList.length === 0) {\r\n        return\r\n      }\r\n      const reqParam = {\r\n        relatedMhaNames: filteredNameList.join(','),\r\n        queryAll: queryAll\r\n      }\r\n      this.dataLoading = true\r\n      this.axios.get('/api/drc/v2/replication/queryMhaRelatedByNames', { params: reqParam })\r\n        .then(response => {\r\n          const replications = response.data.data\r\n          const emptyResult = replications == null || !Array.isArray(replications) || replications.length === 0\r\n          if (emptyResult) {\r\n            this.$Message.info('结果为空')\r\n            return\r\n          }\r\n          replications.forEach((replication) => {\r\n            this.graphData.appendNode(replication.srcMha)\r\n            this.graphData.appendNode(replication.dstMha)\r\n            this.graphData.appendLine(replication)\r\n          })\r\n          if (this.graphData.isEmpty()) {\r\n            return\r\n          }\r\n          if (queryAll) {\r\n            this.$Message.success('查询成功')\r\n          }\r\n          // refresh graph\r\n          this.graphData.appendDataToGraph(queryAll)\r\n          // query delay\r\n          this.getDelay(replications)\r\n        })\r\n        .catch(message => {\r\n          console.log(message)\r\n          this.$Message.error('查询异常: ' + message)\r\n        })\r\n        .finally(() => {\r\n          this.dataLoading = false\r\n        })\r\n    },\r\n    getDelay (replications) {\r\n      const param = {\r\n        replicationIds: replications.map(item =>\r\n          item.replicationId\r\n        ).join(',')\r\n      }\r\n      console.log(param)\r\n      this.axios.get('/api/drc/v2/replication/delay', { params: param })\r\n        .then(response => {\r\n          const delays = response.data.data\r\n          const emptyResult = delays == null || !Array.isArray(delays) || delays.length === 0\r\n          if (emptyResult) {\r\n            return\r\n          }\r\n          // append graph data\r\n          const dataMap = new Map(delays.map(e => [e.srcMha + '-' + e.dstMha, e.delay]))\r\n          const allLinks = this.graphData.graph.getLinks()\r\n          console.log(allLinks)\r\n          allLinks.forEach(link => {\r\n            link.relations.forEach(line => {\r\n              const repli = line.data.replication\r\n              const delay = dataMap.get(repli.srcMha.name + '-' + repli.dstMha.name)\r\n              let lineColor = 'rgb(3,119,63)'\r\n              let text = null\r\n              if (delay != null) {\r\n                console.log(delay)\r\n                text = prettyMilliseconds(delay, {\r\n                  compact: true\r\n                })\r\n                if (delay > 10000) {\r\n                  lineColor = 'rgb(238,0,0)'\r\n                }\r\n                line.text = text\r\n                line.color = lineColor\r\n              }\r\n            })\r\n          })\r\n          this.graphData.graph.getInstance().dataUpdated()\r\n        })\r\n        .catch(message => {\r\n          console.log(message)\r\n          this.$Message.error('查询延迟异常: ' + message)\r\n        })\r\n    },\r\n    onNodeClick (nodeObject, $event) {\r\n      console.log('onNodeClick:', nodeObject, $event)\r\n      this.showMore([nodeObject.data.mha.name], false)\r\n      this.graphData.deepenClickedNode(nodeObject)\r\n      const mhaName = nodeObject.data.mha.name\r\n      this.$copyText(mhaName).then(e => {\r\n        this.$Message.success('已复制 mha 名称: ' + e.text)\r\n        console.log(e)\r\n      })\r\n      this.showNodeTips(nodeObject, $event)\r\n      this.graphData.nodeMenuPanelPosition.fixed = true\r\n    },\r\n    onLineClick (lineObject, linkObject, $event) {\r\n      console.log(lineObject)\r\n      const replication = lineObject.data.replication\r\n      this.current.link = {\r\n        srcMha: replication.srcMha,\r\n        dstMha: replication.dstMha,\r\n        replicationId: replication.replicationId\r\n      }\r\n      this.showLineMenus(lineObject, $event)\r\n    },\r\n    showLineMenus (nodeObject, $event) {\r\n      if (this.operations.length == null || this.operations.length === 0) {\r\n        return\r\n      }\r\n      const basePosition = this.$refs.myPage.getBoundingClientRect()\r\n      this.graphData.linkMenuPanelPosition.x = $event.clientX - basePosition.x\r\n      this.graphData.linkMenuPanelPosition.y = $event.clientY - basePosition.y + 30\r\n      console.log('showLineMenus:', $event, basePosition)\r\n      setTimeout(() => {\r\n        this.graphData.isShowNodeMenuPanel = true\r\n      }, 10)\r\n    },\r\n    showNodeTips (nodeObject, $event) {\r\n      console.log('showNodeMenus:', nodeObject, $event)\r\n      this.current.node.mha = nodeObject.data.mha\r\n      const basePosition = this.$refs.myPage.getBoundingClientRect()\r\n      this.graphData.isShowNodeTipsPanel = true\r\n      this.graphData.nodeMenuPanelPosition.x = $event.clientX - basePosition.x\r\n      this.graphData.nodeMenuPanelPosition.y = $event.clientY - basePosition.y + 30\r\n    },\r\n    hideNodeTips (nodeObject, $event) {\r\n      console.log('hideNodeTips:', nodeObject, $event)\r\n      if (this.graphData.nodeMenuPanelPosition.fixed) {\r\n        return\r\n      }\r\n      this.graphData.isShowNodeTipsPanel = false\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\">\r\n// line\r\n.node-line{\r\n  cursor: pointer;\r\n}\r\n\r\n// node\r\n.c-node-menu-item {\r\n  line-height: 30px;\r\n  padding-left: 10px;\r\n  cursor: pointer;\r\n  color: #444444;\r\n  font-size: 14px;\r\n  border-top: #efefef solid 1px;\r\n}\r\n\r\n.c-node-menu-item:hover {\r\n  background-color: rgba(66, 187, 66, 0.2);\r\n}\r\n\r\n.c-g-center {\r\n  text-align: center;\r\n  cursor: pointer;\r\n}\r\n</style>\r\n\r\n<style lang=\"scss\" scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mhaReplicationDetails.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mhaReplicationDetails.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./mhaReplicationDetails.vue?vue&type=template&id=732eec18&scoped=true&\"\nimport script from \"./mhaReplicationDetails.vue?vue&type=script&lang=js&\"\nexport * from \"./mhaReplicationDetails.vue?vue&type=script&lang=js&\"\nimport style0 from \"./mhaReplicationDetails.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"732eec18\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}