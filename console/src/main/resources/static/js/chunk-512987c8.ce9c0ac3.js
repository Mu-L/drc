(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-512987c8","chunk-6304b0b8","chunk-2d0b1ba6"],{"057f":function(t,e,a){var r=a("fc6a"),i=a("241c").f,s={}.toString,n="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],c=function(t){try{return i(t)}catch(e){return n.slice()}};t.exports.f=function(t){return n&&"[object Window]"==s.call(t)?c(t):i(r(t))}},"159b":function(t,e,a){var r=a("da84"),i=a("fdbc"),s=a("17c2"),n=a("9112");for(var c in i){var o=r[c],l=o&&o.prototype;if(l&&l.forEach!==s)try{n(l,"forEach",s)}catch(d){l.forEach=s}}},"17c2":function(t,e,a){"use strict";var r=a("b727").forEach,i=a("a640"),s=a("ae40"),n=i("forEach"),c=s("forEach");t.exports=n&&c?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},"20a3":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.hasResp?a("Alert",{staticStyle:{width:"65%","margin-left":"250px"},attrs:{type:t.status,"show-icon":""}},[t._v(" "+t._s(t.title)+" "),a("span",{attrs:{slot:"desc"},domProps:{innerHTML:t._s(t.message)},slot:"desc"})]):t._e(),a("Form",{ref:"build",staticStyle:{"margin-top":"50px"},attrs:{model:t.build,rules:t.ruleBuild,"label-width":250}},[a("FormItem",{staticStyle:{width:"600px"},attrs:{label:"源Mha集群名",prop:"srcMhaName"}},[a("Input",{attrs:{placeholder:"请输入源集群名"},on:{input:t.changeSrcMha},model:{value:t.build.srcMhaName,callback:function(e){t.$set(t.build,"srcMhaName",e)},expression:"build.srcMhaName"}})],1),a("FormItem",{attrs:{label:"源集群机房区域",prop:"srcDc"}},[a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"选择机房区域"},on:{input:t.changeSrcDc},model:{value:t.build.srcDc,callback:function(e){t.$set(t.build,"srcDc",e)},expression:"build.srcDc"}},t._l(t.build.drcZoneList,(function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1),a("FormItem",{attrs:{label:"源Mha tag",prop:"srcTag"}},[a("Select",{staticStyle:{width:"200px"},attrs:{filterable:"","allow-create":"",placeholder:"选择tag"},on:{"on-create":t.handleCreateTag},model:{value:t.build.srcTag,callback:function(e){t.$set(t.build,"srcTag",e)},expression:"build.srcTag"}},t._l(t.tagList,(function(e){return a("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])})),1)],1),a("FormItem",{staticStyle:{width:"600px"},attrs:{label:"目标Mha集群名",prop:"dstMhaName"}},[a("Input",{attrs:{placeholder:"请输入目标集群名"},on:{input:t.changeDstMha},model:{value:t.build.dstMhaName,callback:function(e){t.$set(t.build,"dstMhaName",e)},expression:"build.dstMhaName"}})],1),a("FormItem",{attrs:{label:"目标集群机房区域",prop:"dstDc"}},[a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"选择机房区域"},on:{input:t.changeDstDc},model:{value:t.build.dstDc,callback:function(e){t.$set(t.build,"dstDc",e)},expression:"build.dstDc"}},t._l(t.build.drcZoneList,(function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1),a("FormItem",{attrs:{label:"目标Mha tag",prop:"dstTag"}},[a("Select",{staticStyle:{width:"200px"},attrs:{filterable:"","allow-create":"",placeholder:"选择tag"},on:{"on-create":t.handleCreateTag},model:{value:t.build.dstTag,callback:function(e){t.$set(t.build,"dstTag",e)},expression:"build.dstTag"}},t._l(t.tagList,(function(e){return a("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])})),1)],1),a("FormItem",{staticStyle:{width:"600px"},attrs:{label:"BU名",prop:"buName"}},[a("Input",{attrs:{placeholder:"请输入BU名，自动绑定route策略"},on:{input:t.changeBu},model:{value:t.build.buName,callback:function(e){t.$set(t.build,"buName",e)},expression:"build.buName"}})],1),a("FormItem",[a("Button",{on:{click:function(e){return t.handleReset("build")}}},[t._v("重置")]),a("Button",{staticStyle:{"margin-left":"150px"},attrs:{type:"primary"},on:{click:function(e){return t.changeModal("build")}}},[t._v("新建DRC同步集群")]),a("Modal",{attrs:{title:"创建DRC"},on:{"on-ok":function(e){return t.postBuild("build")}},model:{value:t.build.modal,callback:function(e){t.$set(t.build,"modal",e)},expression:"build.modal"}},[a("p",[t._v('确定创建新DRC "'+t._s(t.build.srcMhaName)+"("+t._s(t.build.srcDc)+')" -> "'+t._s(t.build.dstMhaName)+"("+t._s(t.build.dstDc)+')" 吗？')])])],1)],1)],1)},i=[],s={name:"mhaBuild",props:{srcMhaName:String,dstMhaName:String,srcDc:String,dstDc:String},data:function(){return{status:"",title:"",message:"",hasResp:!1,build:{modal:!1,srcMhaName:this.srcMhaName,dstMhaName:this.dstMhaName,buName:"",srcDc:this.srcDc,dstDc:this.dstDc,drcZoneList:this.constant.dcList,srcTag:"COMMON",dstTag:"COMMON"},tagList:this.constant.tagList,ruleBuild:{srcMhaName:[{required:!0,message:"源集群名不能为空",trigger:"blur"}],dstMhaName:[{required:!0,message:"目标集群名不能为空",trigger:"blur"}],srcDc:[{required:!0,message:"选择源集群区域",trigger:"change"}],dstDc:[{required:!0,message:"选择目标集群区域",trigger:"change"}],buName:[{required:!0,message:"BU名不能为空",trigger:"blur"}]}}},methods:{postBuild:function(t){var e=this,a=this;a.$refs[t].validate((function(t){t?(e.hasResp=!1,a.axios.post("/api/drc/v2/config/mha",{buName:e.build.buName,srcMhaName:e.build.srcMhaName,dstMhaName:e.build.dstMhaName,srcDc:e.build.srcDc,dstDc:e.build.dstDc,srcTag:e.build.srcTag,dstTag:e.build.dstTag}).then((function(t){a.hasResp=!0,0===t.data.status?(a.status="success",a.title="集群创建完成!",a.message=t.data.message):(a.status="error",a.title="集群创建失败!",a.message=t.data.message)}))):a.$Message.error("仍有必填项未填!")}))},handleReset:function(t){this.$refs[t].resetFields()},changeSrcMha:function(){this.$emit("srcMhaNameChanged",this.build.srcMhaName)},changeDstMha:function(){this.$emit("dstMhaNameChanged",this.build.dstMhaName)},changeSrcDc:function(){this.$emit("srcDcChanged",this.build.srcDc)},changeDstDc:function(){this.$emit("dstDcChanged",this.build.dstDc)},changeBu:function(){this.$emit("buNameChanged",this.build.buName)},changeModal:function(t){var e=this;this.$refs[t].validate((function(t){t?e.build.modal=!0:e.$Message.error("仍有必填项未填!")}))},handleCreateTag:function(t){this.constant.tagList.push(t)}}},n=s,c=a("2877"),o=Object(c["a"])(n,r,i,!1,null,"5c18aab2",null);e["default"]=o.exports},"25f0":function(t,e,a){"use strict";var r=a("6eeb"),i=a("825a"),s=a("d039"),n=a("ad6d"),c="toString",o=RegExp.prototype,l=o[c],d=s((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),u=l.name!=c;(d||u)&&r(RegExp.prototype,c,(function(){var t=i(this),e=String(t.source),a=t.flags,r=String(void 0===a&&t instanceof RegExp&&!("flags"in o)?n.call(t):a);return"/"+e+"/"+r}),{unsafe:!0})},2909:function(t,e,a){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}a.d(e,"a",(function(){return n}));a("a4d3"),a("e01a"),a("d28b"),a("a630"),a("e260"),a("d3b7"),a("25f0"),a("3ca3"),a("ddb0");function i(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function n(t){return r(t)||i(t)||s()}},"3ca3":function(t,e,a){"use strict";var r=a("6547").charAt,i=a("69f3"),s=a("7dd0"),n="String Iterator",c=i.set,o=i.getterFor(n);s(String,"String",(function(t){c(this,{type:n,string:String(t),index:0})}),(function(){var t,e=o(this),a=e.string,i=e.index;return i>=a.length?{value:void 0,done:!0}:(t=r(a,i),e.index+=t.length,{value:t,done:!1})}))},4160:function(t,e,a){"use strict";var r=a("23e7"),i=a("17c2");r({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},"4df4":function(t,e,a){"use strict";var r=a("0366"),i=a("7b0b"),s=a("9bdd"),n=a("e95a"),c=a("50c4"),o=a("8418"),l=a("35a1");t.exports=function(t){var e,a,d,u,h,p,m=i(t),f="function"==typeof this?this:Array,g=arguments.length,b=g>1?arguments[1]:void 0,v=void 0!==b,M=l(m),y=0;if(v&&(b=r(b,g>2?arguments[2]:void 0,2)),void 0==M||f==Array&&n(M))for(e=c(m.length),a=new f(e);e>y;y++)p=v?b(m[y],y):m[y],o(a,y,p);else for(u=M.call(m),h=u.next,a=new f;!(d=h.call(u)).done;y++)p=v?s(u,b,[d.value,y],!0):d.value,o(a,y,p);return a.length=y,a}},"51ea":function(t,e,a){"use strict";a("9db2")},"53ca":function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));a("a4d3"),a("e01a"),a("d28b"),a("e260"),a("d3b7"),a("3ca3"),a("ddb0");function r(t){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,a){var r=a("1d80"),i=a("5899"),s="["+i+"]",n=RegExp("^"+s+s+"*"),c=RegExp(s+s+"*$"),o=function(t){return function(e){var a=String(r(e));return 1&t&&(a=a.replace(n,"")),2&t&&(a=a.replace(c,"")),a}};t.exports={start:o(1),end:o(2),trim:o(3)}},6547:function(t,e,a){var r=a("a691"),i=a("1d80"),s=function(t){return function(e,a){var s,n,c=String(i(e)),o=r(a),l=c.length;return o<0||o>=l?t?"":void 0:(s=c.charCodeAt(o),s<55296||s>56319||o+1===l||(n=c.charCodeAt(o+1))<56320||n>57343?t?c.charAt(o):s:t?c.slice(o,o+2):n-56320+(s-55296<<10)+65536)}};t.exports={codeAt:s(!1),charAt:s(!0)}},7156:function(t,e,a){var r=a("861d"),i=a("d2bb");t.exports=function(t,e,a){var s,n;return i&&"function"==typeof(s=e.constructor)&&s!==a&&r(n=s.prototype)&&n!==a.prototype&&i(t,n),t}},"746f":function(t,e,a){var r=a("428f"),i=a("5135"),s=a("e538"),n=a("9bf2").f;t.exports=function(t){var e=r.Symbol||(r.Symbol={});i(e,t)||n(e,t,{value:s.f(t)})}},8418:function(t,e,a){"use strict";var r=a("c04e"),i=a("9bf2"),s=a("5c6c");t.exports=function(t,e,a){var n=r(e);n in t?i.f(t,n,s(0,a)):t[n]=a}},9163:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("base-component",[a("Breadcrumb",{style:{margin:"15px 0 15px 185px",position:"fixed"}},[a("BreadcrumbItem",{attrs:{to:{path:"/v2/mhaReplications",query:{srcMhaName:this.clusterPair.srcMhaName,dstMhaName:this.clusterPair.dstMhaName,preciseSearchMode:!0}}}},[t._v("首页 ")]),a("BreadcrumbItem",{attrs:{to:"/drcV2"}},[t._v("DRC配置V2")])],1),a("Content",{staticClass:"content",style:{padding:"10px",background:"#ffffff",margin:"50px 0 1px 185px",zIndex:"1",top:"500px"}},[[a("Steps",{staticStyle:{width:"90%","margin-left":"50px","margin-bottom":"15px","margin-top":"50px"},attrs:{current:t.current}},[a("Step",{style:{cursor:"pointer"},attrs:{title:"新建DRC集群",content:"新建同步DRC"},nativeOn:{click:function(e){return t.jumpTo(0)}}}),a("Step",{style:{cursor:"pointer"},attrs:{title:"mha配置",content:"mha录入db信息"},nativeOn:{click:function(e){return t.jumpTo(1)}}}),a("Step",{style:{cursor:"pointer"},attrs:{title:"预检测",content:"检测mha配置"},nativeOn:{click:function(e){return t.jumpTo(2)}}}),a("Step",{style:{cursor:"pointer"},attrs:{title:"建立同步",content:"配置Replicator和Applier实例"},nativeOn:{click:function(e){return t.jumpTo(3)}}}),a("Step",{style:{cursor:"pointer"},attrs:{title:"完成",content:"已完成DRC接入"},nativeOn:{click:function(e){return t.jumpTo(4)}}})],1)],0===t.current?a("mhaBuild",t._b({on:{srcMhaNameChanged:t.updateSrcMha,dstMhaNameChanged:t.updateDstMha,dstDcChanged:t.updateDstDc,srcDcChanged:t.updateSrcDc}},"mhaBuild",t.clusterPair,!1)):t._e(),1===t.current?a("mha-config-v2",t._b({on:{envChanged:t.updateEnv,srcMhaNameChanged:t.updateSrcMha,dstMhaNameChanged:t.updateDstMha}},"mha-config-v2",t.clusterPair,!1)):t._e(),2===t.current?a("pre-check-v2",t._b({},"pre-check-v2",t.clusterPair,!1)):t._e(),3===t.current?a("drc-build-v2",t._b({on:{envChanged:t.updateEnv,srcMhaNameChanged:t.updateSrcMha,dstMhaNameChanged:t.updateDstMha}},"drc-build-v2",t.clusterPair,!1)):t._e(),4===t.current?a("complete"):t._e(),a("Divider"),a("div",{staticStyle:{padding:"1px 1px",height:"100px","margin-top":"75px"}},[a("div",[t.current>0?a("Button",{staticStyle:{position:"absolute",left:"465px"},attrs:{type:"primary"},on:{click:t.prev}},[t._v(" 上一步 ")]):t._e(),t.current<4?a("Button",{staticStyle:{position:"absolute",left:"790px"},attrs:{type:"primary"},on:{click:t.next}},[t._v(" 下一步 ")]):t._e()],1)])],2)],1)},i=[],s=(a("a9e3"),a("20a3")),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.hasResp?a("Alert",{staticStyle:{width:"65%","margin-left":"250px"},attrs:{type:t.status,"show-icon":""}},[t._v(" "+t._s(t.title)+" "),a("span",{attrs:{slot:"desc"},domProps:{innerHTML:t._s(t.message)},slot:"desc"})]):t._e(),a("Row",[a("i-col",{attrs:{span:"12"}},[a("Form",{ref:"srcMha",staticStyle:{float:"left","margin-top":"50px"},attrs:{model:t.srcMha,rules:t.ruleMhaMachine,"label-width":250}},[a("FormItem",{staticStyle:{width:"600px"},attrs:{label:"源集群名",prop:"mhaName"}},[a("Input",{attrs:{placeholder:"请输入源集群名"},on:{input:t.changeSrcMha},model:{value:t.srcMha.mhaName,callback:function(e){t.$set(t.srcMha,"mhaName",e)},expression:"srcMha.mhaName"}})],1),a("FormItem",{attrs:{label:"添加Ip",prop:"ip"}},[a("Input",{attrs:{number:"",placeholder:"请输入录入DB的IP"},model:{value:t.srcMha.ip,callback:function(e){t.$set(t.srcMha,"ip",e)},expression:"srcMha.ip"}})],1),a("FormItem",{attrs:{label:"Port",prop:"port"}},[a("Input",{attrs:{placeholder:"请输入录入DB端口"},model:{value:t.srcMha.port,callback:function(e){t.$set(t.srcMha,"port",e)},expression:"srcMha.port"}})],1),a("FormItem",{attrs:{label:"DB机房",prop:"srcDc"}},[a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"选择db机房区域"},model:{value:t.srcMha.idc,callback:function(e){t.$set(t.srcMha,"idc",e)},expression:"srcMha.idc"}},t._l(t.selectOption.drcZoneList,(function(e){return a("Option",{key:e.label,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1),a("FormItem",{attrs:{label:"UUID",prop:"uuid"}},[a("Input",{attrs:{placeholder:"请输入录入DB的uuid"},model:{value:t.srcMha.uuid,callback:function(e){t.$set(t.srcMha,"uuid",e)},expression:"srcMha.uuid"}}),a("Button",{on:{click:t.querySrcMhaUuid}},[t._v("连接查询")]),t.hasTest1?a("span",[a("Icon",{attrs:{type:t.testSuccess1?"ios-checkmark-circle":"ios-close-circle",color:t.testSuccess1?"green":"red"}}),t._v(" "+t._s(t.testSuccess1?"连接查询成功":"连接查询失败，请手动输入uuid")+" ")],1):t._e()],1),a("FormItem",{attrs:{label:"Master",prop:"master"}},[a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"是否为Master"},model:{value:t.srcMha.master,callback:function(e){t.$set(t.srcMha,"master",e)},expression:"srcMha.master"}},t._l(t.selectOption.isMaster,(function(e){return a("Option",{key:e.key,attrs:{value:e.value}},[t._v(t._s(e.key))])})),1)],1),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:function(e){t.preChecksrcMha("srcMha")}}},[t._v("录入DB")]),a("br"),a("br")],1)],1)],1),a("i-col",{attrs:{span:"12"}},[a("Form",{ref:"dstMha",staticStyle:{float:"left","margin-top":"50px"},attrs:{model:t.dstMha,rules:t.ruleMhaMachine,"label-width":250}},[a("FormItem",{staticStyle:{width:"600px"},attrs:{label:"新集群名",prop:"mhaName"}},[a("Input",{attrs:{placeholder:"请输入源集群名"},on:{input:t.changeDstMha},model:{value:t.dstMha.mhaName,callback:function(e){t.$set(t.dstMha,"mhaName",e)},expression:"dstMha.mhaName"}})],1),a("FormItem",{attrs:{label:"添加Ip",prop:"ip"}},[a("Input",{attrs:{placeholder:"请输入录入DB的IP"},model:{value:t.dstMha.ip,callback:function(e){t.$set(t.dstMha,"ip",e)},expression:"dstMha.ip"}})],1),a("FormItem",{attrs:{label:"Port",prop:"port"}},[a("Input",{attrs:{number:"",placeholder:"请输入录入DB端口"},model:{value:t.dstMha.port,callback:function(e){t.$set(t.dstMha,"port",e)},expression:"dstMha.port"}})],1),a("FormItem",{attrs:{label:"DB机房",prop:"dstDc"}},[a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"选择db机房区域"},model:{value:t.dstMha.idc,callback:function(e){t.$set(t.dstMha,"idc",e)},expression:"dstMha.idc"}},t._l(t.selectOption.drcZoneList,(function(e){return a("Option",{key:e.label,attrs:{boolean:"",value:e.value}},[t._v(t._s(e.label))])})),1)],1),a("FormItem",{attrs:{label:"UUID",prop:"uuid"}},[a("Input",{attrs:{placeholder:"请输入录入DB的uuid"},model:{value:t.dstMha.uuid,callback:function(e){t.$set(t.dstMha,"uuid",e)},expression:"dstMha.uuid"}}),a("Button",{on:{click:t.queryDstMhaUuid}},[t._v("连接查询")]),t.hasTest2?a("span",[a("Icon",{attrs:{type:t.testSuccess2?"ios-checkmark-circle":"ios-close-circle",color:t.testSuccess2?"green":"red"}}),t._v(" "+t._s(t.testSuccess2?"连接查询成功":"连接查询失败，请手动输入uuid")+" ")],1):t._e()],1),a("FormItem",{attrs:{label:"Master",prop:"master"}},[a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"是否为Master"},model:{value:t.dstMha.master,callback:function(e){t.$set(t.dstMha,"master",e)},expression:"dstMha.master"}},t._l(t.selectOption.isMaster,(function(e){return a("Option",{key:e.key,attrs:{value:e.value}},[t._v(t._s(e.key))])})),1)],1),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:function(e){t.preCheckdstMha("dstMha")}}},[t._v("录入DB")]),a("br"),a("br")],1)],1)],1)],1),a("Modal",{attrs:{title:"录入左侧Mha Db信息"},on:{"on-ok":t.submitsrcMha},model:{value:t.srcMha.modal,callback:function(e){t.$set(t.srcMha,"modal",e)},expression:"srcMha.modal"}},[a("p",[t._v("Mha: "+t._s(t.srcMha.mhaName)+" ")]),a("p",[t._v(" db信息 [host: "+t._s(t.srcMha.ip)+":"+t._s(t.srcMha.port)+"]")]),a("p",[t._v(" db信息 [isMaster:"+t._s(t.srcMha.master)+"]")]),a("p",[t._v(" db信息 [idc:"+t._s(t.srcMha.idc)+"]")]),a("p",[t._v(" db信息 [uuid:"+t._s(t.srcMha.uuid)+"]")])]),a("Modal",{attrs:{title:"录入右侧Mha Db信息"},on:{"on-ok":t.submitdstMha},model:{value:t.dstMha.modal,callback:function(e){t.$set(t.dstMha,"modal",e)},expression:"dstMha.modal"}},[a("p",[t._v("Mha: "+t._s(t.dstMha.mhaName)+" ")]),a("p",[t._v(" db信息 [host: "+t._s(t.dstMha.ip)+":"+t._s(t.dstMha.port)+"]")]),a("p",[t._v(" db信息 [isMaster:"+t._s(t.dstMha.master)+"]")]),a("p",[t._v(" db信息 [idc:"+t._s(t.dstMha.idc)+"]")]),a("p",[t._v(" db信息 [uuid:"+t._s(t.dstMha.uuid)+"]")])])],1)},c=[],o={name:"mhaConfig",props:{srcMhaName:String,dstMhaName:String,srcDc:String,dstDc:String},data:function(){var t=function(t,e,a){if(!/^[0-9]+$/.test(e))return a(new Error("请填写整数port"));a()},e=function(t,e,a){if(!/0|1/.test(e))return a(new Error("请填写整数port"));a()};return{result:"",status:"",title:"",message:"",hasResp:!1,hasTest1:!1,testSuccess1:!1,hasTest2:!1,testSuccess2:!1,srcMha:{modal:!1,mhaName:this.srcMhaName,zoneId:this.srcDc,ip:"",port:"",idc:this.srcDc,uuid:"",master:1},dstMha:{modal:!1,mhaName:this.dstMhaName,zoneId:this.dstDc,ip:"",port:"",idc:this.dstDc,uuid:"",master:1},ruleMhaMachine:{mhaName:[{required:!0,message:"mha集群名不能为空",trigger:"blur"}],ip:[{required:!0,message:"ip不能为空",trigger:"blur"}],port:[{required:!0,validator:t,trigger:"blur"}],idc:[{required:!0,message:"选择db区域",trigger:"blur"}],uuid:[{required:!0,message:"uuid不能为空",trigger:"blur"}],master:[{required:!0,validator:e,trigger:"blur"}]},selectOption:{isMaster:[{key:"Master",value:1},{key:"Slave",value:0}],drcZoneList:this.constant.dcList}}},methods:{changeSrcMha:function(){this.$emit("srcMhaNameChanged",this.srcMha.mhaName)},changeDstMha:function(){this.$emit("dstMhaNameChanged",this.dstMha.mhaName)},querySrcMhaUuid:function(){var t=this,e=this;e.axios.get("/api/drc/v2/mha/uuid?mhaName="+this.srcMha.mhaName+"&ip="+this.srcMha.ip+"&port="+this.srcMha.port+"&master="+this.srcMha.master).then((function(e){t.hasTest1=!0,0===e.data.status?(t.srcMha.uuid=e.data.data,t.testSuccess1=!0):t.testSuccess1=!1}))},queryDstMhaUuid:function(){var t=this,e=this;e.axios.get("/api/drc/v2/mha/uuid?mhaName="+this.dstMha.mhaName+"&ip="+this.dstMha.ip+"&port="+this.dstMha.port+"&master="+this.dstMha.master).then((function(e){t.hasTest2=!0,0===e.data.status?(t.dstMha.uuid=e.data.data,t.testSuccess2=!0):t.testSuccess2=!1}))},preChecksrcMha:function(t){var e=this;this.$refs[t].validate((function(t){t?e.srcMha.modal=!0:e.$Message.error("仍有必填项未填!")}))},submitsrcMha:function(){var t=this,e=this;e.axios.post("/api/drc/v2/mha/machineInfo",{mhaName:this.srcMha.mhaName,master:this.srcMha.master,mySQLInstance:{ip:this.srcMha.ip,port:this.srcMha.port,idc:this.srcMha.idc,uuid:this.srcMha.uuid}}).then((function(a){e.hasResp=!0,0===a.data.status?(e.status="success",e.title="mha:"+t.srcMha.mhaName+"录入db成功!",e.message=a.data.message):(e.status="error",e.title="mha:"+t.srcMha.mhaName+"录入db失败!",e.message=a.data.message)}))},preCheckdstMha:function(t){var e=this;this.$refs[t].validate((function(t){t?e.dstMha.modal=!0:e.$Message.error("仍有必填项未填!")}))},submitdstMha:function(){var t=this,e=this;e.axios.post("/api/drc/v2/mha/machineInfo",{mhaName:this.dstMha.mhaName,master:this.dstMha.master,mySQLInstance:{ip:this.dstMha.ip,port:this.dstMha.port,idc:this.dstMha.idc,uuid:this.dstMha.uuid}}).then((function(a){e.hasResp=!0,0===a.data.status?(e.status="success",e.title="mha:"+t.dstMha.mhaName+"录入db成功!",e.message=a.data.message):(e.status="error",e.title="mha:"+t.dstMha.mhaName+"录入db失败!",e.message=a.data.message)}))}}},l=o,d=a("2877"),u=Object(d["a"])(l,n,c,!1,null,"5664688c",null),h=u.exports,p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Row",[a("i-col",{attrs:{span:"12"}},[a("Form",{staticStyle:{float:"left","margin-top":"50px"},attrs:{model:t.srcMha,"label-width":250}},[a("FormItem",{staticStyle:{width:"600px"},attrs:{label:"源集群名",prop:"mhaName"}},[a("Row",[a("Col",{attrs:{span:"16"}},[a("Input",{attrs:{readonly:"",placeholder:"请输入源集群名"},model:{value:t.srcMha.mhaName,callback:function(e){t.$set(t.srcMha,"mhaName",e)},expression:"srcMha.mhaName"}})],1),a("Col",{attrs:{span:"5"}},[a("Button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",ghost:""},on:{click:function(e){return t.checkMySqlConfig(t.srcMha)}}},[t._v("配置校验")])],1)],1)],1),a("FormItem",{attrs:{label:"同步表",prop:"ip"}},[a("Row",[a("Col",{attrs:{span:"16"}},[a("Input",{attrs:{placeholder:"支持正则，默认全部"},model:{value:t.srcMha.nameFilter,callback:function(e){t.$set(t.srcMha,"nameFilter",e)},expression:"srcMha.nameFilter"}})],1),a("Col",{attrs:{span:"5"}},[a("Button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",ghost:""},on:{click:function(e){return t.checkMySqlTables(t.srcMha)}}},[t._v("表校验")])],1)],1)],1)],1)],1),a("i-col",{attrs:{span:"12"}},[a("Form",{staticStyle:{float:"left","margin-top":"50px"},attrs:{model:t.dstMha,"label-width":250}},[a("FormItem",{staticStyle:{width:"600px"},attrs:{label:"目标集群名",prop:"dstMhaName"}},[a("Row",[a("Col",{attrs:{span:"16"}},[a("Input",{attrs:{readonly:"",placeholder:"请输入源集群名"},model:{value:t.dstMha.mhaName,callback:function(e){t.$set(t.dstMha,"mhaName",e)},expression:"dstMha.mhaName"}})],1),a("Col",{attrs:{span:"5"}},[a("Button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",ghost:""},on:{click:function(e){return t.checkMySqlConfig(t.dstMha)}}},[t._v("配置校验")])],1)],1)],1),a("FormItem",{attrs:{label:"同步表",prop:"ip"}},[a("Row",[a("Col",{attrs:{span:"16"}},[a("Input",{attrs:{placeholder:"支持正则，默认全部"},model:{value:t.dstMha.nameFilter,callback:function(e){t.$set(t.dstMha,"nameFilter",e)},expression:"dstMha.nameFilter"}})],1),a("Col",{attrs:{span:"5"}},[a("Button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",ghost:""},on:{click:function(e){return t.checkMySqlTables(t.dstMha)}}},[t._v("表校验")])],1)],1)],1)],1)],1)],1),a("Modal",{attrs:{title:"预检测结果",width:"900px"},model:{value:t.configCheck.modal,callback:function(e){t.$set(t.configCheck,"modal",e)},expression:"configCheck.modal"}},[a("Form",{staticStyle:{width:"100%"}},[a("FormItem",{attrs:{label:"BINLOG [SHOULD BE: ON]"}},[a("Input",{attrs:{readonly:""},model:{value:t.configCheck.binlogMode,callback:function(e){t.$set(t.configCheck,"binlogMode",e)},expression:"configCheck.binlogMode"}})],1),a("FormItem",{attrs:{label:"BINLOG_FORMAT  [SHOULD BE: ROW]"}},[a("Input",{attrs:{readonly:""},model:{value:t.configCheck.binlogFormat,callback:function(e){t.$set(t.configCheck,"binlogFormat",e)},expression:"configCheck.binlogFormat"}})],1),a("FormItem",{attrs:{label:"binlogVersion1  [SHOULD BE: OFF]"}},[a("Input",{attrs:{readonly:""},model:{value:t.configCheck.binlogVersion1,callback:function(e){t.$set(t.configCheck,"binlogVersion1",e)},expression:"configCheck.binlogVersion1"}})],1),a("FormItem",{attrs:{label:"BTD [SHOULD BE: writeSet]"}},[a("Input",{attrs:{readonly:""},model:{value:t.configCheck.binlogTransactionDependency,callback:function(e){t.$set(t.configCheck,"binlogTransactionDependency",e)},expression:"configCheck.binlogTransactionDependency"}})],1),a("FormItem",{attrs:{label:"BinlogRowImage [SHOULD BE: FULL]"}},[a("Input",{attrs:{readonly:""},model:{value:t.configCheck.binlogRowImage,callback:function(e){t.$set(t.configCheck,"binlogRowImage",e)},expression:"configCheck.binlogRowImage"}})],1),a("FormItem",{attrs:{label:"BTDHS [SHOULD BE: 100k]"}},[a("Input",{attrs:{readonly:""},model:{value:t.configCheck.binlogTransactionDependencyHistorySize,callback:function(e){t.$set(t.configCheck,"binlogTransactionDependencyHistorySize",e)},expression:"configCheck.binlogTransactionDependencyHistorySize"}})],1),a("FormItem",{attrs:{label:"GTID_MODE [SHOULD BE: ON]"}},[a("Input",{attrs:{readonly:""},model:{value:t.configCheck.gtidMode,callback:function(e){t.$set(t.configCheck,"gtidMode",e)},expression:"configCheck.gtidMode"}})],1),a("FormItem",{attrs:{label:"DRC系统表数量 [SHOULD BE: 1/2]"}},[a("Input",{attrs:{readonly:""},model:{value:t.configCheck.drcTables,callback:function(e){t.$set(t.configCheck,"drcTables",e)},expression:"configCheck.drcTables"}})],1),a("FormItem",{attrs:{label:"自增步长"}},[a("Input",{attrs:{readonly:""},model:{value:t.configCheck.autoIncrementStep,callback:function(e){t.$set(t.configCheck,"autoIncrementStep",e)},expression:"configCheck.autoIncrementStep"}})],1),a("FormItem",{attrs:{label:"自增offSet"}},[a("Input",{attrs:{readonly:""},model:{value:t.configCheck.autoIncrementOffset,callback:function(e){t.$set(t.configCheck,"autoIncrementOffset",e)},expression:"configCheck.autoIncrementOffset"}})],1),a("FormItem",{attrs:{label:"DRC3对帐号 [SHOULD BE: three accounts ready]"}},[a("Input",{attrs:{readonly:""},model:{value:t.configCheck.drcAccounts,callback:function(e){t.$set(t.configCheck,"drcAccounts",e)},expression:"configCheck.drcAccounts"}})],1)],1)],1),a("Modal",{attrs:{title:"表检验",width:"1000px"},model:{value:t.tablesCheckModal,callback:function(e){t.tablesCheckModal=e},expression:"tablesCheckModal"}},[a("Card",[a("div",{attrs:{slot:"title"},slot:"title"},[a("span",[t._v("相关表")])]),a("Table",{attrs:{stripe:"",columns:t.columns,data:t.dataWithPage,border:""}}),a("div",{staticStyle:{"text-align":"center",margin:"16px 0"}},[a("Page",{attrs:{transfer:!0,total:t.tableData.length,current:t.current,"page-size-opts":t.pageSizeOpts,"page-size":this.size,"show-total":"","show-sizer":"","show-elevator":""},on:{"update:current":function(e){t.current=e},"on-page-size-change":t.handleChangeSize}})],1)],1)],1)],1)},m=[],f=(a("fb6a"),a("2909")),g={name:"preCheckV2",props:{srcMhaName:String,dstMhaName:String,srcDc:String,dstDc:String,env:String},data:function(){return{srcMha:{mhaName:this.srcMhaName,nameFilter:""},dstMha:{mhaName:this.dstMhaName,nameFilter:""},configCheck:{binlogMode:"",binlogFormat:"",binlogVersion1:"",binlogTransactionDependency:"",binlogRowImage:"",binlogTransactionDependencyHistorySize:0,gtidMode:"",drcTables:0,autoIncrementStep:0,autoIncrementOffset:0,drcAccounts:"",modal:!1},tablesCheckModal:!1,tableData:[],columns:[{title:"序号",width:75,align:"center",fixed:"left",render:function(t,e){return t("span",e.index+1)}},{title:"库名",key:"schema"},{title:"表名",key:"table"},{title:"无OnUpdate字段",key:"noOnUpdateColumn",width:100,align:"center",render:function(t,e){var a=e.row,r=a.noOnUpdateColumn?"True":"";return t("span",r)}},{title:"无OnUpdate字段索引",key:"noOnUpdateKey",width:100,align:"center",render:function(t,e){var a=e.row,r=a.noOnUpdateKey?"True":"";return t("span",r)}},{title:"无PkUk",key:"noPkUk",width:100,align:"center",render:function(t,e){var a=e.row,r=a.noPkUk?"True":"";return t("span",r)}},{title:"支持Truncate",key:"approveTruncate",width:100,align:"center",render:function(t,e){var a=e.row,r=a.approveTruncate?"True":"";return t("span",r)}},{title:"存在DefaultTime为0",key:"timeDefaultZero",width:100,align:"center",render:function(t,e){var a=e.row,r=a.timeDefaultZero?"True":"";return t("span",r)}},{title:"结果",width:100,align:"center",render:function(t,e){var a=e.row,r=a.noOnUpdateColumn||a.noOnUpdateKey||a.noPkUk||a.approveTruncate||a.timeDefaultZero,i=r?"volcano":"green",s=r?"错误":"正常";return t("Tag",{props:{color:i}},s)}}],total:0,current:1,size:5,pageSizeOpts:[5,10,20,100]}},computed:{dataWithPage:function(){var t=this.tableData,e=this.current*this.size-this.size,a=e+this.size;return Object(f["a"])(t).slice(e,a)}},methods:{checkMySqlConfig:function(t){var e=this;this.$Spin.show({render:function(t){return t("div",[t("Icon",{class:"demo-spin-icon-load",props:{size:18}}),t("div","检测中，请稍等...")])}}),this.axios.get("/api/drc/v2/mysql/preCheckMySqlConfig?mha="+t.mhaName).then((function(t){console.log(t);var a=t.data.data;console.log(a),e.configCheck.binlogMode=a.binlogMode,e.configCheck.binlogFormat=a.binlogFormat,e.configCheck.binlogVersion1=a.binlogVersion1,e.configCheck.binlogTransactionDependency=a.binlogTransactionDependency,e.configCheck.binlogRowImage=a.binlogRowImage,e.configCheck.binlogTransactionDependencyHistorySize=a.binlogTransactionDependencyHistorySize,e.configCheck.gtidMode=a.gtidMode,e.configCheck.drcTables=a.drcTables,e.configCheck.autoIncrementStep=a.autoIncrementStep,e.configCheck.autoIncrementOffset=a.autoIncrementOffset,e.configCheck.drcAccounts=a.drcAccounts,e.$Spin.hide(),e.configCheck.modal=!0}))},checkMySqlTables:function(t){var e=this;this.$Spin.show({render:function(t){return t("div",[t("Icon",{class:"demo-spin-icon-load",props:{size:18}}),t("div","检测中，请稍等...")])}}),setTimeout((function(){e.$Spin.hide()}),8e4),this.axios.get("/api/drc/v2/mysql/preCheckMySqlTables?mha="+t.mhaName+"&nameFilter="+t.nameFilter).then((function(t){e.tableData=t.data.data,e.$Spin.hide(),e.tablesCheckModal=!0}))},handleChangeSize:function(t){this.size=t}}},b=g,v=Object(d["a"])(b,p,m,!1,null,"157db0b6",null),M=v.exports,y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.hasResp?a("Alert",{staticStyle:{width:"65%","margin-left":"250px"},attrs:{type:t.status,"show-icon":""}},[t._v(" "+t._s(t.title)+" "),a("span",{attrs:{slot:"desc"},domProps:{innerHTML:t._s(t.message)},slot:"desc"})]):t._e(),a("Row",[a("i-col",{attrs:{span:"12"}},[a("Form",{ref:"drc1",staticStyle:{float:"left","margin-top":"50px"},attrs:{model:t.srcBuildParam,rules:t.ruleDrc,"label-width":250}},[a("FormItem",{staticStyle:{width:"600px"},attrs:{label:"源集群名",prop:"srcMhaName"}},[a("Input",{attrs:{placeholder:"请输入源集群名"},on:{input:t.changeSrcMha},model:{value:t.srcBuildParam.mhaName,callback:function(e){t.$set(t.srcBuildParam,"mhaName",e)},expression:"srcBuildParam.mhaName"}})],1),a("FormItem",{attrs:{label:"选择Replicator",prop:"replicator"}},[a("Select",{staticStyle:{width:"250px"},attrs:{multiple:"",placeholder:"选择源集群Replicator"},model:{value:t.srcBuildParam.replicatorIps,callback:function(e){t.$set(t.srcBuildParam,"replicatorIps",e)},expression:"srcBuildParam.replicatorIps"}},t._l(t.replicatorList.src,(function(e){return a("Option",{key:e.ip,attrs:{value:e.ip}},[t._v(t._s(e.ip)+" —— "+t._s(e.az)+" ")])})),1),t._v("   "),a("Button",{attrs:{type:"success"},on:{click:t.autoConfigSrcReplicator}},[t._v("自动录入")])],1),t.showMhaApplierConfig(!0)?a("FormItem",{attrs:{label:"选择Applier",prop:"applier"}},[a("Select",{staticStyle:{width:"250px"},attrs:{multiple:"",placeholder:"选择源集群Applier"},model:{value:t.srcBuildParam.applierIps,callback:function(e){t.$set(t.srcBuildParam,"applierIps",e)},expression:"srcBuildParam.applierIps"}},t._l(t.applierList.src,(function(e){return a("Option",{key:e.ip,attrs:{value:e.ip}},[t._v(t._s(e.ip)+" —— "+t._s(e.az)+" ")])})),1),t._v("   "),a("Button",{attrs:{type:"success"},on:{click:t.autoConfigSrcApplier}},[t._v("自动录入")])],1):t._e(),a("FormItem",{staticStyle:{width:"600px"},attrs:{label:"初始拉取位点R"}},[a("Input",{attrs:{placeholder:"变更replicator机器时,请输入binlog拉取位点"},model:{value:t.srcBuildParam.replicatorInitGtid,callback:function(e){t.$set(t.srcBuildParam,"replicatorInitGtid",e)},expression:"srcBuildParam.replicatorInitGtid"}}),a("Row",[a("Col",{attrs:{span:"12"}},[a("Button",{on:{click:t.querySrcMhaMachineGtid}},[t._v("查询mha位点")]),t.hasTest1?a("span",[a("Icon",{attrs:{type:t.testSuccess1?"ios-checkmark-circle":"ios-close-circle",color:t.testSuccess1?"green":"red"}}),t._v(" "+t._s(t.testSuccess1?"查询实时位点成功":"连接查询失败")+" ")],1):t._e()],1),a("Col",{attrs:{span:"12"}},[a("Button",{attrs:{type:"success"},on:{click:t.querySrcMhaGtidCheckRes}},[t._v("位点校验")])],1)],1)],1),t.showMhaApplierConfig(!0)?a("FormItem",{staticStyle:{width:"600px"},attrs:{label:"初始同步位点A"}},[a("Input",{attrs:{placeholder:"请输入DRC同步起始位点"},model:{value:t.srcBuildParam.applierInitGtid,callback:function(e){t.$set(t.srcBuildParam,"applierInitGtid",e)},expression:"srcBuildParam.applierInitGtid"}})],1):t._e(),a("FormItem",{staticStyle:{width:"600px"},attrs:{label:"同步配置"}},[a("Button",{attrs:{type:"primary",ghost:""},on:{click:t.getSrcDbReplications}},[t._v("同步表管理")])],1),t.showDbMhaApplierConfig(!0)?a("FormItem",{staticStyle:{width:"600px"},attrs:{label:"DB Applier 配置"}},[a("Button",{attrs:{type:"primary",ghost:""},on:{click:t.getSrcDbApplierReplications}},[t._v("Db Applier 管理")])],1):t._e()],1)],1),a("i-col",{attrs:{span:"12"}},[a("Form",{ref:"drc1",staticStyle:{float:"left","margin-top":"50px"},attrs:{model:t.dstBuildParam,rules:t.ruleDrc,"label-width":250}},[a("FormItem",{staticStyle:{width:"600px"},attrs:{label:"目标集群名",prop:"dstMhaName"}},[a("Input",{attrs:{placeholder:"请输入目标集群名"},on:{input:t.changeDstMha},model:{value:t.dstBuildParam.mhaName,callback:function(e){t.$set(t.dstBuildParam,"mhaName",e)},expression:"dstBuildParam.mhaName"}})],1),a("FormItem",{attrs:{label:"选择Replicator",prop:"replicator"}},[a("Select",{staticStyle:{width:"250px"},attrs:{multiple:"",placeholder:"选择目标集群Replicator"},model:{value:t.dstBuildParam.replicatorIps,callback:function(e){t.$set(t.dstBuildParam,"replicatorIps",e)},expression:"dstBuildParam.replicatorIps"}},t._l(t.replicatorList.dst,(function(e){return a("Option",{key:e.ip,attrs:{value:e.ip}},[t._v(t._s(e.ip)+" —— "+t._s(e.az)+" ")])})),1),t._v("   "),a("Button",{attrs:{type:"success"},on:{click:t.autoConfigDstReplicator}},[t._v("自动录入")])],1),t.showMhaApplierConfig(!1)?a("FormItem",{attrs:{label:"选择Applier",prop:"applier"}},[a("Select",{staticStyle:{width:"250px"},attrs:{multiple:"",placeholder:"选择目标集群Applier"},model:{value:t.dstBuildParam.applierIps,callback:function(e){t.$set(t.dstBuildParam,"applierIps",e)},expression:"dstBuildParam.applierIps"}},t._l(t.applierList.dst,(function(e){return a("Option",{key:e.ip,attrs:{value:e.ip}},[t._v(t._s(e.ip)+" —— "+t._s(e.az)+" ")])})),1),t._v("   "),a("Button",{attrs:{type:"success"},on:{click:t.autoConfigDstApplier}},[t._v("自动录入")])],1):t._e(),a("FormItem",{staticStyle:{width:"600px"},attrs:{label:"初始拉取位点R"}},[a("Input",{attrs:{placeholder:"变更replicator机器时,请输入binlog拉取位点"},model:{value:t.dstBuildParam.replicatorInitGtid,callback:function(e){t.$set(t.dstBuildParam,"replicatorInitGtid",e)},expression:"dstBuildParam.replicatorInitGtid"}}),a("Row",[a("Col",{attrs:{span:"12"}},[a("Button",{on:{click:t.queryDstMhaMachineGtid}},[t._v("查询mha位点")]),t.hasTest2?a("span",[a("Icon",{attrs:{type:t.testSuccess2?"ios-checkmark-circle":"ios-close-circle",color:t.testSuccess2?"green":"red"}}),t._v(" "+t._s(t.testSuccess2?"查询实时位点成功":"连接查询失败")+" ")],1):t._e()],1),a("Col",{attrs:{span:"12"}},[a("Button",{attrs:{type:"success"},on:{click:t.queryDstMhaGtidCheckRes}},[t._v("位点校验")])],1)],1)],1),t.showMhaApplierConfig(!1)?a("FormItem",{staticStyle:{width:"600px"},attrs:{label:"初始同步位点A"}},[a("Input",{attrs:{placeholder:"请输入DRC同步起始位点"},model:{value:t.dstBuildParam.applierInitGtid,callback:function(e){t.$set(t.dstBuildParam,"applierInitGtid",e)},expression:"dstBuildParam.applierInitGtid"}})],1):t._e(),a("FormItem",{staticStyle:{width:"600px"},attrs:{label:"同步配置"}},[a("Button",{attrs:{type:"primary",ghost:""},on:{click:t.getDstDbReplications}},[t._v("同步表管理")])],1),t.showDbMhaApplierConfig(!1)?a("FormItem",{staticStyle:{width:"600px"},attrs:{label:"DB Applier 配置"}},[a("Button",{attrs:{type:"primary",ghost:""},on:{click:t.getDstDbApplierReplications}},[t._v("Db Applier 管理")])],1):t._e()],1)],1)],1),a("Form",{staticStyle:{"margin-top":"50px"},attrs:{"label-width":250}},[a("FormItem",[a("br"),a("Button",{staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:function(e){t.preCheckConfigure()}}},[t._v("提交")])],1),a("Modal",{attrs:{title:"确认配置信息",width:"900px"},on:{"on-ok":t.submitConfig},model:{value:t.reviewModal,callback:function(e){t.reviewModal=e},expression:"reviewModal"}},[a("Row",{attrs:{gutter:5}},[a("i-col",{attrs:{span:"12"}},[a("Form",{staticStyle:{width:"80%"}},[a("FormItem",{attrs:{label:"源集群名"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:30},readonly:""},model:{value:t.srcBuildParam.mhaName,callback:function(e){t.$set(t.srcBuildParam,"mhaName",e)},expression:"srcBuildParam.mhaName"}})],1),a("FormItem",{attrs:{label:"源集群端Replicator"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:30},readonly:""},model:{value:t.srcBuildParam.replicatorIps,callback:function(e){t.$set(t.srcBuildParam,"replicatorIps",e)},expression:"srcBuildParam.replicatorIps"}})],1),a("FormItem",{attrs:{label:"源集群端Applier"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:30},readonly:""},model:{value:t.srcBuildParam.applierIps,callback:function(e){t.$set(t.srcBuildParam,"applierIps",e)},expression:"srcBuildParam.applierIps"}})],1),a("FormItem",{attrs:{label:"源集群端R位点"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:30},readonly:""},model:{value:t.srcBuildParam.replicatorInitGtid,callback:function(e){t.$set(t.srcBuildParam,"replicatorInitGtid",e)},expression:"srcBuildParam.replicatorInitGtid"}})],1),a("FormItem",{attrs:{label:"源集群端A位点"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:30},readonly:""},model:{value:t.srcBuildParam.applierInitGtid,callback:function(e){t.$set(t.srcBuildParam,"applierInitGtid",e)},expression:"srcBuildParam.applierInitGtid"}})],1)],1)],1),a("i-col",{attrs:{span:"12"}},[a("Form",{staticStyle:{width:"80%"}},[a("FormItem",{attrs:{label:"目标集群名"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:30},readonly:""},model:{value:t.dstBuildParam.mhaName,callback:function(e){t.$set(t.dstBuildParam,"mhaName",e)},expression:"dstBuildParam.mhaName"}})],1),a("FormItem",{attrs:{label:"目标集群端Replicator"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:30},readonly:""},model:{value:t.dstBuildParam.replicatorIps,callback:function(e){t.$set(t.dstBuildParam,"replicatorIps",e)},expression:"dstBuildParam.replicatorIps"}})],1),a("FormItem",{attrs:{label:"目标集群端Applier"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:30},readonly:""},model:{value:t.dstBuildParam.applierIps,callback:function(e){t.$set(t.dstBuildParam,"applierIps",e)},expression:"dstBuildParam.applierIps"}})],1),a("FormItem",{attrs:{label:"目标集群端R位点"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:30},readonly:""},model:{value:t.dstBuildParam.replicatorInitGtid,callback:function(e){t.$set(t.dstBuildParam,"replicatorInitGtid",e)},expression:"dstBuildParam.replicatorInitGtid"}})],1),a("FormItem",{attrs:{label:"目标集群端A位点"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:30},readonly:""},model:{value:t.dstBuildParam.applierInitGtid,callback:function(e){t.$set(t.dstBuildParam,"applierInitGtid",e)},expression:"dstBuildParam.applierInitGtid"}})],1)],1)],1)],1)],1),a("Modal",{attrs:{title:"配置结果",width:"1200px"},model:{value:t.resultModal,callback:function(e){t.resultModal=e},expression:"resultModal"}},[a("Form",{staticStyle:{width:"100%"}},[a("FormItem",{attrs:{label:"集群配置"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:30},readonly:""},model:{value:t.result,callback:function(e){t.result=e},expression:"result"}})],1)],1)],1),a("Modal",{attrs:{title:"gitd位点校验结果",width:"900px"},model:{value:t.gtidCheck.modal,callback:function(e){t.$set(t.gtidCheck,"modal",e)},expression:"gtidCheck.modal"}},[a("Form",{staticStyle:{width:"80%"}},[a("FormItem",{attrs:{label:"校验结果"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:30},readonly:""},model:{value:t.gtidCheck.resVo.legal,callback:function(e){t.$set(t.gtidCheck.resVo,"legal",e)},expression:"gtidCheck.resVo.legal"}})],1),a("FormItem",{attrs:{label:"当前Mha"}},[a("Input",{attrs:{autosize:{minRows:1,maxRows:30},readonly:""},model:{value:t.gtidCheck.resVo.mha,callback:function(e){t.$set(t.gtidCheck.resVo,"mha",e)},expression:"gtidCheck.resVo.mha"}})],1),a("FormItem",{attrs:{label:"配置位点"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:30},readonly:""},model:{value:t.gtidCheck.resVo.configGtid,callback:function(e){t.$set(t.gtidCheck.resVo,"configGtid",e)},expression:"gtidCheck.resVo.configGtid"}})],1),a("FormItem",{attrs:{label:"purgedGtid"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:30},readonly:""},model:{value:t.gtidCheck.resVo.purgedGtid,callback:function(e){t.$set(t.gtidCheck.resVo,"purgedGtid",e)},expression:"gtidCheck.resVo.purgedGtid"}})],1)],1)],1)],1)],1)},S=[],I=(a("a4d3"),a("e01a"),a("d28b"),a("4160"),a("d3b7"),a("3ca3"),a("159b"),a("ddb0"),a("53ca")),k={name:"drcBuildV2",props:{srcMhaName:String,dstMhaName:String,srcDc:String,dstDc:String,env:String},data:function(){return{result:"",status:"",title:"",message:"",hasResp:!1,hasTest1:!1,testSuccess1:!1,hasTest2:!1,testSuccess2:!1,reviewModal:!1,resultModal:!1,replicatorList:{src:[],dst:[]},applierList:{src:[],dst:[]},srcBuildParam:{mhaName:this.srcMhaName,replicatorIps:[],applierIps:[],replicatorInitGtid:"",applierInitGtid:""},srcBuildData:{dbApplierDtos:[],dbApplierSwitch:!1},dstBuildParam:{mhaName:this.dstMhaName,replicatorIps:[],applierIps:[],replicatorInitGtid:"",applierInitGtid:""},dstBuildData:{dbApplierDtos:[],dbApplierSwitch:!1},gtidCheck:{modal:!1,resVo:{mha:"",legal:"",configGtid:"",purgedGtid:""}},ruleDrc:{oldClusterName:[{required:!0,message:"源集群名不能为空",trigger:"blur"}],newClusterName:[{required:!0,message:"新集群名不能为空",trigger:"blur"}],env:[{required:!0,message:"环境不能为空",trigger:"blur"}],replicator:[{required:!0,message:"replicator不能为空",trigger:"blur"}],applier:[{required:!0,message:"applier不能为空",trigger:"blur"}]}}},computed:{dataWithPage:function(){var t=this.nameFilterCheck.tableData,e=this.nameFilterCheck.current*this.nameFilterCheck.size-this.nameFilterCheck.size,a=e+this.nameFilterCheck.size;return Object(f["a"])(t).slice(e,a)}},methods:{flattenObj:function(t){var e={};for(var a in t)if("object"!==Object(I["a"])(t[a])||Array.isArray(t[a]))e[a]=t[a];else{var r=this.flattenObj(t[a]);for(var i in r)e[a+"."+i]=r[i]}return e},autoConfigSrcReplicator:function(){var t=this;this.axios.get("/api/drc/v2/resource/mha/auto?mhaName="+this.srcBuildParam.mhaName+"&type=0&selectedIps="+this.srcBuildParam.replicatorIps).then((function(e){console.log(e.data),t.srcBuildParam.replicatorIps=[],e.data.data.forEach((function(e){return t.srcBuildParam.replicatorIps.push(e.ip)}))}))},autoConfigSrcApplier:function(){var t=this;this.axios.get("/api/drc/v2/resource/mha/auto?mhaName="+this.srcBuildParam.mhaName+"&type=1&selectedIps="+this.srcBuildParam.applierIps).then((function(e){console.log(e.data),t.srcBuildParam.applierIps=[],e.data.data.forEach((function(e){return t.srcBuildParam.applierIps.push(e.ip)}))}))},autoConfigDstReplicator:function(){var t=this;this.axios.get("/api/drc/v2/resource/mha/auto?mhaName="+this.dstBuildParam.mhaName+"&type=0&selectedIps="+this.dstBuildParam.replicatorIps).then((function(e){console.log(e.data),t.dstBuildParam.replicatorIps=[],e.data.data.forEach((function(e){return t.dstBuildParam.replicatorIps.push(e.ip)}))}))},autoConfigDstApplier:function(){var t=this;this.axios.get("/api/drc/v2/resource/mha/auto?mhaName="+this.dstBuildParam.mhaName+"&type=1&selectedIps="+this.dstBuildParam.applierIps).then((function(e){console.log(e.data),t.dstBuildParam.applierIps=[],e.data.data.forEach((function(e){return t.dstBuildParam.applierIps.push(e.ip)}))}))},getSrcMhaResources:function(){var t=this;this.axios.get("/api/drc/v2/resource/mha/all?mhaName="+this.srcBuildParam.mhaName+"&type=0").then((function(e){console.log(e.data),t.replicatorList.src=e.data.data})),this.axios.get("/api/drc/v2/resource/mha/all?mhaName="+this.srcBuildParam.mhaName+"&type=1").then((function(e){console.log(e.data),t.applierList.src=e.data.data}))},getDstMhaResources:function(){var t=this;this.axios.get("/api/drc/v2/resource/mha/all?mhaName="+this.dstBuildParam.mhaName+"&type=0").then((function(e){console.log(e.data),t.replicatorList.dst=e.data.data})),this.axios.get("/api/drc/v2/resource/mha/all?mhaName="+this.dstBuildParam.mhaName+"&type=1").then((function(e){console.log(e.data),t.applierList.dst=e.data.data}))},getSrcMhaReplicatorsInUse:function(){var t=this;this.axios.get("/api/drc/v2/mha/replicator?mhaName="+this.srcBuildParam.mhaName).then((function(e){t.srcBuildParam.replicatorIps=e.data.data}))},getDstMhaReplicatorsInUse:function(){var t=this;this.axios.get("/api/drc/v2/mha/replicator?mhaName="+this.dstBuildParam.mhaName).then((function(e){console.log(e.data),t.dstBuildParam.replicatorIps=e.data.data}))},getSrcMhaAppliersInUse:function(){var t=this;this.axios.get("/api/drc/v2/config/mha/applier?srcMhaName="+this.dstBuildParam.mhaName+"&dstMhaName="+this.srcBuildParam.mhaName).then((function(e){console.log(e.data),t.srcBuildParam.applierIps=e.data.data})),this.axios.get("/api/drc/v2/config/mha/applierGtid?srcMhaName="+this.dstBuildParam.mhaName+"&dstMhaName="+this.srcBuildParam.mhaName).then((function(e){console.log(e.data),t.srcBuildParam.applierInitGtid=e.data.data}))},getDstMhaAppliersInUse:function(){var t=this;this.axios.get("/api/drc/v2/config/mha/applier?srcMhaName="+this.srcBuildParam.mhaName+"&dstMhaName="+this.dstBuildParam.mhaName).then((function(e){t.dstBuildParam.applierIps=e.data.data})),this.axios.get("/api/drc/v2/config/mha/applierGtid?srcMhaName="+this.srcBuildParam.mhaName+"&dstMhaName="+this.dstBuildParam.mhaName).then((function(e){console.log(e.data),t.dstBuildParam.applierInitGtid=e.data.data}))},getMhaDbAppliersInUse:function(){var t=this;this.axios.get("/api/drc/v2/config/mha/dbApplier?srcMhaName="+this.dstBuildParam.mhaName+"&dstMhaName="+this.srcBuildParam.mhaName).then((function(e){console.log(e.data),t.srcBuildData.dbApplierDtos=e.data.data})),this.axios.get("/api/drc/v2/config/mha/dbApplier?srcMhaName="+this.srcBuildParam.mhaName+"&dstMhaName="+this.dstBuildParam.mhaName).then((function(e){console.log(e.data),t.dstBuildData.dbApplierDtos=e.data.data})),this.axios.get("/api/drc/v2/config/mha/dbApplier/switch?mhaName="+this.srcBuildParam.mhaName).then((function(e){console.log(e.data),t.srcBuildData.dbApplierSwitch=e.data.data})),this.axios.get("/api/drc/v2/config/mha/dbApplier/switch?mhaName="+this.dstBuildParam.mhaName).then((function(e){console.log(e.data),t.dstBuildData.dbApplierSwitch=e.data.data}))},querySrcMhaMachineGtid:function(){var t=this,e=this;e.axios.get("/api/drc/v2/mha/gtid/executed?mha="+this.srcBuildParam.mhaName).then((function(e){t.hasTest1=!0,0===e.data.status?(t.srcBuildParam.replicatorInitGtid=e.data.data,t.testSuccess1=!0):t.testSuccess1=!1}))},querySrcMhaGtidCheckRes:function(){var t=this;if(null!=this.srcBuildParam.replicatorInitGtid&&""!==this.srcBuildParam.replicatorInitGtid){var e=this;e.axios.get("/api/drc/v2/mha/gtid/checkResult?mha="+this.srcBuildParam.mhaName+"&configGtid="+this.srcBuildParam.replicatorInitGtid).then((function(e){0===e.data.status?(t.gtidCheck.resVo={mha:t.srcBuildParam.mhaName,legal:!0===e.data.data.legal?"合理位点":"binlog已经被purge",configGtid:t.srcBuildParam.replicatorInitGtid,purgedGtid:e.data.data.purgedGtid},t.gtidCheck.modal=!0):alert("位点校验失败!")}))}else alert("位点为空！")},queryDstMhaMachineGtid:function(){var t=this,e=this;e.axios.get("/api/drc/v2/mha/gtid/executed?mha="+this.dstBuildParam.mhaName).then((function(e){t.hasTest2=!0,0===e.data.status?(t.dstBuildParam.replicatorInitGtid=e.data.data,t.testSuccess2=!0):t.testSuccess2=!1}))},queryDstMhaGtidCheckRes:function(){var t=this;if(null!=this.dstBuildParam.replicatorInitGtid&&""!==this.dstBuildParam.replicatorInitGtid){var e=this;e.axios.get("/api/drc/v2/mha/gtid/checkResult?mha="+this.dstBuildParam.mhaName+"&configGtid="+this.dstBuildParam.replicatorInitGtid).then((function(e){0===e.data.status?(t.gtidCheck.resVo={mha:t.dstBuildParam.mhaName,legal:!0===e.data.data.legal?"合理位点":"binlog已经被purge",configGtid:t.dstBuildParam.replicatorInitGtid,purgedGtid:e.data.data.purgedGtid},t.gtidCheck.modal=!0):alert("位点校验失败!")}))}else alert("位点为空！")},getSrcDc:function(){var t=this;this.axios.get("/api/drc/v2/mha/dc?mhaName="+this.srcBuildParam.mhaName).then((function(e){t.srcDc=e.data.data}))},getDstDc:function(){var t=this;this.axios.get("/api/drc/v2/mha/dc?mhaName="+this.dstBuildParam.mhaName).then((function(e){t.dstDc=e.data.data}))},changeSrcMha:function(){this.$emit("srcMhaNameChanged",this.srcBuildParam.mhaName),this.getSrcMhaResources(),this.getSrcMhaReplicatorsInUse(),this.getSrcMhaAppliersInUse(),this.getDstMhaAppliersInUse(),this.getMhaDbAppliersInUse(),this.getSrcDc()},changeDstMha:function(){this.$emit("dstMhaNameChanged",this.dstBuildParam.mhaName),this.getDstMhaResources(),this.getDstMhaReplicatorsInUse(),this.getDstMhaAppliersInUse(),this.getSrcMhaAppliersInUse(),this.getMhaDbAppliersInUse(),this.getDstDc()},start:function(){this.$Loading.start()},finish:function(){this.$Loading.finish()},error:function(){this.$Loading.error()},changeModal:function(t){var e=this;this.$refs[t].validate((function(t){t?e.drc.reviewModal=!0:e.$Message.error("仍有必填项未填!")}))},preCheckConfigure:function(){this.reviewModal=!0},reviewConfigure:function(){this.drc.reviewModal=!0},submitConfig:function(){var t=this,e=this;this.axios.post("/api/drc/v2/config/",{srcBuildParam:this.srcBuildParam,dstBuildParam:this.dstBuildParam}).then((function(a){console.log(a.data),e.result=a.data,e.reviewModal=!1,e.resultModal=!0,t.refresh()}))},getSrcDbReplications:function(){this.$router.push({path:"/dbTables",query:{srcMhaName:this.dstBuildParam.mhaName,dstMhaName:this.srcBuildParam.mhaName,srcDc:this.dstDc,dstDc:this.srcDc,order:!0}})},getDstDbReplications:function(){this.$router.push({path:"/dbTables",query:{srcMhaName:this.srcBuildParam.mhaName,dstMhaName:this.dstBuildParam.mhaName,srcDc:this.srcDc,dstDc:this.dstDc,order:!0}})},getSrcDbApplierReplications:function(){this.$router.push({path:"/dbAppliers",query:{srcMhaName:this.dstBuildParam.mhaName,dstMhaName:this.srcBuildParam.mhaName,srcDc:this.dstDc,dstDc:this.srcDc,order:!0}})},getDstDbApplierReplications:function(){this.$router.push({path:"/dbAppliers",query:{srcMhaName:this.srcBuildParam.mhaName,dstMhaName:this.dstBuildParam.mhaName,srcDc:this.srcDc,dstDc:this.dstDc,order:!0}})},handleChangeSize:function(t){this.size=t},hasAppliers:function(t){var e=!0,a=!1,r=void 0;try{for(var i,s=t[Symbol.iterator]();!(e=(i=s.next()).done);e=!0){var n=i.value;if(n.ips&&n.ips.length>0)return!0}}catch(c){a=!0,r=c}finally{try{e||null==s.return||s.return()}finally{if(a)throw r}}return!1},showMhaApplierConfig:function(t){return!0},showDbMhaApplierConfig:function(t){return t?this.srcBuildData.dbApplierSwitch||this.hasAppliers(this.srcBuildData.dbApplierDtos):this.dstBuildData.dbApplierSwitch||this.hasAppliers(this.dstBuildData.dbApplierDtos)},refresh:function(){this.getSrcMhaReplicatorsInUse(),this.getDstMhaReplicatorsInUse(),this.getSrcMhaAppliersInUse(),this.getDstMhaAppliersInUse(),this.getMhaDbAppliersInUse(),this.getSrcDc(),this.getDstDc()}},created:function(){this.getSrcMhaResources(),this.getDstMhaResources(),this.refresh()}},N=k,x=(a("51ea"),Object(d["a"])(N,y,S,!1,null,"be04acfc",null)),D=x.exports,B=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"margin-top":"100px"}},[a("Card",{staticStyle:{"margin-left":"250px",width:"650px"}},[a("div",{staticStyle:{"text-align":"center"}},[a("h3",[t._v("已完成DRC搭建流程！")])])])],1)},C=[],P={name:"complete",data:function(){return{}},methods:{}},w=P,_=Object(d["a"])(w,B,C,!1,null,"2e433010",null),R=_.exports,$={components:{mhaBuild:s["default"],mhaConfigV2:h,preCheckV2:M,drcBuildV2:D,complete:R},props:{srcMhaName:String,dstMhaName:String,srcDc:String,dstDc:String,env:String},data:function(){return{current:0,clusterPair:{srcMhaName:"",dstMhaName:"",env:"",srcDc:"",dstDc:""}}},methods:{jumpTo:function(t){this.current=t,this.hasResp=!1},next:function(){this.current=this.current+1,this.hasResp=!1},prev:function(){this.current=this.current-1,this.hasResp=!1},updateSrcMha:function(t){this.clusterPair.srcMhaName=t},updateDstMha:function(t){this.clusterPair.dstMhaName=t},updateSrcDc:function(t){this.clusterPair.srcDc=t},updateDstDc:function(t){this.clusterPair.dstDc=t},updateEnv:function(t){this.clusterPair.env=t}},created:function(){var t=this;this.axios.get("/api/drc/v2/permission/meta/mhaReplication/modify").then((function(e){if(403!==e.data.status){var a=t.$route.query.step;"undefined"===typeof a?console.log("curStep undefined, do nothing"):t.jumpTo(Number(a));var r=t.$route.query.order;null==r?(console.log("order is null, do nothing"),t.clusterPair.srcMhaName=t.$route.query.srcMhaName,t.clusterPair.dstMhaName=t.$route.query.dstMhaName,t.clusterPair.srcDc=t.$route.query.srcDc,t.clusterPair.dstDc=t.$route.query.dstDc):r?(t.clusterPair.srcMhaName=t.$route.query.srcMhaName,t.clusterPair.dstMhaName=t.$route.query.dstMhaName,t.clusterPair.srcDc=t.$route.query.srcDc,t.clusterPair.dstDc=t.$route.query.dstDc):(t.clusterPair.srcMhaName=t.$route.query.dstMhaName,t.clusterPair.dstMhaName=t.$route.query.srcMhaName)}else t.$router.push("/nopermission")}))}},F=$,A=Object(d["a"])(F,r,i,!1,null,"265a267e",null);e["default"]=A.exports},"9db2":function(t,e,a){},a4d3:function(t,e,a){"use strict";var r=a("23e7"),i=a("da84"),s=a("d066"),n=a("c430"),c=a("83ab"),o=a("4930"),l=a("fdbf"),d=a("d039"),u=a("5135"),h=a("e8b5"),p=a("861d"),m=a("825a"),f=a("7b0b"),g=a("fc6a"),b=a("c04e"),v=a("5c6c"),M=a("7c73"),y=a("df75"),S=a("241c"),I=a("057f"),k=a("7418"),N=a("06cf"),x=a("9bf2"),D=a("d1e7"),B=a("9112"),C=a("6eeb"),P=a("5692"),w=a("f772"),_=a("d012"),R=a("90e3"),$=a("b622"),F=a("e538"),A=a("746f"),T=a("d44e"),O=a("69f3"),G=a("b727").forEach,L=w("hidden"),E="Symbol",q="prototype",U=$("toPrimitive"),z=O.set,V=O.getterFor(E),j=Object[q],H=i.Symbol,Z=s("JSON","stringify"),W=N.f,J=x.f,K=I.f,Q=D.f,X=P("symbols"),Y=P("op-symbols"),tt=P("string-to-symbol-registry"),et=P("symbol-to-string-registry"),at=P("wks"),rt=i.QObject,it=!rt||!rt[q]||!rt[q].findChild,st=c&&d((function(){return 7!=M(J({},"a",{get:function(){return J(this,"a",{value:7}).a}})).a}))?function(t,e,a){var r=W(j,e);r&&delete j[e],J(t,e,a),r&&t!==j&&J(j,e,r)}:J,nt=function(t,e){var a=X[t]=M(H[q]);return z(a,{type:E,tag:t,description:e}),c||(a.description=e),a},ct=l?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof H},ot=function(t,e,a){t===j&&ot(Y,e,a),m(t);var r=b(e,!0);return m(a),u(X,r)?(a.enumerable?(u(t,L)&&t[L][r]&&(t[L][r]=!1),a=M(a,{enumerable:v(0,!1)})):(u(t,L)||J(t,L,v(1,{})),t[L][r]=!0),st(t,r,a)):J(t,r,a)},lt=function(t,e){m(t);var a=g(e),r=y(a).concat(mt(a));return G(r,(function(e){c&&!ut.call(a,e)||ot(t,e,a[e])})),t},dt=function(t,e){return void 0===e?M(t):lt(M(t),e)},ut=function(t){var e=b(t,!0),a=Q.call(this,e);return!(this===j&&u(X,e)&&!u(Y,e))&&(!(a||!u(this,e)||!u(X,e)||u(this,L)&&this[L][e])||a)},ht=function(t,e){var a=g(t),r=b(e,!0);if(a!==j||!u(X,r)||u(Y,r)){var i=W(a,r);return!i||!u(X,r)||u(a,L)&&a[L][r]||(i.enumerable=!0),i}},pt=function(t){var e=K(g(t)),a=[];return G(e,(function(t){u(X,t)||u(_,t)||a.push(t)})),a},mt=function(t){var e=t===j,a=K(e?Y:g(t)),r=[];return G(a,(function(t){!u(X,t)||e&&!u(j,t)||r.push(X[t])})),r};if(o||(H=function(){if(this instanceof H)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=R(t),a=function(t){this===j&&a.call(Y,t),u(this,L)&&u(this[L],e)&&(this[L][e]=!1),st(this,e,v(1,t))};return c&&it&&st(j,e,{configurable:!0,set:a}),nt(e,t)},C(H[q],"toString",(function(){return V(this).tag})),C(H,"withoutSetter",(function(t){return nt(R(t),t)})),D.f=ut,x.f=ot,N.f=ht,S.f=I.f=pt,k.f=mt,F.f=function(t){return nt($(t),t)},c&&(J(H[q],"description",{configurable:!0,get:function(){return V(this).description}}),n||C(j,"propertyIsEnumerable",ut,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!o,sham:!o},{Symbol:H}),G(y(at),(function(t){A(t)})),r({target:E,stat:!0,forced:!o},{for:function(t){var e=String(t);if(u(tt,e))return tt[e];var a=H(e);return tt[e]=a,et[a]=e,a},keyFor:function(t){if(!ct(t))throw TypeError(t+" is not a symbol");if(u(et,t))return et[t]},useSetter:function(){it=!0},useSimple:function(){it=!1}}),r({target:"Object",stat:!0,forced:!o,sham:!c},{create:dt,defineProperty:ot,defineProperties:lt,getOwnPropertyDescriptor:ht}),r({target:"Object",stat:!0,forced:!o},{getOwnPropertyNames:pt,getOwnPropertySymbols:mt}),r({target:"Object",stat:!0,forced:d((function(){k.f(1)}))},{getOwnPropertySymbols:function(t){return k.f(f(t))}}),Z){var ft=!o||d((function(){var t=H();return"[null]"!=Z([t])||"{}"!=Z({a:t})||"{}"!=Z(Object(t))}));r({target:"JSON",stat:!0,forced:ft},{stringify:function(t,e,a){var r,i=[t],s=1;while(arguments.length>s)i.push(arguments[s++]);if(r=e,(p(e)||void 0!==t)&&!ct(t))return h(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!ct(e))return e}),i[1]=e,Z.apply(null,i)}})}H[q][U]||B(H[q],U,H[q].valueOf),T(H,E),_[L]=!0},a630:function(t,e,a){var r=a("23e7"),i=a("4df4"),s=a("1c7e"),n=!s((function(t){Array.from(t)}));r({target:"Array",stat:!0,forced:n},{from:i})},a640:function(t,e,a){"use strict";var r=a("d039");t.exports=function(t,e){var a=[][t];return!!a&&r((function(){a.call(null,e||function(){throw 1},1)}))}},a9e3:function(t,e,a){"use strict";var r=a("83ab"),i=a("da84"),s=a("94ca"),n=a("6eeb"),c=a("5135"),o=a("c6b6"),l=a("7156"),d=a("c04e"),u=a("d039"),h=a("7c73"),p=a("241c").f,m=a("06cf").f,f=a("9bf2").f,g=a("58a8").trim,b="Number",v=i[b],M=v.prototype,y=o(h(M))==b,S=function(t){var e,a,r,i,s,n,c,o,l=d(t,!1);if("string"==typeof l&&l.length>2)if(l=g(l),e=l.charCodeAt(0),43===e||45===e){if(a=l.charCodeAt(2),88===a||120===a)return NaN}else if(48===e){switch(l.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+l}for(s=l.slice(2),n=s.length,c=0;c<n;c++)if(o=s.charCodeAt(c),o<48||o>i)return NaN;return parseInt(s,r)}return+l};if(s(b,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var I,k=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof k&&(y?u((function(){M.valueOf.call(a)})):o(a)!=b)?l(new v(S(e)),a,k):S(e)},N=r?p(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),x=0;N.length>x;x++)c(v,I=N[x])&&!c(k,I)&&f(k,I,m(v,I));k.prototype=M,M.constructor=k,n(i,b,k)}},ad6d:function(t,e,a){"use strict";var r=a("825a");t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},d28b:function(t,e,a){var r=a("746f");r("iterator")},ddb0:function(t,e,a){var r=a("da84"),i=a("fdbc"),s=a("e260"),n=a("9112"),c=a("b622"),o=c("iterator"),l=c("toStringTag"),d=s.values;for(var u in i){var h=r[u],p=h&&h.prototype;if(p){if(p[o]!==d)try{n(p,o,d)}catch(f){p[o]=d}if(p[l]||n(p,l,u),i[u])for(var m in s)if(p[m]!==s[m])try{n(p,m,s[m])}catch(f){p[m]=s[m]}}}},e01a:function(t,e,a){"use strict";var r=a("23e7"),i=a("83ab"),s=a("da84"),n=a("5135"),c=a("861d"),o=a("9bf2").f,l=a("e893"),d=s.Symbol;if(i&&"function"==typeof d&&(!("description"in d.prototype)||void 0!==d().description)){var u={},h=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof h?new d(t):void 0===t?d():d(t);return""===t&&(u[e]=!0),e};l(h,d);var p=h.prototype=d.prototype;p.constructor=h;var m=p.toString,f="Symbol(test)"==String(d("test")),g=/^Symbol\((.*)\)[^)]+$/;o(p,"description",{configurable:!0,get:function(){var t=c(this)?this.valueOf():this,e=m.call(t);if(n(u,t))return"";var a=f?e.slice(7,-1):e.replace(g,"$1");return""===a?void 0:a}}),r({global:!0,forced:!0},{Symbol:h})}},e538:function(t,e,a){var r=a("b622");e.f=r},fb6a:function(t,e,a){"use strict";var r=a("23e7"),i=a("861d"),s=a("e8b5"),n=a("23cb"),c=a("50c4"),o=a("fc6a"),l=a("8418"),d=a("b622"),u=a("1dde"),h=a("ae40"),p=u("slice"),m=h("slice",{ACCESSORS:!0,0:0,1:2}),f=d("species"),g=[].slice,b=Math.max;r({target:"Array",proto:!0,forced:!p||!m},{slice:function(t,e){var a,r,d,u=o(this),h=c(u.length),p=n(t,h),m=n(void 0===e?h:e,h);if(s(u)&&(a=u.constructor,"function"!=typeof a||a!==Array&&!s(a.prototype)?i(a)&&(a=a[f],null===a&&(a=void 0)):a=void 0,a===Array||void 0===a))return g.call(u,p,m);for(r=new(void 0===a?Array:a)(b(m-p,0)),d=0;p<m;p++,d++)p in u&&l(r,d,u[p]);return r.length=d,r}})},fdbc:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=chunk-512987c8.ce9c0ac3.js.map