(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6a3d1677"],{"53ca":function(a,t,e){"use strict";e.d(t,"a",(function(){return r}));e("a4d3"),e("e01a"),e("d28b"),e("e260"),e("d3b7"),e("3ca3"),e("ddb0");function r(a){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},r(a)}},bb8f:function(a,t,e){"use strict";e.r(t);var r=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("base-component",[e("Breadcrumb",{style:{margin:"15px 0 15px 185px",position:"fixed"}},[e("BreadcrumbItem",{attrs:{to:"/home"}},[a._v("首页")]),e("BreadcrumbItem",[a._v("冲突处理审批")])],1),e("Content",{staticClass:"content",style:{padding:"10px",background:"#fff",margin:"50px 0 1px 185px",zIndex:"1"}},[e("div",{staticStyle:{padding:"1px 1px"}},[e("Row",{attrs:{gutter:10,align:"middle"}},[e("Col",{attrs:{span:"20"}},[e("Card",{attrs:{padding:5},scopedSlots:a._u([{key:"title",fn:function(){return[a._v("查询条件")]},proxy:!0}])},[e("Row",{attrs:{gutter:10}},[e("Col",{attrs:{span:"8"}},[e("Input",{attrs:{prefix:"ios-search",placeholder:"库名"},on:{"on-enter":a.getData},model:{value:a.queryParam.dbName,callback:function(t){a.$set(a.queryParam,"dbName",t)},expression:"queryParam.dbName"}})],1),e("Col",{attrs:{span:"8"}},[e("Input",{attrs:{prefix:"ios-search",placeholder:"表名"},on:{"on-enter":a.getData},model:{value:a.queryParam.tableName,callback:function(t){a.$set(a.queryParam,"tableName",t)},expression:"queryParam.tableName"}})],1),e("Col",{attrs:{span:"4"}},[e("Input",{attrs:{prefix:"ios-search",placeholder:"申请人"},on:{"on-enter":a.getData},model:{value:a.queryParam.applicant,callback:function(t){a.$set(a.queryParam,"applicant",t)},expression:"queryParam.applicant"}})],1),e("Col",{attrs:{span:"4"}},[e("Select",{attrs:{filterable:"",clearable:"",placeholder:"审批结果"},on:{"on-change":a.getData},model:{value:a.queryParam.approvalResult,callback:function(t){a.$set(a.queryParam,"approvalResult",t)},expression:"queryParam.approvalResult"}},a._l(a.resultOpts,(function(t){return e("Option",{key:t.val,attrs:{value:t.val}},[a._v(a._s(t.name))])})),1)],1)],1)],1)],1),e("Col",{attrs:{span:"2"}},[e("Button",{attrs:{type:"primary",icon:"ios-search",loading:a.dataLoading},on:{click:a.getData}},[a._v("查询")]),e("Button",{staticStyle:{"margin-top":"20px"},attrs:{icon:"md-refresh"},on:{click:a.resetParam}},[a._v("重置 ")])],1)],1),e("br"),e("Table",{attrs:{stripe:"",border:"",columns:a.columns,data:a.tableData},scopedSlots:a._u([{key:"action",fn:function(t){var r=t.row,n=t.index;return[e("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return a.getDetail(r,n)}}},[a._v(" 详情 ")])]}}])}),e("div",{staticStyle:{"text-align":"center",margin:"16px 0"}},[e("Page",{attrs:{transfer:!0,total:a.total,current:a.current,"page-size-opts":[10,20,50,100],"page-size":10,"show-total":"","show-sizer":"","show-elevator":""},on:{"update:current":function(t){a.current=t},"on-change":a.getData,"on-page-size-change":a.handleChangeSize}})],1)],1)])],1)},n=[],l=e("53ca"),o=(e("d3b7"),{name:"conflictApproval",data:function(){return{editable:!1,clearable:!1,dataLoading:!1,queryParam:{dbName:null,tableName:null,applicant:null,approvalResult:null},tableData:[],columns:[{title:"库名",key:"dbName"},{title:"表名",key:"tableName",tooltip:!0},{title:"申请人",key:"applicant",width:200},{title:"提交时间",key:"createTime",width:200,sortable:!0},{title:"备注",key:"approvalDetailUrl",width:200,render:function(a,t){var e=t.row;return a("a",{attrs:{href:e.approvalDetailUrl,target:"_blank"}},"审批链接")}},{title:"审批结果",key:"approvalResult",width:150,align:"center",render:function(a,t){var e=t.row.approvalResult,r="cyan",n="审批中";return 1===e?(r="green",n="审批通过"):2===e&&(r="volcano",n="审批未通过"),a("Tag",{props:{color:r}},n)}},{title:"是否已执行",key:"executedStatus",width:150,align:"center",render:function(a,t){var e=t.row.executedStatus,r="blue",n="";return 0===e?(r="blue",n="未执行"):1===e&&(r="volcano",n="已执行"),a("Tag",{props:{color:r}},n)}},{title:"操作",slot:"action",width:150,align:"center"}],total:0,current:1,size:10,pageSizeOpts:[10,20,50,100],resultOpts:[{name:"审批中",val:0},{name:"审批通过",val:1},{name:"审批未通过",val:2}]}},methods:{getData:function(){var a=this,t={dbName:this.queryParam.dbName,tableName:this.queryParam.tableName,applicant:this.queryParam.applicant,approvalResult:this.queryParam.approvalResult,pageReq:{pageSize:this.size,pageIndex:this.current}},e=this.flattenObj(t);this.dataLoading=!0,this.axios.get("/api/drc/v2/log/approval/list",{params:e}).then((function(t){var e=t.data,r=e.pageReq;1===e.status?a.$Message.error("查询失败"):0===e.data.length||0===r.totalCount?(a.total=0,a.current=1,a.tableData=e.data,a.$Message.warning("查询结果为空")):(a.total=r.totalCount,a.current=r.pageIndex,a.tableData=e.data,a.$Message.success("查询成功"))})).finally((function(){a.dataLoading=!1}))},flattenObj:function(a){var t={};for(var e in a)if("object"!==Object(l["a"])(a[e])||Array.isArray(a[e]))t[e]=a[e];else{var r=this.flattenObj(a[e]);for(var n in r)t[e+"."+n]=r[n]}return t},resetParam:function(){this.queryParam={dbName:null,tableName:null,applicant:null,approvalResult:null}},getDetail:function(a,t){var e=1!==a.approvalResult||0!==a.executedStatus,r=this.$router.resolve({path:"/conflictLogDetail",query:{approvalId:a.approvalId,approvalDetailUrl:a.approvalDetailUrl,queryType:"2",showExecute:!0,disabled:e}});window.open(r.href,"_blank")},handleChangeSize:function(a){var t=this;this.size=a,this.$nextTick((function(){t.getData()}))}},created:function(){this.getData()}}),i=o,s=e("2877"),u=Object(s["a"])(i,r,n,!1,null,"318d2aff",null);t["default"]=u.exports}}]);
//# sourceMappingURL=chunk-6a3d1677.a9d943b8.js.map