(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2385e7"],{fea3:function(o,e,r){"use strict";r.r(e);var t=function(){var o=this,e=o.$createElement,r=o._self._c||e;return r("base-component",[r("Breadcrumb",{style:{margin:"15px 0 15px 185px",position:"fixed"}},[r("BreadcrumbItem",{attrs:{to:"/home"}},[o._v("首页")]),r("BreadcrumbItem",{attrs:{to:"/proxyResource"}},[o._v("Proxy资源管理")])],1),r("Content",{staticClass:"content",style:{padding:"10px",background:"#fff",margin:"50px 0 1px 185px",zIndex:"1"}},[r("div",{style:{padding:"1px 1px",height:"100%"}},[r("Row",[r("i-col",{attrs:{span:"12"}},[r("Form",{ref:"proxyResource",staticStyle:{float:"left","margin-top":"50px"},attrs:{model:o.proxyResource,rules:o.ruleproxyResource,"label-width":250}},[r("FormItem",{attrs:{label:"机房",prop:"dc"}},[r("Select",{staticStyle:{width:"200px"},attrs:{filterable:"","allow-create":"",placeholder:"请选择资源所在机房"},on:{"on-create":o.handleCreateDc},model:{value:o.proxyResource.dc,callback:function(e){o.$set(o.proxyResource,"dc",e)},expression:"proxyResource.dc"}},o._l(o.drcZoneList,(function(e){return r("Option",{key:e.value,attrs:{value:e.value}},[o._v(o._s(e.label))])})),1)],1),r("FormItem",{staticStyle:{width:"600px"},attrs:{label:"协议",prop:"protocol"}},[r("Select",{staticStyle:{width:"200px"},attrs:{filterable:"","allow-create":"",placeholder:"请选择或输入Proxy协议"},on:{"on-create":o.handleCreateProtocol},model:{value:o.proxyResource.protocol,callback:function(e){o.$set(o.proxyResource,"protocol",e)},expression:"proxyResource.protocol"}},o._l(o.protocolList,(function(e){return r("Option",{key:e,attrs:{value:e}},[o._v(o._s(e))])})),1)],1),r("FormItem",{staticStyle:{width:"450px"},attrs:{label:"IP",prop:"ip"}},[r("Input",{attrs:{placeholder:"请输入Proxy IP"},model:{value:o.proxyResource.ip,callback:function(e){o.$set(o.proxyResource,"ip",e)},expression:"proxyResource.ip"}})],1),r("FormItem",{staticStyle:{width:"600px"},attrs:{label:"端口",prop:"port"}},[r("Select",{staticStyle:{width:"200px"},attrs:{filterable:"","allow-create":"",placeholder:"请选择或输入Proxy端口"},on:{"on-create":o.handleCreatePort},model:{value:o.proxyResource.port,callback:function(e){o.$set(o.proxyResource,"port",e)},expression:"proxyResource.port"}},o._l(o.portList,(function(e){return r("Option",{key:e,attrs:{value:e}},[o._v(o._s(e))])})),1)],1),r("FormItem",[r("Button",{on:{click:function(e){return o.handleReset()}}},[o._v("重置")]),r("br"),r("br"),r("Button",{attrs:{type:"primary"},on:{click:function(e){o.reviewInputResource()}}},[o._v("录入")])],1),r("Modal",{attrs:{title:"录入确认"},on:{"on-ok":o.inputResource},model:{value:o.proxyResource.reviewModal,callback:function(e){o.$set(o.proxyResource,"reviewModal",e)},expression:"proxyResource.reviewModal"}},[o._v(" 确认将资源"+o._s(this.proxyResource.protocol)+"://"+o._s(this.proxyResource.ip)+":"+o._s(this.proxyResource.port)+"录入"+o._s(this.proxyResource.dc)+"吗？ ")]),r("Modal",{attrs:{title:"录入结果"},model:{value:o.proxyResource.resultModal,callback:function(e){o.$set(o.proxyResource,"resultModal",e)},expression:"proxyResource.resultModal"}},[o._v(" "+o._s(this.result)+" ")])],1)],1)],1)],1)])],1)},s=[],c={name:"proxyResource",data:function(){return{proxyResource:{dc:"",protocol:"",ip:"",port:"",reviewModal:!1},ruleproxyResource:{dc:[{required:!0,message:"机房不能为空",trigger:"blur"}],protocol:[{required:!0,message:"协议不能为空",trigger:"blur"}],ip:[{required:!0,message:"IP不能为空",trigger:"blur"}],port:[{required:!0,message:"端口不能为空",trigger:"blur"}]},protocolList:["PROXY","PROXYTLS"],portList:["80","443"],drcZoneList:this.constant.dcList,result:""}},methods:{reviewInputResource:function(){console.log("review input: add Proxy %s://%s:%s in %s",this.proxyResource.protocol,this.proxyResource.ip,this.proxyResource.port,this.proxyResource.dc),this.proxyResource.reviewModal=!0},inputResource:function(){var o=this;console.log("do input: dc: %s, protocol: %s, ip: %s, port: %s",this.proxyResource.dc,this.proxyResource.protocol,this.proxyResource.ip,this.proxyResource.port),this.axios.post("/api/drc/v1/meta/proxy",{dc:this.proxyResource.dc,protocol:this.proxyResource.protocol,ip:this.proxyResource.ip,port:this.proxyResource.port}).then((function(e){console.log("result: %s",e.data),o.result=e.data.data,o.proxyResource.reviewModal=!1,o.proxyResource.resultModal=!0}))},handleCreateDc:function(o){console.log("customize add dc: "+o),this.drcZoneList.push({value:o,label:o}),console.log(this.drcZoneList)},handleCreateProtocol:function(o){console.log("customize add protocol: "+o),this.protocolList.push(o),console.log(this.protocolList)},handleCreatePort:function(o){console.log("customize add port: "+o),this.portList.push(o),console.log(this.portList)},handleReset:function(){console.log("reset input: add Proxy %s://%s:%s in %s",this.proxyResource.protocol,this.proxyResource.ip,this.proxyResource.port,this.proxyResource.dc),this.proxyResource.dc="",this.proxyResource.protocol="",this.proxyResource.ip="",this.proxyResource.port="",this.result="",console.log("reset input result: add Proxy (%s)://(%s):(%s) in (%s)",this.proxyResource.protocol,this.proxyResource.ip,this.proxyResource.port,this.proxyResource.dc)}},created:function(){var o=this;this.axios.get("/api/drc/v2/permission/resource/proxy").then((function(e){403===e.data.status&&o.$router.push("/nopermission")}))}},p=c,i=r("2877"),l=Object(i["a"])(p,t,s,!1,null,"b0415472",null);e["default"]=l.exports}}]);
//# sourceMappingURL=chunk-2d2385e7.6ee75048.js.map