(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-562b607f"],{"0d19":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t._self._c;return e("base-component",{on:{listenToChildEvent:t.getLogFromChild}},[e("Breadcrumb",{style:{margin:"15px 0 15px 185px",position:"fixed"}},[e("BreadcrumbItem",{attrs:{to:"/home"}},[t._v("首页")]),e("BreadcrumbItem",{attrs:{to:"/monitor"}},[t._v("冲突日志")])],1),e("Content",{staticClass:"content",style:{padding:"10px",background:"#fff",margin:"50px 0 1px 185px",zIndex:"1"}},[e("div",{staticStyle:{padding:"1px 1px"}},[e("i-input",{style:{margin:"10px, 0, 0, 0",width:"200px"},attrs:{placeholder:"输入DAL Cluster"},on:{input:t.getLogs},model:{value:t.keyWord,callback:function(e){t.keyWord=e},expression:"keyWord"}},[e("Icon",{attrs:{slot:"prefix",type:"ios-search"},slot:"prefix"})],1),e("Table",{staticStyle:{"margin-top":"20px"},attrs:{columns:t.columns,data:t.records,stripe:"",size:"small"}}),e("div",{staticStyle:{"text-align":"center",margin:"16px 0"}},[e("Page",{attrs:{total:t.total,current:t.current,"show-sizer":"","show-elevator":"",transfer:!0},on:{"update:current":function(e){t.current=e},"on-change":t.getLogs,"on-page-size-change":t.handleChangeSize}})],1),e("Modal",{attrs:{title:"查看SQL",width:"1200px"},on:{"on-ok":t.showSqlOk,"on-cancel":t.showSqlCancel},model:{value:this.sqlStatementModal,callback:function(e){t.$set(this,"sqlStatementModal",e)},expression:"this.sqlStatementModal"}},[e("Form",[e("FormItem",[e("codemirror",{ref:"mycode",staticClass:"code",attrs:{value:t.curCode,options:t.cmOptions}})],1)],1)],1)],1)])],1)},o=[],s=(n("14d9"),n("e66c"));n("0f7c"),n("a7be"),n("f6b6");n("8c33"),n("31c5"),n("ffda"),n("9b74"),n("991c");var r={name:"Monitor",data:function(){var t=this;return{code:"//按Ctrl键进行代码提示",addDc:!1,sqlStatementModal:!1,handleSqlConflictModal:!1,curCode:"",cmOptions:{value:"",mode:"text/x-mysql",theme:"ambiance",lineWrapping:!0,height:100,readOnly:!0,lineNumbers:!0},columns:[{title:"DAL Cluster",key:"clusterName",tooltip:!0},{title:"源mha集群",key:"srcMhaName",tooltip:!0},{title:"目标mha集群",key:"destMhaName",tooltip:!0},{title:"SQL执行时间",key:"sqlExecuteTime",width:200,align:"center",render:function(t,e){return t("div",Object(s["a"])(new Date(e.row.sqlExecuteTime),"yyyy-MM-dd hh:mm:ss"))}},{title:"执行结果",key:"lastResult",width:120,align:"center",render:function(t,e){var n=e.row,i="commit"===n.lastResult?"blue":"volcano";return t("Tag",{props:{color:i}},n.lastResult)}},{title:"操作",key:"sqlStatement",width:160,align:"center",render:function(e,n){return e("div",[e("Button",{props:{type:"info",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.showSqlInfo(n.row.rawSqlList)}}},"查看"),e("Button",{props:{type:"success",size:"small"},style:{marginLeft:"5px"},on:{click:function(){t.handleSqlConflict(n.row.id)}}},"处理")])}}],records:[],loading:!1,appId:0,total:0,current:1,size:10,lastTime:0,keyWord:""}},computed:{},methods:{getLogs:function(){var t=this;this.axios.get("/api/drc/v1/logs/conflicts/"+this.current+"/"+this.size+"?keyWord="+this.keyWord).then((function(e){console.log("test data"),console.log(e),t.records=e.data.data.list,t.total=e.data.data.count}))},handleChangeSize:function(t){var e=this;this.size=t,this.$nextTick((function(){e.getLogs()}))},showSqlInfo:function(t){this.curCode=t,this.sqlStatementModal=!0},showSqlOk:function(){this.sqlStatementModal=!1,this.curCode=""},showSqlCancel:function(){this.sqlStatementModal=!1,this.curCode=""},handleSqlConflict:function(t){this.$router.push({name:"conflict",query:{id:t}})}},created:function(){this.getLogs()}},a=r,c=(n("aa54"),n("2877")),l=Object(c["a"])(a,i,o,!1,null,null,null);e["default"]=l.exports},"31c5":function(t,e,n){(function(t){t(n("56b3"))})((function(t){"use strict";var e="CodeMirror-activeline",n="CodeMirror-activeline-background",i="CodeMirror-activeline-gutter";function o(t){for(var o=0;o<t.state.activeLines.length;o++)t.removeLineClass(t.state.activeLines[o],"wrap",e),t.removeLineClass(t.state.activeLines[o],"background",n),t.removeLineClass(t.state.activeLines[o],"gutter",i)}function s(t,e){if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}function r(t,r){for(var a=[],c=0;c<r.length;c++){var l=r[c],h=t.getOption("styleActiveLine");if("object"==typeof h&&h.nonEmpty?l.anchor.line==l.head.line:l.empty()){var u=t.getLineHandleVisualStart(l.head.line);a[a.length-1]!=u&&a.push(u)}}s(t.state.activeLines,a)||t.operation((function(){o(t);for(var s=0;s<a.length;s++)t.addLineClass(a[s],"wrap",e),t.addLineClass(a[s],"background",n),t.addLineClass(a[s],"gutter",i);t.state.activeLines=a}))}function a(t,e){r(t,e.ranges)}t.defineOption("styleActiveLine",!1,(function(e,n,i){var s=i!=t.Init&&i;n!=s&&(s&&(e.off("beforeSelectionChange",a),o(e),delete e.state.activeLines),n&&(e.state.activeLines=[],r(e,e.listSelections()),e.on("beforeSelectionChange",a)))}))}))},7156:function(t,e,n){"use strict";var i=n("1626"),o=n("861d"),s=n("d2bb");t.exports=function(t,e,n){var r,a;return s&&i(r=e.constructor)&&r!==n&&o(a=r.prototype)&&a!==n.prototype&&s(t,a),t}},"8c33":function(t,e,n){(function(t){t(n("56b3"))})((function(t){var e=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<8),n=t.Pos,i={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<","<":">>",">":"<<"};function o(t){return t&&t.bracketRegex||/[(){}[\]]/}function s(t,e,s){var a=t.getLineHandle(e.line),c=e.ch-1,l=s&&s.afterCursor;null==l&&(l=/(^| )cm-fat-cursor($| )/.test(t.getWrapperElement().className));var h=o(s),u=!l&&c>=0&&h.test(a.text.charAt(c))&&i[a.text.charAt(c)]||h.test(a.text.charAt(c+1))&&i[a.text.charAt(++c)];if(!u)return null;var f=">"==u.charAt(1)?1:-1;if(s&&s.strict&&f>0!=(c==e.ch))return null;var d=t.getTokenTypeAt(n(e.line,c+1)),p=r(t,n(e.line,c+(f>0?1:0)),f,d,s);return null==p?null:{from:n(e.line,c),to:p&&p.pos,match:p&&p.ch==u.charAt(0),forward:f>0}}function r(t,e,s,r,a){for(var c=a&&a.maxScanLineLength||1e4,l=a&&a.maxScanLines||1e3,h=[],u=o(a),f=s>0?Math.min(e.line+l,t.lastLine()+1):Math.max(t.firstLine()-1,e.line-l),d=e.line;d!=f;d+=s){var p=t.getLine(d);if(p){var g=s>0?0:p.length-1,m=s>0?p.length:-1;if(!(p.length>c))for(d==e.line&&(g=e.ch-(s<0?1:0));g!=m;g+=s){var v=p.charAt(g);if(u.test(v)&&(void 0===r||(t.getTokenTypeAt(n(d,g+1))||"")==(r||""))){var y=i[v];if(y&&">"==y.charAt(1)==s>0)h.push(v);else{if(!h.length)return{pos:n(d,g),ch:v};h.pop()}}}}}return d-s!=(s>0?t.lastLine():t.firstLine())&&null}function a(t,i,o){for(var r=t.state.matchBrackets.maxHighlightLineLength||1e3,a=o&&o.highlightNonMatching,c=[],l=t.listSelections(),h=0;h<l.length;h++){var u=l[h].empty()&&s(t,l[h].head,o);if(u&&(u.match||!1!==a)&&t.getLine(u.from.line).length<=r){var f=u.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";c.push(t.markText(u.from,n(u.from.line,u.from.ch+1),{className:f})),u.to&&t.getLine(u.to.line).length<=r&&c.push(t.markText(u.to,n(u.to.line,u.to.ch+1),{className:f}))}}if(c.length){e&&t.state.focused&&t.focus();var d=function(){t.operation((function(){for(var t=0;t<c.length;t++)c[t].clear()}))};if(!i)return d;setTimeout(d,800)}}function c(t){t.operation((function(){t.state.matchBrackets.currentlyHighlighted&&(t.state.matchBrackets.currentlyHighlighted(),t.state.matchBrackets.currentlyHighlighted=null),t.state.matchBrackets.currentlyHighlighted=a(t,!1,t.state.matchBrackets)}))}function l(t){t.state.matchBrackets&&t.state.matchBrackets.currentlyHighlighted&&(t.state.matchBrackets.currentlyHighlighted(),t.state.matchBrackets.currentlyHighlighted=null)}t.defineOption("matchBrackets",!1,(function(e,n,i){i&&i!=t.Init&&(e.off("cursorActivity",c),e.off("focus",c),e.off("blur",l),l(e)),n&&(e.state.matchBrackets="object"==typeof n?n:{},e.on("cursorActivity",c),e.on("focus",c),e.on("blur",l))})),t.defineExtension("matchBrackets",(function(){a(this,!0)})),t.defineExtension("findMatchingBracket",(function(t,e,n){return(n||"boolean"==typeof e)&&(n?(n.strict=e,e=n):e=e?{strict:!0}:null),s(this,t,e)})),t.defineExtension("scanForBracket",(function(t,e,n,i){return r(this,t,e,n,i)}))}))},"991c":function(t,e,n){(function(t){t(n("56b3"),n("ffda"))})((function(t){"use strict";var e,n,i,o,s={QUERY_DIV:";",ALIAS_KEYWORD:"AS"},r=t.Pos,a=t.cmpPos;function c(t){return"[object Array]"==Object.prototype.toString.call(t)}function l(e,n){return e.getModeAt(e.getCursor()).config[n]||t.resolveMode("text/x-sql")[n]}function h(t){return l(t,"keywords")||[]}function u(t){return l(t,"identifierQuote")||"`"}function f(t){return"string"==typeof t?t:t.text}function d(t,e){return c(e)&&(e={columns:e}),e.text||(e.text=t),e}function p(t){var e={};if(c(t))for(var n=t.length-1;n>=0;n--){var i=t[n];e[f(i).toUpperCase()]=d(f(i),i)}else if(t)for(var o in t)e[o.toUpperCase()]=d(o,t[o]);return e}function g(t){return e[t.toUpperCase()]}function m(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function v(t,e){var n=t.length,i=f(e).substr(0,n);return t.toUpperCase()===i.toUpperCase()}function y(t,e,n,i){if(c(n))for(var o=0;o<n.length;o++)v(e,n[o])&&t.push(i(n[o]));else for(var s in n)if(n.hasOwnProperty(s)){var r=n[s];r=r&&!0!==r?r.displayText?{text:r.text,displayText:r.displayText}:r.text:s,v(e,r)&&t.push(i(r))}}function b(t){"."==t.charAt(0)&&(t=t.substr(1));for(var e=t.split(o+o),n=0;n<e.length;n++)e[n]=e[n].replace(new RegExp(o,"g"),"");return e.join(o)}function x(t){for(var e=f(t).split("."),n=0;n<e.length;n++)e[n]=o+e[n].replace(new RegExp(o,"g"),o+o)+o;var i=e.join(".");return"string"==typeof t?i:(t=m(t),t.text=i,t)}function k(t,i,s,a){var c=!1,l=[],h=i.start,u=!0;while(u)u="."==i.string.charAt(0),c=c||i.string.charAt(0)==o,h=i.start,l.unshift(b(i.string)),i=a.getTokenAt(r(t.line,i.start)),"."==i.string&&(u=!0,i=a.getTokenAt(r(t.line,i.start)));var f=l.join(".");y(s,f,e,(function(t){return c?x(t):t})),y(s,f,n,(function(t){return c?x(t):t})),f=l.pop();var d=l.join("."),p=!1,v=d;if(!g(d)){var k=d;d=C(d,a),d!==k&&(p=!0)}var w=g(d);return w&&w.columns&&(w=w.columns),w&&y(s,f,w,(function(t){var e=d;return 1==p&&(e=v),"string"==typeof t?t=e+"."+t:(t=m(t),t.text=e+"."+t.text),c?x(t):t})),h}function w(t,e){for(var n=t.split(/\s+/),i=0;i<n.length;i++)n[i]&&e(n[i].replace(/[`,;]/g,""))}function C(t,e){var n=e.doc,i=n.getValue(),o=t.toUpperCase(),c="",l="",h=[],u={start:r(0,0),end:r(e.lastLine(),e.getLineHandle(e.lastLine()).length)},f=i.indexOf(s.QUERY_DIV);while(-1!=f)h.push(n.posFromIndex(f)),f=i.indexOf(s.QUERY_DIV,f+1);h.unshift(r(0,0)),h.push(r(e.lastLine(),e.getLineHandle(e.lastLine()).text.length));for(var d=null,p=e.getCursor(),m=0;m<h.length;m++){if((null==d||a(p,d)>0)&&a(p,h[m])<=0){u={start:d,end:h[m]};break}d=h[m]}if(u.start){var v=n.getRange(u.start,u.end,!1);for(m=0;m<v.length;m++){var y=v[m];if(w(y,(function(t){var e=t.toUpperCase();e===o&&g(c)&&(l=c),e!==s.ALIAS_KEYWORD&&(c=t)})),l)break}}return l}t.registerHelper("hint","sql",(function(t,s){e=p(s&&s.tables);var a=s&&s.defaultTable,c=s&&s.disableKeywords;n=a&&g(a),i=h(t),o=u(t),a&&!n&&(n=C(a,t)),n=n||[],n.columns&&(n=n.columns);var l,f,d,m=t.getCursor(),v=[],b=t.getTokenAt(m);if(b.end>m.ch&&(b.end=m.ch,b.string=b.string.slice(0,m.ch-b.start)),b.string.match(/^[.`"'\w@][\w$#]*$/g)?(d=b.string,l=b.start,f=b.end):(l=f=m.ch,d=""),"."==d.charAt(0)||d.charAt(0)==o)l=k(m,b,v,t);else{var x=function(t,e){return"object"===typeof t?t.className=e:t={text:t,className:e},t};y(v,d,n,(function(t){return x(t,"CodeMirror-hint-table CodeMirror-hint-default-table")})),y(v,d,e,(function(t){return x(t,"CodeMirror-hint-table")})),c||y(v,d,i,(function(t){return x(t.toUpperCase(),"CodeMirror-hint-keyword")}))}return{list:v,from:r(m.line,l),to:r(m.line,f)}}))}))},"9b74":function(t,e,n){(function(t){t(n("56b3"))})((function(t){"use strict";var e="CodeMirror-hint",n="CodeMirror-hint-active";function i(t,e){if(this.cm=t,this.options=e,this.widget=null,this.debounce=0,this.tick=0,this.startPos=this.cm.getCursor("start"),this.startLen=this.cm.getLine(this.startPos.line).length-this.cm.getSelection().length,this.options.updateOnCursorActivity){var n=this;t.on("cursorActivity",this.activityFunc=function(){n.cursorActivity()})}}t.showHint=function(t,e,n){if(!e)return t.showHint(n);n&&n.async&&(e.async=!0);var i={hint:e};if(n)for(var o in n)i[o]=n[o];return t.showHint(i)},t.defineExtension("showHint",(function(e){e=r(this,this.getCursor("start"),e);var n=this.listSelections();if(!(n.length>1)){if(this.somethingSelected()){if(!e.hint.supportsSelection)return;for(var o=0;o<n.length;o++)if(n[o].head.line!=n[o].anchor.line)return}this.state.completionActive&&this.state.completionActive.close();var s=this.state.completionActive=new i(this,e);s.options.hint&&(t.signal(this,"startCompletion",this),s.update(!0))}})),t.defineExtension("closeHint",(function(){this.state.completionActive&&this.state.completionActive.close()}));var o=window.requestAnimationFrame||function(t){return setTimeout(t,1e3/60)},s=window.cancelAnimationFrame||clearTimeout;function r(t,e,n){var i=t.options.hintOptions,o={};for(var s in p)o[s]=p[s];if(i)for(var s in i)void 0!==i[s]&&(o[s]=i[s]);if(n)for(var s in n)void 0!==n[s]&&(o[s]=n[s]);return o.hint.resolve&&(o.hint=o.hint.resolve(t,e)),o}function a(t){return"string"==typeof t?t:t.text}function c(t,e){var n={Up:function(){e.moveFocus(-1)},Down:function(){e.moveFocus(1)},PageUp:function(){e.moveFocus(1-e.menuSize(),!0)},PageDown:function(){e.moveFocus(e.menuSize()-1,!0)},Home:function(){e.setFocus(0)},End:function(){e.setFocus(e.length-1)},Enter:e.pick,Tab:e.pick,Esc:e.close},i=/Mac/.test(navigator.platform);i&&(n["Ctrl-P"]=function(){e.moveFocus(-1)},n["Ctrl-N"]=function(){e.moveFocus(1)});var o=t.options.customKeys,s=o?{}:n;function r(t,i){var o;o="string"!=typeof i?function(t){return i(t,e)}:n.hasOwnProperty(i)?n[i]:i,s[t]=o}if(o)for(var a in o)o.hasOwnProperty(a)&&r(a,o[a]);var c=t.options.extraKeys;if(c)for(var a in c)c.hasOwnProperty(a)&&r(a,c[a]);return s}function l(t,e){while(e&&e!=t){if("LI"===e.nodeName.toUpperCase()&&e.parentNode==t)return e;e=e.parentNode}}function h(i,o){this.id="cm-complete-"+Math.floor(Math.random(1e6)),this.completion=i,this.data=o,this.picked=!1;var s=this,r=i.cm,h=r.getInputField().ownerDocument,u=h.defaultView||h.parentWindow,f=this.hints=h.createElement("ul");f.setAttribute("role","listbox"),f.setAttribute("aria-expanded","true"),f.id=this.id;var d=i.cm.options.theme;f.className="CodeMirror-hints "+d,this.selectedHint=o.selectedHint||0;for(var p=o.list,g=0;g<p.length;++g){var m=f.appendChild(h.createElement("li")),v=p[g],y=e+(g!=this.selectedHint?"":" "+n);null!=v.className&&(y=v.className+" "+y),m.className=y,g==this.selectedHint&&m.setAttribute("aria-selected","true"),m.id=this.id+"-"+g,m.setAttribute("role","option"),v.render?v.render(m,o,v):m.appendChild(h.createTextNode(v.displayText||a(v))),m.hintId=g}var b=i.options.container||h.body,x=r.cursorCoords(i.options.alignWithWord?o.from:null),k=x.left,w=x.bottom,C=!0,A=0,S=0;if(b!==h.body){var L=-1!==["absolute","relative","fixed"].indexOf(u.getComputedStyle(b).position),M=L?b:b.offsetParent,H=M.getBoundingClientRect(),T=h.body.getBoundingClientRect();A=H.left-T.left-M.scrollLeft,S=H.top-T.top-M.scrollTop}f.style.left=k-A+"px",f.style.top=w-S+"px";var O=u.innerWidth||Math.max(h.body.offsetWidth,h.documentElement.offsetWidth),I=u.innerHeight||Math.max(h.body.offsetHeight,h.documentElement.offsetHeight);b.appendChild(f),r.getInputField().setAttribute("aria-autocomplete","list"),r.getInputField().setAttribute("aria-owns",this.id),r.getInputField().setAttribute("aria-activedescendant",this.id+"-"+this.selectedHint);var E,F=i.options.moveOnOverlap?f.getBoundingClientRect():new DOMRect,N=!!i.options.paddingForScrollbar&&f.scrollHeight>f.clientHeight+1;setTimeout((function(){E=r.getScrollInfo()}));var B=F.bottom-I;if(B>0){var q=F.bottom-F.top,R=F.top-(x.bottom-x.top)-2;I-F.top<R?(q>R&&(f.style.height=(q=R)+"px"),f.style.top=(w=x.top-q)+S+"px",C=!1):f.style.height=I-F.top-2+"px"}var W,P=F.right-O;if(N&&(P+=r.display.nativeBarWidth),P>0&&(F.right-F.left>O&&(f.style.width=O-5+"px",P-=F.right-F.left-O),f.style.left=(k=Math.max(x.left-P-A,0))+"px"),N)for(var U=f.firstChild;U;U=U.nextSibling)U.style.paddingRight=r.display.nativeBarWidth+"px";(r.addKeyMap(this.keyMap=c(i,{moveFocus:function(t,e){s.changeActive(s.selectedHint+t,e)},setFocus:function(t){s.changeActive(t)},menuSize:function(){return s.screenAmount()},length:p.length,close:function(){i.close()},pick:function(){s.pick()},data:o})),i.options.closeOnUnfocus)&&(r.on("blur",this.onBlur=function(){W=setTimeout((function(){i.close()}),100)}),r.on("focus",this.onFocus=function(){clearTimeout(W)}));r.on("scroll",this.onScroll=function(){var t=r.getScrollInfo(),e=r.getWrapperElement().getBoundingClientRect();E||(E=r.getScrollInfo());var n=w+E.top-t.top,o=n-(u.pageYOffset||(h.documentElement||h.body).scrollTop);if(C||(o+=f.offsetHeight),o<=e.top||o>=e.bottom)return i.close();f.style.top=n+"px",f.style.left=k+E.left-t.left+"px"}),t.on(f,"dblclick",(function(t){var e=l(f,t.target||t.srcElement);e&&null!=e.hintId&&(s.changeActive(e.hintId),s.pick())})),t.on(f,"click",(function(t){var e=l(f,t.target||t.srcElement);e&&null!=e.hintId&&(s.changeActive(e.hintId),i.options.completeOnSingleClick&&s.pick())})),t.on(f,"mousedown",(function(){setTimeout((function(){r.focus()}),20)}));var z=this.getSelectedHintRange();return 0===z.from&&0===z.to||this.scrollToActive(),t.signal(o,"select",p[this.selectedHint],f.childNodes[this.selectedHint]),!0}function u(t,e){if(!t.somethingSelected())return e;for(var n=[],i=0;i<e.length;i++)e[i].supportsSelection&&n.push(e[i]);return n}function f(t,e,n,i){if(t.async)t(e,i,n);else{var o=t(e,n);o&&o.then?o.then(i):i(o)}}function d(e,n){var i,o=e.getHelpers(n,"hint");if(o.length){var s=function(t,e,n){var i=u(t,o);function s(o){if(o==i.length)return e(null);f(i[o],t,n,(function(t){t&&t.list.length>0?e(t):s(o+1)}))}s(0)};return s.async=!0,s.supportsSelection=!0,s}return(i=e.getHelper(e.getCursor(),"hintWords"))?function(e){return t.hint.fromList(e,{words:i})}:t.hint.anyword?function(e,n){return t.hint.anyword(e,n)}:function(){}}i.prototype={close:function(){this.active()&&(this.cm.state.completionActive=null,this.tick=null,this.options.updateOnCursorActivity&&this.cm.off("cursorActivity",this.activityFunc),this.widget&&this.data&&t.signal(this.data,"close"),this.widget&&this.widget.close(),t.signal(this.cm,"endCompletion",this.cm))},active:function(){return this.cm.state.completionActive==this},pick:function(e,n){var i=e.list[n],o=this;this.cm.operation((function(){i.hint?i.hint(o.cm,e,i):o.cm.replaceRange(a(i),i.from||e.from,i.to||e.to,"complete"),t.signal(e,"pick",i),o.cm.scrollIntoView()})),this.options.closeOnPick&&this.close()},cursorActivity:function(){this.debounce&&(s(this.debounce),this.debounce=0);var t=this.startPos;this.data&&(t=this.data.from);var e=this.cm.getCursor(),n=this.cm.getLine(e.line);if(e.line!=this.startPos.line||n.length-e.ch!=this.startLen-this.startPos.ch||e.ch<t.ch||this.cm.somethingSelected()||!e.ch||this.options.closeCharacters.test(n.charAt(e.ch-1)))this.close();else{var i=this;this.debounce=o((function(){i.update()})),this.widget&&this.widget.disable()}},update:function(t){if(null!=this.tick){var e=this,n=++this.tick;f(this.options.hint,this.cm,this.options,(function(i){e.tick==n&&e.finishUpdate(i,t)}))}},finishUpdate:function(e,n){this.data&&t.signal(this.data,"update");var i=this.widget&&this.widget.picked||n&&this.options.completeSingle;this.widget&&this.widget.close(),this.data=e,e&&e.list.length&&(i&&1==e.list.length?this.pick(e,0):(this.widget=new h(this,e),t.signal(e,"shown")))}},h.prototype={close:function(){if(this.completion.widget==this){this.completion.widget=null,this.hints.parentNode&&this.hints.parentNode.removeChild(this.hints),this.completion.cm.removeKeyMap(this.keyMap);var t=this.completion.cm.getInputField();t.removeAttribute("aria-activedescendant"),t.removeAttribute("aria-owns");var e=this.completion.cm;this.completion.options.closeOnUnfocus&&(e.off("blur",this.onBlur),e.off("focus",this.onFocus)),e.off("scroll",this.onScroll)}},disable:function(){this.completion.cm.removeKeyMap(this.keyMap);var t=this;this.keyMap={Enter:function(){t.picked=!0}},this.completion.cm.addKeyMap(this.keyMap)},pick:function(){this.completion.pick(this.data,this.selectedHint)},changeActive:function(e,i){if(e>=this.data.list.length?e=i?this.data.list.length-1:0:e<0&&(e=i?0:this.data.list.length-1),this.selectedHint!=e){var o=this.hints.childNodes[this.selectedHint];o&&(o.className=o.className.replace(" "+n,""),o.removeAttribute("aria-selected")),o=this.hints.childNodes[this.selectedHint=e],o.className+=" "+n,o.setAttribute("aria-selected","true"),this.completion.cm.getInputField().setAttribute("aria-activedescendant",o.id),this.scrollToActive(),t.signal(this.data,"select",this.data.list[this.selectedHint],o)}},scrollToActive:function(){var t=this.getSelectedHintRange(),e=this.hints.childNodes[t.from],n=this.hints.childNodes[t.to],i=this.hints.firstChild;e.offsetTop<this.hints.scrollTop?this.hints.scrollTop=e.offsetTop-i.offsetTop:n.offsetTop+n.offsetHeight>this.hints.scrollTop+this.hints.clientHeight&&(this.hints.scrollTop=n.offsetTop+n.offsetHeight-this.hints.clientHeight+i.offsetTop)},screenAmount:function(){return Math.floor(this.hints.clientHeight/this.hints.firstChild.offsetHeight)||1},getSelectedHintRange:function(){var t=this.completion.options.scrollMargin||0;return{from:Math.max(0,this.selectedHint-t),to:Math.min(this.data.list.length-1,this.selectedHint+t)}}},t.registerHelper("hint","auto",{resolve:d}),t.registerHelper("hint","fromList",(function(e,n){var i,o=e.getCursor(),s=e.getTokenAt(o),r=t.Pos(o.line,s.start),a=o;s.start<o.ch&&/\w/.test(s.string.charAt(o.ch-s.start-1))?i=s.string.substr(0,o.ch-s.start):(i="",r=o);for(var c=[],l=0;l<n.words.length;l++){var h=n.words[l];h.slice(0,i.length)==i&&c.push(h)}if(c.length)return{list:c,from:r,to:a}})),t.commands.autocomplete=t.showHint;var p={hint:t.hint.auto,completeSingle:!0,alignWithWord:!0,closeCharacters:/[\s()\[\]{};:>,]/,closeOnPick:!0,closeOnUnfocus:!0,updateOnCursorActivity:!0,completeOnSingleClick:!0,container:null,customKeys:null,extraKeys:null,paddingForScrollbar:!0,moveOnOverlap:!0};t.defineOption("hintOptions",null)}))},aa54:function(t,e,n){"use strict";n("b979")},aeb0:function(t,e,n){"use strict";var i=n("9bf2").f;t.exports=function(t,e,n){n in t||i(t,n,{configurable:!0,get:function(){return e[n]},set:function(t){e[n]=t}})}},b979:function(t,e,n){},f6b6:function(t,e,n){}}]);
//# sourceMappingURL=chunk-562b607f.2b132b3d.js.map