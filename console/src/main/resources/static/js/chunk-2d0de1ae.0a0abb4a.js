(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0de1ae"],{"83da":function(t,i,e){"use strict";e.r(i);var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("base-component",[e("Breadcrumb",{style:{margin:"15px 0 15px 185px",position:"fixed"}},[e("BreadcrumbItem",{attrs:{to:"/home"}},[t._v("首页")]),e("BreadcrumbItem",{attrs:{to:{path:"/drcV2",query:{step:3,srcMhaName:this.initInfo.srcMhaName,dstMhaName:this.initInfo.dstMhaName,srcDc:this.initInfo.srcDc,dstDc:this.initInfo.dstDc,order:this.initInfo.order}}}},[t._v("DRC配置V2")]),e("BreadcrumbItem",[t._v("同步表")])],1),e("Content",{staticClass:"content",style:{padding:"10px",background:"#fff",margin:"50px 0 1px 185px",zIndex:"1"}},[e("Row",[e("Col",{attrs:{span:"20"}},[e("span",{staticStyle:{"margin-top":"10px",color:"#464c5b","font-weight":"600"}},[t._v(t._s(t.initInfo.srcMhaName)+"("+t._s(t.initInfo.srcDc)+")==>"+t._s(t.initInfo.dstMhaName)+"("+t._s(t.initInfo.dstDc)+")")])]),e("Col",{attrs:{span:"2"}},[e("Button",{staticStyle:{"margin-top":"10px","text-align":"right"},attrs:{type:"primary",ghost:""},on:{click:t.goTodbReplicationConfig}},[t._v("添加")])],1)],1),e("Modal",{attrs:{title:"Applier properties",width:"800px"},model:{value:t.display.showPropertiesJson,callback:function(i){t.$set(t.display,"showPropertiesJson",i)},expression:"display.showPropertiesJson"}},[e("json-viewer",{attrs:{value:t.propertiesJson,"expand-depth":5,copyable:""},scopedSlots:t._u([{key:"copy",fn:function(i){var a=i.copied;return[e("span",a?[t._v("复制成功")]:[t._v("复制")])]}}])})],1),e("div",{style:{padding:"1px 1px",height:"100%"}},[[e("Table",{staticStyle:{"margin-top":"20px"},attrs:{stripe:"",columns:t.columns,data:t.tableData,border:""},scopedSlots:t._u([{key:"action",fn:function(i){var a=i.row,n=i.index;return[e("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"success",size:"small"},on:{click:function(i){return t.goToShowConfig(a,n)}}},[t._v("查看")]),e("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(i){return t.goToUpdateConfig(a,n)}}},[t._v("修改")]),e("Button",{staticStyle:{"margin-right":"10px"},attrs:{type:"error",size:"small"},on:{click:function(i){return t.goToDeleteConfig(a,n)}}},[t._v("删除")])]}}])})]],2)],1)],1)},n=[],o={name:"tables",data:function(){return{initInfo:{srcMhaName:"",srcMhaId:0,dstMhaName:"",dbReplicationId:0,srcDc:"",dstDc:"",order:!0},columns:[{title:"序号",width:75,align:"center",fixed:"left",render:function(t,i){return t("span",i.index+1)}},{title:"库名",key:"dbName"},{title:"表名",key:"logicTableName"},{title:"操作",slot:"action",align:"center",width:200,fixed:"right"}],display:{showPropertiesJson:!1},propertiesJson:{},tableData:[],total:0,size:5,pageSizeOpts:[5,10,20,100]}},methods:{getDbReplications:function(){var t=this;this.axios.get("/api/drc/v2/config/dbReplication?srcMhaName="+this.initInfo.srcMhaName+"&dstMhaName="+this.initInfo.dstMhaName).then((function(i){1===i.data.status?window.alert("查询相关配置表失败!"):t.tableData=i.data.data}))},goTodbReplicationConfig:function(){this.$router.push({path:"/dbReplicationConfig",query:{srcMhaName:this.initInfo.srcMhaName,srcMhaId:this.initInfo.srcMhaId,dstMhaName:this.initInfo.dstMhaName,srcDc:this.initInfo.srcDc,dstDc:this.initInfo.dstDc,order:this.initInfo.order,dbName:"",tableName:""}})},goToShowConfig:function(t,i){},goToUpdateConfig:function(t,i){this.$router.push({path:"/dbReplicationConfig",query:{srcMhaName:this.initInfo.srcMhaName,dstMhaName:this.initInfo.dstMhaName,srcDc:this.initInfo.srcDc,dstDc:this.initInfo.dstDc,order:this.initInfo.order,dbName:t.dbName,tableName:t.logicTableName,dbReplicationId:t.dbReplicationId,update:0}})},goToDeleteConfig:function(t,i){var e=this;console.log(t),this.axios.delete("/api/drc/v2/config/dbReplication?dbReplicationId="+t.dbReplicationId).then((function(t){1===t.data.status?window.alert("删除失败!"):(window.alert("删除成功!"),e.getDbReplications())}))}},created:function(){this.initInfo={srcMhaName:this.$route.query.srcMhaName,srcMhaId:this.$route.query.srcMhaId,dstMhaName:this.$route.query.dstMhaName,applierGroupId:this.$route.query.applierGroupId,srcDc:this.$route.query.srcDc,dstDc:this.$route.query.dstDc,order:this.$route.query.order},console.log("initInfo:"),console.log(this.initInfo),this.getDbReplications()}},s=o,r=e("2877"),c=Object(r["a"])(s,a,n,!1,null,"b194d90e",null);i["default"]=c.exports}}]);
//# sourceMappingURL=chunk-2d0de1ae.0a0abb4a.js.map