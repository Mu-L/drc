(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0b61462e"],{"00b4":function(t,e,r){"use strict";r("ac1f");var n=r("23e7"),a=r("c65b"),o=r("1626"),i=r("825a"),s=r("577e"),c=function(){var t=!1,e=/[ac]/;return e.exec=function(){return t=!0,/./.exec.apply(this,arguments)},!0===e.test("abc")&&t}(),u=/./.test;n({target:"RegExp",proto:!0,forced:!c},{test:function(t){var e=i(this),r=s(t),n=e.exec;if(!o(n))return a(u,e,r);var c=a(n,e,r);return null!==c&&(i(c),!0)}})},"06c5":function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));r("a630"),r("fb6a"),r("b0c0"),r("d3b7"),r("ac1f"),r("00b4"),r("25f0"),r("3ca3");var n=r("6b75");function a(t,e){if(t){if("string"==typeof t)return Object(n["a"])(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Object(n["a"])(t,e):void 0}}},"107c":function(t,e,r){"use strict";var n=r("d039"),a=r("cfe9"),o=a.RegExp;t.exports=n((function(){var t=o("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")}))},"25f0":function(t,e,r){"use strict";var n=r("5e77").PROPER,a=r("cb2d"),o=r("825a"),i=r("577e"),s=r("d039"),c=r("90d8"),u="toString",d=RegExp.prototype,l=d[u],g=s((function(){return"/a/b"!==l.call({source:"a",flags:"b"})})),f=n&&l.name!==u;(g||f)&&a(d,u,(function(){var t=o(this),e=i(t.source),r=i(c(t));return"/"+e+"/"+r}),{unsafe:!0})},2909:function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));var n=r("6b75");function a(t){if(Array.isArray(t))return Object(n["a"])(t)}r("a4d3"),r("e01a"),r("d28b"),r("a630"),r("d3b7"),r("3ca3"),r("ddb0");function o(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var i=r("06c5");r("d9e2");function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t){return a(t)||o(t)||Object(i["a"])(t)||s()}},4904:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t._self._c;return e("base-component",[e("Breadcrumb",{style:{margin:"15px 0 15px 185px",position:"fixed"}},[e("BreadcrumbItem",{attrs:{to:"/home"}},[t._v("首页")]),e("BreadcrumbItem",{attrs:{to:"/proxyRouteCluster"}},[t._v("路由列表")])],1),e("Content",{staticClass:"content",style:{padding:"10px",background:"#fff",margin:"50px 0 1px 185px",zIndex:"1"}},[e("div",{staticStyle:{padding:"1px 1px"}},[e("Card",[t._v(" BU名："),e("Input",{style:{width:"180px",marginRight:"10px"},model:{value:t.searchCondition.routeOrgName,callback:function(e){t.$set(t.searchCondition,"routeOrgName",e)},expression:"searchCondition.routeOrgName"}}),t._v(" 源端机房："),e("Input",{style:{width:"180px",marginRight:"10px"},model:{value:t.searchCondition.srcDcName,callback:function(e){t.$set(t.searchCondition,"srcDcName",e)},expression:"searchCondition.srcDcName"}}),t._v(" 目标机房："),e("Input",{style:{width:"180px",marginRight:"10px"},model:{value:t.searchCondition.dstDcName,callback:function(e){t.$set(t.searchCondition,"dstDcName",e)},expression:"searchCondition.dstDcName"}}),t._v(" tag："),e("Input",{style:{width:"180px",marginRight:"10px"},model:{value:t.searchCondition.tag,callback:function(e){t.$set(t.searchCondition,"tag",e)},expression:"searchCondition.tag"}}),t._v(" deleted："),e("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"inUse"},on:{"on-change":t.getRoutes},model:{value:t.searchCondition.deleted,callback:function(e){t.$set(t.searchCondition,"deleted",e)},expression:"searchCondition.deleted"}},t._l(t.searchOption.deleteOptions,(function(r){return e("Option",{key:r.key,attrs:{value:r.value}},[t._v(t._s(r.key))])})),1),e("Button",{style:{marginLeft:"10px"},attrs:{type:"primary"},on:{click:t.getRoutes}},[t._v("查询")]),e("Button",{style:{marginLeft:"10px"},attrs:{type:"primary"},on:{click:t.goToRouteManagementLink}},[t._v("添加路由")]),e("Table",{attrs:{stripe:"",columns:t.columns,data:t.dataWithPage},scopedSlots:t._u([{key:"action",fn:function(r){var n=r.row,a=r.index;return[0===n.deleted?e("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"error",size:"small"},on:{click:function(e){return t.goToDelete(n,a)}}},[t._v("下线")]):t._e(),0===n.deleted?e("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.goToLink(n,a)}}},[t._v("修改")]):t._e(),1===n.deleted?e("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"warning",size:"small"},on:{click:function(e){return t.goToRecover(n,a)}}},[t._v("回滚")]):t._e()]}}])}),e("div",{staticStyle:{"text-align":"center",margin:"16px 0"}},[e("Page",{attrs:{transfer:!0,total:t.routes.length,current:t.current,"show-sizer":"","show-elevator":""},on:{"update:current":function(e){t.current=e},"on-page-size-change":t.handleChangeSize}})],1)],1)],1)])],1)},a=[],o=r("2909"),i=(r("14d9"),r("fb6a"),{name:"proxyRouteCluster",data:function(){var t=this;return{columns:[{title:"序号",width:75,align:"center",render:function(e,r){return e("span",r.index+1+(t.current-1)*t.size)}},{title:"BU",key:"routeOrgName"},{title:"源端机房",key:"srcDcName"},{title:"目标机房",key:"dstDcName"},{title:"源Region",key:"srcRegionName"},{title:"目标Region",key:"dstRegionName"},{title:"源端Proxy",key:"srcProxyUris"},{title:"目标Proxy",key:"dstProxyUris"},{title:"中继Proxy",key:"relayProxyUris"},{title:"tag",key:"tag"},{title:"状态",key:"deleted",align:"center",resizable:!0,render:function(t,e){var r=e.row,n=0===r.deleted?"blue":"volcano",a=0===r.deleted?"inUse":"discard";return t("Tag",{props:{color:n}},a)}},{title:"操作",slot:"action",align:"center",width:200}],searchCondition:{routeOrgName:"",srcDcName:"",dstDcName:"",tag:"",deleted:0},routes:[],total:0,current:1,size:10,searchOption:{deleteOptions:[{value:0,key:"inUse"},{value:1,key:"discard"}]}}},computed:{dataWithPage:function(){var t=this.routes,e=this.current*this.size-this.size,r=e+this.size;return Object(o["a"])(t).slice(e,r)}},methods:{getRoutes:function(){var t=this,e="/api/drc/v1/meta/routes",r=!1;""!==this.searchCondition.routeOrgName&&(!1===r?(e=e+"?routeOrgName="+this.searchCondition.routeOrgName,r=!0):e=e+"&routeOrgName="+this.searchCondition.routeOrgName),""!==this.searchCondition.srcDcName&&(!1===r?(e=e+"?srcDcName="+this.searchCondition.srcDcName,r=!0):e=e+"&srcDcName="+this.searchCondition.srcDcName),""!==this.searchCondition.dstDcName&&(!1===r?(e=e+"?dstDcName="+this.searchCondition.dstDcName,r=!0):e=e+"&dstDcName="+this.searchCondition.dstDcName),""!==this.searchCondition.tag&&(!1===r?(e=e+"?tag="+this.searchCondition.tag,r=!0):e=e+"&tag="+this.searchCondition.tag),!1===r?(e=e+"?deleted="+this.searchCondition.deleted,r=!0):e=e+"&deleted="+this.searchCondition.deleted,console.log("uri: {}",e),t.axios.get(e).then((function(e){console.log(e),t.total=e.data.data.length,t.routes=e.data.data}))},handleChangeSize:function(t){this.size=t},goToLink:function(t,e){1===t.deleted?alert("已经下线，请先回滚！"):(console.log("go to manage route for"+t.routeOrgName+"-"+t.tag+", from "+t.srcDcName+" to "+t.dstDcName),this.$router.push({path:"/proxyRouteManagement",query:{routeOrgName:t.routeOrgName,srcDcName:t.srcDcName,dstDcName:t.dstDcName,tag:t.tag,srcProxyUris:t.srcProxyUris,relayProxyUris:t.relayProxyUris,dstProxyUris:t.dstProxyUris,updateStatus:!0}}))},goToDelete:function(t,e){var r=this;1===t.deleted?alert("已经下线，无需操作！"):this.axios.post("/api/drc/v1/meta/routes",{id:0,routeOrgName:t.routeOrgName,srcDcName:t.srcDcName,dstDcName:t.dstDcName,srcProxyUris:t.srcProxyUris,relayProxyUris:t.relayProxyUris,dstProxyUris:t.dstProxyUris,tag:t.tag,deleted:1}).then((function(t){console.log(t.data),console.log(t.data.data),0===t.data.status?(alert("下线成功！"),r.searchCondition.deleted=1,r.getRoutes()):alert("操作失败！")}))},goToRecover:function(t,e){var r=this;0===t.deleted?alert("正在使用中无需回滚！"):this.axios.post("/api/drc/v1/meta/routes",{id:0,routeOrgName:t.routeOrgName,srcDcName:t.srcDcName,dstDcName:t.dstDcName,srcProxyUris:t.srcProxyUris,relayProxyUris:t.relayProxyUris,dstProxyUris:t.dstProxyUris,tag:t.tag,deleted:0}).then((function(t){console.log(t.data),console.log(t.data.data),0===t.data.status?(alert("回滚成功！"),r.searchCondition.deleted=0,r.getRoutes()):alert("操作失败！")}))},goToRouteManagementLink:function(){console.log("go to manage route"),this.$router.push({path:"/proxyRouteManagement",query:{updateStatus:!1,srcProxyUris:[],relayProxyUris:[],dstProxyUris:[]}})}},created:function(){var t=this;this.axios.get("/api/drc/v2/permission/resource/route").then((function(e){403!==e.data.status?t.getRoutes():t.$router.push("/nopermission")}))}}),s=i,c=r("2877"),u=Object(c["a"])(s,n,a,!1,null,"ed8bb55c",null);e["default"]=u.exports},"4df4":function(t,e,r){"use strict";var n=r("0366"),a=r("c65b"),o=r("7b0b"),i=r("9bdd"),s=r("e95a"),c=r("68ee"),u=r("07fa"),d=r("8418"),l=r("9a1f"),g=r("35a1"),f=Array;t.exports=function(t){var e=o(t),r=c(this),h=arguments.length,p=h>1?arguments[1]:void 0,m=void 0!==p;m&&(p=n(p,h>2?arguments[2]:void 0));var x,y,v,b,N,C,R=g(e),D=0;if(!R||this===f&&s(R))for(x=u(e),y=r?new this(x):f(x);x>D;D++)C=m?p(e[D],D):e[D],d(y,D,C);else for(y=r?new this:[],b=l(e,R),N=b.next;!(v=a(N,b)).done;D++)C=m?i(b,p,[v.value,D],!0):v.value,d(y,D,C);return y.length=D,y}},"6b75":function(t,e,r){"use strict";function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}r.d(e,"a",(function(){return n}))},"90d8":function(t,e,r){"use strict";var n=r("c65b"),a=r("1a2d"),o=r("3a9b"),i=r("ad6d"),s=RegExp.prototype;t.exports=function(t){var e=t.flags;return void 0!==e||"flags"in s||a(t,"flags")||!o(s,t)?e:n(i,t)}},9263:function(t,e,r){"use strict";var n=r("c65b"),a=r("e330"),o=r("577e"),i=r("ad6d"),s=r("9f7f"),c=r("5692"),u=r("7c73"),d=r("69f3").get,l=r("fce3"),g=r("107c"),f=c("native-string-replace",String.prototype.replace),h=RegExp.prototype.exec,p=h,m=a("".charAt),x=a("".indexOf),y=a("".replace),v=a("".slice),b=function(){var t=/a/,e=/b*/g;return n(h,t,"a"),n(h,e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),N=s.BROKEN_CARET,C=void 0!==/()??/.exec("")[1],R=b||C||N||l||g;R&&(p=function(t){var e,r,a,s,c,l,g,R=this,D=d(R),k=o(t),O=D.raw;if(O)return O.lastIndex=R.lastIndex,e=n(p,O,k),R.lastIndex=O.lastIndex,e;var P=D.groups,U=N&&R.sticky,I=n(i,R),w=R.source,_=0,S=k;if(U&&(I=y(I,"y",""),-1===x(I,"g")&&(I+="g"),S=v(k,R.lastIndex),R.lastIndex>0&&(!R.multiline||R.multiline&&"\n"!==m(k,R.lastIndex-1))&&(w="(?: "+w+")",S=" "+S,_++),r=new RegExp("^(?:"+w+")",I)),C&&(r=new RegExp("^"+w+"$(?!\\s)",I)),b&&(a=R.lastIndex),s=n(h,U?r:R,S),U?s?(s.input=v(s.input,_),s[0]=v(s[0],_),s.index=R.lastIndex,R.lastIndex+=s[0].length):R.lastIndex=0:b&&s&&(R.lastIndex=R.global?s.index+s[0].length:a),C&&s&&s.length>1&&n(f,s[0],r,(function(){for(c=1;c<arguments.length-2;c++)void 0===arguments[c]&&(s[c]=void 0)})),s&&P)for(s.groups=l=u(null),c=0;c<P.length;c++)g=P[c],l[g[0]]=s[g[1]];return s}),t.exports=p},"9bdd":function(t,e,r){"use strict";var n=r("825a"),a=r("2a62");t.exports=function(t,e,r,o){try{return o?e(n(r)[0],r[1]):e(r)}catch(i){a(t,"throw",i)}}},"9f7f":function(t,e,r){"use strict";var n=r("d039"),a=r("cfe9"),o=a.RegExp,i=n((function(){var t=o("a","y");return t.lastIndex=2,null!==t.exec("abcd")})),s=i||n((function(){return!o("a","y").sticky})),c=i||n((function(){var t=o("^r","gy");return t.lastIndex=2,null!==t.exec("str")}));t.exports={BROKEN_CARET:c,MISSED_STICKY:s,UNSUPPORTED_Y:i}},a630:function(t,e,r){"use strict";var n=r("23e7"),a=r("4df4"),o=r("1c7e"),i=!o((function(t){Array.from(t)}));n({target:"Array",stat:!0,forced:i},{from:a})},ac1f:function(t,e,r){"use strict";var n=r("23e7"),a=r("9263");n({target:"RegExp",proto:!0,forced:/./.exec!==a},{exec:a})},ad6d:function(t,e,r){"use strict";var n=r("825a");t.exports=function(){var t=n(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e}},fce3:function(t,e,r){"use strict";var n=r("d039"),a=r("cfe9"),o=a.RegExp;t.exports=n((function(){var t=o(".","s");return!(t.dotAll&&t.test("\n")&&"s"===t.flags)}))}}]);
//# sourceMappingURL=chunk-0b61462e.5a797294.js.map