{"version":3,"sources":["webpack:///./node_modules/core-js/modules/web.dom-collections.for-each.js","webpack:///./node_modules/core-js/internals/array-for-each.js","webpack:///./node_modules/core-js/modules/es.array.join.js","webpack:///./node_modules/core-js/internals/array-method-is-strict.js","webpack:///./src/views/v2/meta/replicatorConfig.vue?c244","webpack:///src/views/v2/meta/replicatorConfig.vue","webpack:///./src/views/v2/meta/replicatorConfig.vue?c0a2","webpack:///./src/views/v2/meta/replicatorConfig.vue"],"names":["global","DOMIterables","forEach","createNonEnumerableProperty","COLLECTION_NAME","Collection","CollectionPrototype","prototype","error","$forEach","arrayMethodIsStrict","arrayMethodUsesToLength","STRICT_METHOD","USES_TO_LENGTH","module","exports","callbackfn","this","arguments","length","undefined","$","IndexedObject","toIndexedObject","nativeJoin","join","ES3_STRINGS","Object","target","proto","forced","separator","call","fails","METHOD_NAME","argument","method","render","_vm","_h","$createElement","_c","_self","style","margin","position","attrs","_v","staticClass","padding","background","zIndex","top","ref","staticStyle","drc","model","value","callback","$$v","$set","expression","_l","item","key","ip","_s","az","on","autoConfigReplicator","queryMhaMachineGtid","testSuccess1","_e","queryMhaGtidCheckRes","$event","handleReset","preCheckConfigure","submitReplicatorConfig","minRows","maxRows","result","reviewConfigure","directives","name","rawName","domProps","composing","replicators","gtidCheck","resVo","staticRenderFns","component"],"mappings":"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","file":"js/chunk-454c5f66.3b3035e5.js","sourcesContent":["var global = require('../internals/global');\nvar DOMIterables = require('../internals/dom-iterables');\nvar forEach = require('../internals/array-for-each');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\n\nfor (var COLLECTION_NAME in DOMIterables) {\n  var Collection = global[COLLECTION_NAME];\n  var CollectionPrototype = Collection && Collection.prototype;\n  // some Chrome versions have non-configurable methods on DOMTokenList\n  if (CollectionPrototype && CollectionPrototype.forEach !== forEach) try {\n    createNonEnumerableProperty(CollectionPrototype, 'forEach', forEach);\n  } catch (error) {\n    CollectionPrototype.forEach = forEach;\n  }\n}\n","'use strict';\nvar $forEach = require('../internals/array-iteration').forEach;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar STRICT_METHOD = arrayMethodIsStrict('forEach');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('forEach');\n\n// `Array.prototype.forEach` method implementation\n// https://tc39.github.io/ecma262/#sec-array.prototype.foreach\nmodule.exports = (!STRICT_METHOD || !USES_TO_LENGTH) ? function forEach(callbackfn /* , thisArg */) {\n  return $forEach(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n} : [].forEach;\n","'use strict';\nvar $ = require('../internals/export');\nvar IndexedObject = require('../internals/indexed-object');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar nativeJoin = [].join;\n\nvar ES3_STRINGS = IndexedObject != Object;\nvar STRICT_METHOD = arrayMethodIsStrict('join', ',');\n\n// `Array.prototype.join` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.join\n$({ target: 'Array', proto: true, forced: ES3_STRINGS || !STRICT_METHOD }, {\n  join: function join(separator) {\n    return nativeJoin.call(toIndexedObject(this), separator === undefined ? ',' : separator);\n  }\n});\n","'use strict';\nvar fails = require('../internals/fails');\n\nmodule.exports = function (METHOD_NAME, argument) {\n  var method = [][METHOD_NAME];\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call,no-throw-literal\n    method.call(null, argument || function () { throw 1; }, 1);\n  });\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('base-component',[_c('Breadcrumb',{style:({margin: '15px 0 15px 185px', position: 'fixed'})},[_c('BreadcrumbItem',{attrs:{\"to\":\"/home\"}},[_vm._v(\"首页\")]),_c('BreadcrumbItem',{attrs:{\"to\":\"/mha\"}},[_vm._v(\"Mha 集群\")]),_c('BreadcrumbItem',[_vm._v(\"Replicator配置\")])],1),_c('Content',{staticClass:\"content\",style:({padding: '10px', background: '#ffffff', margin: '50px 0 1px 185px', zIndex: '1', top: '500px'})},[_c('div',[_c('Row',[_c('Form',{ref:\"drc1\",staticStyle:{\"float\":\"left\",\"margin-top\":\"50px\"},attrs:{\"model\":_vm.drc,\"label-width\":250}},[_c('FormItem',{staticStyle:{\"width\":\"600px\"},attrs:{\"label\":\"集群名\",\"prop\":\"mhaName\"}},[_c('Input',{attrs:{\"readonly\":\"\",\"placeholder\":\"请输入集群名\"},model:{value:(_vm.drc.mhaName),callback:function ($$v) {_vm.$set(_vm.drc, \"mhaName\", $$v)},expression:\"drc.mhaName\"}})],1),_c('FormItem',{attrs:{\"label\":\"选择Replicator\",\"prop\":\"replicator\"}},[_c('Select',{staticStyle:{\"width\":\"250px\"},attrs:{\"multiple\":\"\",\"placeholder\":\"选择Replicator\"},model:{value:(_vm.drc.replicators),callback:function ($$v) {_vm.$set(_vm.drc, \"replicators\", $$v)},expression:\"drc.replicators\"}},_vm._l((_vm.drc.replicatorList),function(item){return _c('Option',{key:item.ip,attrs:{\"value\":item.ip}},[_vm._v(_vm._s(item.ip)+\" —— \"+_vm._s(item.az)+\" \")])}),1),_vm._v(\"   \"),_c('Button',{attrs:{\"type\":\"success\"},on:{\"click\":_vm.autoConfigReplicator}},[_vm._v(\"自动录入\")])],1),_c('FormItem',{staticStyle:{\"width\":\"600px\"},attrs:{\"label\":\"初始拉取位点R\"}},[_c('Input',{attrs:{\"placeholder\":\"变更replicator机器时，请输入binlog拉取位点\"},model:{value:(_vm.drc.rGtidExecuted),callback:function ($$v) {_vm.$set(_vm.drc, \"rGtidExecuted\", $$v)},expression:\"drc.rGtidExecuted\"}}),_c('Row',[_c('Col',{attrs:{\"span\":\"12\"}},[_c('Button',{on:{\"click\":_vm.queryMhaMachineGtid}},[_vm._v(\"查询mha位点\")]),(_vm.hasTest1)?_c('span',[_c('Icon',{attrs:{\"type\":_vm.testSuccess1 ? 'ios-checkmark-circle' : 'ios-close-circle',\"color\":_vm.testSuccess1 ? 'green' : 'red'}}),_vm._v(\" \"+_vm._s(_vm.testSuccess1 ? '查询实时位点成功' : '连接查询失败')+\" \")],1):_vm._e()],1),_c('Col',{attrs:{\"span\":\"12\"}},[_c('Button',{attrs:{\"type\":\"success\"},on:{\"click\":_vm.queryMhaGtidCheckRes}},[_vm._v(\"位点校验\")])],1)],1)],1)],1)],1),_c('Form',{staticStyle:{\"margin-top\":\"50px\"},attrs:{\"label-width\":250}},[_c('FormItem',[_c('Row',[_c('Col',{attrs:{\"span\":\"6\"}},[_c('Button',{on:{\"click\":function($event){return _vm.handleReset('drc')}}},[_vm._v(\"重置\")])],1),_c('Col',{attrs:{\"span\":\"6\"}},[_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.preCheckConfigure ()}}},[_vm._v(\"提交\")])],1)],1)],1),_c('Modal',{attrs:{\"title\":\"确认配置信息\",\"width\":\"900px\"},on:{\"on-ok\":_vm.submitReplicatorConfig},model:{value:(_vm.drc.reviewModal),callback:function ($$v) {_vm.$set(_vm.drc, \"reviewModal\", $$v)},expression:\"drc.reviewModal\"}},[_c('Form',{staticStyle:{\"width\":\"80%\"}},[_c('FormItem',{attrs:{\"label\":\"集群名\"}},[_c('Input',{attrs:{\"type\":\"textarea\",\"autosize\":{minRows: 1,maxRows: 30},\"readonly\":\"\"},model:{value:(_vm.drc.mhaName),callback:function ($$v) {_vm.$set(_vm.drc, \"mhaName\", $$v)},expression:\"drc.mhaName\"}})],1),_c('FormItem',{attrs:{\"label\":\"集群Replicator\"}},[_c('Input',{attrs:{\"type\":\"textarea\",\"autosize\":{minRows: 1,maxRows: 30},\"readonly\":\"\"},model:{value:(_vm.drc.replicators),callback:function ($$v) {_vm.$set(_vm.drc, \"replicators\", $$v)},expression:\"drc.replicators\"}})],1),_c('FormItem',{attrs:{\"label\":\"新增Replicator的新增binlog拉取位点\"}},[_c('Input',{attrs:{\"type\":\"textarea\",\"autosize\":{minRows: 1,maxRows: 30},\"readonly\":\"\"},model:{value:(_vm.drc.rGtidExecuted),callback:function ($$v) {_vm.$set(_vm.drc, \"rGtidExecuted\", $$v)},expression:\"drc.rGtidExecuted\"}})],1)],1)],1),_c('Modal',{attrs:{\"title\":\"配置结果\",\"width\":\"1200px\"},model:{value:(_vm.drc.resultModal),callback:function ($$v) {_vm.$set(_vm.drc, \"resultModal\", $$v)},expression:\"drc.resultModal\"}},[_c('Form',{staticStyle:{\"width\":\"100%\"}},[_c('FormItem',{attrs:{\"label\":\"集群配置\"}},[_c('Input',{attrs:{\"type\":\"textarea\",\"autosize\":{minRows: 1,maxRows: 30},\"readonly\":\"\"},model:{value:(_vm.result),callback:function ($$v) {_vm.result=$$v},expression:\"result\"}})],1)],1)],1),_c('Modal',{attrs:{\"title\":\"存在一对多共用运行配置请确认\",\"width\":\"900px\"},on:{\"on-ok\":_vm.reviewConfigure},model:{value:(_vm.drc.warnModal),callback:function ($$v) {_vm.$set(_vm.drc, \"warnModal\", $$v)},expression:\"drc.warnModal\"}},[_c('label',{staticStyle:{\"color\":\"black\"}},[_vm._v(\"共用replicator配置的集群: \")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.drc.conflictMha),expression:\"drc.conflictMha\"}],domProps:{\"value\":(_vm.drc.conflictMha)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.drc, \"conflictMha\", $event.target.value)}}}),_c('Divider'),_c('div',[_c('p',{staticStyle:{\"color\":\"red\"}},[_vm._v(\"线上一对多replicator配置\")]),_c('ul',_vm._l((_vm.drc.replicators.share),function(item){return _c('ol',{key:item},[_vm._v(_vm._s(item))])}),0)]),_c('Divider'),_c('div',[_c('p',{staticStyle:{\"color\":\"black\"}},[_vm._v(\"修改后replicator配置\")]),_c('ul',_vm._l((_vm.drc.replicators.conflictCurrent),function(item){return _c('ol',{key:item},[_vm._v(_vm._s(item))])}),0)])],1),_c('Modal',{attrs:{\"title\":\"gitd位点校验结果\",\"width\":\"900px\"},model:{value:(_vm.gtidCheck.modal),callback:function ($$v) {_vm.$set(_vm.gtidCheck, \"modal\", $$v)},expression:\"gtidCheck.modal\"}},[_c('Form',{staticStyle:{\"width\":\"80%\"}},[_c('FormItem',{attrs:{\"label\":\"校验结果\"}},[_c('Input',{attrs:{\"type\":\"textarea\",\"autosize\":{minRows: 1,maxRows: 30},\"readonly\":\"\"},model:{value:(_vm.gtidCheck.resVo.legal),callback:function ($$v) {_vm.$set(_vm.gtidCheck.resVo, \"legal\", $$v)},expression:\"gtidCheck.resVo.legal\"}})],1),_c('FormItem',{attrs:{\"label\":\"当前Mha\"}},[_c('Input',{attrs:{\"autosize\":{minRows: 1,maxRows: 30},\"readonly\":\"\"},model:{value:(_vm.gtidCheck.resVo.mha),callback:function ($$v) {_vm.$set(_vm.gtidCheck.resVo, \"mha\", $$v)},expression:\"gtidCheck.resVo.mha\"}})],1),_c('FormItem',{attrs:{\"label\":\"配置位点\"}},[_c('Input',{attrs:{\"type\":\"textarea\",\"autosize\":{minRows: 1,maxRows: 30},\"readonly\":\"\"},model:{value:(_vm.gtidCheck.resVo.configGtid),callback:function ($$v) {_vm.$set(_vm.gtidCheck.resVo, \"configGtid\", $$v)},expression:\"gtidCheck.resVo.configGtid\"}})],1),_c('FormItem',{attrs:{\"label\":\"purgedGtid\"}},[_c('Input',{attrs:{\"type\":\"textarea\",\"autosize\":{minRows: 1,maxRows: 30},\"readonly\":\"\"},model:{value:(_vm.gtidCheck.resVo.purgedGtid),callback:function ($$v) {_vm.$set(_vm.gtidCheck.resVo, \"purgedGtid\", $$v)},expression:\"gtidCheck.resVo.purgedGtid\"}})],1)],1)],1)],1)],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <base-component>\n    <Breadcrumb :style=\"{margin: '15px 0 15px 185px', position: 'fixed'}\">\n      <BreadcrumbItem to=\"/home\">首页</BreadcrumbItem>\n      <BreadcrumbItem to=\"/mha\">Mha 集群</BreadcrumbItem>\n      <BreadcrumbItem>Replicator配置</BreadcrumbItem>\n    </Breadcrumb>\n    <Content class=\"content\" :style=\"{padding: '10px', background: '#ffffff', margin: '50px 0 1px 185px', zIndex: '1', top: '500px'}\">\n  <div>\n    <Row>\n      <Form ref=\"drc1\" :model=\"drc\" :label-width=\"250\" style=\"float: left; margin-top: 50px\">\n        <FormItem label=\"集群名\" prop=\"mhaName\" style=\"width: 600px\">\n          <Input v-model=\"drc.mhaName\" readonly placeholder=\"请输入集群名\"/>\n        </FormItem>\n        <FormItem label=\"选择Replicator\" prop=\"replicator\">\n          <Select v-model=\"drc.replicators\" multiple style=\"width: 250px\" placeholder=\"选择Replicator\">\n            <Option v-for=\"item in drc.replicatorList\" :value=\"item.ip\" :key=\"item.ip\">{{ item.ip }} —— {{ item.az}}\n            </Option>\n          </Select>\n          &nbsp;\n          <Button type=\"success\" @click=\"autoConfigReplicator\">自动录入</Button>\n        </FormItem>\n        <FormItem label=\"初始拉取位点R\" style=\"width: 600px\">\n          <Input v-model=\"drc.rGtidExecuted\" placeholder=\"变更replicator机器时，请输入binlog拉取位点\"/>\n          <Row>\n            <Col span=\"12\">\n              <Button @click=\"queryMhaMachineGtid\">查询mha位点</Button>\n              <span v-if=\"hasTest1\">\n                  <Icon :type=\"testSuccess1 ? 'ios-checkmark-circle' : 'ios-close-circle'\"\n                        :color=\"testSuccess1 ? 'green' : 'red'\"/>\n                    {{ testSuccess1 ? '查询实时位点成功' : '连接查询失败' }}\n                </span>\n            </Col>\n            <Col span=\"12\">\n              <Button type=\"success\" @click=\"queryMhaGtidCheckRes\">位点校验</Button>\n            </Col>\n          </Row>\n        </FormItem>\n      </Form>\n    </Row>\n    <Form :label-width=\"250\" style=\"margin-top: 50px\">\n      <FormItem>\n        <Row>\n          <Col span=\"6\">\n            <Button @click=\"handleReset('drc')\">重置</Button>\n          </Col>\n          <Col span=\"6\">\n            <Button type=\"primary\" @click=\"preCheckConfigure ()\">提交</Button>\n          </Col>\n        </Row>\n      </FormItem>\n      <Modal\n        v-model=\"drc.reviewModal\"\n        title=\"确认配置信息\"\n        width=\"900px\"\n        @on-ok=\"submitReplicatorConfig\">\n        <Form style=\"width: 80%\">\n          <FormItem label=\"集群名\">\n            <Input type=\"textarea\" :autosize=\"{minRows: 1,maxRows: 30}\" v-model=\"drc.mhaName\" readonly/>\n          </FormItem>\n          <FormItem label=\"集群Replicator\">\n            <Input type=\"textarea\" :autosize=\"{minRows: 1,maxRows: 30}\" v-model=\"drc.replicators\" readonly/>\n          </FormItem>\n          <FormItem label=\"新增Replicator的新增binlog拉取位点\">\n            <Input type=\"textarea\" :autosize=\"{minRows: 1,maxRows: 30}\" v-model=\"drc.rGtidExecuted\" readonly/>\n          </FormItem>\n        </Form>\n      </Modal>\n      <Modal\n        v-model=\"drc.resultModal\"\n        title=\"配置结果\"\n        width=\"1200px\">\n        <Form style=\"width: 100%\">\n          <FormItem label=\"集群配置\">\n            <Input type=\"textarea\" :autosize=\"{minRows: 1,maxRows: 30}\" v-model=\"result\" readonly/>\n          </FormItem>\n        </Form>\n      </Modal>\n      <Modal\n        v-model=\"drc.warnModal\"\n        title=\"存在一对多共用运行配置请确认\"\n        width=\"900px\"\n        @on-ok=\"reviewConfigure\">\n        <label style=\"color: black\">共用replicator配置的集群: </label>\n        <input v-model=\"drc.conflictMha\"></input>\n        <Divider/>\n        <div>\n          <p style=\"color: red\">线上一对多replicator配置</p>\n          <ul>\n            <ol v-for=\"item in drc.replicators.share\" :key=\"item\">{{ item }}</ol>\n          </ul>\n        </div>\n        <Divider/>\n        <div>\n          <p style=\"color: black\">修改后replicator配置</p>\n          <ul>\n            <ol v-for=\"item in drc.replicators.conflictCurrent\" :key=\"item\">{{ item }}</ol>\n          </ul>\n        </div>\n      </Modal>\n      <Modal\n        v-model=\"gtidCheck.modal\"\n        title=\"gitd位点校验结果\"\n        width=\"900px\">\n        <Form style=\"width: 80%\">\n          <FormItem label=\"校验结果\">\n            <Input type=\"textarea\" :autosize=\"{minRows: 1,maxRows: 30}\" v-model=\"gtidCheck.resVo.legal\" readonly/>\n          </FormItem>\n          <FormItem label=\"当前Mha\">\n            <Input :autosize=\"{minRows: 1,maxRows: 30}\" v-model=\"gtidCheck.resVo.mha\" readonly/>\n          </FormItem>\n          <FormItem label=\"配置位点\">\n            <Input type=\"textarea\" :autosize=\"{minRows: 1,maxRows: 30}\" v-model=\"gtidCheck.resVo.configGtid\" readonly/>\n          </FormItem>\n          <FormItem label=\"purgedGtid\">\n            <Input type=\"textarea\" :autosize=\"{minRows: 1,maxRows: 30}\" v-model=\"gtidCheck.resVo.purgedGtid\" readonly/>\n          </FormItem>\n        </Form>\n      </Modal>\n    </Form>\n  </div>\n    </Content>\n  </base-component>\n</template>\n\n<script>\nexport default {\n  name: 'replicatorConfig.vue',\n  data () {\n    return {\n      hasTest1: false,\n      testSuccess1: false,\n      result: false,\n      gtidCheck: {\n        modal: false,\n        resVo: {\n          mha: '',\n          legal: '',\n          configGtid: '',\n          purgedGtid: ''\n        }\n      },\n      drc: {\n        reviewModal: false,\n        warnModal: false,\n        mhaName: this.$route.query.mhaName,\n        rGtidExecuted: '',\n        replicators: {},\n        replicatorList: {}\n      }\n    }\n  },\n  methods: {\n    autoConfigReplicator () {\n      this.axios.get('/api/drc/v2/resource/mha/auto?mhaName=' + this.drc.mhaName + '&type=0' + '&selectedIps=' + this.drc.replicators)\n        .then(response => {\n          console.log(response.data)\n          this.drc.replicators = []\n          response.data.data.forEach(ip => this.drc.replicators.push(ip.ip))\n        })\n    },\n    getResources () {\n      this.axios.get('/api/drc/v2/resource/mha/all?mhaName=' + this.drc.mhaName + '&type=0')\n        .then(response => {\n          console.log(response.data)\n          this.drc.replicatorList = response.data.data\n        })\n    },\n    getResourcesInUse () {\n      this.axios.get('/api/drc/v2/mha/replicator', { params: { mhaName: this.drc.mhaName } })\n        .then(response => {\n          console.log(this.drc.mhaName + ' replicators ' + response.data.data)\n          this.drc.replicators = []\n          response.data.data.forEach(ip => this.drc.replicators.push(ip))\n        })\n    },\n    handleReset (name) {\n      this.$refs[name].resetFields()\n    },\n    preCheckConfigure () {\n      const params = {\n        mhaName: this.drc.mhaName,\n        replicatorIps: this.drc.replicators.join(',')\n      }\n      console.log(params)\n      this.axios.get('/api/drc/v2/mha/replicatorIps/check', {\n        params: params\n      }).then(response => {\n        const preCheckRes = response.data.data\n        if (preCheckRes.status === 0) {\n          // 无风险继续\n          this.drc.reviewModal = true\n        } else if (preCheckRes.status === 1) {\n          // 有风险，进入确认页面\n          this.drc.replicators.share = preCheckRes.workingReplicatorIps\n          this.drc.replicators.conflictCurrent = this.drc.replicators\n          this.drc.conflictMha = preCheckRes.conflictMha\n          this.drc.warnModal = true\n        } else {\n          // 响应失败\n          window.alert('config preCheck fail')\n        }\n      })\n    },\n    queryMhaMachineGtid () {\n      this.hasTest1 = false\n      this.drc.rGtidExecuted = ''\n      const that = this\n      console.log('/api/drc/v2/mha/gtid/executed?mha=' + this.drc.mhaName)\n      that.axios.get('/api/drc/v2/mha/gtid/executed?mha=' + this.drc.mhaName)\n        .then(response => {\n          this.hasTest1 = true\n          if (response.data.status === 0) {\n            this.drc.rGtidExecuted = response.data.data\n            this.testSuccess1 = true\n          } else {\n            this.testSuccess1 = false\n            this.$Message.warning('查询位点失败: ' + response.data.message)\n          }\n        })\n        .catch(message => {\n          this.$Message.error('查询位点异常: ' + message)\n        })\n    },\n    queryMhaGtidCheckRes () {\n      if (this.drc.rGtidExecuted == null || this.drc.rGtidExecuted === '') {\n        this.$Message.warning('位点为空！')\n        return\n      }\n      const that = this\n      console.log('/api/drc/v2/mha/gtid/checkResult?mha=' + this.drc.mhaName +\n        '&configGtid=' + this.drc.rGtidExecuted)\n      that.axios.get('/api/drc/v2/mha/gtid/checkResult?mha=' + this.drc.mhaName +\n        '&configGtid=' + this.drc.rGtidExecuted)\n        .then(response => {\n          if (response.data.status === 0) {\n            this.gtidCheck.resVo = {\n              mha: this.drc.mhaName,\n              legal: response.data.data.legal === true ? '合理位点' : 'binlog已经被purge',\n              configGtid: this.drc.rGtidExecuted,\n              purgedGtid: response.data.data.purgedGtid\n            }\n            this.gtidCheck.modal = true\n          } else {\n            console.log('api fail:' + '/api/drc/v2/mha/gtid/checkResult?mha=' + this.drc.mhaName +\n            '&configGtid=' + this.drc.rGtidExecuted)\n          }\n        })\n        .catch(message => {\n          this.$Message.error('校验位点异常: ' + message)\n        })\n    },\n    submitReplicatorConfig () {\n      const that = this\n      this.axios.post('/api/drc/v2/config/mha/replicator', {\n        mhaName: this.drc.mhaName,\n        replicatorIps: this.drc.replicators,\n        rGtidExecuted: this.drc.rGtidExecuted\n      }).then(response => {\n        console.log(response.data)\n        if (response.data.status === 1) {\n          this.$Message.warning({\n            content: '提交失败：' + response.data.message,\n            duration: 10\n          })\n          return\n        }\n        that.result = response.data.data\n        that.drc.reviewModal = false\n        that.drc.resultModal = true\n      }).catch(message => {\n        this.$Message.error({\n          content: '提交异常: ' + message,\n          duration: 10\n        })\n      })\n    },\n    reviewConfigure () {\n      this.drc.reviewModal = true\n    }\n  },\n  created () {\n    this.getResources()\n    this.getResourcesInUse()\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./replicatorConfig.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./replicatorConfig.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./replicatorConfig.vue?vue&type=template&id=4d14e87c&scoped=true&\"\nimport script from \"./replicatorConfig.vue?vue&type=script&lang=js&\"\nexport * from \"./replicatorConfig.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4d14e87c\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}