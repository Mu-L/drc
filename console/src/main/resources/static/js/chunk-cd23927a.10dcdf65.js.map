{"version":3,"sources":["webpack:///./src/views/v2/meta/dbMqBuildV2.vue?84a8","webpack:///./src/components/v2/mhaMessengers/drcConfig.vue?22b4","webpack:///src/components/v2/mhaMessengers/drcConfig.vue","webpack:///./src/components/v2/mhaMessengers/drcConfig.vue?a270","webpack:///./src/components/v2/mhaMessengers/drcConfig.vue","webpack:///./src/views/v2/meta/dbMqBuildV2.vue?0cfd","webpack:///./src/components/v2/dbDrcBuild/mqTables.vue?0f09","webpack:///./src/components/v2/dbDrcBuild/dbMqConfig.vue?a21e","webpack:///src/components/v2/dbDrcBuild/dbMqConfig.vue","webpack:///./src/components/v2/dbDrcBuild/dbMqConfig.vue?7c07","webpack:///./src/components/v2/dbDrcBuild/dbMqConfig.vue","webpack:///src/components/v2/dbDrcBuild/mqTables.vue","webpack:///./src/components/v2/dbDrcBuild/mqTables.vue?bef5","webpack:///./src/components/v2/dbDrcBuild/mqTables.vue","webpack:///./src/components/v2/dbDrcBuild/mhaMqPanel.vue?1e96","webpack:///./src/components/v2/dbDrcBuild/mhaDbMqPanel.vue?1977","webpack:///src/components/v2/dbDrcBuild/mhaDbMqPanel.vue","webpack:///./src/components/v2/dbDrcBuild/mhaDbMqPanel.vue?ed76","webpack:///./src/components/v2/dbDrcBuild/mhaDbMqPanel.vue","webpack:///src/components/v2/dbDrcBuild/mhaMqPanel.vue","webpack:///./src/components/v2/dbDrcBuild/mhaMqPanel.vue?87a4","webpack:///./src/components/v2/dbDrcBuild/mhaMqPanel.vue","webpack:///src/views/v2/meta/dbMqBuildV2.vue","webpack:///./src/views/v2/meta/dbMqBuildV2.vue?fdca","webpack:///./src/views/v2/meta/dbMqBuildV2.vue?8d32"],"names":["render","_vm","this","_h","$createElement","_c","_self","ref","staticStyle","attrs","drc","model","value","callback","$$v","$set","expression","_l","item","key","ip","_v","_s","az","on","autoConfigReplicator","showMhaApplierConfig","autoConfigMessenger","_e","queryMhaMachineGtid","testSuccess1","queryMhaGtidCheckRes","goToMqConfigs","showDbMhaApplierConfig","getMhaDbMessenger","$event","handleReset","preCheckConfigure","submitConfig","minRows","maxRows","result","reviewConfigure","directives","name","rawName","domProps","target","composing","replicators","gtidCheck","resVo","staticRenderFns","props","mhaName","String","dc","data","hasTest1","modal","mha","legal","configGtid","purgedGtid","reviewModal","warnModal","rGtidExecuted","aGtidExecuted","messengers","replicatorList","messengerList","dbMessengerSwitch","dbMessengerList","methods","axios","get","getResources","getResourcesInUse","console","log","$router","push","path","query","$refs","resetFields","replicatorIps","join","messengerIps","params","preCheckRes","status","window","alert","that","$Message","warning","hasAppliers","post","response","resultModal","content","message","duration","created","component","style","margin","position","staticClass","padding","background","zIndex","formItem","meta","fixDb","getExistDb","dataLoading","selectDb","option","index","dbName","afterSelectExistReplication","selectedExistReplication","items","srcRegionName","goToCreateReplication","createModal","existReplicationRegionOptions","drcConfig","logicTableSummaryDtos","configDataLoading","dstRegionName","dbNames","getDrcConfig","mhaMqDtos","height","columns","tableData","scopedSlots","_u","fn","row","goToUpdateConfig","goToDeleteConfig","goToInsertConfig","actionTitle","editModal","selectedRow","srcRegion","action","finishConfig","formAction","alertInfo","proxy","title","constants","type","indexOf","_k","keyCode","preventDefault","afterEnterTableName","refreshTopicBu","switch","commonColumnLoading","getCommonColumns","handleCreateColumn","tableName","buildMode","Number","buttonTypeMap","submitAll","buttonTextMap","components","FORM_ACTION_OPTION","CREATE","EDIT","DELETE","configData","dstRegion","Array","emits","rowsFilterId","colsFilterId","dbReplicationIds","originLogicTableConfig","bu","topic","orderKey","order","columnsForChose","buForChosen","checkTableDataList","table","dbMhaTableLoading","dbMhaTableColumn","dbMhaTablePage","total","current","size","pageSizeOpts","dbTableLoading","dbTableColumn","dbTablePage","show","successShow","Map","successSubmit","getParams","param","buName","tag","mode","replicationType","gtidConfigurable","gtidInit","tblsFilterDetail","tableNames","getEditParams","logicTableConfig","logicTable","dstLogicTable","mqConfig","mqType","serialization","persistent","contains","val","undefined","split","flattenObj","i","ob","j","temp","getBuListFromQmq","rowsFilterCreateParamInit","drcStrategyId","routeStrategyId","udlColumns","context","illegalArgument","fetchMode","columnsFilterCreateParamInit","computed","preCheckTablePage","useTripUdlOrUidMode","rowsFilter","filterMode","TRIP_UDL","TRIP_UDL_UID","includes","rowsFilterCreateParam","hasUdlColumn","length","fillContextByRegion","RPC","hasUidColumn","showUdlConfigDetail","hasUdlLegalConfig","hasUidLegalConfig","showUidConfigDetail","refresh","Boolean","actionTitleMap","open","$emit","mhaMqDto","srcMha","openModal","openDetailModal","refInFor","dcName","mhaDbReplications","goToSwitchAppliers","mhaMessengerDto","mhaColumns","delayDataLoading","showModal","info","replicationIds","getMhaMessengerDelay","$Modal","confirm","loading","onOk","switchMessengers","getSwitchParams","map","srcMhaName","mhaDbReplication","src","fill","$route","regionOptions","dbOptions","resetPath","replace","then"],"mappings":"kHAAA,W,kCCAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,MAAM,CAACA,EAAG,OAAO,CAACE,IAAI,OAAOC,YAAY,CAAC,MAAQ,OAAO,aAAa,QAAQC,MAAM,CAAC,MAAQR,EAAIS,IAAI,cAAc,MAAM,CAACL,EAAG,WAAW,CAACG,YAAY,CAAC,MAAQ,SAASC,MAAM,CAAC,MAAQ,MAAM,KAAO,YAAY,CAACJ,EAAG,QAAQ,CAACI,MAAM,CAAC,SAAW,GAAG,YAAc,UAAUE,MAAM,CAACC,MAAOX,EAAIS,IAAW,QAAEG,SAAS,SAAUC,GAAMb,EAAIc,KAAKd,EAAIS,IAAK,UAAWI,IAAME,WAAW,kBAAkB,GAAGX,EAAG,WAAW,CAACI,MAAM,CAAC,MAAQ,eAAe,KAAO,eAAe,CAACJ,EAAG,SAAS,CAACG,YAAY,CAAC,MAAQ,SAASC,MAAM,CAAC,SAAW,GAAG,YAAc,gBAAgBE,MAAM,CAACC,MAAOX,EAAIS,IAAe,YAAEG,SAAS,SAAUC,GAAMb,EAAIc,KAAKd,EAAIS,IAAK,cAAeI,IAAME,WAAW,oBAAoBf,EAAIgB,GAAIhB,EAAIS,IAAkB,gBAAE,SAASQ,GAAM,OAAOb,EAAG,SAAS,CAACc,IAAID,EAAKE,GAAGX,MAAM,CAAC,MAAQS,EAAKE,KAAK,CAACnB,EAAIoB,GAAGpB,EAAIqB,GAAGJ,EAAKE,IAAI,OAAOnB,EAAIqB,GAAGJ,EAAKK,IAAI,UAAS,GAAGtB,EAAIoB,GAAG,OAAOhB,EAAG,SAAS,CAACI,MAAM,CAAC,KAAO,WAAWe,GAAG,CAAC,MAAQvB,EAAIwB,uBAAuB,CAACxB,EAAIoB,GAAG,WAAW,GAAIpB,EAAIyB,uBAAwBrB,EAAG,WAAW,CAACI,MAAM,CAAC,MAAQ,cAAc,KAAO,cAAc,CAACJ,EAAG,SAAS,CAACG,YAAY,CAAC,MAAQ,SAASC,MAAM,CAAC,SAAW,GAAG,YAAc,iBAAiBE,MAAM,CAACC,MAAOX,EAAIS,IAAc,WAAEG,SAAS,SAAUC,GAAMb,EAAIc,KAAKd,EAAIS,IAAK,aAAcI,IAAME,WAAW,mBAAmBf,EAAIgB,GAAIhB,EAAIS,IAAiB,eAAE,SAASQ,GAAM,OAAOb,EAAG,SAAS,CAACc,IAAID,EAAKE,GAAGX,MAAM,CAAC,MAAQS,EAAKE,KAAK,CAACnB,EAAIoB,GAAGpB,EAAIqB,GAAGJ,EAAKE,IAAI,OAAOnB,EAAIqB,GAAGJ,EAAKK,IAAI,UAAS,GAAGtB,EAAIoB,GAAG,OAAOhB,EAAG,SAAS,CAACI,MAAM,CAAC,KAAO,WAAWe,GAAG,CAAC,MAAQvB,EAAI0B,sBAAsB,CAAC1B,EAAIoB,GAAG,WAAW,GAAGpB,EAAI2B,KAAKvB,EAAG,WAAW,CAACG,YAAY,CAAC,MAAQ,SAASC,MAAM,CAAC,MAAQ,YAAY,CAACJ,EAAG,QAAQ,CAACI,MAAM,CAAC,YAAc,iCAAiCE,MAAM,CAACC,MAAOX,EAAIS,IAAiB,cAAEG,SAAS,SAAUC,GAAMb,EAAIc,KAAKd,EAAIS,IAAK,gBAAiBI,IAAME,WAAW,uBAAuBX,EAAG,MAAM,CAACA,EAAG,MAAM,CAACI,MAAM,CAAC,KAAO,OAAO,CAACJ,EAAG,SAAS,CAACmB,GAAG,CAAC,MAAQvB,EAAI4B,sBAAsB,CAAC5B,EAAIoB,GAAG,aAAcpB,EAAY,SAAEI,EAAG,OAAO,CAACA,EAAG,OAAO,CAACI,MAAM,CAAC,KAAOR,EAAI6B,aAAe,uBAAyB,mBAAmB,MAAQ7B,EAAI6B,aAAe,QAAU,SAAS7B,EAAIoB,GAAG,IAAIpB,EAAIqB,GAAGrB,EAAI6B,aAAe,WAAa,UAAU,MAAM,GAAG7B,EAAI2B,MAAM,GAAGvB,EAAG,MAAM,CAACI,MAAM,CAAC,KAAO,OAAO,CAACJ,EAAG,SAAS,CAACI,MAAM,CAAC,KAAO,WAAWe,GAAG,CAAC,MAAQvB,EAAI8B,uBAAuB,CAAC9B,EAAIoB,GAAG,WAAW,IAAI,IAAI,GAAGhB,EAAG,WAAW,CAACG,YAAY,CAAC,MAAQ,SAASC,MAAM,CAAC,MAAQ,SAAS,CAACJ,EAAG,SAAS,CAACI,MAAM,CAAC,KAAO,UAAU,MAAQ,IAAIe,GAAG,CAAC,MAAQvB,EAAI+B,gBAAgB,CAAC/B,EAAIoB,GAAG,WAAW,GAAIpB,EAAIgC,yBAA0B5B,EAAG,WAAW,CAACG,YAAY,CAAC,MAAQ,SAASC,MAAM,CAAC,MAAQ,kBAAkB,CAACJ,EAAG,SAAS,CAACI,MAAM,CAAC,KAAO,UAAU,MAAQ,IAAIe,GAAG,CAAC,MAAQvB,EAAIiC,oBAAoB,CAACjC,EAAIoB,GAAG,oBAAoB,GAAGpB,EAAI2B,KAAM3B,EAAIyB,uBAAwBrB,EAAG,WAAW,CAACG,YAAY,CAAC,MAAQ,SAASC,MAAM,CAAC,MAAQ,YAAY,CAACJ,EAAG,QAAQ,CAACI,MAAM,CAAC,YAAc,gBAAgBE,MAAM,CAACC,MAAOX,EAAIS,IAAiB,cAAEG,SAAS,SAAUC,GAAMb,EAAIc,KAAKd,EAAIS,IAAK,gBAAiBI,IAAME,WAAW,wBAAwB,GAAGf,EAAI2B,MAAM,IAAI,GAAGvB,EAAG,OAAO,CAACG,YAAY,CAAC,aAAa,QAAQC,MAAM,CAAC,cAAc,MAAM,CAACJ,EAAG,WAAW,CAACA,EAAG,MAAM,CAACA,EAAG,MAAM,CAACI,MAAM,CAAC,KAAO,MAAM,CAACJ,EAAG,SAAS,CAACmB,GAAG,CAAC,MAAQ,SAASW,GAAQ,OAAOlC,EAAImC,YAAY,WAAW,CAACnC,EAAIoB,GAAG,SAAS,GAAGhB,EAAG,MAAM,CAACI,MAAM,CAAC,KAAO,MAAM,CAACJ,EAAG,SAAS,CAACI,MAAM,CAAC,KAAO,WAAWe,GAAG,CAAC,MAAQ,SAASW,GAAQlC,EAAIoC,uBAAwB,CAACpC,EAAIoB,GAAG,SAAS,IAAI,IAAI,GAAGhB,EAAG,QAAQ,CAACI,MAAM,CAAC,MAAQ,SAAS,MAAQ,SAASe,GAAG,CAAC,QAAQvB,EAAIqC,cAAc3B,MAAM,CAACC,MAAOX,EAAIS,IAAe,YAAEG,SAAS,SAAUC,GAAMb,EAAIc,KAAKd,EAAIS,IAAK,cAAeI,IAAME,WAAW,oBAAoB,CAACX,EAAG,OAAO,CAACG,YAAY,CAAC,MAAQ,QAAQ,CAACH,EAAG,WAAW,CAACI,MAAM,CAAC,MAAQ,QAAQ,CAACJ,EAAG,QAAQ,CAACI,MAAM,CAAC,KAAO,WAAW,SAAW,CAAC8B,QAAS,EAAEC,QAAS,IAAI,SAAW,IAAI7B,MAAM,CAACC,MAAOX,EAAIS,IAAW,QAAEG,SAAS,SAAUC,GAAMb,EAAIc,KAAKd,EAAIS,IAAK,UAAWI,IAAME,WAAW,kBAAkB,GAAGX,EAAG,WAAW,CAACI,MAAM,CAAC,MAAQ,iBAAiB,CAACJ,EAAG,QAAQ,CAACI,MAAM,CAAC,KAAO,WAAW,SAAW,CAAC8B,QAAS,EAAEC,QAAS,IAAI,SAAW,IAAI7B,MAAM,CAACC,MAAOX,EAAIS,IAAe,YAAEG,SAAS,SAAUC,GAAMb,EAAIc,KAAKd,EAAIS,IAAK,cAAeI,IAAME,WAAW,sBAAsB,GAAGX,EAAG,WAAW,CAACI,MAAM,CAAC,MAAQ,gBAAgB,CAACJ,EAAG,QAAQ,CAACI,MAAM,CAAC,KAAO,WAAW,SAAW,CAAC8B,QAAS,EAAEC,QAAS,IAAI,SAAW,IAAI7B,MAAM,CAACC,MAAOX,EAAIS,IAAc,WAAEG,SAAS,SAAUC,GAAMb,EAAIc,KAAKd,EAAIS,IAAK,aAAcI,IAAME,WAAW,qBAAqB,GAAGX,EAAG,WAAW,CAACI,MAAM,CAAC,MAAQ,8BAA8B,CAACJ,EAAG,QAAQ,CAACI,MAAM,CAAC,KAAO,WAAW,SAAW,CAAC8B,QAAS,EAAEC,QAAS,IAAI,SAAW,IAAI7B,MAAM,CAACC,MAAOX,EAAIS,IAAiB,cAAEG,SAAS,SAAUC,GAAMb,EAAIc,KAAKd,EAAIS,IAAK,gBAAiBI,IAAME,WAAW,wBAAwB,GAAGX,EAAG,WAAW,CAACI,MAAM,CAAC,MAAQ,qBAAqB,CAACJ,EAAG,QAAQ,CAACI,MAAM,CAAC,KAAO,WAAW,SAAW,CAAC8B,QAAS,EAAEC,QAAS,IAAI,SAAW,IAAI7B,MAAM,CAACC,MAAOX,EAAIS,IAAiB,cAAEG,SAAS,SAAUC,GAAMb,EAAIc,KAAKd,EAAIS,IAAK,gBAAiBI,IAAME,WAAW,wBAAwB,IAAI,IAAI,GAAGX,EAAG,QAAQ,CAACI,MAAM,CAAC,MAAQ,OAAO,MAAQ,UAAUE,MAAM,CAACC,MAAOX,EAAIS,IAAe,YAAEG,SAAS,SAAUC,GAAMb,EAAIc,KAAKd,EAAIS,IAAK,cAAeI,IAAME,WAAW,oBAAoB,CAACX,EAAG,OAAO,CAACG,YAAY,CAAC,MAAQ,SAAS,CAACH,EAAG,WAAW,CAACI,MAAM,CAAC,MAAQ,SAAS,CAACJ,EAAG,QAAQ,CAACI,MAAM,CAAC,KAAO,WAAW,SAAW,CAAC8B,QAAS,EAAEC,QAAS,IAAI,SAAW,IAAI7B,MAAM,CAACC,MAAOX,EAAU,OAAEY,SAAS,SAAUC,GAAMb,EAAIwC,OAAO3B,GAAKE,WAAW,aAAa,IAAI,IAAI,GAAGX,EAAG,QAAQ,CAACI,MAAM,CAAC,MAAQ,iBAAiB,MAAQ,SAASe,GAAG,CAAC,QAAQvB,EAAIyC,iBAAiB/B,MAAM,CAACC,MAAOX,EAAIS,IAAa,UAAEG,SAAS,SAAUC,GAAMb,EAAIc,KAAKd,EAAIS,IAAK,YAAaI,IAAME,WAAW,kBAAkB,CAACX,EAAG,QAAQ,CAACG,YAAY,CAAC,MAAQ,UAAU,CAACP,EAAIoB,GAAG,yBAAyBhB,EAAG,QAAQ,CAACsC,WAAW,CAAC,CAACC,KAAK,QAAQC,QAAQ,UAAUjC,MAAOX,EAAIS,IAAe,YAAEM,WAAW,oBAAoB8B,SAAS,CAAC,MAAS7C,EAAIS,IAAe,aAAGc,GAAG,CAAC,MAAQ,SAASW,GAAWA,EAAOY,OAAOC,WAAqB/C,EAAIc,KAAKd,EAAIS,IAAK,cAAeyB,EAAOY,OAAOnC,WAAWP,EAAG,WAAWA,EAAG,MAAM,CAACA,EAAG,IAAI,CAACG,YAAY,CAAC,MAAQ,QAAQ,CAACP,EAAIoB,GAAG,uBAAuBhB,EAAG,KAAKJ,EAAIgB,GAAIhB,EAAIS,IAAIuC,YAAiB,OAAE,SAAS/B,GAAM,OAAOb,EAAG,KAAK,CAACc,IAAID,GAAM,CAACjB,EAAIoB,GAAGpB,EAAIqB,GAAGJ,SAAW,KAAKb,EAAG,WAAWA,EAAG,MAAM,CAACA,EAAG,IAAI,CAACG,YAAY,CAAC,MAAQ,UAAU,CAACP,EAAIoB,GAAG,qBAAqBhB,EAAG,KAAKJ,EAAIgB,GAAIhB,EAAIS,IAAIuC,YAA2B,iBAAE,SAAS/B,GAAM,OAAOb,EAAG,KAAK,CAACc,IAAID,GAAM,CAACjB,EAAIoB,GAAGpB,EAAIqB,GAAGJ,SAAW,MAAM,GAAGb,EAAG,QAAQ,CAACI,MAAM,CAAC,MAAQ,aAAa,MAAQ,SAASE,MAAM,CAACC,MAAOX,EAAIiD,UAAe,MAAErC,SAAS,SAAUC,GAAMb,EAAIc,KAAKd,EAAIiD,UAAW,QAASpC,IAAME,WAAW,oBAAoB,CAACX,EAAG,OAAO,CAACG,YAAY,CAAC,MAAQ,QAAQ,CAACH,EAAG,WAAW,CAACI,MAAM,CAAC,MAAQ,SAAS,CAACJ,EAAG,QAAQ,CAACI,MAAM,CAAC,KAAO,WAAW,SAAW,CAAC8B,QAAS,EAAEC,QAAS,IAAI,SAAW,IAAI7B,MAAM,CAACC,MAAOX,EAAIiD,UAAUC,MAAW,MAAEtC,SAAS,SAAUC,GAAMb,EAAIc,KAAKd,EAAIiD,UAAUC,MAAO,QAASrC,IAAME,WAAW,4BAA4B,GAAGX,EAAG,WAAW,CAACI,MAAM,CAAC,MAAQ,UAAU,CAACJ,EAAG,QAAQ,CAACI,MAAM,CAAC,SAAW,CAAC8B,QAAS,EAAEC,QAAS,IAAI,SAAW,IAAI7B,MAAM,CAACC,MAAOX,EAAIiD,UAAUC,MAAS,IAAEtC,SAAS,SAAUC,GAAMb,EAAIc,KAAKd,EAAIiD,UAAUC,MAAO,MAAOrC,IAAME,WAAW,0BAA0B,GAAGX,EAAG,WAAW,CAACI,MAAM,CAAC,MAAQ,SAAS,CAACJ,EAAG,QAAQ,CAACI,MAAM,CAAC,KAAO,WAAW,SAAW,CAAC8B,QAAS,EAAEC,QAAS,IAAI,SAAW,IAAI7B,MAAM,CAACC,MAAOX,EAAIiD,UAAUC,MAAgB,WAAEtC,SAAS,SAAUC,GAAMb,EAAIc,KAAKd,EAAIiD,UAAUC,MAAO,aAAcrC,IAAME,WAAW,iCAAiC,GAAGX,EAAG,WAAW,CAACI,MAAM,CAAC,MAAQ,eAAe,CAACJ,EAAG,QAAQ,CAACI,MAAM,CAAC,KAAO,WAAW,SAAW,CAAC8B,QAAS,EAAEC,QAAS,IAAI,SAAW,IAAI7B,MAAM,CAACC,MAAOX,EAAIiD,UAAUC,MAAgB,WAAEtC,SAAS,SAAUC,GAAMb,EAAIc,KAAKd,EAAIiD,UAAUC,MAAO,aAAcrC,IAAME,WAAW,iCAAiC,IAAI,IAAI,IAAI,IAAI,IACpzPoC,EAAkB,GC+ItB,G,0FAAA,CACER,KAAM,YACNS,MAAO,CACLC,QAASC,OACTC,GAAID,QAENE,KANF,WAOI,MAAO,CACLC,UAAU,EACV5B,cAAc,EACdW,QAAQ,EACRS,UAAW,CACTS,OAAO,EACPR,MAAO,CACLS,IAAK,GACLC,MAAO,GACPC,WAAY,GACZC,WAAY,KAGhBrD,IAAK,CACHsD,aAAa,EACbC,WAAW,EACXX,QAASpD,KAAKoD,QACdY,cAAe,GACfC,cAAe,GACflB,YAAa,GACbmB,WAAY,GACZC,eAAgB,GAChBC,cAAe,GACfC,mBAAmB,EACnBC,gBAAiB,MAIvBC,QAAS,CACPhD,qBADJ,WACA,WACMvB,KAAKwE,MAAMC,IAAI,yCAA2CzE,KAAKQ,IAAI4C,QAApD,uBAA4FpD,KAAKQ,IAAIuC,aAC1H,kBACQ,QAAR,YACQ,EAAR,mBACQ,EAAR,+BAAU,OAAV,oCAGItB,oBATJ,WASA,WACMzB,KAAKwE,MAAMC,IAAI,yCAA2CzE,KAAKQ,IAAI4C,QAApD,uBAA4FpD,KAAKQ,IAAI0D,YAC1H,kBACQ,QAAR,YACQ,EAAR,kBACQ,EAAR,+BAAU,OAAV,mCAGIQ,aAjBJ,WAiBA,WACM1E,KAAKwE,MAAMC,IAAI,wCAA0CzE,KAAKQ,IAAI4C,QAAU,WAClF,kBACQ,QAAR,YACQ,EAAR,kCAEMpD,KAAKwE,MAAMC,IAAI,wCAA0CzE,KAAKQ,IAAI4C,QAAU,WAClF,kBACQ,EAAR,iCAEMpD,KAAKwE,MAAMC,IAAI,8CAAgDzE,KAAKQ,IAAI4C,QAAU,WACxF,kBACQ,EAAR,mCAEMpD,KAAKwE,MAAMC,IAAI,mDAAqDzE,KAAKQ,IAAI4C,QAAU,WAC7F,kBACQ,EAAR,sCAGIuB,kBApCJ,WAoCA,WACM3E,KAAKwE,MAAMC,IAAI,6BAA8B,CAAnD,oCACA,kBACQ,QAAR,+CACQ,EAAR,mBACQ,EAAR,+BAAU,OAAV,gCAEMzE,KAAKwE,MAAMC,IAAI,4BAA6B,CAAlD,oCACA,kBACQ,QAAR,8CACQ,EAAR,kBACQ,EAAR,+BAAU,OAAV,+BAEMzE,KAAKwE,MAAMC,IAAI,0CAA4CzE,KAAKQ,IAAI4C,SAC1E,kBACQ,QAAR,kCACQ,EAAR,kCAGItB,cAvDJ,WAwDM8C,QAAQC,IAAI,8BAAgC7E,KAAKQ,IAAI4C,SACrDpD,KAAK8E,QAAQC,KAAK,CAAxB,yDAEI/C,kBA3DJ,WA4DMhC,KAAK8E,QAAQC,KAAK,CAChBC,KAAM,gBACNC,MAAO,CACL7B,QAASpD,KAAKQ,IAAI4C,YAIxBlB,YAnEJ,SAmEA,GACMlC,KAAKkF,MAAMxC,GAAMyC,eAEnBhD,kBAtEJ,WAsEA,WACA,GACQiB,QAASpD,KAAKQ,IAAI4C,QAClBgC,cAAepF,KAAKQ,IAAIuC,YAAYsC,KAAK,KACzCC,aAActF,KAAKQ,IAAI0D,WAAWmB,KAAK,MAEzCT,QAAQC,IAAIU,GACZvF,KAAKwE,MAAMC,IAAI,sCAAuC,CACpDc,OAAQA,IAChB,kBACQ,IAAR,cACmC,IAAvBC,EAAYC,OAEd,EAAV,mBACA,cAEU,EAAV,6CACU,EAAV,kDACU,EAAV,8BACU,EAAV,kBAGUC,OAAOC,MAAM,4BAInBhE,oBAhGJ,WAgGA,WACM3B,KAAKwD,UAAW,EAChBxD,KAAKQ,IAAIwD,cAAgB,GACzB,IAAN,OACMY,QAAQC,IAAI,qCAAuC7E,KAAKQ,IAAI4C,SAC5DwC,EAAKpB,MAAMC,IAAI,qCAAuCzE,KAAKQ,IAAI4C,SACrE,kBACQ,EAAR,YACA,mBACU,EAAV,8BACU,EAAV,kBAEU,EAAV,gBACU,EAAV,gDAGA,mBACQ,EAAR,iCAGIvB,qBApHJ,WAoHA,WACM,GAA8B,MAA1B7B,KAAKQ,IAAIwD,eAAoD,KAA3BhE,KAAKQ,IAAIwD,cAA/C,CAIA,IAAN,OACMY,QAAQC,IAAI,wCAA0C7E,KAAKQ,IAAI4C,QACrE,uCACMwC,EAAKpB,MAAMC,IAAI,wCAA0CzE,KAAKQ,IAAI4C,QACxE,uCACA,kBACA,mBACU,EAAV,iBACY,IAAZ,cACY,OAAZ,8CACY,WAAZ,oBACY,WAAZ,wBAEU,EAAV,oBAEU,QAAV,mEACA,uCAGA,mBACQ,EAAR,qCAvBQpD,KAAK6F,SAASC,QAAQ,UA0B1B/D,uBAhJJ,WAiJM,OAAO/B,KAAKQ,IAAI6D,mBAAqBrE,KAAK+F,YAAY/F,KAAKQ,IAAI8D,kBAEjE9C,qBAnJJ,WAoJM,OAAO,GAGTuE,YAvJJ,SAuJA,8BACA,4EACA,yBACA,UAHA,kFAMM,OAAO,GAET3D,aA/JJ,WA+JA,WACA,OACMpC,KAAKwE,MAAMwB,KAAK,4CAA6C,CAC3D5C,QAASpD,KAAKQ,IAAI4C,QAClBgC,cAAepF,KAAKQ,IAAIuC,YACxBuC,aAActF,KAAKQ,IAAI0D,WACvBD,cAAejE,KAAKQ,IAAIyD,cACxBD,cAAehE,KAAKQ,IAAIwD,gBAChC,kBACQY,QAAQC,IAAIoB,EAAS1C,MACQ,IAAzB0C,EAAS1C,KAAKkC,QAOlBG,EAAKrD,OAAS0D,EAAS1C,KAAKA,KAC5BqC,EAAKpF,IAAIsD,aAAc,EACvB8B,EAAKpF,IAAI0F,aAAc,GARrB,EAAV,kBACYC,QAAS,QAAUF,EAAS1C,KAAK6C,QACjCC,SAAU,QAOtB,mBACQ,EAAR,gBACUF,QAAS,SAAWC,EACpBC,SAAU,SAIhB7D,gBA1LJ,WA2LMxC,KAAKQ,IAAIsD,aAAc,IAG3BwC,QAjOF,WAkOItG,KAAK0E,eACL1E,KAAK2E,uBCnXwW,I,YCO7W4B,EAAY,eACd,EACAzG,EACAoD,GACA,EACA,KACA,WACA,MAIa,OAAAqD,E,2EClBf,IAAI,EAAS,WAAa,IAAIxG,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,iBAAiB,CAACA,EAAG,aAAa,CAACqG,MAAM,CAAEC,OAAQ,oBAAqBC,SAAU,UAAW,CAACvG,EAAG,iBAAiB,CAACI,MAAM,CAAC,GAAK,UAAU,CAACR,EAAIoB,GAAG,QAAQhB,EAAG,iBAAiB,CAACI,MAAM,CAAC,GAAK,oBAAoB,CAACR,EAAIoB,GAAG,cAAc,GAAGhB,EAAG,UAAU,CAACwG,YAAY,UAAUH,MAAM,CAAEI,QAAS,OAAQC,WAAY,UAAWJ,OAAQ,qBAAsBK,OAAQ,MAAO,CAAC3G,EAAG,MAAM,CAACI,MAAM,CAAC,OAAS,GAAG,MAAQ,WAAW,CAACJ,EAAG,MAAM,CAACI,MAAM,CAAC,KAAO,OAAO,CAACJ,EAAG,OAAO,CAACG,YAAY,CAAC,eAAe,OAAO,aAAa,QAAQC,MAAM,CAAC,MAAQR,EAAIgH,SAAS,cAAc,MAAM,CAAC5G,EAAG,WAAW,CAACI,MAAM,CAAC,MAAQ,MAAM,UAAW,IAAO,CAACJ,EAAG,SAAS,CAACI,MAAM,CAAC,WAAa,GAAG,WAAaR,EAAIiH,KAAKC,MAAM,YAAc,WAAW,gBAAgBlH,EAAImH,WAAW,QAAUnH,EAAIoH,aAAa7F,GAAG,CAAC,YAAYvB,EAAIqH,UAAU3G,MAAM,CAACC,MAAOX,EAAIiH,KAAW,OAAErG,SAAS,SAAUC,GAAMb,EAAIc,KAAKd,EAAIiH,KAAM,SAAUpG,IAAME,WAAW,gBAAgBf,EAAIgB,GAAIhB,EAAIiH,KAAc,WAAE,SAASK,EAAOC,GAAO,OAAOnH,EAAG,SAAS,CAACc,IAAIqG,EAAM/G,MAAM,CAAC,MAAQ8G,EAAOE,SAAS,CAACxH,EAAIoB,GAAG,IAAIpB,EAAIqB,GAAGiG,EAAOE,QAAQ,UAAS,IAAI,GAAGpH,EAAG,WAAW,CAACI,MAAM,CAAC,MAAQ,OAAO,UAAW,IAAO,CAACJ,EAAG,aAAa,CAACI,MAAM,CAAC,eAAe,SAASe,GAAG,CAAC,YAAYvB,EAAIyH,6BAA6B/G,MAAM,CAACC,MAAOX,EAA4B,yBAAEY,SAAS,SAAUC,GAAMb,EAAI0H,yBAAyB7G,GAAKE,WAAW,6BAA6Bf,EAAIgB,GAAIhB,EAAIiH,KAAkC,+BAAE,SAASU,GAAO,OAAOvH,EAAG,QAAQ,CAACc,IAAIyG,EAAMC,cAAcpH,MAAM,CAAC,MAAQmH,EAAMC,cAAc,OAAS,KAAK,CAAC5H,EAAIoB,GAAG,IAAIpB,EAAIqB,GAAGsG,EAAMC,eAAe,UAAS,GAAGxH,EAAG,SAAS,CAACI,MAAM,CAAC,KAAO,UAAU,KAAO,SAAS,MAAQ,IAAIe,GAAG,CAAC,MAAQvB,EAAI6H,wBAAwB,CAAC7H,EAAIoB,GAAG,QAAQhB,EAAG,QAAQ,CAACI,MAAM,CAAC,MAAQ,SAAS,eAAc,EAAK,MAAQ,QAAQE,MAAM,CAACC,MAAOX,EAAI8H,YAAgB,KAAElH,SAAS,SAAUC,GAAMb,EAAIc,KAAKd,EAAI8H,YAAa,OAAQjH,IAAME,WAAW,qBAAqB,CAAEf,EAAI8H,YAAgB,KAAE1H,EAAG,cAAc,CAACI,MAAM,CAAC,UAAUR,EAAIiH,KAAKO,OAAO,mBAAmB,EAAE,mCAAmCxH,EAAIiH,KAAKc,+BAA+BxG,GAAG,CAAC,QAAUvB,EAAIqH,YAAYrH,EAAI2B,MAAM,IAAI,GAAGvB,EAAG,UAAU,CAACI,MAAM,CAAC,YAAc,SAAS,CAACR,EAAIoB,GAAG,YAAYhB,EAAG,OAAO,CAACG,YAAY,CAAC,MAAQ,SAAS,CAACH,EAAG,YAAY,CAACI,MAAM,CAAC,aAAaR,EAAIgI,UAAUC,sBAAsB,eAAejI,EAAIkI,kBAAkB,aAAalI,EAAIiH,KAAKW,cAAc,aAAa5H,EAAIiH,KAAKkB,cAAc,UAAUnI,EAAIiH,KAAKO,OAAO,WAAWxH,EAAIgI,UAAUI,SAAS7G,GAAG,CAAC,QAAUvB,EAAIqI,iBAAiB,GAAGjI,EAAG,UAAU,CAACI,MAAM,CAAC,YAAc,SAAS,CAACR,EAAIoB,GAAG,QAAQhB,EAAG,OAAO,CAACG,YAAY,CAAC,MAAQ,SAAS,CAAEP,EAAIgI,UAAmB,UAAE5H,EAAG,eAAe,CAACI,MAAM,CAAC,cAAcR,EAAIgI,UAAUM,WAAW/G,GAAG,CAAC,QAAUvB,EAAIqI,gBAAgBrI,EAAI2B,MAAM,IAAI,IAAI,IAAI,IAAI,IAAI,IACtyFwB,EAAkB,G,0FCDlB,EAAS,WAAa,IAAInD,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACqG,MAAM,CAAEI,QAAS,UAAU0B,OAAQ,SAAU,CAACnI,EAAG,QAAQ,CAACE,IAAI,gBAAgBC,YAAY,CAAC,aAAa,QAAQC,MAAM,CAAC,OAAS,GAAG,QAAUR,EAAIwI,QAAQ,KAAOxI,EAAIyI,UAAU,QAAUzI,EAAIoH,YAAY,OAAS,IAAIsB,YAAY1I,EAAI2I,GAAG,CAAC,CAACzH,IAAI,SAAS0H,GAAG,SAAStI,GAC7W,IAAIuI,EAAMvI,EAAIuI,IACVtB,EAAQjH,EAAIiH,MAChB,MAAO,CAACnH,EAAG,SAAS,CAACG,YAAY,CAAC,eAAe,OAAOC,MAAM,CAAC,KAAO,UAAU,KAAO,SAASe,GAAG,CAAC,MAAQ,SAASW,GAAQ,OAAOlC,EAAI8I,iBAAiBD,EAAKtB,MAAU,CAACvH,EAAIoB,GAAG,SAAShB,EAAG,SAAS,CAACG,YAAY,CAAC,eAAe,OAAOC,MAAM,CAAC,KAAO,QAAQ,KAAO,SAASe,GAAG,CAAC,MAAQ,SAASW,GAAQ,OAAOlC,EAAI+I,iBAAiBF,EAAKtB,MAAU,CAACvH,EAAIoB,GAAG,gBAAgBhB,EAAG,MAAMA,EAAG,SAAS,CAACI,MAAM,CAAC,KAAO,UAAU,KAAO,UAAUe,GAAG,CAAC,MAAQvB,EAAIgJ,mBAAmB,CAAChJ,EAAIoB,GAAG,UAAUhB,EAAG,QAAQ,CAACI,MAAM,CAAC,MAAQ,SAAS,eAAc,EAAK,MAAQR,EAAIiJ,aAAavI,MAAM,CAACC,MAAOX,EAAIkJ,UAAc,KAAEtI,SAAS,SAAUC,GAAMb,EAAIc,KAAKd,EAAIkJ,UAAW,OAAQrI,IAAME,WAAW,mBAAmB,CAAEf,EAAIkJ,UAAc,KAAE9I,EAAG,eAAe,CAACE,IAAI,+BAA+BE,MAAM,CAAC,cAAcR,EAAImJ,YAAY,aAAanJ,EAAIoJ,UAAU,aAAapJ,EAAIoJ,UAAU,WAAWpJ,EAAIoI,QAAQ,cAAcpI,EAAIqJ,QAAQ9H,GAAG,CAAC,SAAWvB,EAAIsJ,gBAAgBtJ,EAAI2B,MAAM,IAAI,IACv7B,EAAkB,GCJlB,G,8BAAS,WAAa,IAAI3B,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACqG,MAAM,CAAEI,QAAS,UAAU0B,OAAQ,SAAU,CAACnI,EAAG,MAAM,CAACI,MAAM,CAAC,OAAS,GAAG,MAAQ,WAAW,CAACJ,EAAG,MAAM,CAACI,MAAM,CAAC,KAAO,OAAO,CAACJ,EAAG,OAAO,CAACG,YAAY,CAAC,eAAe,OAAO,aAAa,QAAQC,MAAM,CAAC,MAAQR,EAAIgH,SAAS,SAA8B,WAAnBhH,EAAIuJ,WAAwB,cAAc,MAAM,CAAEvJ,EAAIwJ,UAAc,KAAEpJ,EAAG,QAAQ,CAACI,MAAM,CAAC,KAAO,UAAU,YAAY,GAAG,SAAW,IAAIkI,YAAY1I,EAAI2I,GAAG,CAAC,CAACzH,IAAI,OAAO0H,GAAG,WAAW,MAAO,CAAC5I,EAAIoB,GAAGpB,EAAIqB,GAAGrB,EAAIwJ,UAAUnD,YAAYoD,OAAM,IAAO,MAAK,EAAM,aAAa,CAACzJ,EAAIoB,GAAG,IAAIpB,EAAIqB,GAAGrB,EAAIwJ,UAAUE,OAAO,OAAO1J,EAAI2B,KAAM3B,EAAIwJ,UAAqB,YAAEpJ,EAAG,QAAQ,CAACI,MAAM,CAAC,KAAO,UAAU,YAAY,GAAG,SAAW,IAAIkI,YAAY1I,EAAI2I,GAAG,CAAC,CAACzH,IAAI,OAAO0H,GAAG,WAAW,MAAO,CAAC5I,EAAIoB,GAAGpB,EAAIqB,GAAGrB,EAAIwJ,UAAUnD,YAAYoD,OAAM,IAAO,MAAK,EAAM,aAAa,CAACzJ,EAAIoB,GAAG,IAAIpB,EAAIqB,GAAGrB,EAAIwJ,UAAUE,OAAO,OAAO1J,EAAI2B,KAAKvB,EAAG,WAAW,CAACI,MAAM,CAAC,MAAQ,OAAO,CAACJ,EAAG,SAAS,CAACI,MAAM,CAAC,WAAa,GAAG,YAAc,QAAQE,MAAM,CAACC,MAAOX,EAAIgH,SAAW,GAAEpG,SAAS,SAAUC,GAAMb,EAAIc,KAAKd,EAAIgH,SAAU,KAAMnG,IAAME,WAAW,gBAAgBf,EAAIgB,GAAIhB,EAAIgH,SAAS2C,UAAqB,aAAE,SAAS1I,GAAM,OAAOb,EAAG,SAAS,CAACc,IAAID,EAAKT,MAAM,CAAC,MAAQS,IAAO,CAACjB,EAAIoB,GAAGpB,EAAIqB,GAAGJ,SAAW,IAAI,GAAGb,EAAG,WAAW,CAACI,MAAM,CAAC,KAAO,SAAS,MAAQ,KAAK,UAAW,IAAO,CAACJ,EAAG,QAAQ,CAACI,MAAM,CAAC,KAAO,WAAW,UAAW,EAAK,UAAW,EAAK,QAAS,EAAM,YAAc,eAAeE,MAAM,CAACC,MAAOX,EAAIgH,SAAe,OAAEpG,SAAS,SAAUC,GAAMb,EAAIc,KAAKd,EAAIgH,SAAU,SAAUnG,IAAME,WAAW,sBAAsB,GAAGX,EAAG,WAAW,CAACI,MAAM,CAAC,MAAQ,MAAM,UAAW,IAAO,CAACJ,EAAG,QAAQ,CAACI,MAAM,CAAC,YAAc,YAAYe,GAAG,CAAC,aAAa,SAASW,GAAQ,IAAIA,EAAO0H,KAAKC,QAAQ,QAAQ7J,EAAI8J,GAAG5H,EAAO6H,QAAQ,QAAQ,GAAG7H,EAAOhB,IAAI,CAAC,IAAI,aAAe,OAAO,KAAOgB,EAAO8H,kBAAmB,UAAUhK,EAAIiK,qBAAqBvJ,MAAM,CAACC,MAAOX,EAAIgH,SAAkB,UAAEpG,SAAS,SAAUC,GAAMb,EAAIc,KAAKd,EAAIgH,SAAU,YAAanG,IAAME,WAAW,yBAAyB,GAAGX,EAAG,WAAW,CAACI,MAAM,CAAC,MAAQ,SAAS,CAACJ,EAAG,QAAQ,CAACG,YAAY,CAAC,MAAQ,SAASC,MAAM,CAAC,YAAc,eAAee,GAAG,CAAC,UAAUvB,EAAIkK,gBAAgBxJ,MAAM,CAACC,MAAOX,EAAIgH,SAAc,MAAEpG,SAAS,SAAUC,GAAMb,EAAIc,KAAKd,EAAIgH,SAAU,QAASnG,IAAME,WAAW,qBAAqB,GAAGX,EAAG,WAAW,CAACI,MAAM,CAAC,MAAQ,SAAS,CAACJ,EAAG,WAAW,CAACI,MAAM,CAAC,KAAO,SAASkI,YAAY1I,EAAI2I,GAAG,CAAC,CAACzH,IAAI,OAAO0H,GAAG,WAAW,MAAO,CAACxI,EAAG,OAAO,CAACJ,EAAIoB,GAAG,UAAUqI,OAAM,GAAM,CAACvI,IAAI,QAAQ0H,GAAG,WAAW,MAAO,CAACxI,EAAG,OAAO,CAACJ,EAAIoB,GAAG,WAAWqI,OAAM,KAAQ/I,MAAM,CAACC,MAAOX,EAAIgH,SAASmD,OAAY,MAAEvJ,SAAS,SAAUC,GAAMb,EAAIc,KAAKd,EAAIgH,SAASmD,OAAQ,QAAStJ,IAAME,WAAW,4BAA4B,GAAIf,EAAIgH,SAASmD,OAAY,MAAE/J,EAAG,OAAO,CAACG,YAAY,CAAC,cAAc,SAASmI,YAAY1I,EAAI2I,GAAG,CAAC,CAACzH,IAAI,QAAQ0H,GAAG,WAAW,MAAO,CAACxI,EAAG,OAAO,CAACI,MAAM,CAAC,KAAO,iBAAiBR,EAAIoB,GAAG,YAAYhB,EAAG,SAAS,CAACG,YAAY,CAAC,cAAc,QAAQC,MAAM,CAAC,KAAO,cAAc,KAAO,QAAQ,KAAO,UAAU,QAAUR,EAAIoK,qBAAqB7I,GAAG,CAAC,MAAQvB,EAAIqK,mBAAmB,CAACrK,EAAIoB,GAAG,eAAeqI,OAAM,IAAO,MAAK,EAAM,aAAa,CAACrJ,EAAG,WAAW,CAACI,MAAM,CAAC,MAAQ,OAAO,CAACJ,EAAG,SAAS,CAACG,YAAY,CAAC,MAAQ,SAASC,MAAM,CAAC,WAAa,GAAG,eAAe,GAAG,YAAc,YAAYe,GAAG,CAAC,YAAYvB,EAAIsK,oBAAoB5J,MAAM,CAACC,MAAOX,EAAIgH,SAAiB,SAAEpG,SAAS,SAAUC,GAAMb,EAAIc,KAAKd,EAAIgH,SAAU,WAAYnG,IAAME,WAAW,sBAAsBf,EAAIgB,GAAIhB,EAAIgH,SAAS2C,UAAyB,iBAAE,SAAS1I,GAAM,OAAOb,EAAG,SAAS,CAACc,IAAID,EAAKT,MAAM,CAAC,MAAQS,IAAO,CAACjB,EAAIoB,GAAGpB,EAAIqB,GAAGJ,SAAW,IAAI,IAAI,GAAGjB,EAAI2B,MAAM,IAAI,GAAGvB,EAAG,MAAM,CAACI,MAAM,CAAC,KAAO,OAAO,CAACJ,EAAG,oBAAoB,CAACI,MAAM,CAAC,kBAAkBR,EAAIoJ,UAAU,kBAAkB,KAAK,UAAUpJ,EAAIgH,SAASQ,OAAO,cAAcxH,EAAIgH,SAASuD,UAAU,KAAOvK,EAAIgH,SAASwD,UAAU,mBAAmBC,OAAO,OAAO,IAAI,GAAGrK,EAAG,WAAWA,EAAG,SAAS,CAACG,YAAY,CAAC,cAAc,QAAQC,MAAM,CAAC,KAAOR,EAAI0K,cAAchG,IAAI1E,EAAIuJ,YAAY,QAAUvJ,EAAIoH,aAAepH,EAAIoK,qBAAqB7I,GAAG,CAAC,MAAQvB,EAAI2K,YAAY,CAAC3K,EAAIoB,GAAGpB,EAAIqB,GAAGrB,EAAI4K,cAAclG,IAAI1E,EAAIuJ,aAAa,QAAQ,KACzlI,EAAkB,G,sFCkFtB,GACEsB,WAAY,CAAd,wBACEC,mBAAoB,CAClBC,OAAQ,SACRC,KAAM,OACNC,OAAQ,UAEVtI,KAAM,aACNS,MAAO,CACL8H,WAAY,GACZ9B,UAAW9F,OACX6H,UAAW7H,OACX8E,QAASgD,MACT7B,WAAYjG,QAEd+H,MAAO,CAAC,YACR7H,KAhBF,WAiBI,MAAO,CACLyD,KAAM,CACJqE,aAAc,KACdC,aAAc,KACdC,iBAAkB,GAClBC,uBAAwB,IAE1BzE,SAAU,CACR0E,GAAI,KACJlB,UAAW,EACXhD,OAAQ,KACR+C,UAAW,KACXoB,MAAO,KACPC,SAAU,KACVzB,OAAQ,CACN0B,OAAO,GAETlC,UAAW,CACTmC,gBAAiB,GACjBC,YAAa,KAGjBC,mBAAoB,GACpBC,MAAO,CACLC,mBAAmB,EACnBC,iBAAkB,CAC1B,CACU,MAAV,MACU,IAAV,UAEA,CACU,MAAV,MACU,IAAV,aACU,OAAV,cACY,IAAZ,QACA,WACY,GAAZ,QACc,OAAd,SACA,iBACA,UACgB,MAChB,CACkB,MAAlB,QACkB,MAAlB,YAEA,mCAKA,CACU,MAAV,OACU,IAAV,aACU,OAAV,cACY,IAAZ,QACA,WACY,GAAZ,QACc,OAAd,SACA,iBACA,UACgB,MAChB,CACkB,MAAlB,QACkB,MAAlB,YAEA,oCAMQC,eAAgB,CACdC,MAAO,EACPC,QAAS,EACTC,KAAM,EACNC,aAAc,CAAC,EAAG,GAAI,GAAI,MAE5BC,gBAAgB,EAChBC,cAAe,CACvB,CACU,MAAV,KACU,MAAV,GACU,MAAV,SACU,MAAV,OACU,OAAV,cACY,OAAZ,EACA,OACA,aAIA,CACU,MAAV,KACU,IAAV,SACU,WAAV,GAEA,CACU,MAAV,KACU,IAAV,QACU,WAAV,GAEA,CACU,MAAV,KACU,MAAV,SACU,OAAV,cACY,IAAZ,QACA,iCACA,QACY,OAAZ,SACc,MAAd,CACgB,MAAhB,IAEA,MAIQC,YAAa,CACXN,MAAO,EACPC,QAAS,EACTC,KAAM,EACNC,aAAc,CAAC,EAAG,GAAI,GAAI,OAG9BhD,UAAW,CACToD,MAAM,EACNC,aAAa,EACbnD,MAAO,KACPrD,QAAS,MAEXuE,cAAe,IAAIkC,IAAI,CAC7B,qBACA,mBACA,uBAEMpC,cAAe,IAAIoC,IAAI,CAC7B,qBACA,mBACA,qBAEM1F,aAAa,EACb2F,eAAe,EACf3C,qBAAqB,IAGzB5F,QAAS,CACPwI,UAAW,WACT,IAAN,KAeM,OAdAC,EAAMC,OAASjN,KAAK+G,SAASkG,OAC7BD,EAAME,IAAMlN,KAAK+G,SAASmG,IAC1BF,EAAMG,KAAOnN,KAAK+G,SAASwD,UAC3ByC,EAAMrF,cAAgB3H,KAAKmJ,UAC3B6D,EAAMI,gBAAkB,EAEpBpN,KAAKqN,mBACPL,EAAMM,SAAWtN,KAAK+G,SAASuG,UAGjCN,EAAMO,iBAAmB,CACvBC,WAAYxN,KAAK+G,SAASuD,WAE5B0C,EAAMzF,OAASvH,KAAK+G,SAASQ,OACtByF,GAETS,cAAe,WACb,IAAN,KAqBM,OApBAT,EAAMzB,iBAAmBvL,KAAKgH,KAAKuE,iBACnCyB,EAAM7E,QAAUnI,KAAKmI,QACrB6E,EAAMrF,cAAgB3H,KAAKmJ,UAE3B6D,EAAMU,iBAAmB,CACvBC,WAAY3N,KAAK+G,SAASuD,UAC1BsD,cAAe5N,KAAK+G,SAAS2E,OAE/BsB,EAAMxB,uBAAyBxL,KAAKgH,KAAKwE,uBACzCwB,EAAMa,SAAW,CACfpC,GAAIzL,KAAK+G,SAAS0E,GAClBqC,OAAQ,MAGRC,cAAe,OACfC,YAAY,EACZpC,MAAO5L,KAAK+G,SAASmD,OAAO0B,MAC5BD,SAA4C,KAAlC3L,KAAK+G,SAASmD,OAAOyB,SAAkB,KAAO3L,KAAK+G,SAAS4E,UAExE/G,QAAQC,IAAImI,GACLA,GAET,iBA3CJ,WA2CA,qKACA,gBACA,wCACA,yBAHA,SAIA,oDACA,yBACA,kBACA,kBACA,oDAEA,iDACA,mDAEA,mBACA,oCACA,oBACA,4BAhBA,8CAmBI3C,mBA9DJ,SA8DA,GACUrK,KAAKiO,SAASjO,KAAK+G,SAAS2C,UAAUmC,gBAAiBqC,GACzDvI,MAAM,WAGI,KAARuI,QAAsBC,IAARD,GAA6B,OAARA,EAIvClO,KAAK+G,SAAS2C,UAAUmC,gBAAgB9G,KAAKmJ,GAH3CvI,MAAM,WAKVsE,eAzEJ,WA0EUjK,KAAK+G,SAAS2E,QAChB1L,KAAK+G,SAAS0E,GAAKzL,KAAK+G,SAAS2E,MAAM0C,MAAM,KAAK,KAGtD,oBA9EJ,WA8EA,wKACA,iBADA,8CAGIC,WAjFJ,SAiFA,GACM,IAAN,KACM,IAAK,IAAX,OACQ,GAAR,WAAY,OAAZ,OAAY,CAAZ,2BAMU9L,EAAO+L,GAAKC,EAAGD,OANzB,CACU,IAAV,wBACU,IAAK,IAAf,OACY/L,EAAO+L,EAAI,IAAME,GAAKC,EAAKD,GAMjC,OAAOjM,GAET,QA/FJ,WA+FA,wJACA,sCACA,cACA,wDACA,oDACA,mDACA,0CACA,2CACA,mBACA,qBACA,sDACA,kDACA,2CAEA,iCAdA,8CAiBImM,iBAhHJ,WAgHA,WACM1O,KAAKwE,MAAMC,IAAI,iCACrB,kBACA,kBACU,OAAV,wBAEU,EAAV,+CAII,UA1HJ,WA0HA,uKACA,IACA,oBACA,2BACA,mBACA,oBAIA,iBATA,SAUA,4DACA,kBACA,aACA,eACA,GACA,2BACA,mBACA,2BACA,yBACA,yBACA,sBAEA,uCACA,oBACA,yBACA,kCAGA,mBACA,gCAEA,oBACA,oBAhCA,8CAmCIkK,0BA7JJ,WA8JM,MAAO,CACLxB,KAAM,EACNyB,cAAe,WACfC,gBAAiB,EACjBC,WAAY,GACZvG,QAAS,GACTwG,QAAS,GACTC,iBAAiB,EACjBC,UAAW,IAGfC,6BAzKJ,WA0KM,MAAO,CACL/B,KAAM,KACN5E,QAAS,MAIf4G,SAAU,CACRC,kBADJ,WAEM,IAAN,0BACA,yFACA,gCACM,OAAO,OAAb,OAAa,CAAb,eAEIC,oBAPJ,WAQM,MAAO,CAACrP,KAAK+G,SAAS2C,UAAU4F,WAAWC,WAAWC,SAAUxP,KAAK+G,SAAS2C,UAAU4F,WAAWC,WAAWE,cAAcC,SAAS1P,KAAK+G,SAAS4I,sBAAsBxC,OAE3KyC,aAVJ,WAWM,OAAiE,IAA1D5P,KAAK+G,SAAS4I,sBAAsBb,WAAWe,QAExDC,oBAbJ,WAcM,OAAO9P,KAAK+G,SAAS4I,sBAAsBV,YAAcjP,KAAK+G,SAAS2C,UAAU4F,WAAWL,UAAUc,KAExGC,aAhBJ,WAiBM,OAA8D,IAAvDhQ,KAAK+G,SAAS4I,sBAAsBpH,QAAQsH,QAErDI,oBAnBJ,WAoBM,OAAOjQ,KAAK+G,SAAS4I,sBAAsBxC,OAASnN,KAAK+G,SAAS2C,UAAU4F,WAAWC,WAAWE,cAAgBzP,KAAKkQ,oBAAsBlQ,KAAKmQ,mBAEpJC,oBAtBJ,WAuBM,OAAOpQ,KAAK+G,SAAS4I,sBAAsBxC,OAASnN,KAAK+G,SAAS2C,UAAU4F,WAAWC,WAAWE,cAAgBzP,KAAKmQ,oBAAsBnQ,KAAKkQ,mBAEpJA,kBAzBJ,WA0BM,OAAiE,IAA1DlQ,KAAK+G,SAAS4I,sBAAsBb,WAAWe,QAAqE,MAArD7P,KAAK+G,SAAS4I,sBAAsBf,eAAyB5O,KAAK+G,SAAS4I,sBAAsBf,cAAgB,GAEzLuB,kBA5BJ,WA6BM,OAAOnQ,KAAKgQ,eAGhB1J,QAjXF,WAkXItG,KAAK0O,mBACL1O,KAAKqQ,YCtcyW,I,YCO9W9J,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIa,EAAAA,E,QCaf,GACE7D,KAAM,WACNkI,WAAY,CAAd,cACEzH,MAAO,CACLoE,OAAQlE,OACR8E,QAASgD,MACThC,UAAW9F,OACX6H,UAAW7H,OACXmF,UAAW2C,MACXhE,YAAamJ,SAEflF,MAAO,CAAC,WACR7H,KAZF,WAaI,MAAO,CACL2F,YAAa,GACbE,OAAQ,KACRmH,eAAgB,IAAI1D,IAAI,CAC9B,uBACA,qBACA,2BAEM5D,UAAW,CACTuH,MAAM,GAERjI,QAAS,CACf,CACQ,MAAR,KACQ,MAAR,GACQ,MAAR,SACQ,MAAR,OACQ,OAAR,cACU,OAAV,EACA,OACA,aAIA,CACQ,MAAR,KACQ,IAAR,oBACQ,OAAR,cACU,IAAV,eACU,OAAV,EACA,OACA,gBAIA,CACQ,MAAR,KACQ,IAAR,QACQ,OAAR,cACU,IAAV,eACU,OAAV,EACA,OACA,mBAIA,CACQ,MAAR,KACQ,IAAR,QACQ,MAAR,IACQ,OAAR,cACU,IAAV,QACA,SACA,oBACU,OAAV,SACY,MAAZ,CACc,MAAd,IAEA,KAGA,CACQ,MAAR,SACQ,IAAR,YAEA,CACQ,MAAR,KACQ,KAAR,SACQ,MAAR,SACQ,MAAR,YAKEhE,QAAS,CACP,iBADJ,WACA,wJACA,mBACA,qCACA,oBAHA,8CAKI,iBANJ,SAMA,6JACA,gBACA,mCACA,oBAHA,8CAKI,iBAXJ,SAWA,6JACA,gBACA,qCACA,oBAHA,8CAKI8E,aAhBJ,WAiBMrJ,KAAKkJ,YAAc,KACnBlJ,KAAKiJ,UAAUuH,MAAO,EACtBxQ,KAAKyQ,MAAM,aAGftB,SAAU,CACRnG,YADJ,WAEM,OAAOhJ,KAAKuQ,eAAe9L,IAAIzE,KAAKoJ,UAGxC9C,QAlHF,cC/BgX,ICO5W,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIa,I,QClBX,EAAS,WAAa,IAAIvG,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACqG,MAAM,CAAEI,QAAS,UAAU0B,OAAQ,SAAU,CAACnI,EAAG,WAAW,CAACM,MAAM,CAACC,MAAOX,EAAS,MAAEY,SAAS,SAAUC,GAAMb,EAAIW,MAAME,GAAKE,WAAW,UAAUf,EAAIgB,GAAIhB,EAAa,WAAE,SAAS2Q,EAASpJ,GAAO,OAAOnH,EAAG,QAAQ,CAACc,IAAIyP,EAASC,OAAOjO,KAAM,QAAQnC,MAAM,CAAC,KAAO8C,OAAOiE,IAAQmB,YAAY1I,EAAI2I,GAAG,CAAC,CAACzH,IAAI,UAAU0H,GAAG,WAAW,MAAO,CAACxI,EAAG,SAAS,CAACG,YAAY,CAAC,gBAAgB,QAAQC,MAAM,CAAC,KAAO,oBAAoBe,GAAG,CAAC,MAAQ,SAASW,GAAQ,OAAOlC,EAAI6Q,UAAUtJ,MAAU,CAACvH,EAAIoB,GAAG,WAAWhB,EAAG,kBAAkB,CAACI,MAAM,CAAC,cAAcmQ,KAAYvQ,EAAG,QAAQ,CAACI,MAAM,CAAC,MAAQ,SAAS,eAAc,GAAME,MAAM,CAACC,MAAOX,EAAI8Q,gBAAgBvJ,GAAQ3G,SAAS,SAAUC,GAAMb,EAAIc,KAAKd,EAAI8Q,gBAAiBvJ,EAAO1G,IAAME,WAAW,2BAA2B,CAAEf,EAAI8Q,gBAAgBvJ,GAAQnH,EAAG,aAAa,CAACE,IAAI,+BAA+ByQ,UAAS,EAAKvQ,MAAM,CAAC,WAAWmQ,EAASC,OAAOjO,KAAK,GAAKgO,EAASC,OAAOI,UAAUhR,EAAI2B,MAAM,KAAK8H,OAAM,IAAO,MAAK,IAAO,CAACzJ,EAAIoB,GAAG,IAAIpB,EAAIqB,GAAGsP,EAASC,OAAOjO,KAAO,WAAc,CAACgO,EAASM,kBAAkBnB,QAAU,MAAO,UAAS,GAAG1P,EAAG,MAAMA,EAAG,SAAS,CAACI,MAAM,CAAC,KAAO,UAAU,KAAO,WAAWe,GAAG,CAAC,MAAQvB,EAAIkR,qBAAqB,CAAClR,EAAIoB,GAAG,wBAAwB,IAC9xC,EAAkB,GCDlB,G,oBAAS,WAAa,IAAIpB,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAAGJ,EAAIsI,UAAU6I,gBAAkHnR,EAAI2B,KAArGvB,EAAG,QAAQ,CAACI,MAAM,CAAC,OAAS,GAAG,OAAS,GAAG,QAAUR,EAAIwI,QAAQ,KAAOxI,EAAIiR,qBAA+BjR,EAAIsI,UAAyB,gBAAElI,EAAG,QAAQ,CAACI,MAAM,CAAC,OAAS,GAAG,OAAS,GAAG,QAAUR,EAAIoR,WAAW,KAAO,CAACpR,EAAIsI,cAActI,EAAI2B,MAAM,KACzX,EAAkB,G,iCCatB,GACEgB,KAAM,eACNS,MAAO,CACLkF,UAAW,IAEb9E,KALF,WAKA,WACI,MAAO,CACLyN,kBAAmBhR,KAAKqI,UAAU2I,kBAClCtQ,MAAO,CAAC,KACR0Q,kBAAkB,EAClB7I,QAAS,CACf,CACQ,MAAR,KACQ,MAAR,GACQ,OAAR,cACU,IAAV,QACA,SACA,UACA,KACU,OAAV,oBACY,IAAZ,UACc,EAAd,IACc,EAAd,OACc,MACF,IAAZ,SACc,EAAd,IACc,EAAd,UACc,MACF,QACE,EAAd,IACc,GAAd,EACc,MAEJ,OAAV,YACY,MAAZ,CACc,KAAd,EACc,KAAd,QACc,SAAd,GAEY,GAAZ,CACc,MAAd,WACgB,EAAhB,gBAGA,KAGA,CACQ,MAAR,KACQ,IAAR,YACQ,MAAR,IACQ,MAAR,SACQ,aAAR,cACU,OAAV,UACA,eACA,2DACY,GAAZ,CACc,MAAd,WAAgB,IAAhB,iBAAgB,mBAAhB,mBAAkB,OAAlB,0FACA,yBADA,2CAAgB,SAAhB,IAAkB,OAAlB,wBAAgB,OAAhB,MAIY,MAAZ,CACc,QAAd,mBACc,KAAd,QACc,MAAd,SACc,KAAd,UACc,KAAd,mBAKQ,OAAR,cACU,IACV,IADA,QAkBU,OAhBV,gBACA,eACc,EAAd,aAAgB,SAAhB,IAEgB,EADhB,YACA,UAEA,YAGc,EAAd,MACc,EAAd,SAGY,EAAZ,MACY,EAAZ,WAEA,SACY,MAAZ,CACc,MAAd,IAEA,KAGA,CACQ,MAAR,OACQ,IAAR,YACQ,OAAR,cACU,OAAV,0BAGA,CACQ,MAAR,YACQ,IAAR,YACQ,OAAR,cACU,OAAV,wEAIM4I,WAAY,CAClB,CACQ,MAAR,KACQ,IAAR,YACQ,MAAR,IACQ,MAAR,SACQ,aAAR,cACU,OAAV,UACA,eACA,6CACY,GAAZ,CACc,MAAd,WAAgB,IAAhB,iBAAgB,mBAAhB,mBAAkB,OAAlB,0FACA,yBADA,2CAAgB,SAAhB,IAAkB,OAAlB,wBAAgB,OAAhB,MAIY,MAAZ,CACc,QAAd,mBACc,KAAd,QACc,MAAd,SACc,KAAd,UACc,KAAd,mBAKQ,OAAR,cACU,IACV,IADA,QAkBU,OAhBV,sBACA,eACc,EAAd,aAAgB,SAAhB,IAEgB,EADhB,YACA,UAEA,YAGc,EAAd,MACc,EAAd,SAGY,EAAZ,MACY,EAAZ,WAEA,SACY,MAAZ,CACc,MAAd,IAEA,KAGA,CACQ,MAAR,KACQ,MAAR,IACQ,IAAR,GACQ,OAAR,cACU,OAAV,kBAGA,CACQ,MAAR,OACQ,IAAR,YACQ,OAAR,cACU,OAAV,+CAAY,OAAO,EAAnB,2BAGA,CACQ,MAAR,YACQ,IAAR,GACQ,OAAR,cACU,OAAV,6CAGA,CACQ,MAAR,WACQ,IAAR,GACQ,OAAR,cACU,OAAV,2CAME5M,QAAS,CACP8M,UADJ,SACA,GACMrR,KAAK6F,SAASyL,KAAK,cAErB,qBAJJ,WAIA,8JACA,GACA,6BACA,qFAEA,sBACA,sDACA,kBACA,wCACA,iCAEA,mBACA,kBAGA,oBACA,yBAhBA,+CAoBEnC,SAAU,CACRoC,eADJ,WAEM,OAAOvR,KAAKgR,kBAClB,oBAAQ,OAAR,mBACA,iBAAQ,OAAR,QACA,YAGE1K,QAnOF,WAoOItG,KAAKwR,yBClP2W,ICOhX,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIa,I,oBCaf,GACE9O,KAAM,aACNkI,WAAY,CAAd,iCACEzH,MAAO,CACLkF,UAAW8C,OAEbC,MAAO,CAAC,WACR7H,KAPF,WAQI,MAAO,CACL7C,MAAO,GACPmQ,gBAAiB,GACjB1J,aAAa,IAGjB5C,QAAS,CACPqM,UADJ,SACA,GACM5Q,KAAKa,KAAKb,KAAK6Q,gBAAiBvJ,GAAO,IAEzC2J,mBAJJ,WAIA,WACMjR,KAAKyR,OAAOC,QAAQ,CAClBjI,MAAO,cACPtD,QAAS,aACTwL,SAAS,EACTC,KAAM,WACJ,EAAV,uBAIIC,iBAdJ,WAcA,WACA,yBACMjN,QAAQC,IAAIU,GACZvF,KAAKmH,aAAc,EACnBnH,KAAKwE,MAAMwB,KAAK,0CAA2CT,GACjE,kBACQ,IAAR,SACA,eACA,EACU,EAAV,yBAEU,EAAV,wCAGA,mBACQ,EAAR,8BAEA,oBACQ,EAAR,gBACQ,EAAR,eACQ,EAAR,qBAGIuM,gBArCJ,WAsCM,OAAO9R,KAAKqI,UAAU0J,KAAI,SAAhC,GACQ,MAAO,CACLC,WAAYhR,EAAK2P,OAAOjO,KACxByF,QAASnH,EAAKgQ,kBAAkBe,KAAI,SAA9C,GACY,OAAOE,EAAiBC,IAAI3K,gBAMtCjB,QA9DF,WA+DI1B,QAAQC,IAAI,YAAa7E,KAAKqI,WAC9BrI,KAAK6Q,gBAAkB1F,MAAMnL,KAAKqI,UAAUwH,QAAQsC,MAAK,GAC3B,IAA1BnS,KAAKqI,UAAUwH,SACjB7P,KAAKU,MAAQ,CAAC,QCjG8V,ICO9W,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIa,I,QC6Cf,GACEkK,WAAY,CAAd,2CACErH,KAFF,WAGI,MAAO,CACLsE,YAAa,CACX2I,MAAM,GAERrJ,aAAa,EACbc,mBAAmB,EACnBR,yBAA0BzH,KAAKoS,OAAOnN,MAAM0C,cAC5CZ,SAAU,CACRY,cAAe,KACfO,cAAe,MAEjBH,UAAW,GACXf,KAAM,CACJO,OAAQvH,KAAKoS,OAAOnN,MAAMsC,OAC1BI,cAAe3H,KAAKoS,OAAOnN,MAAM0C,cACjCO,cAAelI,KAAKoS,OAAOnN,MAAMiD,cACjCjB,MAAOjH,KAAKoS,OAAOnN,MAAMgC,MACzBoL,cAAe,GACfC,UAAW,GACXxK,8BAA+B,MAIrCvD,QAAS,CACPwI,UAAW,WACT,IAAN,KAIM,OAHAC,EAAMzF,OAASvH,KAAKgH,KAAKO,OACzByF,EAAMrF,cAAgB3H,KAAKgH,KAAKW,cAChCqF,EAAM9E,cAAgBlI,KAAKgH,KAAKkB,cACzB8E,GAET,WARJ,SAQA,sKACA,wCADA,yCAEA,IAFA,cAIA,IACA,iBALA,SAMA,iDACA,QACA,YAGA,kBACA,kBACA,EACA,mBAEA,gCAGA,mBACA,kCAEA,oBACA,oBAvBA,8CA0BI,SAlCJ,WAkCA,wKACA,qCADA,uBAEA,iBAFA,8CAII,aAtCJ,WAsCA,iKACA,sBACA,cACA,gBACA,eACA,SALA,uBAMA,8BANA,6BASA,gBATA,wDAYA,uBAZA,UAaA,oDACA,QACA,gBACA,iCAGA,kBACA,kBACA,uBACA,GACA,cACA,kCAEA,8CAGA,mBACA,gCAEA,oBACA,0BAjCA,+CAoCI,4BA1EJ,WA0EA,wJACA,uEACA,uDACA,iBAHA,8CAKI,iCA/EJ,WA+EA,uKACA,IACA,iBACA,wCACA,gBAJA,SAKA,iEACA,QACA,mBAGA,kBACA,kBACA,uBACA,GACA,uCACA,+CACA,oFAGA,0BACA,0BACA,mCAGA,mBACA,oCAEA,oBACA,oBA5BA,8CA+BI,sBA9GJ,WA8GA,wJACA,sBADA,8CAGIuF,UAjHJ,WAkHMvS,KAAK8E,QAAQ0N,QAAQ,CACnBvN,MAAO,CACLsC,OAAQvH,KAAKgH,KAAKO,OAClBI,cAAe3H,KAAKgH,KAAKW,cACzBO,cAAelI,KAAKgH,KAAKkB,cACzBjB,MAAOjH,KAAKgH,KAAKC,SAG3B,uBAGIoH,WA7HJ,SA6HA,GACM,IAAN,KACM,IAAK,IAAX,OACQ,GAAR,WAAY,OAAZ,OAAY,CAAZ,2BAMU9L,EAAO+L,GAAKC,EAAGD,OANzB,CACU,IAAV,wBACU,IAAK,IAAf,OACY/L,EAAO+L,EAAI,IAAME,GAAKC,EAAKD,GAMjC,OAAOjM,IAGX4M,SAAU,GACV7I,QAvKF,WAuKA,WAEItG,KAAKwE,MAAMC,IAAI,qDAAqDgO,MAAK,SAA7E,GACmC,MAAzBxM,EAAS1C,KAAKkC,OAId,EAAV,cACQ,EAAR,mCACQ,EAAR,gBALQ,EAAR,mCC1OmX,ICQ/W,G,UAAY,eACd,EACA,EACAvC,GACA,EACA,KACA,KACA,OAIa,e","file":"js/chunk-cd23927a.10dcdf65.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dbMqBuildV2.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Row',[_c('Form',{ref:\"drc1\",staticStyle:{\"float\":\"left\",\"margin-top\":\"50px\"},attrs:{\"model\":_vm.drc,\"label-width\":250}},[_c('FormItem',{staticStyle:{\"width\":\"600px\"},attrs:{\"label\":\"集群名\",\"prop\":\"mhaName\"}},[_c('Input',{attrs:{\"readonly\":\"\",\"placeholder\":\"请输入集群名\"},model:{value:(_vm.drc.mhaName),callback:function ($$v) {_vm.$set(_vm.drc, \"mhaName\", $$v)},expression:\"drc.mhaName\"}})],1),_c('FormItem',{attrs:{\"label\":\"选择Replicator\",\"prop\":\"replicator\"}},[_c('Select',{staticStyle:{\"width\":\"250px\"},attrs:{\"multiple\":\"\",\"placeholder\":\"选择Replicator\"},model:{value:(_vm.drc.replicators),callback:function ($$v) {_vm.$set(_vm.drc, \"replicators\", $$v)},expression:\"drc.replicators\"}},_vm._l((_vm.drc.replicatorList),function(item){return _c('Option',{key:item.ip,attrs:{\"value\":item.ip}},[_vm._v(_vm._s(item.ip)+\" —— \"+_vm._s(item.az)+\" \")])}),1),_vm._v(\"   \"),_c('Button',{attrs:{\"type\":\"success\"},on:{\"click\":_vm.autoConfigReplicator}},[_vm._v(\"自动录入\")])],1),(_vm.showMhaApplierConfig())?_c('FormItem',{attrs:{\"label\":\"选择Messenger\",\"prop\":\"messenger\"}},[_c('Select',{staticStyle:{\"width\":\"250px\"},attrs:{\"multiple\":\"\",\"placeholder\":\"选择集群Messenger\"},model:{value:(_vm.drc.messengers),callback:function ($$v) {_vm.$set(_vm.drc, \"messengers\", $$v)},expression:\"drc.messengers\"}},_vm._l((_vm.drc.messengerList),function(item){return _c('Option',{key:item.ip,attrs:{\"value\":item.ip}},[_vm._v(_vm._s(item.ip)+\" —— \"+_vm._s(item.az)+\" \")])}),1),_vm._v(\"   \"),_c('Button',{attrs:{\"type\":\"success\"},on:{\"click\":_vm.autoConfigMessenger}},[_vm._v(\"自动录入\")])],1):_vm._e(),_c('FormItem',{staticStyle:{\"width\":\"600px\"},attrs:{\"label\":\"初始拉取位点R\"}},[_c('Input',{attrs:{\"placeholder\":\"变更replicator机器时，请输入binlog拉取位点\"},model:{value:(_vm.drc.rGtidExecuted),callback:function ($$v) {_vm.$set(_vm.drc, \"rGtidExecuted\", $$v)},expression:\"drc.rGtidExecuted\"}}),_c('Row',[_c('Col',{attrs:{\"span\":\"12\"}},[_c('Button',{on:{\"click\":_vm.queryMhaMachineGtid}},[_vm._v(\"查询mha位点\")]),(_vm.hasTest1)?_c('span',[_c('Icon',{attrs:{\"type\":_vm.testSuccess1 ? 'ios-checkmark-circle' : 'ios-close-circle',\"color\":_vm.testSuccess1 ? 'green' : 'red'}}),_vm._v(\" \"+_vm._s(_vm.testSuccess1 ? '查询实时位点成功' : '连接查询失败')+\" \")],1):_vm._e()],1),_c('Col',{attrs:{\"span\":\"12\"}},[_c('Button',{attrs:{\"type\":\"success\"},on:{\"click\":_vm.queryMhaGtidCheckRes}},[_vm._v(\"位点校验\")])],1)],1)],1),_c('FormItem',{staticStyle:{\"width\":\"600px\"},attrs:{\"label\":\"mq配置\"}},[_c('Button',{attrs:{\"type\":\"primary\",\"ghost\":\"\"},on:{\"click\":_vm.goToMqConfigs}},[_vm._v(\"mq配置\")])],1),(_vm.showDbMhaApplierConfig())?_c('FormItem',{staticStyle:{\"width\":\"600px\"},attrs:{\"label\":\"DB Applier 配置\"}},[_c('Button',{attrs:{\"type\":\"primary\",\"ghost\":\"\"},on:{\"click\":_vm.getMhaDbMessenger}},[_vm._v(\"Db Applier 管理\")])],1):_vm._e(),(_vm.showMhaApplierConfig())?_c('FormItem',{staticStyle:{\"width\":\"600px\"},attrs:{\"label\":\"初始同步位点A\"}},[_c('Input',{attrs:{\"placeholder\":\"请输入DRC同步起始位点\"},model:{value:(_vm.drc.aGtidExecuted),callback:function ($$v) {_vm.$set(_vm.drc, \"aGtidExecuted\", $$v)},expression:\"drc.aGtidExecuted\"}})],1):_vm._e()],1)],1),_c('Form',{staticStyle:{\"margin-top\":\"50px\"},attrs:{\"label-width\":250}},[_c('FormItem',[_c('Row',[_c('Col',{attrs:{\"span\":\"6\"}},[_c('Button',{on:{\"click\":function($event){return _vm.handleReset('drc1')}}},[_vm._v(\"重置\")])],1),_c('Col',{attrs:{\"span\":\"6\"}},[_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.preCheckConfigure ()}}},[_vm._v(\"提交\")])],1)],1)],1),_c('Modal',{attrs:{\"title\":\"确认配置信息\",\"width\":\"900px\"},on:{\"on-ok\":_vm.submitConfig},model:{value:(_vm.drc.reviewModal),callback:function ($$v) {_vm.$set(_vm.drc, \"reviewModal\", $$v)},expression:\"drc.reviewModal\"}},[_c('Form',{staticStyle:{\"width\":\"80%\"}},[_c('FormItem',{attrs:{\"label\":\"集群名\"}},[_c('Input',{attrs:{\"type\":\"textarea\",\"autosize\":{minRows: 1,maxRows: 30},\"readonly\":\"\"},model:{value:(_vm.drc.mhaName),callback:function ($$v) {_vm.$set(_vm.drc, \"mhaName\", $$v)},expression:\"drc.mhaName\"}})],1),_c('FormItem',{attrs:{\"label\":\"集群Replicator\"}},[_c('Input',{attrs:{\"type\":\"textarea\",\"autosize\":{minRows: 1,maxRows: 30},\"readonly\":\"\"},model:{value:(_vm.drc.replicators),callback:function ($$v) {_vm.$set(_vm.drc, \"replicators\", $$v)},expression:\"drc.replicators\"}})],1),_c('FormItem',{attrs:{\"label\":\"集群Messenger\"}},[_c('Input',{attrs:{\"type\":\"textarea\",\"autosize\":{minRows: 1,maxRows: 30},\"readonly\":\"\"},model:{value:(_vm.drc.messengers),callback:function ($$v) {_vm.$set(_vm.drc, \"messengers\", $$v)},expression:\"drc.messengers\"}})],1),_c('FormItem',{attrs:{\"label\":\"新增Replicator的新增binlog拉取位点\"}},[_c('Input',{attrs:{\"type\":\"textarea\",\"autosize\":{minRows: 1,maxRows: 30},\"readonly\":\"\"},model:{value:(_vm.drc.rGtidExecuted),callback:function ($$v) {_vm.$set(_vm.drc, \"rGtidExecuted\", $$v)},expression:\"drc.rGtidExecuted\"}})],1),_c('FormItem',{attrs:{\"label\":\"Messenger集群的起始位点\"}},[_c('Input',{attrs:{\"type\":\"textarea\",\"autosize\":{minRows: 1,maxRows: 30},\"readonly\":\"\"},model:{value:(_vm.drc.aGtidExecuted),callback:function ($$v) {_vm.$set(_vm.drc, \"aGtidExecuted\", $$v)},expression:\"drc.aGtidExecuted\"}})],1)],1)],1),_c('Modal',{attrs:{\"title\":\"配置结果\",\"width\":\"1200px\"},model:{value:(_vm.drc.resultModal),callback:function ($$v) {_vm.$set(_vm.drc, \"resultModal\", $$v)},expression:\"drc.resultModal\"}},[_c('Form',{staticStyle:{\"width\":\"100%\"}},[_c('FormItem',{attrs:{\"label\":\"集群配置\"}},[_c('Input',{attrs:{\"type\":\"textarea\",\"autosize\":{minRows: 1,maxRows: 30},\"readonly\":\"\"},model:{value:(_vm.result),callback:function ($$v) {_vm.result=$$v},expression:\"result\"}})],1)],1)],1),_c('Modal',{attrs:{\"title\":\"存在一对多共用运行配置请确认\",\"width\":\"900px\"},on:{\"on-ok\":_vm.reviewConfigure},model:{value:(_vm.drc.warnModal),callback:function ($$v) {_vm.$set(_vm.drc, \"warnModal\", $$v)},expression:\"drc.warnModal\"}},[_c('label',{staticStyle:{\"color\":\"black\"}},[_vm._v(\"共用replicator配置的集群: \")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.drc.conflictMha),expression:\"drc.conflictMha\"}],domProps:{\"value\":(_vm.drc.conflictMha)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.drc, \"conflictMha\", $event.target.value)}}}),_c('Divider'),_c('div',[_c('p',{staticStyle:{\"color\":\"red\"}},[_vm._v(\"线上一对多replicator配置\")]),_c('ul',_vm._l((_vm.drc.replicators.share),function(item){return _c('ol',{key:item},[_vm._v(_vm._s(item))])}),0)]),_c('Divider'),_c('div',[_c('p',{staticStyle:{\"color\":\"black\"}},[_vm._v(\"修改后replicator配置\")]),_c('ul',_vm._l((_vm.drc.replicators.conflictCurrent),function(item){return _c('ol',{key:item},[_vm._v(_vm._s(item))])}),0)])],1),_c('Modal',{attrs:{\"title\":\"gitd位点校验结果\",\"width\":\"900px\"},model:{value:(_vm.gtidCheck.modal),callback:function ($$v) {_vm.$set(_vm.gtidCheck, \"modal\", $$v)},expression:\"gtidCheck.modal\"}},[_c('Form',{staticStyle:{\"width\":\"80%\"}},[_c('FormItem',{attrs:{\"label\":\"校验结果\"}},[_c('Input',{attrs:{\"type\":\"textarea\",\"autosize\":{minRows: 1,maxRows: 30},\"readonly\":\"\"},model:{value:(_vm.gtidCheck.resVo.legal),callback:function ($$v) {_vm.$set(_vm.gtidCheck.resVo, \"legal\", $$v)},expression:\"gtidCheck.resVo.legal\"}})],1),_c('FormItem',{attrs:{\"label\":\"当前Mha\"}},[_c('Input',{attrs:{\"autosize\":{minRows: 1,maxRows: 30},\"readonly\":\"\"},model:{value:(_vm.gtidCheck.resVo.mha),callback:function ($$v) {_vm.$set(_vm.gtidCheck.resVo, \"mha\", $$v)},expression:\"gtidCheck.resVo.mha\"}})],1),_c('FormItem',{attrs:{\"label\":\"配置位点\"}},[_c('Input',{attrs:{\"type\":\"textarea\",\"autosize\":{minRows: 1,maxRows: 30},\"readonly\":\"\"},model:{value:(_vm.gtidCheck.resVo.configGtid),callback:function ($$v) {_vm.$set(_vm.gtidCheck.resVo, \"configGtid\", $$v)},expression:\"gtidCheck.resVo.configGtid\"}})],1),_c('FormItem',{attrs:{\"label\":\"purgedGtid\"}},[_c('Input',{attrs:{\"type\":\"textarea\",\"autosize\":{minRows: 1,maxRows: 30},\"readonly\":\"\"},model:{value:(_vm.gtidCheck.resVo.purgedGtid),callback:function ($$v) {_vm.$set(_vm.gtidCheck.resVo, \"purgedGtid\", $$v)},expression:\"gtidCheck.resVo.purgedGtid\"}})],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template v-if=\"current === 0\" :key=\"0\">\r\n  <div>\r\n    <Row>\r\n      <Form ref=\"drc1\" :model=\"drc\" :label-width=\"250\" style=\"float: left; margin-top: 50px\">\r\n        <FormItem label=\"集群名\" prop=\"mhaName\" style=\"width: 600px\">\r\n          <Input v-model=\"drc.mhaName\" readonly placeholder=\"请输入集群名\"/>\r\n        </FormItem>\r\n        <FormItem label=\"选择Replicator\" prop=\"replicator\">\r\n          <Select v-model=\"drc.replicators\" multiple style=\"width: 250px\" placeholder=\"选择Replicator\">\r\n            <Option v-for=\"item in drc.replicatorList\" :value=\"item.ip\" :key=\"item.ip\">{{ item.ip }} —— {{ item.az}}\r\n            </Option>\r\n          </Select>\r\n          &nbsp;\r\n          <Button type=\"success\" @click=\"autoConfigReplicator\">自动录入</Button>\r\n        </FormItem>\r\n        <FormItem  v-if=\"showMhaApplierConfig()\" label=\"选择Messenger\" prop=\"messenger\">\r\n          <Select v-model=\"drc.messengers\" multiple style=\"width: 250px\" placeholder=\"选择集群Messenger\">\r\n            <Option v-for=\"item in drc.messengerList\" :value=\"item.ip\" :key=\"item.ip\">{{ item.ip }} —— {{ item.az }}\r\n            </Option>\r\n          </Select>\r\n          &nbsp;\r\n          <Button type=\"success\" @click=\"autoConfigMessenger\">自动录入</Button>\r\n        </FormItem>\r\n        <FormItem label=\"初始拉取位点R\" style=\"width: 600px\">\r\n          <Input v-model=\"drc.rGtidExecuted\" placeholder=\"变更replicator机器时，请输入binlog拉取位点\"/>\r\n          <Row>\r\n            <Col span=\"12\">\r\n              <Button @click=\"queryMhaMachineGtid\">查询mha位点</Button>\r\n              <span v-if=\"hasTest1\">\r\n                  <Icon :type=\"testSuccess1 ? 'ios-checkmark-circle' : 'ios-close-circle'\"\r\n                        :color=\"testSuccess1 ? 'green' : 'red'\"/>\r\n                    {{ testSuccess1 ? '查询实时位点成功' : '连接查询失败' }}\r\n                </span>\r\n            </Col>\r\n            <Col span=\"12\">\r\n              <Button type=\"success\" @click=\"queryMhaGtidCheckRes\">位点校验</Button>\r\n            </Col>\r\n          </Row>\r\n        </FormItem>\r\n        <FormItem label=\"mq配置\" style=\"width: 600px\">\r\n          <Button type=\"primary\" ghost @click=\"goToMqConfigs\">mq配置</Button>\r\n        </FormItem>\r\n        <FormItem v-if=\"showDbMhaApplierConfig()\" label=\"DB Applier 配置\"  style=\"width: 600px\">\r\n          <Button type=\"primary\" ghost @click=\"getMhaDbMessenger\">Db Applier 管理</Button>\r\n        </FormItem>\r\n        <FormItem v-if=\"showMhaApplierConfig()\"  label=\"初始同步位点A\" style=\"width: 600px\">\r\n          <Input v-model=\"drc.aGtidExecuted\" placeholder=\"请输入DRC同步起始位点\"/>\r\n        </FormItem>\r\n        <!--      <FormItem label=\"行过滤\" style=\"width: 600px\">-->\r\n        <!--        <Button type=\"primary\" ghost @click=\"goToConfigRowsFiltersInSrcApplier\">配置行过滤</Button>-->\r\n        <!--      </FormItem>-->\r\n      </Form>\r\n    </Row>\r\n    <Form :label-width=\"250\" style=\"margin-top: 50px\">\r\n      <FormItem>\r\n        <Row>\r\n          <Col span=\"6\">\r\n            <Button @click=\"handleReset('drc1')\">重置</Button>\r\n          </Col>\r\n          <Col span=\"6\">\r\n            <Button type=\"primary\" @click=\"preCheckConfigure ()\">提交</Button>\r\n          </Col>\r\n        </Row>\r\n      </FormItem>\r\n      <Modal\r\n        v-model=\"drc.reviewModal\"\r\n        title=\"确认配置信息\"\r\n        width=\"900px\"\r\n        @on-ok=\"submitConfig\">\r\n        <Form style=\"width: 80%\">\r\n          <FormItem label=\"集群名\">\r\n            <Input type=\"textarea\" :autosize=\"{minRows: 1,maxRows: 30}\" v-model=\"drc.mhaName\" readonly/>\r\n          </FormItem>\r\n          <FormItem label=\"集群Replicator\">\r\n            <Input type=\"textarea\" :autosize=\"{minRows: 1,maxRows: 30}\" v-model=\"drc.replicators\" readonly/>\r\n          </FormItem>\r\n          <FormItem label=\"集群Messenger\">\r\n            <Input type=\"textarea\" :autosize=\"{minRows: 1,maxRows: 30}\" v-model=\"drc.messengers\" readonly/>\r\n          </FormItem>\r\n          <FormItem label=\"新增Replicator的新增binlog拉取位点\">\r\n            <Input type=\"textarea\" :autosize=\"{minRows: 1,maxRows: 30}\" v-model=\"drc.rGtidExecuted\" readonly/>\r\n          </FormItem>\r\n          <FormItem label=\"Messenger集群的起始位点\">\r\n            <Input type=\"textarea\" :autosize=\"{minRows: 1,maxRows: 30}\" v-model=\"drc.aGtidExecuted\" readonly/>\r\n          </FormItem>\r\n        </Form>\r\n      </Modal>\r\n      <Modal\r\n        v-model=\"drc.resultModal\"\r\n        title=\"配置结果\"\r\n        width=\"1200px\">\r\n        <Form style=\"width: 100%\">\r\n          <FormItem label=\"集群配置\">\r\n            <Input type=\"textarea\" :autosize=\"{minRows: 1,maxRows: 30}\" v-model=\"result\" readonly/>\r\n          </FormItem>\r\n        </Form>\r\n      </Modal>\r\n      <!--             v-model=\"drc.warnModal\"-->\r\n      <Modal\r\n        v-model=\"drc.warnModal\"\r\n        title=\"存在一对多共用运行配置请确认\"\r\n        width=\"900px\"\r\n        @on-ok=\"reviewConfigure\">\r\n        <label style=\"color: black\">共用replicator配置的集群: </label>\r\n        <input v-model=\"drc.conflictMha\"></input>\r\n        <Divider/>\r\n        <div>\r\n          <p style=\"color: red\">线上一对多replicator配置</p>\r\n          <ul>\r\n            <ol v-for=\"item in drc.replicators.share\" :key=\"item\">{{ item }}</ol>\r\n          </ul>\r\n        </div>\r\n        <Divider/>\r\n        <div>\r\n          <p style=\"color: black\">修改后replicator配置</p>\r\n          <ul>\r\n            <ol v-for=\"item in drc.replicators.conflictCurrent\" :key=\"item\">{{ item }}</ol>\r\n          </ul>\r\n        </div>\r\n      </Modal>\r\n      <Modal\r\n        v-model=\"gtidCheck.modal\"\r\n        title=\"gitd位点校验结果\"\r\n        width=\"900px\">\r\n        <Form style=\"width: 80%\">\r\n          <FormItem label=\"校验结果\">\r\n            <Input type=\"textarea\" :autosize=\"{minRows: 1,maxRows: 30}\" v-model=\"gtidCheck.resVo.legal\" readonly/>\r\n          </FormItem>\r\n          <FormItem label=\"当前Mha\">\r\n            <Input :autosize=\"{minRows: 1,maxRows: 30}\" v-model=\"gtidCheck.resVo.mha\" readonly/>\r\n          </FormItem>\r\n          <FormItem label=\"配置位点\">\r\n            <Input type=\"textarea\" :autosize=\"{minRows: 1,maxRows: 30}\" v-model=\"gtidCheck.resVo.configGtid\" readonly/>\r\n          </FormItem>\r\n          <FormItem label=\"purgedGtid\">\r\n            <Input type=\"textarea\" :autosize=\"{minRows: 1,maxRows: 30}\" v-model=\"gtidCheck.resVo.purgedGtid\" readonly/>\r\n          </FormItem>\r\n        </Form>\r\n      </Modal>\r\n    </Form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'drcConfig',\r\n  props: {\r\n    mhaName: String,\r\n    dc: String\r\n  },\r\n  data () {\r\n    return {\r\n      hasTest1: false,\r\n      testSuccess1: false,\r\n      result: false,\r\n      gtidCheck: {\r\n        modal: false,\r\n        resVo: {\r\n          mha: '',\r\n          legal: '',\r\n          configGtid: '',\r\n          purgedGtid: ''\r\n        }\r\n      },\r\n      drc: {\r\n        reviewModal: false,\r\n        warnModal: false,\r\n        mhaName: this.mhaName,\r\n        rGtidExecuted: '',\r\n        aGtidExecuted: '',\r\n        replicators: {},\r\n        messengers: {},\r\n        replicatorList: {},\r\n        messengerList: {},\r\n        dbMessengerSwitch: false,\r\n        dbMessengerList: []\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    autoConfigReplicator () {\r\n      this.axios.get('/api/drc/v2/resource/mha/auto?mhaName=' + this.drc.mhaName + '&type=0' + '&selectedIps=' + this.drc.replicators)\r\n        .then(response => {\r\n          console.log(response.data)\r\n          this.drc.replicators = []\r\n          response.data.data.forEach(ip => this.drc.replicators.push(ip.ip))\r\n        })\r\n    },\r\n    autoConfigMessenger () {\r\n      this.axios.get('/api/drc/v2/resource/mha/auto?mhaName=' + this.drc.mhaName + '&type=1' + '&selectedIps=' + this.drc.messengers)\r\n        .then(response => {\r\n          console.log(response.data)\r\n          this.drc.messengers = []\r\n          response.data.data.forEach(ip => this.drc.messengers.push(ip.ip))\r\n        })\r\n    },\r\n    getResources () {\r\n      this.axios.get('/api/drc/v2/resource/mha/all?mhaName=' + this.drc.mhaName + '&type=0')\r\n        .then(response => {\r\n          console.log(response.data)\r\n          this.drc.replicatorList = response.data.data\r\n        })\r\n      this.axios.get('/api/drc/v2/resource/mha/all?mhaName=' + this.drc.mhaName + '&type=1')\r\n        .then(response => {\r\n          this.drc.messengerList = response.data.data\r\n        })\r\n      this.axios.get('/api/drc/v2/config/mha/dbMessenger?mhaName=' + this.drc.mhaName + '&type=1')\r\n        .then(response => {\r\n          this.drc.dbMessengerList = response.data.data\r\n        })\r\n      this.axios.get('/api/drc/v2/config/mha/dbApplier/switch?mhaName=' + this.drc.mhaName + '&type=1')\r\n        .then(response => {\r\n          this.drc.dbMessengerSwitch = response.data.data\r\n        })\r\n    },\r\n    getResourcesInUse () {\r\n      this.axios.get('/api/drc/v2/mha/replicator', { params: { mhaName: this.drc.mhaName } })\r\n        .then(response => {\r\n          console.log(this.drc.mhaName + ' replicators ' + response.data.data)\r\n          this.drc.replicators = []\r\n          response.data.data.forEach(ip => this.drc.replicators.push(ip))\r\n        })\r\n      this.axios.get('/api/drc/v2/mha/messenger', { params: { mhaName: this.drc.mhaName } })\r\n        .then(response => {\r\n          console.log(this.drc.mhaName + ' messengers ' + response.data.data)\r\n          this.drc.messengers = []\r\n          response.data.data.forEach(ip => this.drc.messengers.push(ip))\r\n        })\r\n      this.axios.get('/api/drc/v2/messenger/initGtid?mhaName=' + this.drc.mhaName)\r\n        .then(response => {\r\n          console.log('aGtidExecuted:' + response.data.data)\r\n          this.drc.aGtidExecuted = response.data.data\r\n        })\r\n    },\r\n    goToMqConfigs () {\r\n      console.log('go to change mq config for ' + this.drc.mhaName)\r\n      this.$router.push({ path: '/v2/mqConfigs', query: { mhaName: this.drc.mhaName } })\r\n    },\r\n    getMhaDbMessenger () {\r\n      this.$router.push({\r\n        path: '/dbMessengers',\r\n        query: {\r\n          mhaName: this.drc.mhaName\r\n        }\r\n      })\r\n    },\r\n    handleReset (name) {\r\n      this.$refs[name].resetFields()\r\n    },\r\n    preCheckConfigure () {\r\n      const params = {\r\n        mhaName: this.drc.mhaName,\r\n        replicatorIps: this.drc.replicators.join(','),\r\n        messengerIps: this.drc.messengers.join(',')\r\n      }\r\n      console.log(params)\r\n      this.axios.get('/api/drc/v2/mha/replicatorIps/check', {\r\n        params: params\r\n      }).then(response => {\r\n        const preCheckRes = response.data.data\r\n        if (preCheckRes.status === 0) {\r\n          // 无风险继续\r\n          this.drc.reviewModal = true\r\n        } else if (preCheckRes.status === 1) {\r\n          // 有风险，进入确认页面\r\n          this.drc.replicators.share = preCheckRes.workingReplicatorIps\r\n          this.drc.replicators.conflictCurrent = this.drc.replicators\r\n          this.drc.conflictMha = preCheckRes.conflictMha\r\n          this.drc.warnModal = true\r\n        } else {\r\n          // 响应失败\r\n          window.alert('config preCheck fail')\r\n        }\r\n      })\r\n    },\r\n    queryMhaMachineGtid () {\r\n      this.hasTest1 = false\r\n      this.drc.rGtidExecuted = ''\r\n      const that = this\r\n      console.log('/api/drc/v2/mha/gtid/executed?mha=' + this.drc.mhaName)\r\n      that.axios.get('/api/drc/v2/mha/gtid/executed?mha=' + this.drc.mhaName)\r\n        .then(response => {\r\n          this.hasTest1 = true\r\n          if (response.data.status === 0) {\r\n            this.drc.rGtidExecuted = response.data.data\r\n            this.testSuccess1 = true\r\n          } else {\r\n            this.testSuccess1 = false\r\n            this.$Message.warning('查询位点失败: ' + response.data.message)\r\n          }\r\n        })\r\n        .catch(message => {\r\n          this.$Message.error('查询位点异常: ' + message)\r\n        })\r\n    },\r\n    queryMhaGtidCheckRes () {\r\n      if (this.drc.rGtidExecuted == null || this.drc.rGtidExecuted === '') {\r\n        this.$Message.warning('位点为空！')\r\n        return\r\n      }\r\n      const that = this\r\n      console.log('/api/drc/v2/mha/gtid/checkResult?mha=' + this.drc.mhaName +\r\n        '&configGtid=' + this.drc.rGtidExecuted)\r\n      that.axios.get('/api/drc/v2/mha/gtid/checkResult?mha=' + this.drc.mhaName +\r\n        '&configGtid=' + this.drc.rGtidExecuted)\r\n        .then(response => {\r\n          if (response.data.status === 0) {\r\n            this.gtidCheck.resVo = {\r\n              mha: this.drc.mhaName,\r\n              legal: response.data.data.legal === true ? '合理位点' : 'binlog已经被purge',\r\n              configGtid: this.drc.rGtidExecuted,\r\n              purgedGtid: response.data.data.purgedGtid\r\n            }\r\n            this.gtidCheck.modal = true\r\n          } else {\r\n            console.log('api fail:' + '/api/drc/v2/mha/gtid/checkResult?mha=' + this.drc.mhaName +\r\n              '&configGtid=' + this.drc.rGtidExecuted)\r\n          }\r\n        })\r\n        .catch(message => {\r\n          this.$Message.error('校验位点异常: ' + message)\r\n        })\r\n    },\r\n    showDbMhaApplierConfig () {\r\n      return this.drc.dbMessengerSwitch || this.hasAppliers(this.drc.dbMessengerList)\r\n    },\r\n    showMhaApplierConfig () {\r\n      return true\r\n      // return !this.hasAppliers(this.drc.dbMessengerList)\r\n    },\r\n    hasAppliers (dbApplierDtos) {\r\n      for (const x of dbApplierDtos) {\r\n        if (x.ips && x.ips.length > 0) {\r\n          return true\r\n        }\r\n      }\r\n      return false\r\n    },\r\n    submitConfig () {\r\n      const that = this\r\n      this.axios.post('/api/drc/v2/config/messenger/submitConfig', {\r\n        mhaName: this.drc.mhaName,\r\n        replicatorIps: this.drc.replicators,\r\n        messengerIps: this.drc.messengers,\r\n        aGtidExecuted: this.drc.aGtidExecuted,\r\n        rGtidExecuted: this.drc.rGtidExecuted\r\n      }).then(response => {\r\n        console.log(response.data)\r\n        if (response.data.status === 1) {\r\n          this.$Message.warning({\r\n            content: '提交失败：' + response.data.message,\r\n            duration: 10\r\n          })\r\n          return\r\n        }\r\n        that.result = response.data.data\r\n        that.drc.reviewModal = false\r\n        that.drc.resultModal = true\r\n      }).catch(message => {\r\n        this.$Message.error({\r\n          content: '提交异常: ' + message,\r\n          duration: 10\r\n        })\r\n      })\r\n    },\r\n    reviewConfigure () {\r\n      this.drc.reviewModal = true\r\n    }\r\n  },\r\n  created () {\r\n    this.getResources()\r\n    this.getResourcesInUse()\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./drcConfig.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./drcConfig.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./drcConfig.vue?vue&type=template&id=52326b2e&scoped=true&v-if=current%20%3D%3D%3D%200&%3Akey=0&\"\nimport script from \"./drcConfig.vue?vue&type=script&lang=js&\"\nexport * from \"./drcConfig.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"52326b2e\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('base-component',[_c('Breadcrumb',{style:({margin: '15px 0 15px 185px', position: 'fixed'})},[_c('BreadcrumbItem',{attrs:{\"to\":\"/home\"}},[_vm._v(\"首页\")]),_c('BreadcrumbItem',{attrs:{\"to\":\"/v2/dbMqBuildV2\"}},[_vm._v(\"DB粒度 Mq\")])],1),_c('Content',{staticClass:\"content\",style:({padding: '10px', background: '#ffffff', margin: '50px 0 111px 185px', zIndex: '1'})},[_c('Row',{attrs:{\"gutter\":10,\"align\":\"middle\"}},[_c('Col',{attrs:{\"span\":\"18\"}},[_c('Form',{staticStyle:{\"margin-right\":\"20px\",\"margin-top\":\"10px\"},attrs:{\"model\":_vm.formItem,\"label-width\":100}},[_c('FormItem',{attrs:{\"label\":\"数据库\",\"required\":true}},[_c('Select',{attrs:{\"filterable\":\"\",\"disabled\":!!_vm.meta.fixDb,\"placeholder\":\"请搜索数据库信息\",\"remote-method\":_vm.getExistDb,\"loading\":_vm.dataLoading},on:{\"on-change\":_vm.selectDb},model:{value:(_vm.meta.dbName),callback:function ($$v) {_vm.$set(_vm.meta, \"dbName\", $$v)},expression:\"meta.dbName\"}},_vm._l((_vm.meta.dbOptions),function(option,index){return _c('Option',{key:index,attrs:{\"value\":option.dbName}},[_vm._v(\" \"+_vm._s(option.dbName)+\" \")])}),1)],1),_c('FormItem',{attrs:{\"label\":\"同步方向\",\"required\":true}},[_c('RadioGroup',{attrs:{\"button-style\":\"solid\"},on:{\"on-change\":_vm.afterSelectExistReplication},model:{value:(_vm.selectedExistReplication),callback:function ($$v) {_vm.selectedExistReplication=$$v},expression:\"selectedExistReplication\"}},_vm._l((_vm.meta.existReplicationRegionOptions),function(items){return _c('Radio',{key:items.srcRegionName,attrs:{\"label\":items.srcRegionName,\"border\":\"\"}},[_vm._v(\" \"+_vm._s(items.srcRegionName)+\" \")])}),1),_c('Button',{attrs:{\"type\":\"primary\",\"icon\":\"md-add\",\"ghost\":\"\"},on:{\"click\":_vm.goToCreateReplication}},[_vm._v(\"新增\")]),_c('Modal',{attrs:{\"width\":\"1200px\",\"footer-hide\":true,\"title\":\"创建同步\"},model:{value:(_vm.createModal.open),callback:function ($$v) {_vm.$set(_vm.createModal, \"open\", $$v)},expression:\"createModal.open\"}},[(_vm.createModal.open)?_c('mha-preview',{attrs:{\"db-name\":_vm.meta.dbName,\"replication-type\":1,\"exist-replication-region-options\":_vm.meta.existReplicationRegionOptions},on:{\"updated\":_vm.selectDb}}):_vm._e()],1)],1),_c('Divider',{attrs:{\"orientation\":\"left\"}},[_vm._v(\"消息投递配置\")]),_c('Card',{staticStyle:{\"width\":\"100%\"}},[_c('mq-tables',{attrs:{\"table-data\":_vm.drcConfig.logicTableSummaryDtos,\"data-loading\":_vm.configDataLoading,\"src-region\":_vm.meta.srcRegionName,\"dst-region\":_vm.meta.dstRegionName,\"db-name\":_vm.meta.dbName,\"db-names\":_vm.drcConfig.dbNames},on:{\"updated\":_vm.getDrcConfig}})],1),_c('Divider',{attrs:{\"orientation\":\"left\"}},[_vm._v(\"DB\")]),_c('Card',{staticStyle:{\"width\":\"100%\"}},[(_vm.drcConfig.mhaMqDtos)?_c('mha-mq-panel',{attrs:{\"mha-mq-dtos\":_vm.drcConfig.mhaMqDtos},on:{\"updated\":_vm.getDrcConfig}}):_vm._e()],1)],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{style:({padding: '1px 1px',height: '100%'})},[_c('Table',{ref:\"multipleTable\",staticStyle:{\"margin-top\":\"20px\"},attrs:{\"stripe\":\"\",\"columns\":_vm.columns,\"data\":_vm.tableData,\"loading\":_vm.dataLoading,\"border\":\"\"},scopedSlots:_vm._u([{key:\"action\",fn:function(ref){\nvar row = ref.row;\nvar index = ref.index;\nreturn [_c('Button',{staticStyle:{\"margin-right\":\"5px\"},attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.goToUpdateConfig(row, index)}}},[_vm._v(\"修改 \")]),_c('Button',{staticStyle:{\"margin-right\":\"5px\"},attrs:{\"type\":\"error\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.goToDeleteConfig(row, index)}}},[_vm._v(\"删除 \")])]}}])}),_c('br'),_c('Button',{attrs:{\"type\":\"success\",\"icon\":\"md-add\"},on:{\"click\":_vm.goToInsertConfig}},[_vm._v(\" 新增 \")]),_c('Modal',{attrs:{\"width\":\"1200px\",\"footer-hide\":true,\"title\":_vm.actionTitle},model:{value:(_vm.editModal.open),callback:function ($$v) {_vm.$set(_vm.editModal, \"open\", $$v)},expression:\"editModal.open\"}},[(_vm.editModal.open)?_c('db-mq-config',{ref:\"dbReplicationConfigComponent\",attrs:{\"config-data\":_vm.selectedRow,\"src-region\":_vm.srcRegion,\"dst-region\":_vm.srcRegion,\"db-names\":_vm.dbNames,\"form-action\":_vm.action},on:{\"finished\":_vm.finishConfig}}):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{style:({padding: '1px 1px',height: '100%'})},[_c('Row',{attrs:{\"gutter\":10,\"align\":\"middle\"}},[_c('Col',{attrs:{\"span\":\"13\"}},[_c('Form',{staticStyle:{\"margin-right\":\"20px\",\"margin-top\":\"10px\"},attrs:{\"model\":_vm.formItem,\"disabled\":_vm.formAction === 'delete',\"label-width\":100}},[(_vm.alertInfo.show)?_c('Alert',{attrs:{\"type\":\"warning\",\"show-icon\":\"\",\"closable\":\"\"},scopedSlots:_vm._u([{key:\"desc\",fn:function(){return [_vm._v(_vm._s(_vm.alertInfo.message))]},proxy:true}],null,false,3041357252)},[_vm._v(\" \"+_vm._s(_vm.alertInfo.title)+\" \")]):_vm._e(),(_vm.alertInfo.successShow)?_c('Alert',{attrs:{\"type\":\"success\",\"show-icon\":\"\",\"closable\":\"\"},scopedSlots:_vm._u([{key:\"desc\",fn:function(){return [_vm._v(_vm._s(_vm.alertInfo.message))]},proxy:true}],null,false,3041357252)},[_vm._v(\" \"+_vm._s(_vm.alertInfo.title)+\" \")]):_vm._e(),_c('FormItem',{attrs:{\"label\":\"部门\"}},[_c('Select',{attrs:{\"filterable\":\"\",\"placeholder\":\"选择部门\"},model:{value:(_vm.formItem.bu),callback:function ($$v) {_vm.$set(_vm.formItem, \"bu\", $$v)},expression:\"formItem.bu\"}},_vm._l((_vm.formItem.constants.buForChosen),function(item){return _c('Option',{key:item,attrs:{\"value\":item}},[_vm._v(_vm._s(item))])}),1)],1),_c('FormItem',{attrs:{\"prop\":\"dbName\",\"label\":\"库名\",\"required\":true}},[_c('Input',{attrs:{\"type\":\"textarea\",\"autosize\":true,\"readonly\":true,\"border\":false,\"placeholder\":\"请输入库名（支持正则）\"},model:{value:(_vm.formItem.dbName),callback:function ($$v) {_vm.$set(_vm.formItem, \"dbName\", $$v)},expression:\"formItem.dbName\"}})],1),_c('FormItem',{attrs:{\"label\":\"同步表\",\"required\":true}},[_c('Input',{attrs:{\"placeholder\":\"请输入正则表达式\"},on:{\"on-keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"space\",32,$event.key,[\" \",\"Spacebar\"])){ return null; }$event.preventDefault();},\"on-blur\":_vm.afterEnterTableName},model:{value:(_vm.formItem.tableName),callback:function ($$v) {_vm.$set(_vm.formItem, \"tableName\", $$v)},expression:\"formItem.tableName\"}})],1),_c('FormItem',{attrs:{\"label\":\"MQ主题\"}},[_c('Input',{staticStyle:{\"width\":\"350px\"},attrs:{\"placeholder\":\"请输入自定义Topic\"},on:{\"on-blur\":_vm.refreshTopicBu},model:{value:(_vm.formItem.topic),callback:function ($$v) {_vm.$set(_vm.formItem, \"topic\", $$v)},expression:\"formItem.topic\"}})],1),_c('FormItem',{attrs:{\"label\":\"有序消息\"}},[_c('i-switch',{attrs:{\"size\":\"large\"},scopedSlots:_vm._u([{key:\"open\",fn:function(){return [_c('span',[_vm._v(\"On\")])]},proxy:true},{key:\"close\",fn:function(){return [_c('span',[_vm._v(\"Off\")])]},proxy:true}]),model:{value:(_vm.formItem.switch.order),callback:function ($$v) {_vm.$set(_vm.formItem.switch, \"order\", $$v)},expression:\"formItem.switch.order\"}})],1),(_vm.formItem.switch.order)?_c('Card',{staticStyle:{\"margin-left\":\"100px\"},scopedSlots:_vm._u([{key:\"title\",fn:function(){return [_c('Icon',{attrs:{\"type\":\"md-settings\"}}),_vm._v(\" 有序消息字段 \"),_c('Button',{staticStyle:{\"margin-left\":\"50px\"},attrs:{\"icon\":\"ios-refresh\",\"size\":\"small\",\"type\":\"primary\",\"loading\":_vm.commonColumnLoading},on:{\"click\":_vm.getCommonColumns}},[_vm._v(\"获取公共字段 \")])]},proxy:true}],null,false,4117777808)},[_c('FormItem',{attrs:{\"label\":\"字段\"}},[_c('Select',{staticStyle:{\"width\":\"200px\"},attrs:{\"filterable\":\"\",\"allow-create\":\"\",\"placeholder\":\"选择有序相关字段\"},on:{\"on-create\":_vm.handleCreateColumn},model:{value:(_vm.formItem.orderKey),callback:function ($$v) {_vm.$set(_vm.formItem, \"orderKey\", $$v)},expression:\"formItem.orderKey\"}},_vm._l((_vm.formItem.constants.columnsForChose),function(item){return _c('Option',{key:item,attrs:{\"value\":item}},[_vm._v(_vm._s(item))])}),1)],1)],1):_vm._e()],1)],1),_c('Col',{attrs:{\"span\":\"11\"}},[_c('db-tables-preview',{attrs:{\"src-region-name\":_vm.srcRegion,\"dst-region-name\":null,\"db-name\":_vm.formItem.dbName,\"table-names\":_vm.formItem.tableName,\"mode\":_vm.formItem.buildMode,\"replication-type\":Number(1)}})],1)],1),_c('Divider'),_c('Button',{staticStyle:{\"margin-left\":\"50px\"},attrs:{\"type\":_vm.buttonTypeMap.get(_vm.formAction),\"loading\":_vm.dataLoading || _vm.commonColumnLoading},on:{\"click\":_vm.submitAll}},[_vm._v(_vm._s(_vm.buttonTextMap.get(_vm.formAction))+\" \")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div :style=\"{padding: '1px 1px',height: '100%'}\">\r\n    <Row :gutter=10 align=\"middle\">\r\n      <Col span=\"13\">\r\n        <Form :model=\"formItem\" :disabled=\"formAction === 'delete'\" :label-width=\"100\"\r\n              style=\"margin-right: 20px;margin-top: 10px\">\r\n          <Alert type=\"warning\" show-icon v-if=\"alertInfo.show\" closable>\r\n            {{ alertInfo.title }}\r\n            <template #desc>{{ alertInfo.message }}</template>\r\n          </Alert>\r\n          <Alert type=\"success\" show-icon v-if=\"alertInfo.successShow\" closable>\r\n            {{ alertInfo.title }}\r\n            <template #desc>{{ alertInfo.message }}</template>\r\n          </Alert>\r\n          <FormItem label=\"部门\">\r\n            <Select v-model=\"formItem.bu\" filterable placeholder=\"选择部门\">\r\n              <Option v-for=\"item in formItem.constants.buForChosen\" :value=\"item\" :key=\"item\">{{ item }}</Option>\r\n            </Select>\r\n          </FormItem>\r\n          <FormItem prop=\"dbName\" label=\"库名\" :required=true>\r\n            <Input type=\"textarea\" v-model=\"formItem.dbName\" :autosize=\"true\" :readonly=\"true\" :border=\"false\"\r\n                   placeholder=\"请输入库名（支持正则）\"/>\r\n          </FormItem>\r\n          <FormItem label=\"同步表\" :required=true>\r\n            <Input @on-keydown.space.prevent v-model=\"formItem.tableName\" placeholder=\"请输入正则表达式\"\r\n                   @on-blur=\"afterEnterTableName\"></Input>\r\n          </FormItem>\r\n\r\n          <FormItem label=\"MQ主题\">\r\n            <Input v-model=\"formItem.topic\" style=\"width:350px\" placeholder=\"请输入自定义Topic\"\r\n                   @on-blur=\"refreshTopicBu\"\r\n            />\r\n          </FormItem>\r\n          <FormItem label=\"有序消息\">\r\n            <i-switch v-model=\"formItem.switch.order\" size=\"large\">\r\n              <template #open>\r\n                <span>On</span>\r\n              </template>\r\n              <template #close>\r\n                <span>Off</span>\r\n              </template>\r\n            </i-switch>\r\n          </FormItem>\r\n          <Card v-if=\"formItem.switch.order\" style=\"margin-left: 100px\">\r\n            <template #title>\r\n              <Icon type=\"md-settings\"/>\r\n              有序消息字段\r\n              <Button icon=\"ios-refresh\" size=\"small\" type=\"primary\" :loading=\"commonColumnLoading\"\r\n                      @click=\"getCommonColumns\" style=\"margin-left: 50px\">获取公共字段\r\n              </Button>\r\n            </template>\r\n            <FormItem label=\"字段\">\r\n              <Select v-model=\"formItem.orderKey\" filterable allow-create @on-create=\"handleCreateColumn\"\r\n                      style=\"width: 200px\" placeholder=\"选择有序相关字段\">\r\n                <Option v-for=\"item in formItem.constants.columnsForChose\" :value=\"item\" :key=\"item\">{{ item }}</Option>\r\n              </Select>\r\n            </FormItem>\r\n          </Card>\r\n        </Form>\r\n      </Col>\r\n      <Col span=\"11\">\r\n        <db-tables-preview :src-region-name=\"srcRegion\"\r\n                           :dst-region-name=\"null\"\r\n                           :db-name=\"formItem.dbName\"\r\n                           :table-names=\"formItem.tableName\"\r\n                           :mode=\"formItem.buildMode\"\r\n                           :replication-type=\"Number(1)\"\r\n        />\r\n      </Col>\r\n    </Row>\r\n    <Divider></Divider>\r\n    <Button :type=\"buttonTypeMap.get(formAction)\" @click=\"submitAll\" style=\"margin-left: 50px\"\r\n            :loading=\"dataLoading || commonColumnLoading\">{{\r\n        buttonTextMap.get(formAction)\r\n      }}\r\n    </Button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport DbTablesPreview from '@/components/v2/dbDrcBuild/dbTablesPreview.vue'\r\n\r\nexport default {\r\n  components: { DbTablesPreview },\r\n  FORM_ACTION_OPTION: {\r\n    CREATE: 'create',\r\n    EDIT: 'edit',\r\n    DELETE: 'delete'\r\n  },\r\n  name: 'dbMqConfig',\r\n  props: {\r\n    configData: {},\r\n    srcRegion: String,\r\n    dstRegion: String,\r\n    dbNames: Array,\r\n    formAction: String\r\n  },\r\n  emits: ['finished'],\r\n  data () {\r\n    return {\r\n      meta: {\r\n        rowsFilterId: null,\r\n        colsFilterId: null,\r\n        dbReplicationIds: [],\r\n        originLogicTableConfig: {}\r\n      },\r\n      formItem: {\r\n        bu: null,\r\n        buildMode: 2,\r\n        dbName: null,\r\n        tableName: null,\r\n        topic: null,\r\n        orderKey: null,\r\n        switch: {\r\n          order: false\r\n        },\r\n        constants: {\r\n          columnsForChose: [],\r\n          buForChosen: []\r\n        }\r\n      },\r\n      checkTableDataList: [],\r\n      table: {\r\n        dbMhaTableLoading: false,\r\n        dbMhaTableColumn: [\r\n          {\r\n            title: 'DB名',\r\n            key: 'dbName'\r\n          },\r\n          {\r\n            title: '源集群',\r\n            key: 'srcMhaName',\r\n            render: (h, params) => {\r\n              const row = params.row\r\n              const mha = row.srcMha\r\n              if (mha != null) {\r\n                return h('div', [\r\n                  h('span', mha.name),\r\n                  h('span', {\r\n                    style:\r\n                        {\r\n                          float: 'right',\r\n                          color: '#ababab'\r\n                        }\r\n                  }, mha.regionName + '(' + mha.dcName + ')')\r\n                ])\r\n              }\r\n            }\r\n          },\r\n          {\r\n            title: '目标集群',\r\n            key: 'dstMhaName',\r\n            render: (h, params) => {\r\n              const row = params.row\r\n              const mha = row.dstMha\r\n              if (mha != null) {\r\n                return h('div', [\r\n                  h('span', mha.name),\r\n                  h('span', {\r\n                    style:\r\n                        {\r\n                          float: 'right',\r\n                          color: '#ababab'\r\n                        }\r\n                  }, mha.regionName + '(' + mha.dcName + ')')\r\n                ])\r\n              }\r\n            }\r\n          }\r\n        ],\r\n        dbMhaTablePage: {\r\n          total: 0,\r\n          current: 1,\r\n          size: 5,\r\n          pageSizeOpts: [5, 10, 20, 100]\r\n        },\r\n        dbTableLoading: false,\r\n        dbTableColumn: [\r\n          {\r\n            title: '序号',\r\n            width: 75,\r\n            align: 'center',\r\n            fixed: 'left',\r\n            render: (h, params) => {\r\n              return h(\r\n                'span',\r\n                params.index + 1\r\n              )\r\n            }\r\n          },\r\n          {\r\n            title: '库名',\r\n            key: 'schema',\r\n            resizable: true\r\n          },\r\n          {\r\n            title: '表名',\r\n            key: 'table',\r\n            resizable: true\r\n          },\r\n          {\r\n            title: '结果',\r\n            align: 'center',\r\n            render: (h, params) => {\r\n              const row = params.row\r\n              const color = row.res !== 'ok' ? 'volcano' : 'green'\r\n              const text = row.res\r\n              return h('Tag', {\r\n                props: {\r\n                  color: color\r\n                }\r\n              }, text)\r\n            }\r\n          }\r\n        ],\r\n        dbTablePage: {\r\n          total: 0,\r\n          current: 1,\r\n          size: 5,\r\n          pageSizeOpts: [5, 10, 20, 100]\r\n        }\r\n      },\r\n      alertInfo: {\r\n        show: false,\r\n        successShow: false,\r\n        title: null,\r\n        message: null\r\n      },\r\n      buttonTextMap: new Map([\r\n        ['create', '新增 MQ投递'],\r\n        ['edit', '更新 MQ投递'],\r\n        ['delete', '删除 MQ投递']\r\n      ]),\r\n      buttonTypeMap: new Map([\r\n        ['create', 'success'],\r\n        ['edit', 'primary'],\r\n        ['delete', 'error']\r\n      ]),\r\n      dataLoading: false,\r\n      successSubmit: false,\r\n      commonColumnLoading: false\r\n    }\r\n  },\r\n  methods: {\r\n    getParams: function () {\r\n      const param = {}\r\n      param.buName = this.formItem.buName\r\n      param.tag = this.formItem.tag\r\n      param.mode = this.formItem.buildMode\r\n      param.srcRegionName = this.srcRegion\r\n      param.replicationType = 1\r\n\r\n      if (this.gtidConfigurable) {\r\n        param.gtidInit = this.formItem.gtidInit\r\n      }\r\n\r\n      param.tblsFilterDetail = {\r\n        tableNames: this.formItem.tableName\r\n      }\r\n      param.dbName = this.formItem.dbName\r\n      return param\r\n    },\r\n    getEditParams: function () {\r\n      const param = {}\r\n      param.dbReplicationIds = this.meta.dbReplicationIds\r\n      param.dbNames = this.dbNames\r\n      param.srcRegionName = this.srcRegion\r\n\r\n      param.logicTableConfig = {\r\n        logicTable: this.formItem.tableName,\r\n        dstLogicTable: this.formItem.topic\r\n      }\r\n      param.originLogicTableConfig = this.meta.originLogicTableConfig\r\n      param.mqConfig = {\r\n        bu: this.formItem.bu,\r\n        mqType: 'qmq',\r\n        // table: this.mqConfig.table,\r\n        // topic: this.mqConfig.topic,\r\n        serialization: 'json',\r\n        persistent: false,\r\n        order: this.formItem.switch.order,\r\n        orderKey: this.formItem.switch.orderKey === '' ? null : this.formItem.orderKey\r\n      }\r\n      console.log(param)\r\n      return param\r\n    },\r\n    async getCommonColumns () {\r\n      const params = this.getParams()\r\n      this.formItem.constants.columnsForChose = []\r\n      this.commonColumnLoading = true\r\n      await this.axios.get('/api/drc/v2/autoconfig/commonColumns', {\r\n        params: this.flattenObj(params)\r\n      }).then(response => {\r\n        if (response.data.status === 1) {\r\n          this.$Message.error('查询公共列名失败，请手动添加：' + response.data.message)\r\n        } else {\r\n          this.formItem.constants.columnsForChose = response.data.data\r\n          this.$Message.info('查询公共列名数：' + response.data.data.length)\r\n        }\r\n      }).catch(message => {\r\n        this.$Message.error('查询公共列名异常: ' + message)\r\n      }).finally(() => {\r\n        this.commonColumnLoading = false\r\n      })\r\n    },\r\n    handleCreateColumn (val) {\r\n      if (this.contains(this.formItem.constants.columnsForChose, val)) {\r\n        alert('已有项禁止创建')\r\n        return\r\n      }\r\n      if (val === '' || val === undefined || val === null) {\r\n        alert('字段不能为空')\r\n        return\r\n      }\r\n      this.formItem.constants.columnsForChose.push(val)\r\n    },\r\n    refreshTopicBu () {\r\n      if (this.formItem.topic) {\r\n        this.formItem.bu = this.formItem.topic.split('.')[0]\r\n      }\r\n    },\r\n    async afterEnterTableName () {\r\n      await this.getTableInfo()\r\n    },\r\n    flattenObj (ob) {\r\n      const result = {}\r\n      for (const i in ob) {\r\n        if ((typeof ob[i]) === 'object' && !Array.isArray(ob[i])) {\r\n          const temp = this.flattenObj(ob[i])\r\n          for (const j in temp) {\r\n            result[i + '.' + j] = temp[j]\r\n          }\r\n        } else {\r\n          result[i] = ob[i]\r\n        }\r\n      }\r\n      return result\r\n    },\r\n    async refresh () {\r\n      this.formItem.dbName = this.dbNames.join(',')\r\n      if (this.configData) {\r\n        console.log('edit panel ', JSON.stringify(this.configData))\r\n        this.formItem.tableName = this.configData.config.logicTable\r\n        this.formItem.topic = this.configData.config.dstLogicTable\r\n        this.formItem.orderKey = this.configData.orderKey\r\n        this.formItem.switch.order = this.configData.order\r\n        this.refreshTopicBu()\r\n        this.getCommonColumns()\r\n        this.meta.dbReplicationIds = this.configData.dbReplicationIds\r\n        this.meta.originLogicTableConfig = this.configData.config\r\n        this.meta.originMyConfig = this.configData.config\r\n      } else {\r\n        console.log('insert new config')\r\n      }\r\n    },\r\n    getBuListFromQmq () {\r\n      this.axios.get('/api/drc/v2/messenger/qmq/bus')\r\n        .then(response => {\r\n          if (response.data.status === 1) {\r\n            window.alert('从查询qmq 部门信息失败!')\r\n          } else {\r\n            this.formItem.constants.buForChosen = response.data.data\r\n          }\r\n        })\r\n    },\r\n    async submitAll () {\r\n      const that = this\r\n      that.alertInfo.show = false\r\n      that.alertInfo.successShow = false\r\n      that.successSubmit = false\r\n      const params = this.getEditParams()\r\n      // if (!this.checkParam(params)) {\r\n      //   return\r\n      // }\r\n      that.dataLoading = true\r\n      await that.axios.post('/api/drc/v2/autoconfig/dbMq/' + this.formAction, params)\r\n        .then(response => {\r\n          const data = response.data\r\n          const success = data.status === 0\r\n          if (success) {\r\n            that.$Message.success('提交成功')\r\n            that.successSubmit = true\r\n            that.alertInfo.successShow = true\r\n            that.alertInfo.message = null\r\n            that.alertInfo.title = '提交成功'\r\n            that.$emit('finished')\r\n          } else {\r\n            that.$Message.warning('提交失败: ' + data.message)\r\n            that.alertInfo.show = true\r\n            that.alertInfo.title = '提交失败'\r\n            that.alertInfo.message = data.message\r\n          }\r\n        })\r\n        .catch(message => {\r\n          that.$Message.error('提交异常: ' + message)\r\n        })\r\n        .finally(() => {\r\n          that.dataLoading = false\r\n        })\r\n    },\r\n    rowsFilterCreateParamInit () {\r\n      return {\r\n        mode: 1,\r\n        drcStrategyId: 2000000002,\r\n        routeStrategyId: 0,\r\n        udlColumns: [],\r\n        columns: [],\r\n        context: '',\r\n        illegalArgument: false,\r\n        fetchMode: 0\r\n      }\r\n    },\r\n    columnsFilterCreateParamInit () {\r\n      return {\r\n        mode: null,\r\n        columns: []\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    preCheckTablePage () {\r\n      const data = this.checkTableDataList\r\n      const start = this.table.dbTablePage.current * this.table.dbTablePage.size - this.table.dbTablePage.size\r\n      const end = start + this.table.dbTablePage.size\r\n      return [...data].slice(start, end)\r\n    },\r\n    useTripUdlOrUidMode () {\r\n      return [this.formItem.constants.rowsFilter.filterMode.TRIP_UDL, this.formItem.constants.rowsFilter.filterMode.TRIP_UDL_UID].includes(this.formItem.rowsFilterCreateParam.mode)\r\n    },\r\n    hasUdlColumn () {\r\n      return this.formItem.rowsFilterCreateParam.udlColumns.length !== 0\r\n    },\r\n    fillContextByRegion () {\r\n      return this.formItem.rowsFilterCreateParam.fetchMode === this.formItem.constants.rowsFilter.fetchMode.RPC\r\n    },\r\n    hasUidColumn () {\r\n      return this.formItem.rowsFilterCreateParam.columns.length !== 0\r\n    },\r\n    showUdlConfigDetail () {\r\n      return this.formItem.rowsFilterCreateParam.mode === this.formItem.constants.rowsFilter.filterMode.TRIP_UDL_UID || this.hasUdlLegalConfig || !this.hasUidLegalConfig\r\n    },\r\n    showUidConfigDetail () {\r\n      return this.formItem.rowsFilterCreateParam.mode === this.formItem.constants.rowsFilter.filterMode.TRIP_UDL_UID || this.hasUidLegalConfig || !this.hasUdlLegalConfig\r\n    },\r\n    hasUdlLegalConfig () {\r\n      return this.formItem.rowsFilterCreateParam.udlColumns.length !== 0 && this.formItem.rowsFilterCreateParam.drcStrategyId != null && this.formItem.rowsFilterCreateParam.drcStrategyId > 0\r\n    },\r\n    hasUidLegalConfig () {\r\n      return this.hasUidColumn\r\n    }\r\n  },\r\n  created () {\r\n    this.getBuListFromQmq()\r\n    this.refresh()\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dbMqConfig.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dbMqConfig.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./dbMqConfig.vue?vue&type=template&id=5740dbc0&scoped=true&\"\nimport script from \"./dbMqConfig.vue?vue&type=script&lang=js&\"\nexport * from \"./dbMqConfig.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5740dbc0\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div :style=\"{padding: '1px 1px',height: '100%'}\">\r\n    <Table style=\"margin-top: 20px\" stripe :columns=\"columns\" :data=\"tableData\" :loading=\"dataLoading\" border\r\n           ref=\"multipleTable\">\r\n      <template slot=\"action\" slot-scope=\"{ row, index }\">\r\n        <Button type=\"primary\" size=\"small\" style=\"margin-right: 5px\" @click=\"goToUpdateConfig(row, index)\">修改\r\n        </Button>\r\n        <Button type=\"error\" size=\"small\" style=\"margin-right: 5px\" @click=\"goToDeleteConfig(row, index)\">删除\r\n        </Button>\r\n      </template>\r\n    </Table>\r\n    <br/>\r\n    <Button type=\"success\" @click=\"goToInsertConfig\" icon=\"md-add\">\r\n      新增\r\n    </Button>\r\n    <Modal v-model=\"editModal.open\" width=\"1200px\" :footer-hide=\"true\" :title=\"actionTitle\">\r\n      <db-mq-config ref=\"dbReplicationConfigComponent\" @finished=\"finishConfig\"\r\n                             v-if=\"editModal.open\"\r\n                             :config-data=\"selectedRow\"\r\n                             :src-region=\"srcRegion\"\r\n                             :dst-region=\"srcRegion\"\r\n                             :db-names=\"dbNames\"\r\n                             :form-action=\"action\"\r\n      />\r\n    </Modal>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport DbMqConfig from '@/components/v2/dbDrcBuild/dbMqConfig.vue'\r\n\r\nexport default {\r\n  name: 'mqTables',\r\n  components: { DbMqConfig },\r\n  props: {\r\n    dbName: String,\r\n    dbNames: Array,\r\n    srcRegion: String,\r\n    dstRegion: String,\r\n    tableData: Array,\r\n    dataLoading: Boolean\r\n  },\r\n  emits: ['updated'],\r\n  data () {\r\n    return {\r\n      selectedRow: {},\r\n      action: null,\r\n      actionTitleMap: new Map([\r\n        ['create', '新增 MQ投递配置'],\r\n        ['edit', '更新 MQ投递配置'],\r\n        ['delete', '⚠️删除 MQ投递配置']\r\n      ]),\r\n      editModal: {\r\n        open: false\r\n      },\r\n      columns: [\r\n        {\r\n          title: '序号',\r\n          width: 75,\r\n          align: 'center',\r\n          fixed: 'left',\r\n          render: (h, params) => {\r\n            return h(\r\n              'span',\r\n              params.index + 1\r\n            )\r\n          }\r\n        },\r\n        {\r\n          title: '表名',\r\n          key: 'config.logicTable',\r\n          render: (h, params) => {\r\n            const config = params.row.config\r\n            return h(\r\n              'span',\r\n              config.logicTable\r\n            )\r\n          }\r\n        },\r\n        {\r\n          title: '主题',\r\n          key: 'topic',\r\n          render: (h, params) => {\r\n            const config = params.row.config\r\n            return h(\r\n              'span',\r\n              config.dstLogicTable\r\n            )\r\n          }\r\n        },\r\n        {\r\n          title: '有序',\r\n          key: 'order',\r\n          width: 100,\r\n          render: (h, params) => {\r\n            const row = params.row\r\n            const color = 'blue'\r\n            const text = row.order ? '有序' : '无序'\r\n            return h('Tag', {\r\n              props: {\r\n                color: color\r\n              }\r\n            }, text)\r\n          }\r\n        },\r\n        {\r\n          title: '有序相关字段',\r\n          key: 'orderKey'\r\n        },\r\n        {\r\n          title: '操作',\r\n          slot: 'action',\r\n          align: 'center',\r\n          fixed: 'right'\r\n        }\r\n      ]\r\n    }\r\n  },\r\n  methods: {\r\n    async goToInsertConfig () {\r\n      this.selectedRow = null\r\n      this.action = DbMqConfig.FORM_ACTION_OPTION.CREATE\r\n      this.editModal.open = true\r\n    },\r\n    async goToUpdateConfig (row, index) {\r\n      this.selectedRow = row\r\n      this.action = DbMqConfig.FORM_ACTION_OPTION.EDIT\r\n      this.editModal.open = true\r\n    },\r\n    async goToDeleteConfig (row, index) {\r\n      this.selectedRow = row\r\n      this.action = DbMqConfig.FORM_ACTION_OPTION.DELETE\r\n      this.editModal.open = true\r\n    },\r\n    finishConfig () {\r\n      this.selectedRow = null\r\n      this.editModal.open = false\r\n      this.$emit('updated')\r\n    }\r\n  },\r\n  computed: {\r\n    actionTitle () {\r\n      return this.actionTitleMap.get(this.action)\r\n    }\r\n  },\r\n  created () {\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mqTables.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mqTables.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./mqTables.vue?vue&type=template&id=0a816a41&scoped=true&\"\nimport script from \"./mqTables.vue?vue&type=script&lang=js&\"\nexport * from \"./mqTables.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0a816a41\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{style:({padding: '1px 1px',height: '100%'})},[_c('Collapse',{model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}},_vm._l((_vm.mhaMqDtos),function(mhaMqDto,index){return _c('Panel',{key:mhaMqDto.srcMha.name +'-> mq',attrs:{\"name\":String(index)},scopedSlots:_vm._u([{key:\"content\",fn:function(){return [_c('Button',{staticStyle:{\"margin-bottom\":\"10px\"},attrs:{\"icon\":\"ios-open-outline\"},on:{\"click\":function($event){return _vm.openModal(index)}}},[_vm._v(\" 打开详情\")]),_c('mha-db-mq-panel',{attrs:{\"mha-mq-dtos\":mhaMqDto}}),_c('Modal',{attrs:{\"width\":\"1500px\",\"footer-hide\":true},model:{value:(_vm.openDetailModal[index]),callback:function ($$v) {_vm.$set(_vm.openDetailModal, index, $$v)},expression:\"openDetailModal[index]\"}},[(_vm.openDetailModal[index])?_c('drc-config',{ref:\"dbReplicationConfigComponent\",refInFor:true,attrs:{\"mha-name\":mhaMqDto.srcMha.name,\"dc\":mhaMqDto.srcMha.dcName}}):_vm._e()],1)]},proxy:true}],null,true)},[_vm._v(\" \"+_vm._s(mhaMqDto.srcMha.name + ' ------ ' + ([mhaMqDto.mhaDbReplications.length] + 'DB'))+\" \")])}),1),_c('br'),_c('Button',{attrs:{\"type\":\"primary\",\"icon\":\"md-sync\"},on:{\"click\":_vm.goToSwitchAppliers}},[_vm._v(\" 切换Messenger生效配置 \")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(!_vm.mhaMqDtos.mhaMessengerDto)?_c('Table',{attrs:{\"stripe\":\"\",\"border\":\"\",\"columns\":_vm.columns,\"data\":_vm.mhaDbReplications}}):_vm._e(),(_vm.mhaMqDtos.mhaMessengerDto)?_c('Table',{attrs:{\"stripe\":\"\",\"border\":\"\",\"columns\":_vm.mhaColumns,\"data\":[_vm.mhaMqDtos]}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\r\n  <div>\r\n    <Table stripe border :columns=\"columns\" :data=\"mhaDbReplications\" v-if=\"!mhaMqDtos.mhaMessengerDto\">\r\n    </Table>\r\n    <Table stripe border :columns=\"mhaColumns\" :data=\"[mhaMqDtos]\" v-if=\"mhaMqDtos.mhaMessengerDto\">\r\n    </Table>\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport prettyMilliseconds from 'pretty-ms'\r\n\r\nexport default {\r\n  name: 'mhaDbMqPanel',\r\n  props: {\r\n    mhaMqDtos: {}\r\n  },\r\n  data () {\r\n    return {\r\n      mhaDbReplications: this.mhaMqDtos.mhaDbReplications,\r\n      value: ['1'],\r\n      delayDataLoading: false,\r\n      columns: [\r\n        {\r\n          title: '类型',\r\n          width: 80,\r\n          render: (h, params) => {\r\n            const row = params.row\r\n            let text = 'none'\r\n            let type = 'error'\r\n            let disabled = false\r\n            switch (row.transmissionType) {\r\n              case 'simplex':\r\n                text = '单'\r\n                type = 'info'\r\n                break\r\n              case 'duplex':\r\n                text = '双'\r\n                type = 'success'\r\n                break\r\n              default:\r\n                text = '无'\r\n                disabled = true\r\n                break\r\n            }\r\n            return h('Button', {\r\n              props: {\r\n                type: type,\r\n                size: 'small',\r\n                disabled: disabled\r\n              },\r\n              on: {\r\n                click: () => {\r\n                  this.showModal(row)\r\n                }\r\n              }\r\n            }, text)\r\n          }\r\n        },\r\n        {\r\n          title: '延迟',\r\n          key: 'drcStatus',\r\n          width: 100,\r\n          align: 'center',\r\n          renderHeader: (h, params) => {\r\n            return h('span', [\r\n              h('span', '延迟'),\r\n              this.replicationIds && this.replicationIds.length !== 0 && h('Button', {\r\n                on: {\r\n                  click: async () => {\r\n                    await this.getMhaMessengerDelay()\r\n                  }\r\n                },\r\n                props: {\r\n                  loading: this.delayDataLoading,\r\n                  size: 'small',\r\n                  shape: 'circle',\r\n                  type: 'default',\r\n                  icon: 'md-refresh'\r\n                }\r\n              })\r\n            ])\r\n          },\r\n          render: (h, params) => {\r\n            const row = params.row\r\n            let color, text\r\n            if (row.drcStatus === true) {\r\n              if (row.delay != null) {\r\n                text = prettyMilliseconds(row.delay, { compact: true })\r\n                if (row.delay > 10000) {\r\n                  color = 'warning'\r\n                } else {\r\n                  color = 'success'\r\n                }\r\n              } else {\r\n                text = '已接入'\r\n                color = 'blue'\r\n              }\r\n            } else {\r\n              text = '未接入'\r\n              color = 'default'\r\n            }\r\n            return h('Tag', {\r\n              props: {\r\n                color: color\r\n              }\r\n            }, text)\r\n          }\r\n        },\r\n        {\r\n          title: 'DB 名',\r\n          key: 'srcDbName',\r\n          render: (h, params) => {\r\n            return h('p', params.row.src.dbName)\r\n          }\r\n        },\r\n        {\r\n          title: 'messenger',\r\n          key: 'srcDbName',\r\n          render: (h, params) => {\r\n            return h('p', params.row.dbMessengerDto ? params.row.dbMessengerDto.ips.join(', ') : null)\r\n          }\r\n        }\r\n      ],\r\n      mhaColumns: [\r\n        {\r\n          title: '延迟',\r\n          key: 'drcStatus',\r\n          width: 100,\r\n          align: 'center',\r\n          renderHeader: (h, params) => {\r\n            return h('span', [\r\n              h('span', '延迟'),\r\n              this.mhaMqDtos.mhaMessengerDto.ips && h('Button', {\r\n                on: {\r\n                  click: async () => {\r\n                    await this.getMhaMessengerDelay()\r\n                  }\r\n                },\r\n                props: {\r\n                  loading: this.delayDataLoading,\r\n                  size: 'small',\r\n                  shape: 'circle',\r\n                  type: 'default',\r\n                  icon: 'md-refresh'\r\n                }\r\n              })\r\n            ])\r\n          },\r\n          render: (h, params) => {\r\n            const row = params.row\r\n            let color, text\r\n            if (row.mhaMessengerDto.ips) {\r\n              if (row.delay != null) {\r\n                text = prettyMilliseconds(row.delay, { compact: true })\r\n                if (row.delay > 10000) {\r\n                  color = 'warning'\r\n                } else {\r\n                  color = 'success'\r\n                }\r\n              } else {\r\n                text = '已接入'\r\n                color = 'blue'\r\n              }\r\n            } else {\r\n              text = '未接入'\r\n              color = 'default'\r\n            }\r\n            return h('Tag', {\r\n              props: {\r\n                color: color\r\n              }\r\n            }, text)\r\n          }\r\n        },\r\n        {\r\n          title: '类型',\r\n          width: 100,\r\n          key: '',\r\n          render: (h, params) => {\r\n            return h('p', 'mha 同步')\r\n          }\r\n        },\r\n        {\r\n          title: 'DB 名',\r\n          key: 'srcDbName',\r\n          render: (h, params) => {\r\n            return h('p', params.row.mhaDbReplications.map(item => item.src.dbName).join(','))\r\n          }\r\n        },\r\n        {\r\n          title: 'messenger',\r\n          key: '',\r\n          render: (h, params) => {\r\n            return h('p', params.row.mhaMessengerDto.ips.join(','))\r\n          }\r\n        },\r\n        {\r\n          title: 'initGtid',\r\n          key: '',\r\n          render: (h, params) => {\r\n            return h('p', params.row.mhaMessengerDto.gtidInit)\r\n          }\r\n        }\r\n      ]\r\n    }\r\n  },\r\n  methods: {\r\n    showModal (row) {\r\n      this.$Message.info('还未上线，敬请期待')\r\n    },\r\n    async getMhaMessengerDelay () {\r\n      const param = {\r\n        mhas: this.mhaMqDtos.srcMha.name,\r\n        dbs: this.mhaMqDtos.mhaDbReplications.map(item => item.src.dbName).join(',')\r\n      }\r\n      this.delayDataLoading = true\r\n      this.axios.get('/api/drc/v2/messenger/delay', { params: param })\r\n        .then(response => {\r\n          const delays = response.data.data[0].delayInfoDto.delay\r\n          this.$set(this.mhaMqDtos, 'delay', delays)\r\n        })\r\n        .catch(message => {\r\n          console.log(message)\r\n          // this.$Message.error('查询 MHA 延迟异常: ' + message)\r\n        })\r\n        .finally(() => {\r\n          this.delayDataLoading = false\r\n        })\r\n    }\r\n  },\r\n  computed: {\r\n    replicationIds () {\r\n      return this.mhaDbReplications\r\n        .filter(item => item.drcStatus === true)\r\n        .map(item => item.id)\r\n        .join(',')\r\n    }\r\n  },\r\n  created () {\r\n    this.getMhaMessengerDelay()\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mhaDbMqPanel.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mhaDbMqPanel.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./mhaDbMqPanel.vue?vue&type=template&id=8ef54f68&scoped=true&\"\nimport script from \"./mhaDbMqPanel.vue?vue&type=script&lang=js&\"\nexport * from \"./mhaDbMqPanel.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8ef54f68\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div :style=\"{padding: '1px 1px',height: '100%'}\">\r\n    <Collapse v-model=\"value\">\r\n      <Panel v-for=\"(mhaMqDto, index) in mhaMqDtos\"\r\n             :key=\"mhaMqDto.srcMha.name +'-> mq'\"\r\n             :name=\"String(index)\">\r\n        {{ mhaMqDto.srcMha.name + ' ------ ' + ([mhaMqDto.mhaDbReplications.length] + 'DB') }}\r\n        <template #content>\r\n          <Button icon=\"ios-open-outline\" @click=\"openModal(index)\" style=\"margin-bottom: 10px\"> 打开详情</Button>\r\n          <mha-db-mq-panel :mha-mq-dtos=\"mhaMqDto\"/>\r\n              <Modal v-model=\"openDetailModal[index]\" width=\"1500px\" :footer-hide=\"true\">\r\n                <drc-config ref=\"dbReplicationConfigComponent\" v-if=\"openDetailModal[index]\"\r\n                              :mha-name=\"mhaMqDto.srcMha.name\"\r\n                              :dc=\"mhaMqDto.srcMha.dcName\"\r\n                />\r\n              </Modal>\r\n        </template>\r\n      </Panel>\r\n    </Collapse>\r\n    <br/>\r\n    <Button type=\"primary\" @click=\"goToSwitchAppliers\" icon=\"md-sync\">\r\n      切换Messenger生效配置\r\n    </Button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport MhaDbMqPanel from '@/components/v2/dbDrcBuild/mhaDbMqPanel.vue'\r\nimport DrcConfig from '@/components/v2/mhaMessengers/drcConfig.vue'\r\n\r\nexport default {\r\n  name: 'mhaMqPanel',\r\n  components: { DrcConfig, MhaDbMqPanel },\r\n  props: {\r\n    mhaMqDtos: Array\r\n  },\r\n  emits: ['updated'],\r\n  data () {\r\n    return {\r\n      value: [],\r\n      openDetailModal: [],\r\n      dataLoading: false\r\n    }\r\n  },\r\n  methods: {\r\n    openModal (index) {\r\n      this.$set(this.openDetailModal, index, true)\r\n    },\r\n    goToSwitchAppliers () {\r\n      this.$Modal.confirm({\r\n        title: '切换Messenger',\r\n        content: '<p>请确认</p>',\r\n        loading: true,\r\n        onOk: () => {\r\n          this.switchMessengers()\r\n        }\r\n      })\r\n    },\r\n    switchMessengers () {\r\n      const params = this.getSwitchParams()\r\n      console.log(params)\r\n      this.dataLoading = true\r\n      this.axios.post('/api/drc/v2/autoconfig/switchMessengers', params)\r\n        .then(response => {\r\n          const data = response.data\r\n          const success = data.status === 0\r\n          if (success) {\r\n            this.$Message.success('提交成功')\r\n          } else {\r\n            this.$Message.warning('提交失败: ' + data.message)\r\n          }\r\n        })\r\n        .catch(message => {\r\n          this.$Message.error('提交异常: ' + message)\r\n        })\r\n        .finally(() => {\r\n          this.$Modal.remove()\r\n          this.dataLoading = false\r\n          this.$emit('updated')\r\n        })\r\n    },\r\n    getSwitchParams () {\r\n      return this.mhaMqDtos.map((item) => {\r\n        return {\r\n          srcMhaName: item.srcMha.name,\r\n          dbNames: item.mhaDbReplications.map((mhaDbReplication) => {\r\n            return mhaDbReplication.src.dbName\r\n          })\r\n        }\r\n      })\r\n    }\r\n  },\r\n  created () {\r\n    console.log('mhaMqDtos', this.mhaMqDtos)\r\n    this.openDetailModal = Array(this.mhaMqDtos.length).fill(false)\r\n    if (this.mhaMqDtos.length === 1) {\r\n      this.value = ['0']\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mhaMqPanel.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mhaMqPanel.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./mhaMqPanel.vue?vue&type=template&id=f7709c88&scoped=true&\"\nimport script from \"./mhaMqPanel.vue?vue&type=script&lang=js&\"\nexport * from \"./mhaMqPanel.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f7709c88\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <base-component>\r\n    <Breadcrumb :style=\"{margin: '15px 0 15px 185px', position: 'fixed'}\">\r\n      <BreadcrumbItem to=\"/home\">首页</BreadcrumbItem>\r\n      <BreadcrumbItem to=\"/v2/dbMqBuildV2\">DB粒度 Mq</BreadcrumbItem>\r\n    </Breadcrumb>\r\n    <Content class=\"content\"\r\n             :style=\"{padding: '10px', background: '#ffffff', margin: '50px 0 111px 185px', zIndex: '1'}\">\r\n      <Row :gutter=10 align=\"middle\">\r\n        <Col span=\"18\">\r\n          <Form :model=\"formItem\" :label-width=\"100\" style=\"margin-right: 20px;margin-top: 10px\">\r\n            <FormItem label=\"数据库\" :required=true>\r\n              <Select\r\n                v-model=\"meta.dbName\"\r\n                filterable\r\n                :disabled=\"!!meta.fixDb\"\r\n                placeholder=\"请搜索数据库信息\"\r\n                @on-change=\"selectDb\"\r\n                :remote-method=\"getExistDb\"\r\n                :loading=\"dataLoading\">\r\n                <Option v-for=\"(option, index) in meta.dbOptions\" :value=\"option.dbName\" :key=\"index\">\r\n                  {{ option.dbName }}\r\n                </Option>\r\n              </Select>\r\n            </FormItem>\r\n            <FormItem label=\"同步方向\" :required=true>\r\n              <RadioGroup v-model=\"selectedExistReplication\" button-style=\"solid\"\r\n                          @on-change=\"afterSelectExistReplication\">\r\n                <Radio v-for=\"items in meta.existReplicationRegionOptions\"\r\n                       :key=\"items.srcRegionName\"\r\n                       :label=\"items.srcRegionName\" border>\r\n                  {{ items.srcRegionName  }}\r\n                </Radio>\r\n              </RadioGroup>\r\n              <Button type=\"primary\" icon=\"md-add\" ghost @click=\"goToCreateReplication\">新增</Button>\r\n              <Modal v-model=\"createModal.open\" width=\"1200px\" :footer-hide=\"true\" title=\"创建同步\">\r\n                <mha-preview v-if=\"createModal.open\" :db-name=\"meta.dbName\" :replication-type=1 @updated=\"selectDb\"\r\n                             :exist-replication-region-options=\"meta.existReplicationRegionOptions\"></mha-preview>\r\n              </Modal>\r\n            </FormItem>\r\n            <Divider orientation=\"left\">消息投递配置</Divider>\r\n            <Card style=\"width:100%\">\r\n              <mq-tables :table-data=\"drcConfig.logicTableSummaryDtos\" :data-loading=\"configDataLoading\"\r\n                      :src-region=\"meta.srcRegionName\" :dst-region=\"meta.dstRegionName\" :db-name=\"meta.dbName\"\r\n                      :db-names=\"drcConfig.dbNames\" @updated=\"getDrcConfig\"\r\n              />\r\n            </Card>\r\n            <Divider orientation=\"left\">DB</Divider>\r\n            <Card style=\"width:100%\">\r\n              <mha-mq-panel v-if=\"drcConfig.mhaMqDtos\" :mha-mq-dtos=\"drcConfig.mhaMqDtos\"  @updated=\"getDrcConfig\"/>\r\n            </Card>\r\n          </Form>\r\n        </Col>\r\n      </Row>\r\n    </Content>\r\n  </base-component>\r\n</template>\r\n<script>\r\n\r\nimport MhaPreview from '@/components/v2/dbDrcBuild/mhaPreview.vue'\r\nimport MqTables from '@/components/v2/dbDrcBuild/mqTables.vue'\r\nimport MhaMqPanel from '@/components/v2/dbDrcBuild/mhaMqPanel.vue'\r\n\r\nexport default {\r\n  components: { MhaMqPanel, MqTables, MhaPreview },\r\n  data () {\r\n    return {\r\n      createModal: {\r\n        open: false\r\n      },\r\n      dataLoading: false,\r\n      configDataLoading: false,\r\n      selectedExistReplication: this.$route.query.srcRegionName,\r\n      formItem: {\r\n        srcRegionName: null,\r\n        dstRegionName: null\r\n      },\r\n      drcConfig: {},\r\n      meta: {\r\n        dbName: this.$route.query.dbName,\r\n        srcRegionName: this.$route.query.srcRegionName,\r\n        dstRegionName: this.$route.query.dstRegionName,\r\n        fixDb: this.$route.query.fixDb,\r\n        regionOptions: [],\r\n        dbOptions: [],\r\n        existReplicationRegionOptions: []\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    getParams: function () {\r\n      const param = {}\r\n      param.dbName = this.meta.dbName\r\n      param.srcRegionName = this.meta.srcRegionName\r\n      param.dstRegionName = this.meta.dstRegionName\r\n      return param\r\n    },\r\n    async getExistDb (dbName) {\r\n      if (dbName === null || dbName.length === null || dbName.length <= 0) {\r\n        return []\r\n      }\r\n      const that = this\r\n      that.dataLoading = true\r\n      await that.axios.get('/api/drc/v2/autoconfig/getExistDb', {\r\n        params: {\r\n          dbName: dbName\r\n        }\r\n      })\r\n        .then(response => {\r\n          const data = response.data.data\r\n          if (data) {\r\n            that.meta.dbOptions = data\r\n          } else {\r\n            that.$Message.warning('查询DB失败')\r\n          }\r\n        })\r\n        .catch(message => {\r\n          that.$Message.error('查询DB异常: ' + message)\r\n        })\r\n        .finally(() => {\r\n          that.dataLoading = false\r\n        })\r\n    },\r\n    async selectDb () {\r\n      await this.getExistReplicationRegionOptions()\r\n      await this.getDrcConfig()\r\n    },\r\n    async getDrcConfig () {\r\n      this.createModal.open = false\r\n      this.resetPath()\r\n      const params = this.getParams()\r\n      this.drcConfig = {}\r\n      if (!params.dbName) {\r\n        this.$Message.warning('请先填写数据库')\r\n        return\r\n      }\r\n      if (!params.srcRegionName) {\r\n        return\r\n      }\r\n      this.configDataLoading = true\r\n      await this.axios.get('/api/drc/v2/autoconfig/getDbMqConfig', {\r\n        params: {\r\n          dbName: params.dbName,\r\n          srcRegionName: params.srcRegionName\r\n        }\r\n      })\r\n        .then(response => {\r\n          const data = response.data.data\r\n          const success = data && response.data.status === 0\r\n          if (success) {\r\n            this.drcConfig = data\r\n            this.$Message.success('查询DRC配置成功 ')\r\n          } else {\r\n            this.$Message.warning('查询失败：' + response.data.message)\r\n          }\r\n        })\r\n        .catch(message => {\r\n          this.$Message.error('查询异常: ' + message)\r\n        })\r\n        .finally(() => {\r\n          this.configDataLoading = false\r\n        })\r\n    },\r\n    async afterSelectExistReplication () {\r\n      console.log('afterSelectExistReplication ', this.selectedExistReplication)\r\n      this.meta.srcRegionName = this.selectedExistReplication.trim()\r\n      this.getDrcConfig()\r\n    },\r\n    async getExistReplicationRegionOptions () {\r\n      const that = this\r\n      that.dataLoading = true\r\n      that.meta.existReplicationRegionOptions = []\r\n      const params = this.getParams()\r\n      await that.axios.get('/api/drc/v2/autoconfig/getExistDbMqConfigDcOption', {\r\n        params: {\r\n          dbName: params.dbName\r\n        }\r\n      })\r\n        .then(response => {\r\n          const data = response.data.data\r\n          const success = data && response.data.status === 0\r\n          if (success) {\r\n            that.meta.existReplicationRegionOptions = data\r\n            if (that.meta.existReplicationRegionOptions.length > 0) {\r\n              that.$Message.success('查询到 ' + that.meta.existReplicationRegionOptions.length + ' 个可选同步方向')\r\n            }\r\n          } else {\r\n            that.meta.srcRegionName = null\r\n            that.meta.dstRegionName = null\r\n            that.$Message.warning('查询可选地域失败')\r\n          }\r\n        })\r\n        .catch(message => {\r\n          that.$Message.error('查询可选地域失败: ' + message)\r\n        })\r\n        .finally(() => {\r\n          that.dataLoading = false\r\n        })\r\n    },\r\n    async goToCreateReplication () {\r\n      this.createModal.open = true\r\n    },\r\n    resetPath () {\r\n      this.$router.replace({\r\n        query: {\r\n          dbName: this.meta.dbName,\r\n          srcRegionName: this.meta.srcRegionName,\r\n          dstRegionName: this.meta.dstRegionName,\r\n          fixDb: this.meta.fixDb\r\n        }\r\n        // eslint-disable-next-line handle-callback-err\r\n      }).catch(() => {\r\n      })\r\n    },\r\n    flattenObj (ob) {\r\n      const result = {}\r\n      for (const i in ob) {\r\n        if ((typeof ob[i]) === 'object' && !Array.isArray(ob[i])) {\r\n          const temp = this.flattenObj(ob[i])\r\n          for (const j in temp) {\r\n            result[i + '.' + j] = temp[j]\r\n          }\r\n        } else {\r\n          result[i] = ob[i]\r\n        }\r\n      }\r\n      return result\r\n    }\r\n  },\r\n  computed: {},\r\n  created () {\r\n    // this.getRegions()\r\n    this.axios.get('/api/drc/v2/permission/meta/mhaReplication/modify').then((response) => {\r\n      if (response.data.status === 403) {\r\n        this.$router.push('/nopermission')\r\n        return\r\n      }\r\n      if (this.meta.dbName) {\r\n        this.getExistReplicationRegionOptions()\r\n        this.getDrcConfig()\r\n      }\r\n    })\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n.drawer-footer {\r\n  width: 100%;\r\n  bottom: 0;\r\n  left: 0;\r\n  border-top: 1px solid #e8e8e8;\r\n  padding: 10px 16px;\r\n  text-align: right;\r\n  background: #fff;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dbMqBuildV2.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dbMqBuildV2.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./dbMqBuildV2.vue?vue&type=template&id=8c98b646&\"\nimport script from \"./dbMqBuildV2.vue?vue&type=script&lang=js&\"\nexport * from \"./dbMqBuildV2.vue?vue&type=script&lang=js&\"\nimport style0 from \"./dbMqBuildV2.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}