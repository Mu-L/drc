(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0bfed7"],{4038:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("base-component",{attrs:{isFather:e.isFather,subMenuName:["1"],fatherMenu:e.fatherMenu}},[a("Breadcrumb",{style:{margin:"15px 0 15px 185px",position:"fixed"}},[a("BreadcrumbItem",{attrs:{to:"/home"}},[e._v("首页")]),a("BreadcrumbItem",{attrs:{to:"/incrementDataConsistencyResult"}},[e._v("校验结果")]),a("BreadcrumbItem",{attrs:{to:"/incrementDataConsistencyCluster"}},[e._v("校验集群")]),a("BreadcrumbItem",[e._v("校验配置")])],1),a("Content",{staticClass:"content",style:{padding:"10px",background:"#fff",margin:"50px 0 1px 185px",zIndex:"1"}},[a("div",{staticStyle:{padding:"1px 1px"}},[a("div",{staticClass:"ivu-list-item-meta-title"},[a("p",[e._v("DRC集群："+e._s(e.$route.query.clusterA)+"(集群A)---"+e._s(e.$route.query.clusterB)+"(集群B)")])]),a("Table",{attrs:{stripe:"",columns:e.columns,data:e.dataWithPage}}),a("div",{staticStyle:{"text-align":"center",margin:"16px 0"}},[a("Page",{attrs:{transfer:!0,total:e.tables.length,current:e.current,"show-sizer":"","show-elevator":""},on:{"update:current":function(t){e.current=t},"on-page-size-change":e.handleChangeSize}})],1)],1)])],1)},o=[],i=a("2909"),s=(a("fb6a"),{name:"consistencyMonitorConfig",data:function(){var e=this;return{isFather:!0,fatherMenu:"/incrementDataConsistencyResult",confirmAddTableModal:!1,resultConfirmAddTableModal:!1,confirmAddTableResult:"",addTableStatus:"",addTableSMsg:"",commitItem:{monitorTableName:"",monitorTableKey:"",monitorTableOnUpdate:""},confirmDeleteTableModal:!1,resultConfirmDeleteTableModal:!1,confirmDeleteTableResult:"",deleteTableStatus:"",deleteTableSMsg:"",commitDeleteItem:{monitorTableName:"",monitorTableKey:"",monitorTableOnUpdate:""},deleteIndex:0,tables:[],current:1,size:10,columns:[{title:"序号",width:75,align:"center",render:function(t,a){return t("span",a.index+1+(e.current-1)*e.size)}},{title:"库名",key:"monitorSchemaName"},{title:"表名",key:"monitorTableName"},{title:"key",width:100,key:"monitorTableKey",align:"center"},{title:"onUpdate",key:"monitorTableOnUpdate",align:"center"},{title:"操作",key:"monitorSwitch",width:200,align:"center",render:function(t,a){var n=a.row;return t("i-switch",{props:{size:"large",value:1===n.monitorSwitch},scopedSlots:{open:function(){return t("span","开启")},close:function(){return t("span","关闭")}},on:{"on-change":function(){e.switchDataConsistencyMonitor(n)}}})}},{title:"校验结果",align:"center",render:function(t,a){return t("div",[t("Button",{props:{type:"info",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.showCheckResult(a.row)}}},"查看")])}}]}},computed:{dataWithPage:function(){var e=this.tables,t=this.current*this.size-this.size,a=t+this.size;return Object(i["a"])(e).slice(t,a)}},methods:{handleDataConsistencyAdd:function(){this.tables.push({monitorTableName:"",monitorTableKey:"",monitorTableOnUpdate:"",status:0})},handleDataConsistencyAddCommit:function(e){this.confirmAddTableModal=!0,this.commitItem.monitorTableName=e.monitorTableName,this.commitItem.monitorTableKey=e.monitorTableKey,this.commitItem.monitorTableOnUpdate=e.monitorTableOnUpdate},okHandleDataConsistencyAddCommit:function(){var e=this;this.axios.post("/api/drc/v1/monitor/consistency/data/"+this.$route.query.clusterA+"/"+this.$route.query.clusterB,{table:e.commitItem.monitorTableName,key:e.commitItem.monitorTableKey,onUpdate:e.commitItem.monitorTableOnUpdate}).then((function(t){console.log("add result"),console.log(t.data),0===t.data.status?(e.addTableStatus="success",e.addTableSMsg=t.data.message):(e.addTableStatus="error",e.addTableSMsg=t.data.data.message)})),this.resultConfirmAddTableModal=!0},cancelHandleDataConsistencyAddCommit:function(){this.confirmAddTableModal=!1},okAddTableResult:function(){this.$router.go(0),this.confirmAddTableModal=!1,this.resultConfirmAddTableModal=!1},handleDataConsistencyDeleteCommit:function(e){this.confirmDeleteTableModal=!0,this.commitDeleteItem.monitorTableName=e.monitorTableName,this.commitDeleteItem.monitorTableKey=e.monitorTableKey,this.commitDeleteItem.monitorTableOnUpdate=e.monitorTableOnUpdate,this.deleteIndex=e.id},okHandleDataConsistencyDeleteCommit:function(){var e=this;this.axios.delete("/api/drc/v1/monitor/consistency/data/"+this.deleteIndex).then((function(t){console.log(t.data),0===t.data.status?(e.deleteTableStatus="success",e.deleteTableSMsg=t.data.message):(e.deleteTableStatus="error",e.deleteTableSMsg=t.data.data.message)})),this.resultConfirmDeleteTableModal=!0},cancelHandleDataConsistencyDeleteCommit:function(){this.confirmDeleteTableModal=!1},okDeleteTableResult:function(){this.$router.go(0),this.confirmDeleteTableModal=!1,this.resultConfirmDeleteTableModal=!1},getConfiguredTables:function(){var e=this;this.axios.get("/api/drc/v1/monitor/consistency/data/"+this.$route.query.clusterA+"/"+this.$route.query.clusterB).then((function(t){e.tables=t.data.data,console.log(t.data)}))},handleChangeSize:function(e){this.size=e},switchDataConsistencyMonitor:function(e){var t=this,a=0===e.monitorSwitch?"on":"off";this.axios.post("/api/drc/v1/monitor/consistency/switches/"+a,[{srcMha:t.$route.query.clusterA,dstMha:t.$route.query.clusterB,schema:e.monitorSchemaName,table:e.monitorTableName,key:e.monitorTableKey,onUpdate:e.monitorTableOnUpdate}]).then((function(t){console.log("show result"),console.log(t.data),0===t.data.status&&(e.monitorSwitch=1-e.monitorSwitch)}))},showCheckResult:function(e){this.$router.push({name:"incrementDataConsistencyResult"})}},created:function(){this.getConfiguredTables()}}),r=s,l=a("2877"),c=Object(l["a"])(r,n,o,!1,null,"e8b2e880",null);t["default"]=c.exports}}]);
//# sourceMappingURL=chunk-2d0bfed7.3e50b736.js.map