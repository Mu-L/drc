{"version":3,"sources":["webpack:///./src/views/v2/meta/dbMqBuildV2.vue?84a8","webpack:///./src/components/v2/mhaMessengers/drcMqConfig.vue?bd8a","webpack:///src/components/v2/mhaMessengers/drcMqConfig.vue","webpack:///./src/components/v2/mhaMessengers/drcMqConfig.vue?adb6","webpack:///./src/components/v2/mhaMessengers/drcMqConfig.vue","webpack:///./node_modules/core-js/modules/es.array.find.js","webpack:///./src/views/v2/meta/dbMqBuildV2.vue?a9f2","webpack:///./src/components/v2/dbDrcBuild/mqTables.vue?bb1c","webpack:///./src/components/v2/dbDrcBuild/dbMqConfig.vue?510e","webpack:///src/components/v2/dbDrcBuild/dbMqConfig.vue","webpack:///./src/components/v2/dbDrcBuild/dbMqConfig.vue?7c07","webpack:///./src/components/v2/dbDrcBuild/dbMqConfig.vue","webpack:///src/components/v2/dbDrcBuild/mqTables.vue","webpack:///./src/components/v2/dbDrcBuild/mqTables.vue?bef5","webpack:///./src/components/v2/dbDrcBuild/mqTables.vue","webpack:///./src/components/v2/dbDrcBuild/mhaMqPanel.vue?2832","webpack:///./src/components/v2/dbDrcBuild/mhaDbMqPanel.vue?4255","webpack:///src/components/v2/dbDrcBuild/mhaDbMqPanel.vue","webpack:///./src/components/v2/dbDrcBuild/mhaDbMqPanel.vue?ed76","webpack:///./src/components/v2/dbDrcBuild/mhaDbMqPanel.vue","webpack:///src/components/v2/dbDrcBuild/mhaMqPanel.vue","webpack:///./src/components/v2/dbDrcBuild/mhaMqPanel.vue?87a4","webpack:///./src/components/v2/dbDrcBuild/mhaMqPanel.vue","webpack:///src/views/v2/meta/dbMqBuildV2.vue","webpack:///./src/views/v2/meta/dbMqBuildV2.vue?fdca","webpack:///./src/views/v2/meta/dbMqBuildV2.vue?8d32"],"names":["render","_vm","this","_h","$createElement","_c","_self","ref","staticStyle","attrs","drc","model","value","callback","$$v","$set","expression","key","currentInstances","replicator","_l","item","ip","_v","_s","az","getRole","on","autoConfigReplicator","showMhaApplierConfig","messenger","type","autoConfigMessenger","_e","queryMhaMachineGtid","testSuccess1","queryMhaGtidCheckRes","goToMqConfigs","showDbMhaApplierConfig","getMhaDbMessenger","$event","handleReset","preCheckConfigure","submitConfig","minRows","maxRows","result","reviewConfigure","directives","name","rawName","domProps","target","composing","replicators","gtidCheck","resVo","staticRenderFns","props","mhaName","String","dc","data","hasTest1","modal","mha","legal","configGtid","purgedGtid","reviewModal","warnModal","rGtidExecuted","aGtidExecuted","messengers","replicatorList","messengerList","dbMessengerSwitch","dbMessengerList","methods","axios","get","refreshReplicatorInstances","params","ips","join","console","log","instances","refreshMessengerInstances","getResourcesInUse","$router","push","path","query","$refs","resetFields","replicatorIps","messengerIps","preCheckRes","status","window","alert","that","$Message","warning","hasAppliers","length","post","response","resultModal","content","message","duration","created","getResources","component","$","$find","find","addToUnscopables","arrayMethodUsesToLength","FIND","SKIPS_HOLES","USES_TO_LENGTH","Array","proto","forced","callbackfn","arguments","undefined","style","margin","position","staticClass","padding","background","zIndex","formItem","meta","fixDb","getExistDb","dataLoading","selectDb","option","index","dbName","afterSelectExistReplication","selectedExistReplication","items","srcRegionName","goToCreateReplication","createModal","existReplicationRegionOptions","drcConfig","logicTableSummaryDtos","configDataLoading","dstRegionName","dbNames","getDrcConfig","mhaMqDtos","height","columns","tableData","scopedSlots","_u","fn","row","goToUpdateConfig","goToDeleteConfig","goToInsertConfig","actionTitle","editModal","selectedRow","srcRegion","action","filterReadOnly","finishConfig","formAction","alertInfo","proxy","title","constants","indexOf","_k","keyCode","preventDefault","afterEnterTableName","refreshTopicBu","label","switch","commonColumnLoading","getCommonColumns","handleCreateColumn","tableName","buildMode","Number","buttonTypeMap","submitAll","buttonTextMap","components","FORM_ACTION_OPTION","CREATE","EDIT","DELETE","configData","dstRegion","Boolean","emits","rowsFilterId","colsFilterId","dbReplicationIds","originLogicTableConfig","bu","topic","orderKey","excludeFilterTypes","order","columnsForChose","buForChosen","checkTableDataList","table","dbMhaTableLoading","dbMhaTableColumn","dbMhaTablePage","total","current","size","pageSizeOpts","dbTableLoading","dbTableColumn","dbTablePage","show","successShow","Map","successSubmit","excludeFilterTypesForChose","getParams","param","buName","tag","mode","replicationType","gtidConfigurable","gtidInit","tblsFilterDetail","tableNames","getEditParams","logicTableConfig","logicTable","dstLogicTable","mqConfig","mqType","serialization","persistent","contains","val","split","flattenObj","i","ob","j","temp","getBuListFromQmq","rowsFilterCreateParamInit","drcStrategyId","routeStrategyId","udlColumns","context","illegalArgument","fetchMode","columnsFilterCreateParamInit","computed","preCheckTablePage","useTripUdlOrUidMode","rowsFilter","filterMode","TRIP_UDL","TRIP_UDL_UID","includes","rowsFilterCreateParam","hasUdlColumn","fillContextByRegion","RPC","hasUidColumn","showUdlConfigDetail","hasUdlLegalConfig","hasUidLegalConfig","showUidConfigDetail","refresh","actionTitleMap","open","$emit","mhaMqDto","srcMha","openModal","openDetailModal","refInFor","dcName","mhaDbReplications","goToSwitchMessengers","mhaMessengerDto","mhaColumns","delayDataLoading","showModal","info","replicationIds","getMhaMessengerDelay","$Modal","confirm","loading","onOk","switchMessengers","getSwitchParams","map","srcMhaName","mhaDbReplication","src","fill","$route","regionOptions","dbOptions","resetPath","replace","then"],"mappings":"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","file":"js/chunk-7b9171d6.5667c61d.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dbMqBuildV2.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Row',[_c('Form',{ref:\"drc1\",staticStyle:{\"float\":\"left\",\"margin-top\":\"50px\"},attrs:{\"model\":_vm.drc,\"label-width\":250}},[_c('FormItem',{staticStyle:{\"width\":\"600px\"},attrs:{\"label\":\"集群名\",\"prop\":\"mhaName\"}},[_c('Input',{attrs:{\"readonly\":\"\",\"placeholder\":\"请输入集群名\"},model:{value:(_vm.drc.mhaName),callback:function ($$v) {_vm.$set(_vm.drc, \"mhaName\", $$v)},expression:\"drc.mhaName\"}})],1),_c('FormItem',{attrs:{\"label\":\"选择Replicator\",\"prop\":\"replicator\"}},[_c('Select',{key:_vm.drc.currentInstances.replicator,staticStyle:{\"width\":\"300px\"},attrs:{\"multiple\":\"\",\"placeholder\":\"选择Replicator\"},model:{value:(_vm.drc.replicators),callback:function ($$v) {_vm.$set(_vm.drc, \"replicators\", $$v)},expression:\"drc.replicators\"}},_vm._l((_vm.drc.replicatorList),function(item){return _c('Option',{key:item.ip,attrs:{\"value\":item.ip}},[_vm._v(_vm._s(item.ip)+\" — \"+_vm._s(item.az)+\" \"+_vm._s(_vm.getRole(item.ip, _vm.drc.currentInstances.replicator))+\" \")])}),1),_vm._v(\"   \"),_c('Button',{attrs:{\"type\":\"success\"},on:{\"click\":_vm.autoConfigReplicator}},[_vm._v(\"自动录入\")])],1),(_vm.showMhaApplierConfig())?_c('FormItem',{attrs:{\"label\":\"选择Messenger\",\"prop\":\"messenger\"}},[_c('Select',{key:_vm.drc.currentInstances.messenger,staticStyle:{\"width\":\"300px\"},attrs:{\"multiple\":\"\",\"placeholder\":\"选择集群Messenger\"},model:{value:(_vm.drc.messengers),callback:function ($$v) {_vm.$set(_vm.drc, \"messengers\", $$v)},expression:\"drc.messengers\"}},_vm._l((_vm.drc.messengerList),function(item){return _c('Option',{key:item.ip,attrs:{\"value\":item.ip}},[_vm._v(_vm._s(item.ip)+\" [\"+_vm._s(item.type === 1 ? 'A' : (item.type === 7 ? 'M' : ''))+\"] — \"+_vm._s(item.az)+\" \"+_vm._s(_vm.getRole(item.ip, _vm.drc.currentInstances.messenger))+\" \")])}),1),_vm._v(\"   \"),_c('Button',{attrs:{\"type\":\"success\"},on:{\"click\":_vm.autoConfigMessenger}},[_vm._v(\"自动录入\")])],1):_vm._e(),_c('FormItem',{staticStyle:{\"width\":\"600px\"},attrs:{\"label\":\"初始拉取位点R\"}},[_c('Input',{attrs:{\"placeholder\":\"变更replicator机器时，请输入binlog拉取位点\"},model:{value:(_vm.drc.rGtidExecuted),callback:function ($$v) {_vm.$set(_vm.drc, \"rGtidExecuted\", $$v)},expression:\"drc.rGtidExecuted\"}}),_c('Row',[_c('Col',{attrs:{\"span\":\"12\"}},[_c('Button',{on:{\"click\":_vm.queryMhaMachineGtid}},[_vm._v(\"查询mha位点\")]),(_vm.hasTest1)?_c('span',[_c('Icon',{attrs:{\"type\":_vm.testSuccess1 ? 'ios-checkmark-circle' : 'ios-close-circle',\"color\":_vm.testSuccess1 ? 'green' : 'red'}}),_vm._v(\" \"+_vm._s(_vm.testSuccess1 ? '查询实时位点成功' : '连接查询失败')+\" \")],1):_vm._e()],1),_c('Col',{attrs:{\"span\":\"12\"}},[_c('Button',{attrs:{\"type\":\"success\"},on:{\"click\":_vm.queryMhaGtidCheckRes}},[_vm._v(\"位点校验\")])],1)],1)],1),_c('FormItem',{staticStyle:{\"width\":\"600px\"},attrs:{\"label\":\"mq配置\"}},[_c('Button',{attrs:{\"type\":\"primary\",\"ghost\":\"\"},on:{\"click\":_vm.goToMqConfigs}},[_vm._v(\"mq配置\")])],1),(_vm.showDbMhaApplierConfig())?_c('FormItem',{staticStyle:{\"width\":\"600px\"},attrs:{\"label\":\"DB Applier 配置\"}},[_c('Button',{attrs:{\"type\":\"primary\",\"ghost\":\"\"},on:{\"click\":_vm.getMhaDbMessenger}},[_vm._v(\"Db Applier 管理\")])],1):_vm._e(),(_vm.showMhaApplierConfig())?_c('FormItem',{staticStyle:{\"width\":\"600px\"},attrs:{\"label\":\"初始同步位点A\"}},[_c('Input',{attrs:{\"placeholder\":\"请输入DRC同步起始位点\"},model:{value:(_vm.drc.aGtidExecuted),callback:function ($$v) {_vm.$set(_vm.drc, \"aGtidExecuted\", $$v)},expression:\"drc.aGtidExecuted\"}})],1):_vm._e()],1)],1),_c('Form',{staticStyle:{\"margin-top\":\"50px\"},attrs:{\"label-width\":250}},[_c('FormItem',[_c('Row',[_c('Col',{attrs:{\"span\":\"6\"}},[_c('Button',{on:{\"click\":function($event){return _vm.handleReset('drc1')}}},[_vm._v(\"重置\")])],1),_c('Col',{attrs:{\"span\":\"6\"}},[_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.preCheckConfigure ()}}},[_vm._v(\"提交\")])],1)],1)],1),_c('Modal',{attrs:{\"title\":\"确认配置信息\",\"width\":\"900px\"},on:{\"on-ok\":_vm.submitConfig},model:{value:(_vm.drc.reviewModal),callback:function ($$v) {_vm.$set(_vm.drc, \"reviewModal\", $$v)},expression:\"drc.reviewModal\"}},[_c('Form',{staticStyle:{\"width\":\"80%\"}},[_c('FormItem',{attrs:{\"label\":\"集群名\"}},[_c('Input',{attrs:{\"type\":\"textarea\",\"autosize\":{minRows: 1,maxRows: 30},\"readonly\":\"\"},model:{value:(_vm.drc.mhaName),callback:function ($$v) {_vm.$set(_vm.drc, \"mhaName\", $$v)},expression:\"drc.mhaName\"}})],1),_c('FormItem',{attrs:{\"label\":\"集群Replicator\"}},[_c('Input',{attrs:{\"type\":\"textarea\",\"autosize\":{minRows: 1,maxRows: 30},\"readonly\":\"\"},model:{value:(_vm.drc.replicators),callback:function ($$v) {_vm.$set(_vm.drc, \"replicators\", $$v)},expression:\"drc.replicators\"}})],1),_c('FormItem',{attrs:{\"label\":\"集群Messenger\"}},[_c('Input',{attrs:{\"type\":\"textarea\",\"autosize\":{minRows: 1,maxRows: 30},\"readonly\":\"\"},model:{value:(_vm.drc.messengers),callback:function ($$v) {_vm.$set(_vm.drc, \"messengers\", $$v)},expression:\"drc.messengers\"}})],1),_c('FormItem',{attrs:{\"label\":\"新增Replicator的新增binlog拉取位点\"}},[_c('Input',{attrs:{\"type\":\"textarea\",\"autosize\":{minRows: 1,maxRows: 30},\"readonly\":\"\"},model:{value:(_vm.drc.rGtidExecuted),callback:function ($$v) {_vm.$set(_vm.drc, \"rGtidExecuted\", $$v)},expression:\"drc.rGtidExecuted\"}})],1),_c('FormItem',{attrs:{\"label\":\"Messenger集群的起始位点\"}},[_c('Input',{attrs:{\"type\":\"textarea\",\"autosize\":{minRows: 1,maxRows: 30},\"readonly\":\"\"},model:{value:(_vm.drc.aGtidExecuted),callback:function ($$v) {_vm.$set(_vm.drc, \"aGtidExecuted\", $$v)},expression:\"drc.aGtidExecuted\"}})],1)],1)],1),_c('Modal',{attrs:{\"title\":\"配置结果\",\"width\":\"1200px\"},model:{value:(_vm.drc.resultModal),callback:function ($$v) {_vm.$set(_vm.drc, \"resultModal\", $$v)},expression:\"drc.resultModal\"}},[_c('Form',{staticStyle:{\"width\":\"100%\"}},[_c('FormItem',{attrs:{\"label\":\"集群配置\"}},[_c('Input',{attrs:{\"type\":\"textarea\",\"autosize\":{minRows: 1,maxRows: 30},\"readonly\":\"\"},model:{value:(_vm.result),callback:function ($$v) {_vm.result=$$v},expression:\"result\"}})],1)],1)],1),_c('Modal',{attrs:{\"title\":\"存在一对多共用运行配置请确认\",\"width\":\"900px\"},on:{\"on-ok\":_vm.reviewConfigure},model:{value:(_vm.drc.warnModal),callback:function ($$v) {_vm.$set(_vm.drc, \"warnModal\", $$v)},expression:\"drc.warnModal\"}},[_c('label',{staticStyle:{\"color\":\"black\"}},[_vm._v(\"共用replicator配置的集群: \")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.drc.conflictMha),expression:\"drc.conflictMha\"}],domProps:{\"value\":(_vm.drc.conflictMha)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.drc, \"conflictMha\", $event.target.value)}}}),_c('Divider'),_c('div',[_c('p',{staticStyle:{\"color\":\"red\"}},[_vm._v(\"线上一对多replicator配置\")]),_c('ul',_vm._l((_vm.drc.replicators.share),function(item){return _c('ol',{key:item},[_vm._v(_vm._s(item))])}),0)]),_c('Divider'),_c('div',[_c('p',{staticStyle:{\"color\":\"black\"}},[_vm._v(\"修改后replicator配置\")]),_c('ul',_vm._l((_vm.drc.replicators.conflictCurrent),function(item){return _c('ol',{key:item},[_vm._v(_vm._s(item))])}),0)])],1),_c('Modal',{attrs:{\"title\":\"gitd位点校验结果\",\"width\":\"900px\"},model:{value:(_vm.gtidCheck.modal),callback:function ($$v) {_vm.$set(_vm.gtidCheck, \"modal\", $$v)},expression:\"gtidCheck.modal\"}},[_c('Form',{staticStyle:{\"width\":\"80%\"}},[_c('FormItem',{attrs:{\"label\":\"校验结果\"}},[_c('Input',{attrs:{\"type\":\"textarea\",\"autosize\":{minRows: 1,maxRows: 30},\"readonly\":\"\"},model:{value:(_vm.gtidCheck.resVo.legal),callback:function ($$v) {_vm.$set(_vm.gtidCheck.resVo, \"legal\", $$v)},expression:\"gtidCheck.resVo.legal\"}})],1),_c('FormItem',{attrs:{\"label\":\"当前Mha\"}},[_c('Input',{attrs:{\"autosize\":{minRows: 1,maxRows: 30},\"readonly\":\"\"},model:{value:(_vm.gtidCheck.resVo.mha),callback:function ($$v) {_vm.$set(_vm.gtidCheck.resVo, \"mha\", $$v)},expression:\"gtidCheck.resVo.mha\"}})],1),_c('FormItem',{attrs:{\"label\":\"配置位点\"}},[_c('Input',{attrs:{\"type\":\"textarea\",\"autosize\":{minRows: 1,maxRows: 30},\"readonly\":\"\"},model:{value:(_vm.gtidCheck.resVo.configGtid),callback:function ($$v) {_vm.$set(_vm.gtidCheck.resVo, \"configGtid\", $$v)},expression:\"gtidCheck.resVo.configGtid\"}})],1),_c('FormItem',{attrs:{\"label\":\"purgedGtid\"}},[_c('Input',{attrs:{\"type\":\"textarea\",\"autosize\":{minRows: 1,maxRows: 30},\"readonly\":\"\"},model:{value:(_vm.gtidCheck.resVo.purgedGtid),callback:function ($$v) {_vm.$set(_vm.gtidCheck.resVo, \"purgedGtid\", $$v)},expression:\"gtidCheck.resVo.purgedGtid\"}})],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template v-if=\"current === 0\" :key=\"0\">\r\n  <div>\r\n    <Row>\r\n      <Form ref=\"drc1\" :model=\"drc\" :label-width=\"250\" style=\"float: left; margin-top: 50px\">\r\n        <FormItem label=\"集群名\" prop=\"mhaName\" style=\"width: 600px\">\r\n          <Input v-model=\"drc.mhaName\" readonly placeholder=\"请输入集群名\"/>\r\n        </FormItem>\r\n        <FormItem label=\"选择Replicator\" prop=\"replicator\">\r\n          <Select v-model=\"drc.replicators\" multiple style=\"width: 300px\" :key=\"drc.currentInstances.replicator\"  placeholder=\"选择Replicator\">\r\n            <Option v-for=\"item in drc.replicatorList\" :value=\"item.ip\" :key=\"item.ip\">{{ item.ip }} — {{ item.az}}\r\n              {{getRole(item.ip, drc.currentInstances.replicator)}}\r\n            </Option>\r\n          </Select>\r\n          &nbsp;\r\n          <Button type=\"success\" @click=\"autoConfigReplicator\">自动录入</Button>\r\n        </FormItem>\r\n        <FormItem  v-if=\"showMhaApplierConfig()\" label=\"选择Messenger\" prop=\"messenger\">\r\n          <Select v-model=\"drc.messengers\" multiple style=\"width: 300px\" :key=\"drc.currentInstances.messenger\" placeholder=\"选择集群Messenger\">\r\n            <Option v-for=\"item in drc.messengerList\" :value=\"item.ip\" :key=\"item.ip\">{{ item.ip }}  [{{ item.type === 1 ? 'A' : (item.type === 7 ? 'M' : '') }}] — {{ item.az }}\r\n              {{getRole(item.ip, drc.currentInstances.messenger)}}\r\n            </Option>\r\n          </Select>\r\n          &nbsp;\r\n          <Button type=\"success\" @click=\"autoConfigMessenger\">自动录入</Button>\r\n        </FormItem>\r\n        <FormItem label=\"初始拉取位点R\" style=\"width: 600px\">\r\n          <Input v-model=\"drc.rGtidExecuted\" placeholder=\"变更replicator机器时，请输入binlog拉取位点\"/>\r\n          <Row>\r\n            <Col span=\"12\">\r\n              <Button @click=\"queryMhaMachineGtid\">查询mha位点</Button>\r\n              <span v-if=\"hasTest1\">\r\n                  <Icon :type=\"testSuccess1 ? 'ios-checkmark-circle' : 'ios-close-circle'\"\r\n                        :color=\"testSuccess1 ? 'green' : 'red'\"/>\r\n                    {{ testSuccess1 ? '查询实时位点成功' : '连接查询失败' }}\r\n                </span>\r\n            </Col>\r\n            <Col span=\"12\">\r\n              <Button type=\"success\" @click=\"queryMhaGtidCheckRes\">位点校验</Button>\r\n            </Col>\r\n          </Row>\r\n        </FormItem>\r\n        <FormItem label=\"mq配置\" style=\"width: 600px\">\r\n          <Button type=\"primary\" ghost @click=\"goToMqConfigs\">mq配置</Button>\r\n        </FormItem>\r\n        <FormItem v-if=\"showDbMhaApplierConfig()\" label=\"DB Applier 配置\"  style=\"width: 600px\">\r\n          <Button type=\"primary\" ghost @click=\"getMhaDbMessenger\">Db Applier 管理</Button>\r\n        </FormItem>\r\n        <FormItem v-if=\"showMhaApplierConfig()\"  label=\"初始同步位点A\" style=\"width: 600px\">\r\n          <Input v-model=\"drc.aGtidExecuted\" placeholder=\"请输入DRC同步起始位点\"/>\r\n        </FormItem>\r\n        <!--      <FormItem label=\"行过滤\" style=\"width: 600px\">-->\r\n        <!--        <Button type=\"primary\" ghost @click=\"goToConfigRowsFiltersInSrcApplier\">配置行过滤</Button>-->\r\n        <!--      </FormItem>-->\r\n      </Form>\r\n    </Row>\r\n    <Form :label-width=\"250\" style=\"margin-top: 50px\">\r\n      <FormItem>\r\n        <Row>\r\n          <Col span=\"6\">\r\n            <Button @click=\"handleReset('drc1')\">重置</Button>\r\n          </Col>\r\n          <Col span=\"6\">\r\n            <Button type=\"primary\" @click=\"preCheckConfigure ()\">提交</Button>\r\n          </Col>\r\n        </Row>\r\n      </FormItem>\r\n      <Modal\r\n        v-model=\"drc.reviewModal\"\r\n        title=\"确认配置信息\"\r\n        width=\"900px\"\r\n        @on-ok=\"submitConfig\">\r\n        <Form style=\"width: 80%\">\r\n          <FormItem label=\"集群名\">\r\n            <Input type=\"textarea\" :autosize=\"{minRows: 1,maxRows: 30}\" v-model=\"drc.mhaName\" readonly/>\r\n          </FormItem>\r\n          <FormItem label=\"集群Replicator\">\r\n            <Input type=\"textarea\" :autosize=\"{minRows: 1,maxRows: 30}\" v-model=\"drc.replicators\" readonly/>\r\n          </FormItem>\r\n          <FormItem label=\"集群Messenger\">\r\n            <Input type=\"textarea\" :autosize=\"{minRows: 1,maxRows: 30}\" v-model=\"drc.messengers\" readonly/>\r\n          </FormItem>\r\n          <FormItem label=\"新增Replicator的新增binlog拉取位点\">\r\n            <Input type=\"textarea\" :autosize=\"{minRows: 1,maxRows: 30}\" v-model=\"drc.rGtidExecuted\" readonly/>\r\n          </FormItem>\r\n          <FormItem label=\"Messenger集群的起始位点\">\r\n            <Input type=\"textarea\" :autosize=\"{minRows: 1,maxRows: 30}\" v-model=\"drc.aGtidExecuted\" readonly/>\r\n          </FormItem>\r\n        </Form>\r\n      </Modal>\r\n      <Modal\r\n        v-model=\"drc.resultModal\"\r\n        title=\"配置结果\"\r\n        width=\"1200px\">\r\n        <Form style=\"width: 100%\">\r\n          <FormItem label=\"集群配置\">\r\n            <Input type=\"textarea\" :autosize=\"{minRows: 1,maxRows: 30}\" v-model=\"result\" readonly/>\r\n          </FormItem>\r\n        </Form>\r\n      </Modal>\r\n      <!--             v-model=\"drc.warnModal\"-->\r\n      <Modal\r\n        v-model=\"drc.warnModal\"\r\n        title=\"存在一对多共用运行配置请确认\"\r\n        width=\"900px\"\r\n        @on-ok=\"reviewConfigure\">\r\n        <label style=\"color: black\">共用replicator配置的集群: </label>\r\n        <input v-model=\"drc.conflictMha\"></input>\r\n        <Divider/>\r\n        <div>\r\n          <p style=\"color: red\">线上一对多replicator配置</p>\r\n          <ul>\r\n            <ol v-for=\"item in drc.replicators.share\" :key=\"item\">{{ item }}</ol>\r\n          </ul>\r\n        </div>\r\n        <Divider/>\r\n        <div>\r\n          <p style=\"color: black\">修改后replicator配置</p>\r\n          <ul>\r\n            <ol v-for=\"item in drc.replicators.conflictCurrent\" :key=\"item\">{{ item }}</ol>\r\n          </ul>\r\n        </div>\r\n      </Modal>\r\n      <Modal\r\n        v-model=\"gtidCheck.modal\"\r\n        title=\"gitd位点校验结果\"\r\n        width=\"900px\">\r\n        <Form style=\"width: 80%\">\r\n          <FormItem label=\"校验结果\">\r\n            <Input type=\"textarea\" :autosize=\"{minRows: 1,maxRows: 30}\" v-model=\"gtidCheck.resVo.legal\" readonly/>\r\n          </FormItem>\r\n          <FormItem label=\"当前Mha\">\r\n            <Input :autosize=\"{minRows: 1,maxRows: 30}\" v-model=\"gtidCheck.resVo.mha\" readonly/>\r\n          </FormItem>\r\n          <FormItem label=\"配置位点\">\r\n            <Input type=\"textarea\" :autosize=\"{minRows: 1,maxRows: 30}\" v-model=\"gtidCheck.resVo.configGtid\" readonly/>\r\n          </FormItem>\r\n          <FormItem label=\"purgedGtid\">\r\n            <Input type=\"textarea\" :autosize=\"{minRows: 1,maxRows: 30}\" v-model=\"gtidCheck.resVo.purgedGtid\" readonly/>\r\n          </FormItem>\r\n        </Form>\r\n      </Modal>\r\n    </Form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'drcMqConfig',\r\n  props: {\r\n    mhaName: String,\r\n    dc: String\r\n  },\r\n  data () {\r\n    return {\r\n      hasTest1: false,\r\n      testSuccess1: false,\r\n      result: false,\r\n      gtidCheck: {\r\n        modal: false,\r\n        resVo: {\r\n          mha: '',\r\n          legal: '',\r\n          configGtid: '',\r\n          purgedGtid: ''\r\n        }\r\n      },\r\n      drc: {\r\n        reviewModal: false,\r\n        warnModal: false,\r\n        mhaName: this.mhaName,\r\n        rGtidExecuted: '',\r\n        aGtidExecuted: '',\r\n        replicators: {},\r\n        messengers: [],\r\n        currentInstances: {\r\n          messenger: [],\r\n          replicator: []\r\n        },\r\n        replicatorList: {},\r\n        messengerList: [],\r\n        dbMessengerSwitch: false,\r\n        dbMessengerList: []\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    autoConfigReplicator () {\r\n      this.axios.get('/api/drc/v2/resource/mha/auto?mhaName=' + this.drc.mhaName + '&type=0' + '&selectedIps=' + this.drc.replicators)\r\n        .then(response => {\r\n          console.log(response.data)\r\n          this.drc.replicators = []\r\n          response.data.data.forEach(ip => this.drc.replicators.push(ip.ip))\r\n        })\r\n    },\r\n    autoConfigMessenger () {\r\n      this.axios.get('/api/drc/v2/resource/mha/auto?mhaName=' + this.drc.mhaName + '&type=7' + '&selectedIps=' + this.drc.messengers)\r\n        .then(response => {\r\n          console.log(response.data)\r\n          this.drc.messengers = []\r\n          response.data.data.forEach(ip => this.drc.messengers.push(ip.ip))\r\n        })\r\n    },\r\n    async getResources () {\r\n      this.drc.messengerList = []\r\n      this.axios.get('/api/drc/v2/resource/mha/all?mhaName=' + this.drc.mhaName + '&type=0')\r\n        .then(response => {\r\n          console.log(response.data)\r\n          this.drc.replicatorList = response.data.data\r\n        })\r\n      await this.axios.get('/api/drc/v2/resource/mha/all?mhaName=' + this.drc.mhaName + '&type=7')\r\n        .then(response => {\r\n          const applierData = response.data.data\r\n          applierData.forEach(a => {\r\n            const existItem = this.drc.messengerList.find(existing => existing.ip === a.ip)\r\n            if (!existItem) {\r\n              this.drc.messengerList.push(a)\r\n            }\r\n          })\r\n          // this.drc.messengerList = { ...this.drc.messengerList, ...response.data.data }\r\n        })\r\n      this.axios.get('/api/drc/v2/config/mha/dbMessenger?mhaName=' + this.drc.mhaName + '&type=1')\r\n        .then(response => {\r\n          this.drc.dbMessengerList = response.data.data\r\n        })\r\n    },\r\n    refreshReplicatorInstances () {\r\n      this.axios.get('/api/drc/v2/remote/resource/replicatorInstances', {\r\n        params: {\r\n          mhaName: this.drc.mhaName,\r\n          ips: this.drc.replicators.join(',')\r\n        }\r\n      }).then(response => {\r\n        const instances = response.data.data\r\n        console.log('replicator instance: ', instances)\r\n        this.drc.currentInstances.replicator = instances\r\n      })\r\n    },\r\n    refreshMessengerInstances () {\r\n      this.axios.get('/api/drc/v2/remote/resource/messengerInstances', {\r\n        params: {\r\n          mhaName: this.drc.mhaName,\r\n          ips: this.drc.messengers.join(',')\r\n        }\r\n      }).then(response => {\r\n        const instances = response.data.data\r\n        console.log('messenger instance: ', instances)\r\n        this.drc.currentInstances.messenger = instances\r\n      })\r\n    },\r\n    getResourcesInUse () {\r\n      this.axios.get('/api/drc/v2/mha/replicator', { params: { mhaName: this.drc.mhaName } })\r\n        .then(response => {\r\n          console.log(this.drc.mhaName + ' replicators ' + response.data.data)\r\n          this.drc.replicators = []\r\n          response.data.data.forEach(ip => this.drc.replicators.push(ip))\r\n          this.refreshReplicatorInstances()\r\n        })\r\n      this.axios.get('/api/drc/v2/mha/messenger', { params: { mhaName: this.drc.mhaName } })\r\n        .then(response => {\r\n          const messengerDto = response.data.data\r\n          console.log(this.drc.mhaName + ' messengers ' + messengerDto)\r\n          this.drc.messengers = messengerDto.ips\r\n          this.drc.aGtidExecuted = messengerDto.gtidInit\r\n          this.refreshMessengerInstances()\r\n        })\r\n    },\r\n    goToMqConfigs () {\r\n      console.log('go to change mq config for ' + this.drc.mhaName)\r\n      this.$router.push({ path: '/v2/mqConfigs', query: { mhaName: this.drc.mhaName } })\r\n    },\r\n    getMhaDbMessenger () {\r\n      this.$router.push({\r\n        path: '/dbMessengers',\r\n        query: {\r\n          mhaName: this.drc.mhaName\r\n        }\r\n      })\r\n    },\r\n    handleReset (name) {\r\n      this.$refs[name].resetFields()\r\n    },\r\n    preCheckConfigure () {\r\n      const params = {\r\n        mhaName: this.drc.mhaName,\r\n        replicatorIps: this.drc.replicators.join(','),\r\n        messengerIps: this.drc.messengers.join(',')\r\n      }\r\n      console.log(params)\r\n      this.axios.get('/api/drc/v2/mha/replicatorIps/check', {\r\n        params: params\r\n      }).then(response => {\r\n        const preCheckRes = response.data.data\r\n        if (preCheckRes.status === 0) {\r\n          // 无风险继续\r\n          this.drc.reviewModal = true\r\n        } else if (preCheckRes.status === 1) {\r\n          // 有风险，进入确认页面\r\n          this.drc.replicators.share = preCheckRes.workingReplicatorIps\r\n          this.drc.replicators.conflictCurrent = this.drc.replicators\r\n          this.drc.conflictMha = preCheckRes.conflictMha\r\n          this.drc.warnModal = true\r\n        } else {\r\n          // 响应失败\r\n          window.alert('config preCheck fail')\r\n        }\r\n      })\r\n    },\r\n    queryMhaMachineGtid () {\r\n      this.hasTest1 = false\r\n      this.drc.rGtidExecuted = ''\r\n      const that = this\r\n      console.log('/api/drc/v2/mha/gtid/executed?mha=' + this.drc.mhaName)\r\n      that.axios.get('/api/drc/v2/mha/gtid/executed?mha=' + this.drc.mhaName)\r\n        .then(response => {\r\n          this.hasTest1 = true\r\n          if (response.data.status === 0) {\r\n            this.drc.rGtidExecuted = response.data.data\r\n            this.testSuccess1 = true\r\n          } else {\r\n            this.testSuccess1 = false\r\n            this.$Message.warning('查询位点失败: ' + response.data.message)\r\n          }\r\n        })\r\n        .catch(message => {\r\n          this.$Message.error('查询位点异常: ' + message)\r\n        })\r\n    },\r\n    queryMhaGtidCheckRes () {\r\n      if (this.drc.rGtidExecuted == null || this.drc.rGtidExecuted === '') {\r\n        this.$Message.warning('位点为空！')\r\n        return\r\n      }\r\n      const that = this\r\n      console.log('/api/drc/v2/mha/gtid/checkResult?mha=' + this.drc.mhaName +\r\n        '&configGtid=' + this.drc.rGtidExecuted)\r\n      that.axios.get('/api/drc/v2/mha/gtid/checkResult?mha=' + this.drc.mhaName +\r\n        '&configGtid=' + this.drc.rGtidExecuted)\r\n        .then(response => {\r\n          if (response.data.status === 0) {\r\n            this.gtidCheck.resVo = {\r\n              mha: this.drc.mhaName,\r\n              legal: response.data.data.legal === true ? '合理位点' : 'binlog已经被purge',\r\n              configGtid: this.drc.rGtidExecuted,\r\n              purgedGtid: response.data.data.purgedGtid\r\n            }\r\n            this.gtidCheck.modal = true\r\n          } else {\r\n            console.log('api fail:' + '/api/drc/v2/mha/gtid/checkResult?mha=' + this.drc.mhaName +\r\n              '&configGtid=' + this.drc.rGtidExecuted)\r\n          }\r\n        })\r\n        .catch(message => {\r\n          this.$Message.error('校验位点异常: ' + message)\r\n        })\r\n    },\r\n    showDbMhaApplierConfig () {\r\n      return this.drc.dbMessengerSwitch || this.hasAppliers(this.drc.dbMessengerList)\r\n    },\r\n    showMhaApplierConfig () {\r\n      return true\r\n      // return !this.hasAppliers(this.drc.dbMessengerList)\r\n    },\r\n    getRole (ip, currentInstances) {\r\n      if (!currentInstances || currentInstances.length === 0) {\r\n        return ''\r\n      }\r\n      for (const instance of currentInstances) {\r\n        if (instance.ip === ip) {\r\n          return ' — ' + (instance.master ? 'Master' : 'Slave')\r\n        }\r\n      }\r\n      return ''\r\n    },\r\n    hasAppliers (dbApplierDtos) {\r\n      for (const x of dbApplierDtos) {\r\n        if (x.ips && x.ips.length > 0) {\r\n          return true\r\n        }\r\n      }\r\n      return false\r\n    },\r\n    submitConfig () {\r\n      const that = this\r\n      this.axios.post('/api/drc/v2/config/messenger/submitConfig', {\r\n        mhaName: this.drc.mhaName,\r\n        replicatorIps: this.drc.replicators,\r\n        messengerIps: this.drc.messengers,\r\n        aGtidExecuted: this.drc.aGtidExecuted,\r\n        rGtidExecuted: this.drc.rGtidExecuted\r\n      }).then(response => {\r\n        console.log(response.data)\r\n        if (response.data.status === 1) {\r\n          this.$Message.warning({\r\n            content: '提交失败：' + response.data.message,\r\n            duration: 10\r\n          })\r\n          return\r\n        }\r\n        that.result = response.data.data\r\n        that.drc.reviewModal = false\r\n        that.drc.resultModal = true\r\n      }).catch(message => {\r\n        this.$Message.error({\r\n          content: '提交异常: ' + message,\r\n          duration: 10\r\n        })\r\n      })\r\n    },\r\n    reviewConfigure () {\r\n      this.drc.reviewModal = true\r\n    }\r\n  },\r\n  created () {\r\n    this.getResources()\r\n    this.getResourcesInUse()\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./drcMqConfig.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./drcMqConfig.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./drcMqConfig.vue?vue&type=template&id=0c6faf62&scoped=true&v-if=current%20%3D%3D%3D%200&%3Akey=0&\"\nimport script from \"./drcMqConfig.vue?vue&type=script&lang=js&\"\nexport * from \"./drcMqConfig.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0c6faf62\",\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar $find = require('../internals/array-iteration').find;\nvar addToUnscopables = require('../internals/add-to-unscopables');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar FIND = 'find';\nvar SKIPS_HOLES = true;\n\nvar USES_TO_LENGTH = arrayMethodUsesToLength(FIND);\n\n// Shouldn't skip holes\nif (FIND in []) Array(1)[FIND](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.find` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.find\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES || !USES_TO_LENGTH }, {\n  find: function find(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND);\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('base-component',[_c('Breadcrumb',{style:({margin: '15px 0 15px 185px', position: 'fixed'})},[_c('BreadcrumbItem',{attrs:{\"to\":\"/home\"}},[_vm._v(\"首页\")]),_c('BreadcrumbItem',{attrs:{\"to\":\"/v2/dbMqBuildV2\"}},[_vm._v(\"DB粒度 Mq\")])],1),_c('Content',{staticClass:\"content\",style:({padding: '10px', background: '#ffffff', margin: '50px 0 111px 185px', zIndex: '1'})},[_c('Row',{attrs:{\"gutter\":10,\"align\":\"middle\"}},[_c('Col',{attrs:{\"span\":\"18\"}},[_c('Form',{staticStyle:{\"margin-right\":\"20px\",\"margin-top\":\"10px\"},attrs:{\"model\":_vm.formItem,\"label-width\":100}},[_c('FormItem',{attrs:{\"label\":\"数据库\",\"required\":true}},[_c('Select',{attrs:{\"filterable\":\"\",\"disabled\":!!_vm.meta.fixDb,\"placeholder\":\"请搜索数据库信息\",\"remote-method\":_vm.getExistDb,\"loading\":_vm.dataLoading},on:{\"on-change\":_vm.selectDb},model:{value:(_vm.meta.dbName),callback:function ($$v) {_vm.$set(_vm.meta, \"dbName\", $$v)},expression:\"meta.dbName\"}},_vm._l((_vm.meta.dbOptions),function(option,index){return _c('Option',{key:index,attrs:{\"value\":option.dbName}},[_vm._v(_vm._s(option.dbName))])}),1)],1),_c('FormItem',{attrs:{\"label\":\"同步方向\",\"required\":true}},[_c('RadioGroup',{attrs:{\"button-style\":\"solid\"},on:{\"on-change\":_vm.afterSelectExistReplication},model:{value:(_vm.selectedExistReplication),callback:function ($$v) {_vm.selectedExistReplication=$$v},expression:\"selectedExistReplication\"}},_vm._l((_vm.meta.existReplicationRegionOptions),function(items){return _c('Radio',{key:items.srcRegionName,attrs:{\"label\":items.srcRegionName,\"border\":\"\"}},[_vm._v(\" \"+_vm._s(items.srcRegionName)+\" \")])}),1),_c('Button',{attrs:{\"type\":\"primary\",\"icon\":\"md-add\",\"ghost\":\"\"},on:{\"click\":_vm.goToCreateReplication}},[_vm._v(\"新增\")]),_c('Modal',{attrs:{\"width\":\"1200px\",\"footer-hide\":true,\"title\":\"创建同步\"},model:{value:(_vm.createModal.open),callback:function ($$v) {_vm.$set(_vm.createModal, \"open\", $$v)},expression:\"createModal.open\"}},[(_vm.createModal.open)?_c('mha-preview',{attrs:{\"db-name\":_vm.meta.dbName,\"replication-type\":1,\"exist-replication-region-options\":_vm.meta.existReplicationRegionOptions},on:{\"updated\":_vm.selectDb}}):_vm._e()],1)],1),_c('Divider',{attrs:{\"orientation\":\"left\"}},[_vm._v(\"消息投递配置\")]),_c('Card',{staticStyle:{\"width\":\"100%\"}},[_c('mq-tables',{attrs:{\"table-data\":_vm.drcConfig.logicTableSummaryDtos,\"data-loading\":_vm.configDataLoading,\"src-region\":_vm.meta.srcRegionName,\"dst-region\":_vm.meta.dstRegionName,\"db-name\":_vm.meta.dbName,\"db-names\":_vm.drcConfig.dbNames},on:{\"updated\":_vm.getDrcConfig}})],1),_c('Divider',{attrs:{\"orientation\":\"left\"}},[_vm._v(\"DB\")]),_c('Card',{staticStyle:{\"width\":\"100%\"}},[(_vm.drcConfig.mhaMqDtos)?_c('mha-mq-panel',{attrs:{\"mha-mq-dtos\":_vm.drcConfig.mhaMqDtos},on:{\"updated\":_vm.getDrcConfig}}):_vm._e()],1)],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{style:({padding: '1px 1px',height: '100%'})},[_c('Table',{ref:\"multipleTable\",staticStyle:{\"margin-top\":\"20px\"},attrs:{\"stripe\":\"\",\"columns\":_vm.columns,\"data\":_vm.tableData,\"loading\":_vm.dataLoading,\"border\":\"\"},scopedSlots:_vm._u([{key:\"action\",fn:function(ref){\nvar row = ref.row;\nvar index = ref.index;\nreturn [_c('Button',{staticStyle:{\"margin-right\":\"5px\"},attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.goToUpdateConfig(row, index)}}},[_vm._v(\"修改 \")]),_c('Button',{staticStyle:{\"margin-right\":\"5px\"},attrs:{\"type\":\"error\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.goToDeleteConfig(row, index)}}},[_vm._v(\"删除 \")])]}}])}),_c('br'),_c('Button',{attrs:{\"type\":\"success\",\"icon\":\"md-add\"},on:{\"click\":_vm.goToInsertConfig}},[_vm._v(\" 新增 \")]),_c('Modal',{attrs:{\"width\":\"1200px\",\"footer-hide\":true,\"title\":_vm.actionTitle},model:{value:(_vm.editModal.open),callback:function ($$v) {_vm.$set(_vm.editModal, \"open\", $$v)},expression:\"editModal.open\"}},[(_vm.editModal.open)?_c('db-mq-config',{ref:\"dbReplicationConfigComponent\",attrs:{\"config-data\":_vm.selectedRow,\"src-region\":_vm.srcRegion,\"dst-region\":_vm.srcRegion,\"db-names\":_vm.dbNames,\"form-action\":_vm.action,\"filter-read-only\":_vm.filterReadOnly},on:{\"finished\":_vm.finishConfig}}):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{style:({padding: '1px 1px',height: '100%'})},[_c('Row',{attrs:{\"gutter\":10,\"align\":\"middle\"}},[_c('Col',{attrs:{\"span\":\"13\"}},[_c('Form',{staticStyle:{\"margin-right\":\"20px\",\"margin-top\":\"10px\"},attrs:{\"model\":_vm.formItem,\"disabled\":_vm.formAction === 'delete',\"label-width\":100}},[(_vm.alertInfo.show)?_c('Alert',{attrs:{\"type\":\"warning\",\"show-icon\":\"\",\"closable\":\"\"},scopedSlots:_vm._u([{key:\"desc\",fn:function(){return [_vm._v(_vm._s(_vm.alertInfo.message))]},proxy:true}],null,false,3041357252)},[_vm._v(\" \"+_vm._s(_vm.alertInfo.title)+\" \")]):_vm._e(),(_vm.alertInfo.successShow)?_c('Alert',{attrs:{\"type\":\"success\",\"show-icon\":\"\",\"closable\":\"\"},scopedSlots:_vm._u([{key:\"desc\",fn:function(){return [_vm._v(_vm._s(_vm.alertInfo.message))]},proxy:true}],null,false,3041357252)},[_vm._v(\" \"+_vm._s(_vm.alertInfo.title)+\" \")]):_vm._e(),_c('FormItem',{attrs:{\"label\":\"部门\"}},[_c('Select',{attrs:{\"filterable\":\"\",\"placeholder\":\"选择部门\"},model:{value:(_vm.formItem.bu),callback:function ($$v) {_vm.$set(_vm.formItem, \"bu\", $$v)},expression:\"formItem.bu\"}},_vm._l((_vm.formItem.constants.buForChosen),function(item){return _c('Option',{key:item,attrs:{\"value\":item}},[_vm._v(_vm._s(item))])}),1)],1),_c('FormItem',{attrs:{\"prop\":\"dbName\",\"label\":\"库名\",\"required\":true}},[_c('Input',{attrs:{\"type\":\"textarea\",\"autosize\":true,\"readonly\":true,\"border\":false,\"placeholder\":\"请输入库名（支持正则）\"},model:{value:(_vm.formItem.dbName),callback:function ($$v) {_vm.$set(_vm.formItem, \"dbName\", $$v)},expression:\"formItem.dbName\"}})],1),_c('FormItem',{attrs:{\"label\":\"同步表\",\"required\":true}},[_c('Input',{attrs:{\"placeholder\":\"请输入正则表达式\"},on:{\"on-keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"space\",32,$event.key,[\" \",\"Spacebar\"])){ return null; }$event.preventDefault();},\"on-blur\":_vm.afterEnterTableName},model:{value:(_vm.formItem.tableName),callback:function ($$v) {_vm.$set(_vm.formItem, \"tableName\", $$v)},expression:\"formItem.tableName\"}})],1),_c('FormItem',{attrs:{\"label\":\"MQ主题\"}},[_c('Input',{staticStyle:{\"width\":\"350px\"},attrs:{\"placeholder\":\"请输入自定义Topic\"},on:{\"on-blur\":_vm.refreshTopicBu},model:{value:(_vm.formItem.topic),callback:function ($$v) {_vm.$set(_vm.formItem, \"topic\", $$v)},expression:\"formItem.topic\"}})],1),_c('FormItem',{attrs:{\"label\":\"exclude类型\"}},[_c('Select',{staticStyle:{\"width\":\"200px\"},attrs:{\"filterable\":\"\",\"multiple\":\"\",\"placeholder\":\"选择过滤类型\",\"disabled\":_vm.filterReadOnly},model:{value:(_vm.formItem.excludeFilterTypes),callback:function ($$v) {_vm.$set(_vm.formItem, \"excludeFilterTypes\", $$v)},expression:\"formItem.excludeFilterTypes\"}},_vm._l((_vm.excludeFilterTypesForChose),function(item){return _c('Option',{key:item.value,attrs:{\"value\":item.value}},[_vm._v(_vm._s(item.label))])}),1)],1),_c('FormItem',{attrs:{\"label\":\"有序消息\"}},[_c('i-switch',{attrs:{\"size\":\"large\"},scopedSlots:_vm._u([{key:\"open\",fn:function(){return [_c('span',[_vm._v(\"On\")])]},proxy:true},{key:\"close\",fn:function(){return [_c('span',[_vm._v(\"Off\")])]},proxy:true}]),model:{value:(_vm.formItem.switch.order),callback:function ($$v) {_vm.$set(_vm.formItem.switch, \"order\", $$v)},expression:\"formItem.switch.order\"}})],1),(_vm.formItem.switch.order)?_c('Card',{staticStyle:{\"margin-left\":\"100px\"},scopedSlots:_vm._u([{key:\"title\",fn:function(){return [_c('Icon',{attrs:{\"type\":\"md-settings\"}}),_vm._v(\" 有序消息字段 \"),_c('Button',{staticStyle:{\"margin-left\":\"50px\"},attrs:{\"icon\":\"ios-refresh\",\"size\":\"small\",\"type\":\"primary\",\"loading\":_vm.commonColumnLoading},on:{\"click\":_vm.getCommonColumns}},[_vm._v(\"获取公共字段 \")])]},proxy:true}],null,false,4117777808)},[_c('FormItem',{attrs:{\"label\":\"字段\"}},[_c('Select',{staticStyle:{\"width\":\"200px\"},attrs:{\"filterable\":\"\",\"allow-create\":\"\",\"placeholder\":\"选择有序相关字段\"},on:{\"on-create\":_vm.handleCreateColumn},model:{value:(_vm.formItem.orderKey),callback:function ($$v) {_vm.$set(_vm.formItem, \"orderKey\", $$v)},expression:\"formItem.orderKey\"}},_vm._l((_vm.formItem.constants.columnsForChose),function(item){return _c('Option',{key:item,attrs:{\"value\":item}},[_vm._v(_vm._s(item))])}),1)],1)],1):_vm._e()],1)],1),_c('Col',{attrs:{\"span\":\"11\"}},[_c('db-tables-preview',{attrs:{\"src-region-name\":_vm.srcRegion,\"dst-region-name\":null,\"db-name\":_vm.formItem.dbName,\"table-names\":_vm.formItem.tableName,\"mode\":_vm.formItem.buildMode,\"replication-type\":Number(1)}})],1)],1),_c('Divider'),_c('Button',{staticStyle:{\"margin-left\":\"50px\"},attrs:{\"type\":_vm.buttonTypeMap.get(_vm.formAction),\"loading\":_vm.dataLoading || _vm.commonColumnLoading},on:{\"click\":_vm.submitAll}},[_vm._v(_vm._s(_vm.buttonTextMap.get(_vm.formAction))+\" \")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div :style=\"{padding: '1px 1px',height: '100%'}\">\r\n    <Row :gutter=10 align=\"middle\">\r\n      <Col span=\"13\">\r\n        <Form :model=\"formItem\" :disabled=\"formAction === 'delete'\" :label-width=\"100\"\r\n              style=\"margin-right: 20px;margin-top: 10px\">\r\n          <Alert type=\"warning\" show-icon v-if=\"alertInfo.show\" closable>\r\n            {{ alertInfo.title }}\r\n            <template #desc>{{ alertInfo.message }}</template>\r\n          </Alert>\r\n          <Alert type=\"success\" show-icon v-if=\"alertInfo.successShow\" closable>\r\n            {{ alertInfo.title }}\r\n            <template #desc>{{ alertInfo.message }}</template>\r\n          </Alert>\r\n          <FormItem label=\"部门\">\r\n            <Select v-model=\"formItem.bu\" filterable placeholder=\"选择部门\">\r\n              <Option v-for=\"item in formItem.constants.buForChosen\" :value=\"item\" :key=\"item\">{{ item }}</Option>\r\n            </Select>\r\n          </FormItem>\r\n          <FormItem prop=\"dbName\" label=\"库名\" :required=true>\r\n            <Input type=\"textarea\" v-model=\"formItem.dbName\" :autosize=\"true\" :readonly=\"true\" :border=\"false\"\r\n                   placeholder=\"请输入库名（支持正则）\"/>\r\n          </FormItem>\r\n          <FormItem label=\"同步表\" :required=true>\r\n            <Input @on-keydown.space.prevent v-model=\"formItem.tableName\" placeholder=\"请输入正则表达式\"\r\n                   @on-blur=\"afterEnterTableName\"></Input>\r\n          </FormItem>\r\n\r\n          <FormItem label=\"MQ主题\">\r\n            <Input v-model=\"formItem.topic\" style=\"width:350px\" placeholder=\"请输入自定义Topic\"\r\n                   @on-blur=\"refreshTopicBu\"\r\n            />\r\n          </FormItem>\r\n          <FormItem label=\"exclude类型\">\r\n            <Select v-model=\"formItem.excludeFilterTypes\" filterable  multiple style=\"width: 200px\" placeholder=\"选择过滤类型\" :disabled=\"filterReadOnly\">\r\n              <Option v-for=\"item in excludeFilterTypesForChose\" :value=\"item.value\" :key=\"item.value\" >{{ item.label }}</Option>\r\n            </Select>\r\n          </FormItem>\r\n          <FormItem label=\"有序消息\">\r\n            <i-switch v-model=\"formItem.switch.order\" size=\"large\">\r\n              <template #open>\r\n                <span>On</span>\r\n              </template>\r\n              <template #close>\r\n                <span>Off</span>\r\n              </template>\r\n            </i-switch>\r\n          </FormItem>\r\n          <Card v-if=\"formItem.switch.order\" style=\"margin-left: 100px\">\r\n            <template #title>\r\n              <Icon type=\"md-settings\"/>\r\n              有序消息字段\r\n              <Button icon=\"ios-refresh\" size=\"small\" type=\"primary\" :loading=\"commonColumnLoading\"\r\n                      @click=\"getCommonColumns\" style=\"margin-left: 50px\">获取公共字段\r\n              </Button>\r\n            </template>\r\n            <FormItem label=\"字段\">\r\n              <Select v-model=\"formItem.orderKey\" filterable allow-create @on-create=\"handleCreateColumn\"\r\n                      style=\"width: 200px\" placeholder=\"选择有序相关字段\">\r\n                <Option v-for=\"item in formItem.constants.columnsForChose\" :value=\"item\" :key=\"item\">{{ item }}</Option>\r\n              </Select>\r\n            </FormItem>\r\n          </Card>\r\n        </Form>\r\n      </Col>\r\n      <Col span=\"11\">\r\n        <db-tables-preview :src-region-name=\"srcRegion\"\r\n                           :dst-region-name=\"null\"\r\n                           :db-name=\"formItem.dbName\"\r\n                           :table-names=\"formItem.tableName\"\r\n                           :mode=\"formItem.buildMode\"\r\n                           :replication-type=\"Number(1)\"\r\n        />\r\n      </Col>\r\n    </Row>\r\n    <Divider></Divider>\r\n    <Button :type=\"buttonTypeMap.get(formAction)\" @click=\"submitAll\" style=\"margin-left: 50px\"\r\n            :loading=\"dataLoading || commonColumnLoading\">{{\r\n        buttonTextMap.get(formAction)\r\n      }}\r\n    </Button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport DbTablesPreview from '@/components/v2/dbDrcBuild/dbTablesPreview.vue'\r\n\r\nexport default {\r\n  components: { DbTablesPreview },\r\n  FORM_ACTION_OPTION: {\r\n    CREATE: 'create',\r\n    EDIT: 'edit',\r\n    DELETE: 'delete'\r\n  },\r\n  name: 'dbMqConfig',\r\n  props: {\r\n    configData: {},\r\n    srcRegion: String,\r\n    dstRegion: String,\r\n    dbNames: Array,\r\n    formAction: String,\r\n    filterReadOnly: Boolean\r\n  },\r\n  emits: ['finished'],\r\n  data () {\r\n    return {\r\n      meta: {\r\n        rowsFilterId: null,\r\n        colsFilterId: null,\r\n        dbReplicationIds: [],\r\n        originLogicTableConfig: {}\r\n      },\r\n      formItem: {\r\n        bu: null,\r\n        buildMode: 2,\r\n        dbName: null,\r\n        tableName: null,\r\n        topic: null,\r\n        orderKey: null,\r\n        excludeFilterTypes: [],\r\n        switch: {\r\n          order: false\r\n        },\r\n        constants: {\r\n          columnsForChose: [],\r\n          buForChosen: []\r\n        }\r\n      },\r\n      checkTableDataList: [],\r\n      table: {\r\n        dbMhaTableLoading: false,\r\n        dbMhaTableColumn: [\r\n          {\r\n            title: 'DB名',\r\n            key: 'dbName'\r\n          },\r\n          {\r\n            title: '源集群',\r\n            key: 'srcMhaName',\r\n            render: (h, params) => {\r\n              const row = params.row\r\n              const mha = row.srcMha\r\n              if (mha != null) {\r\n                return h('div', [\r\n                  h('span', mha.name),\r\n                  h('span', {\r\n                    style:\r\n                        {\r\n                          float: 'right',\r\n                          color: '#ababab'\r\n                        }\r\n                  }, mha.regionName + '(' + mha.dcName + ')')\r\n                ])\r\n              }\r\n            }\r\n          },\r\n          {\r\n            title: '目标集群',\r\n            key: 'dstMhaName',\r\n            render: (h, params) => {\r\n              const row = params.row\r\n              const mha = row.dstMha\r\n              if (mha != null) {\r\n                return h('div', [\r\n                  h('span', mha.name),\r\n                  h('span', {\r\n                    style:\r\n                        {\r\n                          float: 'right',\r\n                          color: '#ababab'\r\n                        }\r\n                  }, mha.regionName + '(' + mha.dcName + ')')\r\n                ])\r\n              }\r\n            }\r\n          }\r\n        ],\r\n        dbMhaTablePage: {\r\n          total: 0,\r\n          current: 1,\r\n          size: 5,\r\n          pageSizeOpts: [5, 10, 20, 100]\r\n        },\r\n        dbTableLoading: false,\r\n        dbTableColumn: [\r\n          {\r\n            title: '序号',\r\n            width: 75,\r\n            align: 'center',\r\n            fixed: 'left',\r\n            render: (h, params) => {\r\n              return h(\r\n                'span',\r\n                params.index + 1\r\n              )\r\n            }\r\n          },\r\n          {\r\n            title: '库名',\r\n            key: 'schema',\r\n            resizable: true\r\n          },\r\n          {\r\n            title: '表名',\r\n            key: 'table',\r\n            resizable: true\r\n          },\r\n          {\r\n            title: '结果',\r\n            align: 'center',\r\n            render: (h, params) => {\r\n              const row = params.row\r\n              const color = row.res !== 'ok' ? 'volcano' : 'green'\r\n              const text = row.res\r\n              return h('Tag', {\r\n                props: {\r\n                  color: color\r\n                }\r\n              }, text)\r\n            }\r\n          }\r\n        ],\r\n        dbTablePage: {\r\n          total: 0,\r\n          current: 1,\r\n          size: 5,\r\n          pageSizeOpts: [5, 10, 20, 100]\r\n        }\r\n      },\r\n      alertInfo: {\r\n        show: false,\r\n        successShow: false,\r\n        title: null,\r\n        message: null\r\n      },\r\n      buttonTextMap: new Map([\r\n        ['create', '新增 MQ投递'],\r\n        ['edit', '更新 MQ投递'],\r\n        ['delete', '删除 MQ投递']\r\n      ]),\r\n      buttonTypeMap: new Map([\r\n        ['create', 'success'],\r\n        ['edit', 'primary'],\r\n        ['delete', 'error']\r\n      ]),\r\n      dataLoading: false,\r\n      successSubmit: false,\r\n      commonColumnLoading: false,\r\n      excludeFilterTypesForChose: [\r\n        {\r\n          value: 'D',\r\n          label: 'DELETE'\r\n        },\r\n        {\r\n          value: 'U',\r\n          label: 'UPDATE'\r\n        },\r\n        {\r\n          value: 'I',\r\n          label: 'INSERT'\r\n        }\r\n      ]\r\n    }\r\n  },\r\n  methods: {\r\n    getParams: function () {\r\n      const param = {}\r\n      param.buName = this.formItem.buName\r\n      param.tag = this.formItem.tag\r\n      param.mode = this.formItem.buildMode\r\n      param.srcRegionName = this.srcRegion\r\n      param.replicationType = 1\r\n\r\n      if (this.gtidConfigurable) {\r\n        param.gtidInit = this.formItem.gtidInit\r\n      }\r\n\r\n      param.tblsFilterDetail = {\r\n        tableNames: this.formItem.tableName\r\n      }\r\n      param.dbName = this.formItem.dbName\r\n      return param\r\n    },\r\n    getEditParams: function () {\r\n      const param = {}\r\n      param.dbReplicationIds = this.meta.dbReplicationIds\r\n      param.dbNames = this.dbNames\r\n      param.srcRegionName = this.srcRegion\r\n\r\n      param.logicTableConfig = {\r\n        logicTable: this.formItem.tableName,\r\n        dstLogicTable: this.formItem.topic\r\n      }\r\n      param.originLogicTableConfig = this.meta.originLogicTableConfig\r\n      param.mqConfig = {\r\n        bu: this.formItem.bu,\r\n        mqType: 'qmq',\r\n        // table: this.mqConfig.table,\r\n        // topic: this.mqConfig.topic,\r\n        serialization: 'json',\r\n        persistent: false,\r\n        order: this.formItem.switch.order,\r\n        orderKey: this.formItem.switch.orderKey === '' ? null : this.formItem.orderKey,\r\n        excludeFilterTypes: this.formItem.excludeFilterTypes\r\n      }\r\n      console.log(param)\r\n      return param\r\n    },\r\n    async getCommonColumns () {\r\n      const params = this.getParams()\r\n      this.formItem.constants.columnsForChose = []\r\n      this.commonColumnLoading = true\r\n      await this.axios.get('/api/drc/v2/autoconfig/commonColumns', {\r\n        params: this.flattenObj(params)\r\n      }).then(response => {\r\n        if (response.data.status === 1) {\r\n          this.$Message.error('查询公共列名失败，请手动添加：' + response.data.message)\r\n        } else {\r\n          this.formItem.constants.columnsForChose = response.data.data\r\n          this.$Message.info('查询公共列名数：' + response.data.data.length)\r\n        }\r\n      }).catch(message => {\r\n        this.$Message.error('查询公共列名异常: ' + message)\r\n      }).finally(() => {\r\n        this.commonColumnLoading = false\r\n      })\r\n    },\r\n    handleCreateColumn (val) {\r\n      if (this.contains(this.formItem.constants.columnsForChose, val)) {\r\n        alert('已有项禁止创建')\r\n        return\r\n      }\r\n      if (val === '' || val === undefined || val === null) {\r\n        alert('字段不能为空')\r\n        return\r\n      }\r\n      this.formItem.constants.columnsForChose.push(val)\r\n    },\r\n    refreshTopicBu () {\r\n      if (this.formItem.topic) {\r\n        this.formItem.bu = this.formItem.topic.split('.')[0]\r\n      }\r\n    },\r\n    async afterEnterTableName () {\r\n      await this.getTableInfo()\r\n    },\r\n    flattenObj (ob) {\r\n      const result = {}\r\n      for (const i in ob) {\r\n        if ((typeof ob[i]) === 'object' && !Array.isArray(ob[i])) {\r\n          const temp = this.flattenObj(ob[i])\r\n          for (const j in temp) {\r\n            result[i + '.' + j] = temp[j]\r\n          }\r\n        } else {\r\n          result[i] = ob[i]\r\n        }\r\n      }\r\n      return result\r\n    },\r\n    async refresh () {\r\n      this.formItem.dbName = this.dbNames.join(',')\r\n      if (this.configData) {\r\n        console.log('edit panel ', JSON.stringify(this.configData))\r\n        this.formItem.tableName = this.configData.config.logicTable\r\n        this.formItem.topic = this.configData.config.dstLogicTable\r\n        this.formItem.orderKey = this.configData.orderKey\r\n        this.formItem.switch.order = this.configData.order\r\n        this.formItem.excludeFilterTypes = this.configData.excludeFilterTypes\r\n        this.refreshTopicBu()\r\n        this.getCommonColumns()\r\n        this.meta.dbReplicationIds = this.configData.dbReplicationIds\r\n        this.meta.originLogicTableConfig = this.configData.config\r\n        this.meta.originMyConfig = this.configData.config\r\n      } else {\r\n        console.log('insert new config')\r\n      }\r\n    },\r\n    getBuListFromQmq () {\r\n      this.axios.get('/api/drc/v2/messenger/qmq/bus')\r\n        .then(response => {\r\n          if (response.data.status === 1) {\r\n            window.alert('从查询qmq 部门信息失败!')\r\n          } else {\r\n            this.formItem.constants.buForChosen = response.data.data\r\n          }\r\n        })\r\n    },\r\n    async submitAll () {\r\n      const that = this\r\n      that.alertInfo.show = false\r\n      that.alertInfo.successShow = false\r\n      that.successSubmit = false\r\n      const params = this.getEditParams()\r\n      // if (!this.checkParam(params)) {\r\n      //   return\r\n      // }\r\n      that.dataLoading = true\r\n      await that.axios.post('/api/drc/v2/autoconfig/dbMq/' + this.formAction, params)\r\n        .then(response => {\r\n          const data = response.data\r\n          const success = data.status === 0\r\n          if (success) {\r\n            that.$Message.success('提交成功')\r\n            that.successSubmit = true\r\n            that.alertInfo.successShow = true\r\n            that.alertInfo.message = null\r\n            that.alertInfo.title = '提交成功'\r\n            that.$emit('finished')\r\n          } else {\r\n            that.$Message.warning('提交失败: ' + data.message)\r\n            that.alertInfo.show = true\r\n            that.alertInfo.title = '提交失败'\r\n            that.alertInfo.message = data.message\r\n          }\r\n        })\r\n        .catch(message => {\r\n          that.$Message.error('提交异常: ' + message)\r\n        })\r\n        .finally(() => {\r\n          that.dataLoading = false\r\n        })\r\n    },\r\n    rowsFilterCreateParamInit () {\r\n      return {\r\n        mode: 1,\r\n        drcStrategyId: 2000000002,\r\n        routeStrategyId: 0,\r\n        udlColumns: [],\r\n        columns: [],\r\n        context: '',\r\n        illegalArgument: false,\r\n        fetchMode: 0\r\n      }\r\n    },\r\n    columnsFilterCreateParamInit () {\r\n      return {\r\n        mode: null,\r\n        columns: []\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    preCheckTablePage () {\r\n      const data = this.checkTableDataList\r\n      const start = this.table.dbTablePage.current * this.table.dbTablePage.size - this.table.dbTablePage.size\r\n      const end = start + this.table.dbTablePage.size\r\n      return [...data].slice(start, end)\r\n    },\r\n    useTripUdlOrUidMode () {\r\n      return [this.formItem.constants.rowsFilter.filterMode.TRIP_UDL, this.formItem.constants.rowsFilter.filterMode.TRIP_UDL_UID].includes(this.formItem.rowsFilterCreateParam.mode)\r\n    },\r\n    hasUdlColumn () {\r\n      return this.formItem.rowsFilterCreateParam.udlColumns.length !== 0\r\n    },\r\n    fillContextByRegion () {\r\n      return this.formItem.rowsFilterCreateParam.fetchMode === this.formItem.constants.rowsFilter.fetchMode.RPC\r\n    },\r\n    hasUidColumn () {\r\n      return this.formItem.rowsFilterCreateParam.columns.length !== 0\r\n    },\r\n    showUdlConfigDetail () {\r\n      return this.formItem.rowsFilterCreateParam.mode === this.formItem.constants.rowsFilter.filterMode.TRIP_UDL_UID || this.hasUdlLegalConfig || !this.hasUidLegalConfig\r\n    },\r\n    showUidConfigDetail () {\r\n      return this.formItem.rowsFilterCreateParam.mode === this.formItem.constants.rowsFilter.filterMode.TRIP_UDL_UID || this.hasUidLegalConfig || !this.hasUdlLegalConfig\r\n    },\r\n    hasUdlLegalConfig () {\r\n      return this.formItem.rowsFilterCreateParam.udlColumns.length !== 0 && this.formItem.rowsFilterCreateParam.drcStrategyId != null && this.formItem.rowsFilterCreateParam.drcStrategyId > 0\r\n    },\r\n    hasUidLegalConfig () {\r\n      return this.hasUidColumn\r\n    }\r\n  },\r\n  created () {\r\n    this.getBuListFromQmq()\r\n    this.refresh()\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dbMqConfig.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dbMqConfig.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./dbMqConfig.vue?vue&type=template&id=6d2f3082&scoped=true&\"\nimport script from \"./dbMqConfig.vue?vue&type=script&lang=js&\"\nexport * from \"./dbMqConfig.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6d2f3082\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div :style=\"{padding: '1px 1px',height: '100%'}\">\r\n    <Table style=\"margin-top: 20px\" stripe :columns=\"columns\" :data=\"tableData\" :loading=\"dataLoading\" border\r\n           ref=\"multipleTable\">\r\n      <template slot=\"action\" slot-scope=\"{ row, index }\">\r\n        <Button type=\"primary\" size=\"small\" style=\"margin-right: 5px\" @click=\"goToUpdateConfig(row, index)\">修改\r\n        </Button>\r\n        <Button type=\"error\" size=\"small\" style=\"margin-right: 5px\" @click=\"goToDeleteConfig(row, index)\">删除\r\n        </Button>\r\n      </template>\r\n    </Table>\r\n    <br/>\r\n    <Button type=\"success\" @click=\"goToInsertConfig\" icon=\"md-add\">\r\n      新增\r\n    </Button>\r\n    <Modal v-model=\"editModal.open\" width=\"1200px\" :footer-hide=\"true\" :title=\"actionTitle\">\r\n      <db-mq-config ref=\"dbReplicationConfigComponent\" @finished=\"finishConfig\"\r\n                             v-if=\"editModal.open\"\r\n                             :config-data=\"selectedRow\"\r\n                             :src-region=\"srcRegion\"\r\n                             :dst-region=\"srcRegion\"\r\n                             :db-names=\"dbNames\"\r\n                             :form-action=\"action\"\r\n                             :filter-read-only=\"filterReadOnly\"\r\n      />\r\n    </Modal>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport DbMqConfig from '@/components/v2/dbDrcBuild/dbMqConfig.vue'\r\n\r\nexport default {\r\n  name: 'mqTables',\r\n  components: { DbMqConfig },\r\n  props: {\r\n    dbName: String,\r\n    dbNames: Array,\r\n    srcRegion: String,\r\n    dstRegion: String,\r\n    tableData: Array,\r\n    dataLoading: Boolean\r\n  },\r\n  emits: ['updated'],\r\n  data () {\r\n    return {\r\n      selectedRow: {},\r\n      action: null,\r\n      actionTitleMap: new Map([\r\n        ['create', '新增 MQ投递配置'],\r\n        ['edit', '更新 MQ投递配置'],\r\n        ['delete', '⚠️删除 MQ投递配置']\r\n      ]),\r\n      editModal: {\r\n        open: false\r\n      },\r\n      filterReadOnly: false,\r\n      columns: [\r\n        {\r\n          title: '序号',\r\n          width: 75,\r\n          align: 'center',\r\n          fixed: 'left',\r\n          render: (h, params) => {\r\n            return h(\r\n              'span',\r\n              params.index + 1\r\n            )\r\n          }\r\n        },\r\n        {\r\n          title: '表名',\r\n          key: 'config.logicTable',\r\n          render: (h, params) => {\r\n            const config = params.row.config\r\n            return h(\r\n              'span',\r\n              config.logicTable\r\n            )\r\n          }\r\n        },\r\n        {\r\n          title: '主题',\r\n          key: 'topic',\r\n          render: (h, params) => {\r\n            const config = params.row.config\r\n            return h(\r\n              'span',\r\n              config.dstLogicTable\r\n            )\r\n          }\r\n        },\r\n        {\r\n          title: '有序',\r\n          key: 'order',\r\n          width: 100,\r\n          render: (h, params) => {\r\n            const row = params.row\r\n            const color = 'blue'\r\n            const text = row.order ? '有序' : '无序'\r\n            return h('Tag', {\r\n              props: {\r\n                color: color\r\n              }\r\n            }, text)\r\n          }\r\n        },\r\n        {\r\n          title: '有序相关字段',\r\n          key: 'orderKey'\r\n        },\r\n        {\r\n          title: '过滤类型',\r\n          key: 'excludeFilterTypes'\r\n        },\r\n        {\r\n          title: '操作',\r\n          slot: 'action',\r\n          align: 'center',\r\n          fixed: 'right'\r\n        }\r\n      ]\r\n    }\r\n  },\r\n  methods: {\r\n    async goToInsertConfig () {\r\n      this.selectedRow = null\r\n      this.action = DbMqConfig.FORM_ACTION_OPTION.CREATE\r\n      this.editModal.open = true\r\n      this.filterReadOnly = false\r\n    },\r\n    async goToUpdateConfig (row, index) {\r\n      this.selectedRow = row\r\n      this.action = DbMqConfig.FORM_ACTION_OPTION.EDIT\r\n      this.editModal.open = true\r\n      this.filterReadOnly = true\r\n    },\r\n    async goToDeleteConfig (row, index) {\r\n      this.selectedRow = row\r\n      this.action = DbMqConfig.FORM_ACTION_OPTION.DELETE\r\n      this.editModal.open = true\r\n    },\r\n    finishConfig () {\r\n      this.selectedRow = null\r\n      this.editModal.open = false\r\n      this.$emit('updated')\r\n    }\r\n  },\r\n  computed: {\r\n    actionTitle () {\r\n      return this.actionTitleMap.get(this.action)\r\n    }\r\n  },\r\n  created () {\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mqTables.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mqTables.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./mqTables.vue?vue&type=template&id=e994adea&scoped=true&\"\nimport script from \"./mqTables.vue?vue&type=script&lang=js&\"\nexport * from \"./mqTables.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e994adea\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{style:({padding: '1px 1px',height: '100%'})},[_c('Collapse',{model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}},_vm._l((_vm.mhaMqDtos),function(mhaMqDto,index){return _c('Panel',{key:mhaMqDto.srcMha.name +'-> mq',attrs:{\"name\":String(index)},scopedSlots:_vm._u([{key:\"content\",fn:function(){return [_c('Button',{staticStyle:{\"margin-bottom\":\"10px\"},attrs:{\"icon\":\"ios-open-outline\"},on:{\"click\":function($event){return _vm.openModal(index)}}},[_vm._v(\" 打开详情\")]),_c('mha-db-mq-panel',{attrs:{\"mha-mq-dtos\":mhaMqDto}}),_c('Modal',{attrs:{\"width\":\"1500px\",\"footer-hide\":true},model:{value:(_vm.openDetailModal[index]),callback:function ($$v) {_vm.$set(_vm.openDetailModal, index, $$v)},expression:\"openDetailModal[index]\"}},[(_vm.openDetailModal[index])?_c('drc-mq-config',{ref:\"dbReplicationConfigComponent\",refInFor:true,attrs:{\"mha-name\":mhaMqDto.srcMha.name,\"dc\":mhaMqDto.srcMha.dcName}}):_vm._e()],1)]},proxy:true}],null,true)},[_vm._v(\" \"+_vm._s(mhaMqDto.srcMha.name + ' ------ ' + ([mhaMqDto.mhaDbReplications.length] + 'DB'))+\" \")])}),1),_c('br'),_c('Button',{attrs:{\"type\":\"primary\",\"icon\":\"md-sync\"},on:{\"click\":_vm.goToSwitchMessengers}},[_vm._v(\" 切换Messenger生效配置 \")]),_c('br')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(!_vm.mhaMqDtos.mhaMessengerDto)?_c('Table',{attrs:{\"stripe\":\"\",\"border\":\"\",\"columns\":_vm.columns,\"data\":_vm.mhaDbReplications}}):_vm._e(),(_vm.mhaMqDtos.mhaMessengerDto)?_c('Table',{attrs:{\"stripe\":\"\",\"border\":\"\",\"columns\":_vm.mhaColumns,\"data\":[_vm.mhaMqDtos]}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\r\n  <div>\r\n    <Table stripe border :columns=\"columns\" :data=\"mhaDbReplications\" v-if=\"!mhaMqDtos.mhaMessengerDto\">\r\n    </Table>\r\n    <Table stripe border :columns=\"mhaColumns\" :data=\"[mhaMqDtos]\" v-if=\"mhaMqDtos.mhaMessengerDto\">\r\n    </Table>\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport prettyMilliseconds from 'pretty-ms'\r\n\r\nexport default {\r\n  name: 'mhaDbMqPanel',\r\n  props: {\r\n    mhaMqDtos: {}\r\n  },\r\n  data () {\r\n    return {\r\n      mhaDbReplications: this.mhaMqDtos.mhaDbReplications,\r\n      value: ['1'],\r\n      delayDataLoading: false,\r\n      columns: [\r\n        {\r\n          title: '类型',\r\n          width: 80,\r\n          render: (h, params) => {\r\n            const row = params.row\r\n            let text = 'none'\r\n            let type = 'error'\r\n            let disabled = false\r\n            switch (row.transmissionType) {\r\n              case 'simplex':\r\n                text = '单'\r\n                type = 'info'\r\n                break\r\n              case 'duplex':\r\n                text = '双'\r\n                type = 'success'\r\n                break\r\n              default:\r\n                text = '无'\r\n                disabled = true\r\n                break\r\n            }\r\n            return h('Button', {\r\n              props: {\r\n                type: type,\r\n                size: 'small',\r\n                disabled: disabled\r\n              },\r\n              on: {\r\n                click: () => {\r\n                  this.showModal(row)\r\n                }\r\n              }\r\n            }, text)\r\n          }\r\n        },\r\n        {\r\n          title: '延迟',\r\n          key: 'drcStatus',\r\n          width: 100,\r\n          align: 'center',\r\n          renderHeader: (h, params) => {\r\n            return h('span', [\r\n              h('span', '延迟'),\r\n              this.replicationIds && this.replicationIds.length !== 0 && h('Button', {\r\n                on: {\r\n                  click: async () => {\r\n                    await this.getMhaMessengerDelay()\r\n                  }\r\n                },\r\n                props: {\r\n                  loading: this.delayDataLoading,\r\n                  size: 'small',\r\n                  shape: 'circle',\r\n                  type: 'default',\r\n                  icon: 'md-refresh'\r\n                }\r\n              })\r\n            ])\r\n          },\r\n          render: (h, params) => {\r\n            const row = params.row\r\n            let color, text\r\n            if (row.drcStatus === true) {\r\n              if (row.delay != null) {\r\n                text = prettyMilliseconds(row.delay, { compact: true })\r\n                if (row.delay > 10000) {\r\n                  color = 'warning'\r\n                } else {\r\n                  color = 'success'\r\n                }\r\n              } else {\r\n                text = '已接入'\r\n                color = 'blue'\r\n              }\r\n            } else {\r\n              text = '未接入'\r\n              color = 'default'\r\n            }\r\n            return h('Tag', {\r\n              props: {\r\n                color: color\r\n              }\r\n            }, text)\r\n          }\r\n        },\r\n        {\r\n          title: 'DB 名',\r\n          key: 'srcDbName',\r\n          render: (h, params) => {\r\n            return h('p', params.row.src.dbName)\r\n          }\r\n        },\r\n        {\r\n          title: 'messenger',\r\n          key: 'srcDbName',\r\n          render: (h, params) => {\r\n            return h('p', params.row.dbMessengerDto ? params.row.dbMessengerDto.ips.join(', ') : null)\r\n          }\r\n        }\r\n      ],\r\n      mhaColumns: [\r\n        {\r\n          title: '延迟',\r\n          key: 'drcStatus',\r\n          width: 100,\r\n          align: 'center',\r\n          renderHeader: (h, params) => {\r\n            return h('span', [\r\n              h('span', '延迟'),\r\n              this.mhaMqDtos.mhaMessengerDto.ips && h('Button', {\r\n                on: {\r\n                  click: async () => {\r\n                    await this.getMhaMessengerDelay()\r\n                  }\r\n                },\r\n                props: {\r\n                  loading: this.delayDataLoading,\r\n                  size: 'small',\r\n                  shape: 'circle',\r\n                  type: 'default',\r\n                  icon: 'md-refresh'\r\n                }\r\n              })\r\n            ])\r\n          },\r\n          render: (h, params) => {\r\n            const row = params.row\r\n            let color, text\r\n            if (row.mhaMessengerDto.ips) {\r\n              if (row.delay != null) {\r\n                text = prettyMilliseconds(row.delay, { compact: true })\r\n                if (row.delay > 10000) {\r\n                  color = 'warning'\r\n                } else {\r\n                  color = 'success'\r\n                }\r\n              } else {\r\n                text = '已接入'\r\n                color = 'blue'\r\n              }\r\n            } else {\r\n              text = '未接入'\r\n              color = 'default'\r\n            }\r\n            return h('Tag', {\r\n              props: {\r\n                color: color\r\n              }\r\n            }, text)\r\n          }\r\n        },\r\n        {\r\n          title: '类型',\r\n          width: 100,\r\n          key: '',\r\n          render: (h, params) => {\r\n            return h('p', 'mha 同步')\r\n          }\r\n        },\r\n        {\r\n          title: 'DB 名',\r\n          key: 'srcDbName',\r\n          render: (h, params) => {\r\n            return h('p', params.row.mhaDbReplications.map(item => item.src.dbName).join(','))\r\n          }\r\n        },\r\n        {\r\n          title: 'messenger',\r\n          key: '',\r\n          render: (h, params) => {\r\n            return h('p', params.row.mhaMessengerDto.ips.join(','))\r\n          }\r\n        },\r\n        {\r\n          title: 'initGtid',\r\n          key: '',\r\n          render: (h, params) => {\r\n            return h('p', params.row.mhaMessengerDto.gtidInit)\r\n          }\r\n        }\r\n      ]\r\n    }\r\n  },\r\n  methods: {\r\n    showModal (row) {\r\n      this.$Message.info('还未上线，敬请期待')\r\n    },\r\n    async getMhaMessengerDelay () {\r\n      this.delayDataLoading = true\r\n      this.axios.post('/api/drc/v2/messenger/delay', {\r\n        mhas: [this.mhaMqDtos.srcMha.name],\r\n        dbs: this.mhaMqDtos.mhaDbReplications.map(item => item.src.dbName)\r\n      })\r\n        .then(response => {\r\n          const delays = response.data.data[0].delayInfoDto.delay\r\n          this.$set(this.mhaMqDtos, 'delay', delays)\r\n        })\r\n        .catch(message => {\r\n          console.log(message)\r\n          // this.$Message.error('查询 MHA 延迟异常: ' + message)\r\n        })\r\n        .finally(() => {\r\n          this.delayDataLoading = false\r\n        })\r\n    }\r\n  },\r\n  computed: {\r\n    replicationIds () {\r\n      return this.mhaDbReplications\r\n        .filter(item => item.drcStatus === true)\r\n        .map(item => item.id)\r\n        .join(',')\r\n    }\r\n  },\r\n  created () {\r\n    this.getMhaMessengerDelay()\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mhaDbMqPanel.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mhaDbMqPanel.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./mhaDbMqPanel.vue?vue&type=template&id=74db8a0d&scoped=true&\"\nimport script from \"./mhaDbMqPanel.vue?vue&type=script&lang=js&\"\nexport * from \"./mhaDbMqPanel.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"74db8a0d\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div :style=\"{padding: '1px 1px',height: '100%'}\">\r\n    <Collapse v-model=\"value\">\r\n      <Panel v-for=\"(mhaMqDto, index) in mhaMqDtos\"\r\n             :key=\"mhaMqDto.srcMha.name +'-> mq'\"\r\n             :name=\"String(index)\">\r\n        {{ mhaMqDto.srcMha.name + ' ------ ' + ([mhaMqDto.mhaDbReplications.length] + 'DB') }}\r\n        <template #content>\r\n          <Button icon=\"ios-open-outline\" @click=\"openModal(index)\" style=\"margin-bottom: 10px\"> 打开详情</Button>\r\n          <mha-db-mq-panel :mha-mq-dtos=\"mhaMqDto\"/>\r\n              <Modal v-model=\"openDetailModal[index]\" width=\"1500px\" :footer-hide=\"true\">\r\n                <drc-mq-config ref=\"dbReplicationConfigComponent\" v-if=\"openDetailModal[index]\"\r\n                              :mha-name=\"mhaMqDto.srcMha.name\"\r\n                              :dc=\"mhaMqDto.srcMha.dcName\"\r\n                />\r\n              </Modal>\r\n        </template>\r\n      </Panel>\r\n    </Collapse>\r\n    <br/>\r\n    <Button type=\"primary\" @click=\"goToSwitchMessengers\" icon=\"md-sync\">\r\n      切换Messenger生效配置\r\n    </Button>\r\n    <br/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport MhaDbMqPanel from '@/components/v2/dbDrcBuild/mhaDbMqPanel.vue'\r\nimport DrcMqConfig from '@/components/v2/mhaMessengers/drcMqConfig.vue'\r\n\r\nexport default {\r\n  name: 'mhaMqPanel',\r\n  components: { DrcMqConfig, MhaDbMqPanel },\r\n  props: {\r\n    mhaMqDtos: Array\r\n  },\r\n  emits: ['updated'],\r\n  data () {\r\n    return {\r\n      value: [],\r\n      openDetailModal: [],\r\n      dataLoading: false\r\n    }\r\n  },\r\n  methods: {\r\n    openModal (index) {\r\n      this.$set(this.openDetailModal, index, true)\r\n    },\r\n    goToSwitchMessengers () {\r\n      this.$Modal.confirm({\r\n        title: '切换Messenger',\r\n        content: '<p>请确认</p>',\r\n        loading: true,\r\n        onOk: () => {\r\n          this.switchMessengers()\r\n        }\r\n      })\r\n    },\r\n    switchMessengers () {\r\n      const params = this.getSwitchParams()\r\n      console.log(params)\r\n      this.dataLoading = true\r\n      this.axios.post('/api/drc/v2/autoconfig/switchMessengers', params)\r\n        .then(response => {\r\n          const data = response.data\r\n          const success = data.status === 0\r\n          if (success) {\r\n            this.$Message.success('提交成功')\r\n          } else {\r\n            this.$Message.warning('提交失败: ' + data.message)\r\n          }\r\n        })\r\n        .catch(message => {\r\n          this.$Message.error('提交异常: ' + message)\r\n        })\r\n        .finally(() => {\r\n          this.$Modal.remove()\r\n          this.dataLoading = false\r\n          this.$emit('updated')\r\n        })\r\n    },\r\n    getSwitchParams () {\r\n      return this.mhaMqDtos.map((item) => {\r\n        return {\r\n          srcMhaName: item.srcMha.name,\r\n          dbNames: item.mhaDbReplications.map((mhaDbReplication) => {\r\n            return mhaDbReplication.src.dbName\r\n          })\r\n        }\r\n      })\r\n    }\r\n  },\r\n  created () {\r\n    console.log('mhaMqDtos', this.mhaMqDtos)\r\n    this.openDetailModal = Array(this.mhaMqDtos.length).fill(false)\r\n    if (this.mhaMqDtos.length === 1) {\r\n      this.value = ['0']\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mhaMqPanel.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mhaMqPanel.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./mhaMqPanel.vue?vue&type=template&id=8f02f32c&scoped=true&\"\nimport script from \"./mhaMqPanel.vue?vue&type=script&lang=js&\"\nexport * from \"./mhaMqPanel.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8f02f32c\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <base-component>\r\n    <Breadcrumb :style=\"{margin: '15px 0 15px 185px', position: 'fixed'}\">\r\n      <BreadcrumbItem to=\"/home\">首页</BreadcrumbItem>\r\n      <BreadcrumbItem to=\"/v2/dbMqBuildV2\">DB粒度 Mq</BreadcrumbItem>\r\n    </Breadcrumb>\r\n    <Content class=\"content\"\r\n             :style=\"{padding: '10px', background: '#ffffff', margin: '50px 0 111px 185px', zIndex: '1'}\">\r\n      <Row :gutter=10 align=\"middle\">\r\n        <Col span=\"18\">\r\n          <Form :model=\"formItem\" :label-width=\"100\" style=\"margin-right: 20px;margin-top: 10px\">\r\n            <FormItem label=\"数据库\" :required=true>\r\n              <Select\r\n                v-model=\"meta.dbName\"\r\n                filterable\r\n                :disabled=\"!!meta.fixDb\"\r\n                placeholder=\"请搜索数据库信息\"\r\n                @on-change=\"selectDb\"\r\n                :remote-method=\"getExistDb\"\r\n                :loading=\"dataLoading\">\r\n                <Option v-for=\"(option, index) in meta.dbOptions\" :value=\"option.dbName\" :key=\"index\">{{ option.dbName }}</Option>\r\n              </Select>\r\n            </FormItem>\r\n            <FormItem label=\"同步方向\" :required=true>\r\n              <RadioGroup v-model=\"selectedExistReplication\" button-style=\"solid\"\r\n                          @on-change=\"afterSelectExistReplication\">\r\n                <Radio v-for=\"items in meta.existReplicationRegionOptions\"\r\n                       :key=\"items.srcRegionName\"\r\n                       :label=\"items.srcRegionName\" border>\r\n                  {{ items.srcRegionName  }}\r\n                </Radio>\r\n              </RadioGroup>\r\n              <Button type=\"primary\" icon=\"md-add\" ghost @click=\"goToCreateReplication\">新增</Button>\r\n              <Modal v-model=\"createModal.open\" width=\"1200px\" :footer-hide=\"true\" title=\"创建同步\">\r\n                <mha-preview v-if=\"createModal.open\" :db-name=\"meta.dbName\" :replication-type=1 @updated=\"selectDb\"\r\n                             :exist-replication-region-options=\"meta.existReplicationRegionOptions\"></mha-preview>\r\n              </Modal>\r\n            </FormItem>\r\n            <Divider orientation=\"left\">消息投递配置</Divider>\r\n            <Card style=\"width:100%\">\r\n              <mq-tables :table-data=\"drcConfig.logicTableSummaryDtos\" :data-loading=\"configDataLoading\"\r\n                      :src-region=\"meta.srcRegionName\" :dst-region=\"meta.dstRegionName\" :db-name=\"meta.dbName\"\r\n                      :db-names=\"drcConfig.dbNames\" @updated=\"getDrcConfig\"\r\n              />\r\n            </Card>\r\n            <Divider orientation=\"left\">DB</Divider>\r\n            <Card style=\"width:100%\">\r\n              <mha-mq-panel v-if=\"drcConfig.mhaMqDtos\" :mha-mq-dtos=\"drcConfig.mhaMqDtos\"  @updated=\"getDrcConfig\"/>\r\n            </Card>\r\n          </Form>\r\n        </Col>\r\n      </Row>\r\n    </Content>\r\n  </base-component>\r\n</template>\r\n<script>\r\n\r\nimport MhaPreview from '@/components/v2/dbDrcBuild/mhaPreview.vue'\r\nimport MqTables from '@/components/v2/dbDrcBuild/mqTables.vue'\r\nimport MhaMqPanel from '@/components/v2/dbDrcBuild/mhaMqPanel.vue'\r\n\r\nexport default {\r\n  components: { MhaMqPanel, MqTables, MhaPreview },\r\n  data () {\r\n    return {\r\n      createModal: {\r\n        open: false\r\n      },\r\n      dataLoading: false,\r\n      configDataLoading: false,\r\n      selectedExistReplication: this.$route.query.srcRegionName,\r\n      formItem: {\r\n        srcRegionName: null,\r\n        dstRegionName: null\r\n      },\r\n      drcConfig: {},\r\n      meta: {\r\n        dbName: this.$route.query.dbName,\r\n        srcRegionName: this.$route.query.srcRegionName,\r\n        dstRegionName: this.$route.query.dstRegionName,\r\n        fixDb: this.$route.query.fixDb,\r\n        regionOptions: [],\r\n        dbOptions: [],\r\n        existReplicationRegionOptions: []\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    getParams: function () {\r\n      const param = {}\r\n      param.dbName = this.meta.dbName\r\n      param.srcRegionName = this.meta.srcRegionName\r\n      param.dstRegionName = this.meta.dstRegionName\r\n      return param\r\n    },\r\n    async getExistDb (dbName) {\r\n      if (dbName === null || dbName.length === null || dbName.length <= 0) {\r\n        return []\r\n      }\r\n      const that = this\r\n      that.dataLoading = true\r\n      await that.axios.get('/api/drc/v2/autoconfig/getExistDb', {\r\n        params: {\r\n          dbName: dbName\r\n        }\r\n      })\r\n        .then(response => {\r\n          const data = response.data.data\r\n          if (data) {\r\n            that.meta.dbOptions = data\r\n          } else {\r\n            that.$Message.warning('查询DB失败')\r\n          }\r\n        })\r\n        .catch(message => {\r\n          that.$Message.error('查询DB异常: ' + message)\r\n        })\r\n        .finally(() => {\r\n          that.dataLoading = false\r\n        })\r\n    },\r\n    async selectDb () {\r\n      await this.getExistReplicationRegionOptions()\r\n      await this.getDrcConfig()\r\n    },\r\n    async getDrcConfig () {\r\n      this.createModal.open = false\r\n      this.resetPath()\r\n      const params = this.getParams()\r\n      this.drcConfig = {}\r\n      if (!params.dbName) {\r\n        this.$Message.warning('请先填写数据库')\r\n        return\r\n      }\r\n      if (!params.srcRegionName) {\r\n        return\r\n      }\r\n      this.configDataLoading = true\r\n      await this.axios.get('/api/drc/v2/autoconfig/getDbMqConfig', {\r\n        params: {\r\n          dbName: params.dbName,\r\n          srcRegionName: params.srcRegionName\r\n        }\r\n      })\r\n        .then(response => {\r\n          const data = response.data.data\r\n          const success = data && response.data.status === 0\r\n          if (success) {\r\n            this.drcConfig = data\r\n            this.$Message.success('查询DRC配置成功 ')\r\n          } else {\r\n            this.$Message.warning('查询失败：' + response.data.message)\r\n          }\r\n        })\r\n        .catch(message => {\r\n          this.$Message.error('查询异常: ' + message)\r\n        })\r\n        .finally(() => {\r\n          this.configDataLoading = false\r\n        })\r\n    },\r\n    async afterSelectExistReplication () {\r\n      console.log('afterSelectExistReplication ', this.selectedExistReplication)\r\n      this.meta.srcRegionName = this.selectedExistReplication.trim()\r\n      this.getDrcConfig()\r\n    },\r\n    async getExistReplicationRegionOptions () {\r\n      const that = this\r\n      that.dataLoading = true\r\n      that.meta.existReplicationRegionOptions = []\r\n      const params = this.getParams()\r\n      await that.axios.get('/api/drc/v2/autoconfig/getExistDbMqConfigDcOption', {\r\n        params: {\r\n          dbName: params.dbName\r\n        }\r\n      })\r\n        .then(response => {\r\n          const data = response.data.data\r\n          const success = data && response.data.status === 0\r\n          if (success) {\r\n            that.meta.existReplicationRegionOptions = data\r\n            if (that.meta.existReplicationRegionOptions.length > 0) {\r\n              that.$Message.success('查询到 ' + that.meta.existReplicationRegionOptions.length + ' 个可选同步方向')\r\n            }\r\n          } else {\r\n            that.meta.srcRegionName = null\r\n            that.meta.dstRegionName = null\r\n            that.$Message.warning('查询可选地域失败')\r\n          }\r\n        })\r\n        .catch(message => {\r\n          that.$Message.error('查询可选地域失败: ' + message)\r\n        })\r\n        .finally(() => {\r\n          that.dataLoading = false\r\n        })\r\n    },\r\n    async goToCreateReplication () {\r\n      this.createModal.open = true\r\n    },\r\n    resetPath () {\r\n      this.$router.replace({\r\n        query: {\r\n          dbName: this.meta.dbName,\r\n          srcRegionName: this.meta.srcRegionName,\r\n          dstRegionName: this.meta.dstRegionName,\r\n          fixDb: this.meta.fixDb\r\n        }\r\n        // eslint-disable-next-line handle-callback-err\r\n      }).catch(() => {\r\n      })\r\n    },\r\n    flattenObj (ob) {\r\n      const result = {}\r\n      for (const i in ob) {\r\n        if ((typeof ob[i]) === 'object' && !Array.isArray(ob[i])) {\r\n          const temp = this.flattenObj(ob[i])\r\n          for (const j in temp) {\r\n            result[i + '.' + j] = temp[j]\r\n          }\r\n        } else {\r\n          result[i] = ob[i]\r\n        }\r\n      }\r\n      return result\r\n    }\r\n  },\r\n  computed: {},\r\n  created () {\r\n    // this.getRegions()\r\n    this.axios.get('/api/drc/v2/permission/meta/mhaReplication/modify').then((response) => {\r\n      if (response.data.status === 403) {\r\n        this.$router.push('/nopermission')\r\n        return\r\n      }\r\n      if (this.meta.dbName) {\r\n        this.getExistReplicationRegionOptions()\r\n        this.getDrcConfig()\r\n      }\r\n    })\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n.drawer-footer {\r\n  width: 100%;\r\n  bottom: 0;\r\n  left: 0;\r\n  border-top: 1px solid #e8e8e8;\r\n  padding: 10px 16px;\r\n  text-align: right;\r\n  background: #fff;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dbMqBuildV2.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dbMqBuildV2.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./dbMqBuildV2.vue?vue&type=template&id=8a03bef6&\"\nimport script from \"./dbMqBuildV2.vue?vue&type=script&lang=js&\"\nexport * from \"./dbMqBuildV2.vue?vue&type=script&lang=js&\"\nimport style0 from \"./dbMqBuildV2.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}