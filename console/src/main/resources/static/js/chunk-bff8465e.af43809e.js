(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bff8465e","chunk-6304b0b8"],{"057f":function(t,e,r){var n=r("fc6a"),i=r("241c").f,a={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return i(t)}catch(e){return o.slice()}};t.exports.f=function(t){return o&&"[object Window]"==a.call(t)?s(t):i(n(t))}},"159b":function(t,e,r){var n=r("da84"),i=r("fdbc"),a=r("17c2"),o=r("9112");for(var s in i){var c=n[s],u=c&&c.prototype;if(u&&u.forEach!==a)try{o(u,"forEach",a)}catch(l){u.forEach=a}}},"17c2":function(t,e,r){"use strict";var n=r("b727").forEach,i=r("a640"),a=r("ae40"),o=i("forEach"),s=a("forEach");t.exports=o&&s?[].forEach:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}},"1da1":function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));r("d3b7"),r("e6cf");function n(t,e,r,n,i,a,o){try{var s=t[a](o),c=s.value}catch(u){return void r(u)}s.done?e(c):Promise.resolve(c).then(n,i)}function i(t){return function(){var e=this,r=arguments;return new Promise((function(i,a){var o=t.apply(e,r);function s(t){n(o,i,a,s,c,"next",t)}function c(t){n(o,i,a,s,c,"throw",t)}s(void 0)}))}}},2532:function(t,e,r){"use strict";var n=r("23e7"),i=r("5a34"),a=r("1d80"),o=r("ab13");n({target:"String",proto:!0,forced:!o("includes")},{includes:function(t){return!!~String(a(this)).indexOf(i(t),arguments.length>1?arguments[1]:void 0)}})},"25f0":function(t,e,r){"use strict";var n=r("6eeb"),i=r("825a"),a=r("d039"),o=r("ad6d"),s="toString",c=RegExp.prototype,u=c[s],l=a((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),f=u.name!=s;(l||f)&&n(RegExp.prototype,s,(function(){var t=i(this),e=String(t.source),r=t.flags,n=String(void 0===r&&t instanceof RegExp&&!("flags"in c)?o.call(t):r);return"/"+e+"/"+n}),{unsafe:!0})},2909:function(t,e,r){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}r.d(e,"a",(function(){return o}));r("a4d3"),r("e01a"),r("d28b"),r("a630"),r("e260"),r("d3b7"),r("25f0"),r("3ca3"),r("ddb0");function i(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function o(t){return n(t)||i(t)||a()}},"3ca3":function(t,e,r){"use strict";var n=r("6547").charAt,i=r("69f3"),a=r("7dd0"),o="String Iterator",s=i.set,c=i.getterFor(o);a(String,"String",(function(t){s(this,{type:o,string:String(t),index:0})}),(function(){var t,e=c(this),r=e.string,i=e.index;return i>=r.length?{value:void 0,done:!0}:(t=n(r,i),e.index+=t.length,{value:t,done:!1})}))},4160:function(t,e,r){"use strict";var n=r("23e7"),i=r("17c2");n({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},"44e7":function(t,e,r){var n=r("861d"),i=r("c6b6"),a=r("b622"),o=a("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==i(t))}},"4df4":function(t,e,r){"use strict";var n=r("0366"),i=r("7b0b"),a=r("9bdd"),o=r("e95a"),s=r("50c4"),c=r("8418"),u=r("35a1");t.exports=function(t){var e,r,l,f,p,d,h=i(t),g="function"==typeof this?this:Array,v=arguments.length,m=v>1?arguments[1]:void 0,b=void 0!==m,y=u(h),w=0;if(b&&(m=n(m,v>2?arguments[2]:void 0,2)),void 0==y||g==Array&&o(y))for(e=s(h.length),r=new g(e);e>w;w++)d=b?m(h[w],w):h[w],c(r,w,d);else for(f=y.call(h),p=f.next,r=new g;!(l=p.call(f)).done;w++)d=b?a(f,m,[l.value,w],!0):l.value,c(r,w,d);return r.length=w,r}},"4ec9":function(t,e,r){"use strict";var n=r("6d61"),i=r("6566");t.exports=n("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),i)},"4fad":function(t,e,r){var n=r("23e7"),i=r("6f53").entries;n({target:"Object",stat:!0},{entries:function(t){return i(t)}})},"53ca":function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));r("a4d3"),r("e01a"),r("d28b"),r("e260"),r("d3b7"),r("3ca3"),r("ddb0");function n(t){return n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}},"5a34":function(t,e,r){var n=r("44e7");t.exports=function(t){if(n(t))throw TypeError("The method doesn't accept regular expressions");return t}},6062:function(t,e,r){"use strict";var n=r("6d61"),i=r("6566");t.exports=n("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),i)},6547:function(t,e,r){var n=r("a691"),i=r("1d80"),a=function(t){return function(e,r){var a,o,s=String(i(e)),c=n(r),u=s.length;return c<0||c>=u?t?"":void 0:(a=s.charCodeAt(c),a<55296||a>56319||c+1===u||(o=s.charCodeAt(c+1))<56320||o>57343?t?s.charAt(c):a:t?s.slice(c,c+2):o-56320+(a-55296<<10)+65536)}};t.exports={codeAt:a(!1),charAt:a(!0)}},6566:function(t,e,r){"use strict";var n=r("9bf2").f,i=r("7c73"),a=r("e2cc"),o=r("0366"),s=r("19aa"),c=r("2266"),u=r("7dd0"),l=r("2626"),f=r("83ab"),p=r("f183").fastKey,d=r("69f3"),h=d.set,g=d.getterFor;t.exports={getConstructor:function(t,e,r,u){var l=t((function(t,n){s(t,l,e),h(t,{type:e,index:i(null),first:void 0,last:void 0,size:0}),f||(t.size=0),void 0!=n&&c(n,t[u],t,r)})),d=g(e),v=function(t,e,r){var n,i,a=d(t),o=m(t,e);return o?o.value=r:(a.last=o={index:i=p(e,!0),key:e,value:r,previous:n=a.last,next:void 0,removed:!1},a.first||(a.first=o),n&&(n.next=o),f?a.size++:t.size++,"F"!==i&&(a.index[i]=o)),t},m=function(t,e){var r,n=d(t),i=p(e);if("F"!==i)return n.index[i];for(r=n.first;r;r=r.next)if(r.key==e)return r};return a(l.prototype,{clear:function(){var t=this,e=d(t),r=e.index,n=e.first;while(n)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete r[n.index],n=n.next;e.first=e.last=void 0,f?e.size=0:t.size=0},delete:function(t){var e=this,r=d(e),n=m(e,t);if(n){var i=n.next,a=n.previous;delete r.index[n.index],n.removed=!0,a&&(a.next=i),i&&(i.previous=a),r.first==n&&(r.first=i),r.last==n&&(r.last=a),f?r.size--:e.size--}return!!n},forEach:function(t){var e,r=d(this),n=o(t,arguments.length>1?arguments[1]:void 0,3);while(e=e?e.next:r.first){n(e.value,e.key,this);while(e&&e.removed)e=e.previous}},has:function(t){return!!m(this,t)}}),a(l.prototype,r?{get:function(t){var e=m(this,t);return e&&e.value},set:function(t,e){return v(this,0===t?0:t,e)}}:{add:function(t){return v(this,t=0===t?0:t,t)}}),f&&n(l.prototype,"size",{get:function(){return d(this).size}}),l},setStrong:function(t,e,r){var n=e+" Iterator",i=g(e),a=g(n);u(t,e,(function(t,e){h(this,{type:n,target:t,state:i(t),kind:e,last:void 0})}),(function(){var t=a(this),e=t.kind,r=t.last;while(r&&r.removed)r=r.previous;return t.target&&(t.last=r=r?r.next:t.state.first)?"keys"==e?{value:r.key,done:!1}:"values"==e?{value:r.value,done:!1}:{value:[r.key,r.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),r?"entries":"values",!r,!0),l(e)}}},"6d61":function(t,e,r){"use strict";var n=r("23e7"),i=r("da84"),a=r("94ca"),o=r("6eeb"),s=r("f183"),c=r("2266"),u=r("19aa"),l=r("861d"),f=r("d039"),p=r("1c7e"),d=r("d44e"),h=r("7156");t.exports=function(t,e,r){var g=-1!==t.indexOf("Map"),v=-1!==t.indexOf("Weak"),m=g?"set":"add",b=i[t],y=b&&b.prototype,w=b,x={},S=function(t){var e=y[t];o(y,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(v&&!l(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return v&&!l(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(v&&!l(t))&&e.call(this,0===t?0:t)}:function(t,r){return e.call(this,0===t?0:t,r),this})};if(a(t,"function"!=typeof b||!(v||y.forEach&&!f((function(){(new b).entries().next()})))))w=r.getConstructor(e,t,g,m),s.REQUIRED=!0;else if(a(t,!0)){var D=new w,M=D[m](v?{}:-0,1)!=D,I=f((function(){D.has(1)})),L=p((function(t){new b(t)})),k=!v&&f((function(){var t=new b,e=5;while(e--)t[m](e,e);return!t.has(-0)}));L||(w=e((function(e,r){u(e,w,t);var n=h(new b,e,w);return void 0!=r&&c(r,n[m],n,g),n})),w.prototype=y,y.constructor=w),(I||k)&&(S("delete"),S("has"),g&&S("get")),(k||M)&&S(m),v&&y.clear&&delete y.clear}return x[t]=w,n({global:!0,forced:w!=b},x),d(w,t),v||r.setStrong(w,t,g),w}},"6f53":function(t,e,r){var n=r("83ab"),i=r("df75"),a=r("fc6a"),o=r("d1e7").f,s=function(t){return function(e){var r,s=a(e),c=i(s),u=c.length,l=0,f=[];while(u>l)r=c[l++],n&&!o.call(s,r)||f.push(t?[r,s[r]]:s[r]);return f}};t.exports={entries:s(!0),values:s(!1)}},7156:function(t,e,r){var n=r("861d"),i=r("d2bb");t.exports=function(t,e,r){var a,o;return i&&"function"==typeof(a=e.constructor)&&a!==r&&n(o=a.prototype)&&o!==r.prototype&&i(t,o),t}},"746f":function(t,e,r){var n=r("428f"),i=r("5135"),a=r("e538"),o=r("9bf2").f;t.exports=function(t){var e=n.Symbol||(n.Symbol={});i(e,t)||o(e,t,{value:a.f(t)})}},8418:function(t,e,r){"use strict";var n=r("c04e"),i=r("9bf2"),a=r("5c6c");t.exports=function(t,e,r){var o=n(e);o in t?i.f(t,o,a(0,r)):t[o]=r}},"96cf":function(t,e,r){var n=function(t){"use strict";var e,r=Object.prototype,n=r.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),o=new A(n||[]);return a._invoke=M(t,r,o),a}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(n){return{type:"throw",arg:n}}}t.wrap=c;var l="suspendedStart",f="suspendedYield",p="executing",d="completed",h={};function g(){}function v(){}function m(){}var b={};b[a]=function(){return this};var y=Object.getPrototypeOf,w=y&&y(y(N([])));w&&w!==r&&n.call(w,a)&&(b=w);var x=m.prototype=g.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function D(t){function e(r,i,a,o){var s=u(t[r],t,i);if("throw"!==s.type){var c=s.arg,l=c.value;return l&&"object"===typeof l&&n.call(l,"__await")?Promise.resolve(l.__await).then((function(t){e("next",t,a,o)}),(function(t){e("throw",t,a,o)})):Promise.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return e("throw",t,a,o)}))}o(s.arg)}var r;function i(t,n){function i(){return new Promise((function(r,i){e(t,n,r,i)}))}return r=r?r.then(i,i):i()}this._invoke=i}function M(t,e,r){var n=l;return function(i,a){if(n===p)throw new Error("Generator is already running");if(n===d){if("throw"===i)throw a;return E()}r.method=i,r.arg=a;while(1){var o=r.delegate;if(o){var s=I(o,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===l)throw n=d,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=p;var c=u(t,e,r);if("normal"===c.type){if(n=r.done?d:f,c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n=d,r.method="throw",r.arg=c.arg)}}}function I(t,r){var n=t.iterator[r.method];if(n===e){if(r.delegate=null,"throw"===r.method){if(t.iterator["return"]&&(r.method="return",r.arg=e,I(t,r),"throw"===r.method))return h;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var i=u(n,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function N(t){if(t){var r=t[a];if(r)return r.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function r(){while(++i<t.length)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}return{next:E}}function E(){return{value:e,done:!0}}return v.prototype=x.constructor=m,m.constructor=v,m[s]=v.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,s in t||(t[s]="GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},S(D.prototype),D.prototype[o]=function(){return this},t.AsyncIterator=D,t.async=function(e,r,n,i){var a=new D(c(e,r,n,i));return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(x),x[s]="Generator",x[a]=function(){return this},x.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){while(e.length){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=N,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function i(n,i){return s.type="throw",s.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;k(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),h}},t}(t.exports);try{regeneratorRuntime=n}catch(i){Function("r","regeneratorRuntime = r")(n)}},"99af":function(t,e,r){"use strict";var n=r("23e7"),i=r("d039"),a=r("e8b5"),o=r("861d"),s=r("7b0b"),c=r("50c4"),u=r("8418"),l=r("65f0"),f=r("1dde"),p=r("b622"),d=r("2d00"),h=p("isConcatSpreadable"),g=9007199254740991,v="Maximum allowed index exceeded",m=d>=51||!i((function(){var t=[];return t[h]=!1,t.concat()[0]!==t})),b=f("concat"),y=function(t){if(!o(t))return!1;var e=t[h];return void 0!==e?!!e:a(t)},w=!m||!b;n({target:"Array",proto:!0,forced:w},{concat:function(t){var e,r,n,i,a,o=s(this),f=l(o,0),p=0;for(e=-1,n=arguments.length;e<n;e++)if(a=-1===e?o:arguments[e],y(a)){if(i=c(a.length),p+i>g)throw TypeError(v);for(r=0;r<i;r++,p++)r in a&&u(f,p,a[r])}else{if(p>=g)throw TypeError(v);u(f,p++,a)}return f.length=p,f}})},"9bf1":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("base-component",[r("Breadcrumb",{style:{margin:"15px 0 15px 185px",position:"fixed"}},[r("BreadcrumbItem",{attrs:{to:{path:"/v2/mhaReplications",query:{srcMhaName:this.initInfo.srcMhaName,dstMhaName:this.initInfo.dstMhaName,preciseSearchMode:!0}}}},[t._v("首页 ")]),r("BreadcrumbItem",{attrs:{to:"/v2/mhaDbReplications"}},[t._v("DB 复制链路")]),r("BreadcrumbItem",{attrs:{to:{path:"/drcV2",query:{step:3,srcMhaName:this.initInfo.srcMhaName,dstMhaName:this.initInfo.dstMhaName,srcDc:this.initInfo.srcDc,dstDc:this.initInfo.dstDc,order:this.initInfo.order}}}},[t._v("DRC-MHA 配置 ")]),r("BreadcrumbItem",[t._v("Db Applier 配置")])],1),r("Content",{staticClass:"content",style:{padding:"10px",background:"#fff",margin:"50px 0 1px 185px",zIndex:"1"}},[r("Row",[r("Col",{attrs:{span:"8"}},[r("span",{staticStyle:{"margin-top":"10px",color:"#464c5b","font-weight":"600"}},[t._v(t._s(t.initInfo.srcMhaName)+"("+t._s(t.initInfo.srcDc)+")==>"+t._s(t.initInfo.dstMhaName)+"("+t._s(t.initInfo.dstDc)+")")])])],1),r("Row",{staticStyle:{"margin-top":"20px",background:"#fdfdff",border:"1px solid #e8eaec","justify-content":"space-between"}},[r("Col",{staticStyle:{display:"flex",float:"left",margin:"5px"},attrs:{span:"2"}},[t.submitted?t._e():r("Button",{staticStyle:{"text-align":"right"},attrs:{loading:t.dataLoading,type:"default"},on:{click:function(e){return t.preBatchUpdate()}}},[t._v(" 批量修改 ")])],1),r("Col",{staticStyle:{display:"flex",float:"left",margin:"5px"},attrs:{span:"2"}},[t.submitted?t._e():r("Button",{staticStyle:{"text-align":"right"},attrs:{icon:"md-arrow-up",loading:t.dataLoading,type:"primary"},on:{click:function(e){return t.preSubmit()}}},[t._v("提交 ")]),t.submitted?t._e():r("Button",{staticStyle:{"margin-left":"20px","text-align":"right"},attrs:{icon:"md-swap",loading:t.dataLoading,type:"primary"},on:{click:function(e){return t.preSwitchAppliers()}}},[t._v(" 一键自动切换 ")])],1)],1),r("Table",{ref:"multipleTable",staticStyle:{"margin-top":"0px"},attrs:{stripe:"",columns:t.columns,data:t.tableData,loading:t.dataLoading,border:""},on:{"on-selection-change":t.changeSelection},scopedSlots:t._u([{key:"applier",fn:function(e){var n=e.row,i=e.index;return[t.showSelectOptionComponent?r("Select",{key:t.applierShowRefreshCounter,staticStyle:{width:"300px"},attrs:{transfer:!0,multiple:"",placeholder:"选择源集群Applier"},model:{value:t.tableData[i].ips,callback:function(e){t.$set(t.tableData[i],"ips",e)},expression:"tableData[index].ips"}},t._l(t.applierResourceList,(function(e){return r("Option",{key:e.ip,attrs:{value:e.ip}},[t._v(t._s(e.ip)+" —— "+t._s(e.az)+" "+t._s(t.getRole(e.ip,t.currentInstances.get(t.tableData[i].dbName)))+" ")])})),1):t._e(),t.showSelectOptionComponent?r("Button",{staticStyle:{"margin-left":"10px"},attrs:{loading:t.applierDataLoading[i],type:"success",size:"small"},on:{click:function(e){return t.autoConfigApplier(n,i)}}},[t._v("自动录入 ")]):t._e(),t.showSelectOptionComponent?t._e():r("span",[t._v(" "+t._s(t.tableData[i].ips.join(", ")))])]}},{key:"gtidInit",fn:function(e){e.row;var n=e.index;return[r("Input",{staticStyle:{width:"80%"},attrs:{border:!1,placeholder:"请输入binlog拉取位点"},model:{value:t.tableData[n].gtidInit,callback:function(e){t.$set(t.tableData[n],"gtidInit",e)},expression:"tableData[index].gtidInit"}})]}},{key:"concurrency",fn:function(e){e.row;var n=e.index;return[r("InputNumber",{staticStyle:{width:"90%"},attrs:{max:150,min:1,placeholder:""},model:{value:t.tableData[n].concurrency,callback:function(e){t.$set(t.tableData[n],"concurrency",e)},expression:"tableData[index].concurrency"}})]}}])}),r("Modal",{attrs:{title:"请设置 Applier",width:"1200px"},on:{"on-ok":t.batchUpdateAppliers},model:{value:t.batchUpdateModal,callback:function(e){t.batchUpdateModal=e},expression:"batchUpdateModal"}},[r("div",{style:{padding:"1px 1px",height:"100%"}},[r("Form",{attrs:{"label-position":"left","label-width":100}},[r("FormItem",{attrs:{label:"Applier"}},[r("Select",{staticStyle:{width:"250px"},attrs:{transfer:!0,multiple:"",placeholder:"选择源集群Applier"},model:{value:t.target.ips,callback:function(e){t.$set(t.target,"ips",e)},expression:"target.ips"}},t._l(t.applierResourceList,(function(e){return r("Option",{key:e.ip,attrs:{value:e.ip}},[t._v(t._s(e.ip)+" —— "+t._s(e.az)+" ")])})),1)],1),r("FormItem",{attrs:{label:"初始同步位点"}},[r("Input",{staticStyle:{width:"80%"},attrs:{border:!1,placeholder:"请输入binlog拉取位点"},model:{value:t.target.gtid,callback:function(e){t.$set(t.target,"gtid",e)},expression:"target.gtid"}})],1)],1),r("p",[r("span",[t._v("共 ")]),r("span",{staticStyle:{color:"red","font-size":"16px","word-break":"break-all","word-wrap":"break-word"}},[t._v(t._s(this.updateData.length))]),r("span",[t._v(" 行数据")])]),[r("Table",{staticStyle:{"margin-top":"20px"},attrs:{stripe:"",columns:t.updateColumns,data:t.updateData,border:""}})]],2)])],1)],1)},i=[],a=(r("a4d3"),r("e01a"),r("d28b"),r("99af"),r("4160"),r("caad"),r("a15b"),r("d81d"),r("4ec9"),r("4fad"),r("d3b7"),r("6062"),r("2532"),r("3ca3"),r("159b"),r("ddb0"),r("2909")),o=(r("96cf"),r("1da1")),s=r("53ca"),c=r("2b0e"),u={name:"tables",data:function(){var t=this;return{initInfo:{srcMhaName:"",srcMhaId:0,dstMhaName:"",dbReplicationId:0,multiData:[],srcDc:"",dstDc:"",order:!0},dataLoading:!1,applierDataLoading:[],submitted:!1,applierResourceList:[],batchUpdateModal:!1,rollbackModal:!1,gtidCheck:{mhaApplied:"",dbApplied:[],mhaTarget:""},mhaApplierInitGtid:null,deleteData:[],filters:[],filterMap:{0:"行过滤",1:"字段过滤"},target:{gtid:"",ips:[]},columns:[{type:"selection",width:60,align:"center"},{title:"库名",key:"dbName",width:200},{title:"Applier",slot:"applier",width:500,renderHeader:function(e,r){return e("span",[e("span","Applier 配置 -- "),e("Button",{props:{type:"success",size:"small"},on:{click:function(){t.batchAutoConfigure()}}},"自动录入")])},filters:[{label:"空",value:null},{label:"非空",value:"not null"}],filterMultiple:!1,filterMethod:function(t,e){return t?e.ips&&e.ips.length>0:!e.ips||0===e.ips.length}},{title:"初始同步位点",slot:"gtidInit"},{title:"并发数",width:200,slot:"concurrency"}],updateColumns:[{title:"库名",key:"dbName",width:200},{title:"applier 配置",key:"applier",width:300,render:function(t,e){var r=e.row,n=r.ips;return null===n||0===n.length?t("Tag",{props:{color:"blue"}},"无"):t("span",r.ips.join(", "))}},{title:"初始同步位点",key:"gtidInit",render:function(t,e){var r=e.row,n=r.gtidInit;return null===n||0===n.length?t("Tag",{props:{color:"blue"}},"无"):t("span",n)}}],dbGtidColumns:[{title:"库名",key:"dbName",width:200},{title:"当前同步位点",key:"gtidInit",render:function(t,e){var r=e.row,n=r.gtidInit;return null===n||0===n.length?t("Tag",{props:{color:"blue"}},"无"):t("span",n)}}],updateData:[],propertiesJson:{},tableData:[],dbApplierDtos:[],currentInstances:new Map,applierShowRefreshCounter:0,total:0,size:5,pageSizeOpts:[5,10,20,100]}},methods:{getSwitchParams:function(){return[{srcMhaName:this.initInfo.srcMhaName,dstMhaName:this.initInfo.dstMhaName,dbNames:this.dbApplierDtos.map((function(t){return t.dbName}))}]},switchAppliers:function(){var t=this,e=this.getSwitchParams();this.dataLoading=!0,this.axios.post("/api/drc/v2/autoconfig/switchAppliers",e).then((function(e){var r=e.data,n=0===r.status;n?(t.submitted=!0,t.$Message.success("提交成功")):t.$Message.warning("提交失败: "+r.message)})).catch((function(e){t.$Message.error("提交异常: "+e)})).finally((function(){t.$Modal.remove(),t.dataLoading=!1,t.getDbAppliers()}))},getFilterText:function(t){},changeSelection:function(t){this.initInfo.multiData=t,console.log(this.initInfo.multiData)},getRole:function(t,e){if(!e||0===e.length)return"";var r=!0,n=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var s=a.value;if(s.ip===t)return" — "+(s.master?"Master":"Slave")}}catch(c){n=!0,i=c}finally{try{r||null==o.return||o.return()}finally{if(n)throw i}}return""},flattenObj:function(t){var e={};for(var r in t)if("object"!==Object(s["a"])(t[r])||Array.isArray(t[r]))e[r]=t[r];else{var n=this.flattenObj(t[r]);for(var i in n)e[r+"."+i]=n[i]}return e},getFilteredData:function(){return this.$refs.multipleTable.makeDataWithSortAndFilter()},autoConfigApplier:function(t,e){var r=this;c["default"].set(this.applierDataLoading,e,!0),this.axios.get("/api/drc/v2/resource/db/auto",{params:{dstMhaName:this.initInfo.dstMhaName,type:1,selectedIps:t.ips?t.ips.join(","):null}}).then((function(n){t.ips=[],n.data.data.forEach((function(e){return t.ips.push(e.ip)})),c["default"].set(r.tableData,e,t)})).catch((function(t){r.$Message.error("提交异常: "+t)})).finally((function(){c["default"].set(r.applierDataLoading,e,!1)}))},preSubmit:function(){var t=this;this.$Modal.confirm({title:"提交确认",content:"您确定要提交么？",onOk:function(){t.submitDbAppliers()}})},preSwitchAppliers:function(){var t=this;this.$Modal.confirm({title:"自动切换Applier",content:"<p>请确认</p>",loading:!0,onOk:function(){t.switchAppliers()}})},submitDbAppliers:function(){var t=this,e={srcBuildParam:{mhaName:this.initInfo.srcMhaName,dbApplierDtos:[]},dstBuildParam:{mhaName:this.initInfo.dstMhaName,dbApplierDtos:this.getFilteredData(),applierInitGtid:this.gtidCheck.mhaTarget}};this.dataLoading=!0,this.axios.post("/api/drc/v2/config/db/applier",e).then(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(r){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=r.data,i=1!==n.status,!i){e.next=9;break}return t.submitted=!0,t.$Message.success("提交成功"),e.next=7,t.getDbAppliers();case 7:e.next=10;break;case 9:t.$Message.warning("提交失败: "+n.message);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){t.$Message.error("提交异常: "+e)})).finally((function(){t.gtidCheck.mhaTarget=null,t.dataLoading=!1}))},batchAutoConfigure:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.tableData.map((function(e,r){return t.autoConfigApplier(e,r)}));case 1:case"end":return e.stop()}}),e)})))()},getResources:function(){var t=this;this.axios.get("/api/drc/v2/resource/db/all",{params:{srcMhaName:this.initInfo.srcMhaName,dstMhaName:this.initInfo.dstMhaName,type:1}}).then((function(e){t.applierResourceList=e.data.data}))},getDbAppliers:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.dataLoading=!0,t.axios.get("/api/drc/v2/config/mha/dbApplier",{params:{srcMhaName:t.initInfo.srcMhaName,dstMhaName:t.initInfo.dstMhaName}}).then((function(e){1===e.data.status?t.$Message.error("查询 db applier 失败!"):(t.tableData=e.data.data,t.dbApplierDtos=e.data.data,t.applierShowRefreshCounter++,t.getDbApplierInstances())})).finally((function(){t.dataLoading=!1}));case 2:case"end":return e.stop()}}),e)})))()},extractApplierIps:function(){var t=[];return this.dbApplierDtos.forEach((function(e){t=t.concat(e.ips)})),Object(a["a"])(new Set(t))},getDbApplierInstances:function(){var t=this,e=this.extractApplierIps();this.axios.get("/api/drc/v2/remote/resource/dbApplierInstances",{params:{src:this.initInfo.srcMhaName,mhaName:this.initInfo.dstMhaName,ips:e.join(",")}}).then((function(e){1===e.data.status?t.$Message.warning("查询 db applier 实例状态失败"):(t.currentInstances=new Map(Object.entries(e.data.data)),t.applierShowRefreshCounter++)}))},preBatchUpdate:function(){var t=this.$refs.multipleTable.getSelection();void 0!==t&&null!==t&&0!==t.length?(this.batchUpdateModal=!0,this.updateData=t,this.target.ips=[],this.target.gtid=""):this.$Message.warning("请勾选！")},batchUpdateAppliers:function(){var t=this,e=this.$refs.multipleTable.getSelection().map((function(t){return t.dbName}));this.tableData.forEach((function(r){e.includes(r.dbName)&&(r.ips=t.target.ips,t.target.gtid&&(r.gtidInit=t.target.gtid))})),this.$Message.warning("修改成功！共修改"+e.length+"行")},clearDeleteDbReplication:function(t,e){this.deleteData=[],this.batchDeleteModal=!1},deleteDbReplication:function(){var t=this,e=[];this.deleteData.forEach((function(t){return e.push(t.dbReplicationId)})),this.axios.delete("/api/drc/v2/config/dbReplications?dbReplicationIds="+e).then((function(e){1===e.data.status?t.$Message.error("删除失败!"+e.data.message):(t.$Message.success("删除成功!"),t.getDbAppliers(),t.initInfo.multiData=[])}))}},created:function(){var t=this;this.axios.get("/api/drc/v2/permission/meta/mhaReplication/modify").then((function(e){403!==e.data.status?(t.initInfo={srcMhaName:t.$route.query.srcMhaName,srcMhaId:t.$route.query.srcMhaId,dstMhaName:t.$route.query.dstMhaName,applierGroupId:t.$route.query.applierGroupId,srcDc:t.$route.query.srcDc,dstDc:t.$route.query.dstDc,order:t.$route.query.order},t.getResources(),t.getDbAppliers()):t.$router.push("/nopermission")}))},computed:{showSelectOptionComponent:function(){return this.tableData.length<=50}}},l=u,f=r("2877"),p=Object(f["a"])(l,n,i,!1,null,"4106d973",null);e["default"]=p.exports},a15b:function(t,e,r){"use strict";var n=r("23e7"),i=r("44ad"),a=r("fc6a"),o=r("a640"),s=[].join,c=i!=Object,u=o("join",",");n({target:"Array",proto:!0,forced:c||!u},{join:function(t){return s.call(a(this),void 0===t?",":t)}})},a4d3:function(t,e,r){"use strict";var n=r("23e7"),i=r("da84"),a=r("d066"),o=r("c430"),s=r("83ab"),c=r("4930"),u=r("fdbf"),l=r("d039"),f=r("5135"),p=r("e8b5"),d=r("861d"),h=r("825a"),g=r("7b0b"),v=r("fc6a"),m=r("c04e"),b=r("5c6c"),y=r("7c73"),w=r("df75"),x=r("241c"),S=r("057f"),D=r("7418"),M=r("06cf"),I=r("9bf2"),L=r("d1e7"),k=r("9112"),A=r("6eeb"),N=r("5692"),E=r("f772"),O=r("d012"),_=r("90e3"),j=r("b622"),R=r("e538"),C=r("746f"),T=r("d44e"),$=r("69f3"),P=r("b727").forEach,F=E("hidden"),z="Symbol",G="prototype",B=j("toPrimitive"),U=$.set,q=$.getterFor(z),V=Object[G],H=i.Symbol,J=a("JSON","stringify"),Q=M.f,W=I.f,K=S.f,Y=L.f,X=N("symbols"),Z=N("op-symbols"),tt=N("string-to-symbol-registry"),et=N("symbol-to-string-registry"),rt=N("wks"),nt=i.QObject,it=!nt||!nt[G]||!nt[G].findChild,at=s&&l((function(){return 7!=y(W({},"a",{get:function(){return W(this,"a",{value:7}).a}})).a}))?function(t,e,r){var n=Q(V,e);n&&delete V[e],W(t,e,r),n&&t!==V&&W(V,e,n)}:W,ot=function(t,e){var r=X[t]=y(H[G]);return U(r,{type:z,tag:t,description:e}),s||(r.description=e),r},st=u?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof H},ct=function(t,e,r){t===V&&ct(Z,e,r),h(t);var n=m(e,!0);return h(r),f(X,n)?(r.enumerable?(f(t,F)&&t[F][n]&&(t[F][n]=!1),r=y(r,{enumerable:b(0,!1)})):(f(t,F)||W(t,F,b(1,{})),t[F][n]=!0),at(t,n,r)):W(t,n,r)},ut=function(t,e){h(t);var r=v(e),n=w(r).concat(ht(r));return P(n,(function(e){s&&!ft.call(r,e)||ct(t,e,r[e])})),t},lt=function(t,e){return void 0===e?y(t):ut(y(t),e)},ft=function(t){var e=m(t,!0),r=Y.call(this,e);return!(this===V&&f(X,e)&&!f(Z,e))&&(!(r||!f(this,e)||!f(X,e)||f(this,F)&&this[F][e])||r)},pt=function(t,e){var r=v(t),n=m(e,!0);if(r!==V||!f(X,n)||f(Z,n)){var i=Q(r,n);return!i||!f(X,n)||f(r,F)&&r[F][n]||(i.enumerable=!0),i}},dt=function(t){var e=K(v(t)),r=[];return P(e,(function(t){f(X,t)||f(O,t)||r.push(t)})),r},ht=function(t){var e=t===V,r=K(e?Z:v(t)),n=[];return P(r,(function(t){!f(X,t)||e&&!f(V,t)||n.push(X[t])})),n};if(c||(H=function(){if(this instanceof H)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=_(t),r=function(t){this===V&&r.call(Z,t),f(this,F)&&f(this[F],e)&&(this[F][e]=!1),at(this,e,b(1,t))};return s&&it&&at(V,e,{configurable:!0,set:r}),ot(e,t)},A(H[G],"toString",(function(){return q(this).tag})),A(H,"withoutSetter",(function(t){return ot(_(t),t)})),L.f=ft,I.f=ct,M.f=pt,x.f=S.f=dt,D.f=ht,R.f=function(t){return ot(j(t),t)},s&&(W(H[G],"description",{configurable:!0,get:function(){return q(this).description}}),o||A(V,"propertyIsEnumerable",ft,{unsafe:!0}))),n({global:!0,wrap:!0,forced:!c,sham:!c},{Symbol:H}),P(w(rt),(function(t){C(t)})),n({target:z,stat:!0,forced:!c},{for:function(t){var e=String(t);if(f(tt,e))return tt[e];var r=H(e);return tt[e]=r,et[r]=e,r},keyFor:function(t){if(!st(t))throw TypeError(t+" is not a symbol");if(f(et,t))return et[t]},useSetter:function(){it=!0},useSimple:function(){it=!1}}),n({target:"Object",stat:!0,forced:!c,sham:!s},{create:lt,defineProperty:ct,defineProperties:ut,getOwnPropertyDescriptor:pt}),n({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:dt,getOwnPropertySymbols:ht}),n({target:"Object",stat:!0,forced:l((function(){D.f(1)}))},{getOwnPropertySymbols:function(t){return D.f(g(t))}}),J){var gt=!c||l((function(){var t=H();return"[null]"!=J([t])||"{}"!=J({a:t})||"{}"!=J(Object(t))}));n({target:"JSON",stat:!0,forced:gt},{stringify:function(t,e,r){var n,i=[t],a=1;while(arguments.length>a)i.push(arguments[a++]);if(n=e,(d(e)||void 0!==t)&&!st(t))return p(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!st(e))return e}),i[1]=e,J.apply(null,i)}})}H[G][B]||k(H[G],B,H[G].valueOf),T(H,z),O[F]=!0},a630:function(t,e,r){var n=r("23e7"),i=r("4df4"),a=r("1c7e"),o=!a((function(t){Array.from(t)}));n({target:"Array",stat:!0,forced:o},{from:i})},a640:function(t,e,r){"use strict";var n=r("d039");t.exports=function(t,e){var r=[][t];return!!r&&n((function(){r.call(null,e||function(){throw 1},1)}))}},ab13:function(t,e,r){var n=r("b622"),i=n("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(r){try{return e[i]=!1,"/./"[t](e)}catch(n){}}return!1}},ad6d:function(t,e,r){"use strict";var n=r("825a");t.exports=function(){var t=n(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},bb2f:function(t,e,r){var n=r("d039");t.exports=!n((function(){return Object.isExtensible(Object.preventExtensions({}))}))},d28b:function(t,e,r){var n=r("746f");n("iterator")},d81d:function(t,e,r){"use strict";var n=r("23e7"),i=r("b727").map,a=r("1dde"),o=r("ae40"),s=a("map"),c=o("map");n({target:"Array",proto:!0,forced:!s||!c},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},ddb0:function(t,e,r){var n=r("da84"),i=r("fdbc"),a=r("e260"),o=r("9112"),s=r("b622"),c=s("iterator"),u=s("toStringTag"),l=a.values;for(var f in i){var p=n[f],d=p&&p.prototype;if(d){if(d[c]!==l)try{o(d,c,l)}catch(g){d[c]=l}if(d[u]||o(d,u,f),i[f])for(var h in a)if(d[h]!==a[h])try{o(d,h,a[h])}catch(g){d[h]=a[h]}}}},e01a:function(t,e,r){"use strict";var n=r("23e7"),i=r("83ab"),a=r("da84"),o=r("5135"),s=r("861d"),c=r("9bf2").f,u=r("e893"),l=a.Symbol;if(i&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var f={},p=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof p?new l(t):void 0===t?l():l(t);return""===t&&(f[e]=!0),e};u(p,l);var d=p.prototype=l.prototype;d.constructor=p;var h=d.toString,g="Symbol(test)"==String(l("test")),v=/^Symbol\((.*)\)[^)]+$/;c(d,"description",{configurable:!0,get:function(){var t=s(this)?this.valueOf():this,e=h.call(t);if(o(f,t))return"";var r=g?e.slice(7,-1):e.replace(v,"$1");return""===r?void 0:r}}),n({global:!0,forced:!0},{Symbol:p})}},e538:function(t,e,r){var n=r("b622");e.f=n},f183:function(t,e,r){var n=r("d012"),i=r("861d"),a=r("5135"),o=r("9bf2").f,s=r("90e3"),c=r("bb2f"),u=s("meta"),l=0,f=Object.isExtensible||function(){return!0},p=function(t){o(t,u,{value:{objectID:"O"+ ++l,weakData:{}}})},d=function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!a(t,u)){if(!f(t))return"F";if(!e)return"E";p(t)}return t[u].objectID},h=function(t,e){if(!a(t,u)){if(!f(t))return!0;if(!e)return!1;p(t)}return t[u].weakData},g=function(t){return c&&v.REQUIRED&&f(t)&&!a(t,u)&&p(t),t},v=t.exports={REQUIRED:!1,fastKey:d,getWeakData:h,onFreeze:g};n[u]=!0},fdbc:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=chunk-bff8465e.af43809e.js.map