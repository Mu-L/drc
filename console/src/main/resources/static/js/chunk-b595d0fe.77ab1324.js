(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b595d0fe"],{"159b":function(t,e,o){var a=o("da84"),n=o("fdbc"),i=o("17c2"),s=o("9112");for(var r in n){var c=a[r],l=c&&c.prototype;if(l&&l.forEach!==i)try{s(l,"forEach",i)}catch(u){l.forEach=i}}},"17c2":function(t,e,o){"use strict";var a=o("b727").forEach,n=o("a640"),i=o("ae40"),s=n("forEach"),r=i("forEach");t.exports=s&&r?[].forEach:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}},4160:function(t,e,o){"use strict";var a=o("23e7"),n=o("17c2");a({target:"Array",proto:!0,forced:[].forEach!=n},{forEach:n})},a640:function(t,e,o){"use strict";var a=o("d039");t.exports=function(t,e){var o=[][t];return!!o&&a((function(){o.call(null,e||function(){throw 1},1)}))}},acdc:function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("base-component",[o("Breadcrumb",{style:{margin:"15px 0 15px 185px",position:"fixed"}},[o("BreadcrumbItem",{attrs:{to:"/home"}},[t._v("首页")]),o("BreadcrumbItem",{attrs:{to:"/clusters"}},[t._v("DRC集群")])],1),o("Content",{staticClass:"content",style:{padding:"10px",background:"#fff",margin:"50px 0 1px 185px",zIndex:"1"}},[o("div",{staticStyle:{padding:"1px 1px"}},[o("Table",{attrs:{stripe:"",columns:t.columns,data:t.mhaGroups[t.current-1]},scopedSlots:t._u([{key:"action",fn:function(e){var a=e.row,n=e.index;return[o("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"success",size:"small"},on:{click:function(e){return t.checkConfig(a,n)}}},[t._v("查看")]),o("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.goToLink(a,n)}}},[t._v("修改")]),o("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"error",size:"small"},on:{click:function(e){return t.previewRemoveConfig(a,n)}}},[t._v("删除")]),o("Modal",{attrs:{title:"DRC配置",width:"900px"},model:{value:t.cluster.modal.config,callback:function(e){t.$set(t.cluster.modal,"config",e)},expression:"cluster.modal.config"}},[o("Form",{staticStyle:{width:"100%"}},[o("FormItem",{attrs:{label:"集群配置"}},[o("Input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:30},readonly:""},model:{value:t.cluster.config,callback:function(e){t.$set(t.cluster,"config",e)},expression:"cluster.config"}})],1)],1)],1),o("Modal",{attrs:{title:"删除DRC配置",width:"900px"},on:{"on-ok":t.removeConfig,"on-cancel":t.clearRemoveConfig},model:{value:t.cluster.modal.remove,callback:function(e){t.$set(t.cluster.modal,"remove",e)},expression:"cluster.modal.remove"}},[o("Form",{staticStyle:{width:"100%"}},[o("FormItem",{attrs:{label:"确认删除以下双向复制吗？"}},[o("Input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:30},readonly:""},model:{value:t.cluster.config,callback:function(e){t.$set(t.cluster,"config",e)},expression:"cluster.config"}})],1)],1)],1)]}}])}),o("div",{staticStyle:{"text-align":"center",margin:"16px 0"}},[o("Page",{attrs:{transfer:!0,total:t.total,current:t.current,"show-sizer":""},on:{"update:current":function(e){t.current=e},"on-change":t.getMhaGroups,"on-page-size-change":t.handleChangeSize}})],1)],1)])],1)},n=[],i=(o("4160"),o("159b"),{name:"Application",data:function(){var t=this;return{cluster:{config:"",mhaAToBeRemoved:"",mhaBToBeRemoved:"",modal:{config:!1,remove:!1}},columns:[{title:"序号",width:75,align:"center",render:function(e,o){return e("span",o.index+1+(t.current-1)*t.size)}},{title:"集群A",key:"mhaA"},{title:"集群B",key:"mhaB"},{title:"状态",key:"drcStatus",align:"center"},{title:"操作",slot:"action",align:"center"}],mhaGroups:[],total:0,current:1,size:10}},computed:{},methods:{getMhaGroups:function(){var t=this;t.axios.get("/api/drc/v1/meta/groups/all").then((function(e){console.log(e),t.total=e.data.data.length;var o=0,a=[];t.mhaGroups=[],e.data.data.forEach((function(e,n){o===t.size-1?(60===e.drcEstablishStatus?a.push({mhaA:e.srcMha,mhaB:e.destMha,drcStatus:"已接入"}):a.push({mhaA:e.srcMha,mhaB:e.destMha,drcStatus:"未接入"}),t.mhaGroups.push(a),o=0,a=[]):(60===e.drcEstablishStatus?a.push({mhaA:e.srcMha,mhaB:e.destMha,drcStatus:"已接入"}):a.push({mhaA:e.srcMha,mhaB:e.destMha,drcStatus:"未接入"}),o++)})),t.mhaGroups.push(a)}))},handleChangeSize:function(t){var e=this;this.size=t,this.$nextTick((function(){e.getCluster()}))},goToLink:function(t,e){console.log("go to change config for "+t.mhaA+" and "+t.mhaB),this.$router.push({path:"/access",query:{step:"3",clustername:t.mhaA,newclustername:t.mhaB}})},checkConfig:function(t,e){var o=this;console.log(t.mhaA),console.log(t.mhaB),this.$Spin.show({render:function(t){return t("div",[t("Icon",{class:"demo-spin-icon-load",props:{size:18}}),t("div","请稍等...")])}}),this.axios.get("/api/drc/v1/meta/config/mhas/"+t.mhaA).then((function(t){var e=t.data.data;console.log(e),o.cluster.config=e,o.$Spin.hide(),o.cluster.modal.config=!0}))},previewRemoveConfig:function(t,e){var o=this;console.log(t.mhaA),console.log(t.mhaB),this.cluster.mhaAToBeRemoved=t.mhaA,this.cluster.mhaBToBeRemoved=t.mhaB,this.$Spin.show({render:function(t){return t("div",[t("Icon",{class:"demo-spin-icon-load",props:{size:18}}),t("div","请稍等...")])}}),this.axios.get("/api/drc/v1/meta/config/mhas/"+t.mhaA).then((function(t){var e=t.data.data;console.log(e),o.cluster.config=e,o.$Spin.hide(),o.cluster.modal.remove=!0}))},removeConfig:function(){var t=this;console.log("mhaAToBeRemoved",this.cluster.mhaAToBeRemoved),console.log("mhaBToBeRemoved",this.cluster.mhaBToBeRemoved),this.$Spin.show({render:function(t){return t("div",[t("Icon",{class:"demo-spin-icon-load",props:{size:18}}),t("div","请稍等...")])}}),this.axios.put("/api/drc/v1/meta/config/remove/mhas/"+this.cluster.mhaAToBeRemoved).then((function(e){var o=e.data.data;console.log(o),o&&location.reload(),t.$Spin.hide()})),this.clearRemoveConfig()},clearRemoveConfig:function(){console.log("clear mhaAToBeRemoved",this.cluster.mhaAToBeRemoved),console.log("clear mhaBToBeRemoved",this.cluster.mhaBToBeRemoved),this.cluster.mhaAToBeRemoved="",this.cluster.mhaBToBeRemoved=""}},created:function(){this.getMhaGroups()}}),s=i,r=o("2877"),c=Object(r["a"])(s,a,n,!1,null,"c3b22be4",null);e["default"]=c.exports},fdbc:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=chunk-b595d0fe.77ab1324.js.map