(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6da1284e"],{b0c0:function(t,e,o){var r=o("83ab"),i=o("9bf2").f,s=Function.prototype,l=s.toString,n=/^\s*function ([^ (]*)/,a="name";!r||a in s||i(s,a,{configurable:!0,get:function(){try{return l.call(this).match(n)[1]}catch(t){return""}}})},b4bf:function(t,e,o){"use strict";o.r(e);var r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("base-component",[o("Breadcrumb",{style:{margin:"15px 0 15px 185px",position:"fixed"}},[o("BreadcrumbItem",{attrs:{to:"/home"}},[t._v("首页")]),o("BreadcrumbItem",{attrs:{to:"/rowsFilters"}},[t._v("行过滤规则")])],1),o("Content",{staticClass:"content",style:{padding:"10px",background:"#fff",margin:"50px 0 1px 185px",zIndex:"1"}},[o("div",{style:{padding:"1px 1px",height:"100%"}},[t.display.rowsFiltersTable?[o("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary"},on:{click:t.goToCreateRowsFilter}},[t._v("创建")]),o("br"),o("br"),o("Table",{attrs:{stripe:"",columns:t.columns,data:t.rowsFiltersData,border:""},scopedSlots:t._u([{key:"action",fn:function(e){var r=e.row,i=e.index;return[o("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"success",size:"small"},on:{click:function(e){return t.goToShowRowsFilter(r,i)}}},[t._v("查看 ")]),o("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.goToUpdateRowsFilter(r,i)}}},[t._v(" 修改 ")]),o("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"error",size:"small"},on:{click:function(e){return t.deleteRowsFilter(r,i)}}},[t._v("删除 ")])]}}],null,!1,2558489088)})]:t._e(),t.display.rowsFilterForm?o("Form",{ref:"rowsFilterForSubmit",staticStyle:{"margin-top":"50px"},attrs:{model:t.rowsFilterForSubmit,"label-width":250}},[o("FormItem",{staticStyle:{width:"600px"},attrs:{label:"规则名"}},[o("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"请为该规则命名"},model:{value:t.rowsFilterForSubmit.name,callback:function(e){t.$set(t.rowsFilterForSubmit,"name",e)},expression:"rowsFilterForSubmit.name"}})],1),o("FormItem",{staticStyle:{width:"600px"},attrs:{label:"模式"}},[o("Select",{staticStyle:{width:"300px"},attrs:{placeholder:"选择行过滤模式"},model:{value:t.rowsFilterForSubmit.mode,callback:function(e){t.$set(t.rowsFilterForSubmit,"mode",e)},expression:"rowsFilterForSubmit.mode"}},t._l(t.modesForChose,(function(e){return o("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])})),1)],1),o("FormItem",{staticStyle:{width:"600px"},attrs:{label:"选择列名"}},[o("Select",{staticStyle:{width:"300px"},attrs:{multiple:"",placeholder:"选择相关列"},model:{value:t.rowsFilterForSubmit.columns,callback:function(e){t.$set(t.rowsFilterForSubmit,"columns",e)},expression:"rowsFilterForSubmit.columns"}},t._l(t.columnsForChose,(function(e){return o("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])})),1)],1),o("FormItem",{staticStyle:{width:"720px"},attrs:{label:"手动添加列名"}},[o("Row",[o("Col",{attrs:{span:"18"}},[o("Input",{attrs:{placeholder:"手动添加列"},model:{value:t.columnForAdd,callback:function(e){t.columnForAdd=e},expression:"columnForAdd"}})],1),o("Col",{attrs:{span:"4"}},[o("Button",{staticStyle:{"margin-left":"50px"},attrs:{type:"primary"},on:{click:t.addColumn}},[t._v("添加")])],1)],1)],1),o("FormItem",{staticStyle:{width:"600px"},attrs:{label:"规则内容"}},["trip_uid"!==t.rowsFilterForSubmit.mode?o("Input",{staticStyle:{width:"300px"},attrs:{type:"textarea",placeholder:"请输入行过滤内容"},model:{value:t.rowsFilterForSubmit.content,callback:function(e){t.$set(t.rowsFilterForSubmit,"content",e)},expression:"rowsFilterForSubmit.content"}}):t._e(),"trip_uid"===t.rowsFilterForSubmit.mode?o("Select",{staticStyle:{width:"300px"},attrs:{placeholder:"Region 选择"},model:{value:t.rowsFilterForSubmit.content,callback:function(e){t.$set(t.rowsFilterForSubmit,"content",e)},expression:"rowsFilterForSubmit.content"}},t._l(t.regionsForChose,(function(e){return o("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])})),1):t._e()],1),o("FormItem",[t.display.submitButton&&!t.display.showAction?o("Button",{attrs:{type:"primary"},on:{click:t.submitRowsFilter}},[t._v("提交")]):t._e(),o("Button",{staticStyle:{"margin-left":"50px"},on:{click:t.cancelSubmit}},[t._v("返回")])],1)],1):t._e()],2)])],1)},i=[],s=(o("b0c0"),{name:"rowsFilters",data:function(){return{display:{rowsFiltersTable:!0,rowsFilterForm:!1,submitButton:!0},rowsFiltersData:[],columns:[{title:"序号",width:75,align:"center",render:function(t,e){return t("span",e.index+1)}},{title:"规则名",key:"name"},{title:"模式",key:"mode"},{title:"列名",key:"columns"},{title:"内容",key:"content"},{title:"操作",slot:"action",align:"center"}],rowsFilterForSubmit:{id:null,name:null,mode:"trip_uid",columns:[],content:null},modesForChose:["aviator_regex","java_regex","trip_uid","custom"],columnsForChose:["UID"],regionsForChose:["SIN","SH"],columnForAdd:null}},methods:{getAllRowsFilters:function(){var t=this;this.axios.get("/api/drc/v1/build/rowsFilters").then((function(e){1===e.data.status?window.alert("查询RowsFilters 失败"):(console.log(e.data.data),t.rowsFiltersData=e.data.data)}))},goToUpdateRowsFilter:function(t,e){this.columnsForChose=t.columns,this.rowsFilterForSubmit={id:t.id,name:t.name,mode:t.mode,columns:t.columns,content:t.content},this.showUpdateOrCreateRowsFiltersForm()},goToCreateRowsFilter:function(){this.columnsForChose=["UID"],this.rowsFilterForSubmit={id:null,name:null,mode:"trip_uid",columns:["UID"],content:"SIN"},this.showUpdateOrCreateRowsFiltersForm()},goToShowRowsFilter:function(t,e){this.columnsForChose=t.columns,this.rowsFilterForSubmit={id:t.id,name:t.name,mode:t.mode,columns:t.columns,content:t.content},this.showRowsFiltersForm()},deleteRowsFilter:function(t,e){var o=this;this.axios.delete("/api/drc/v1/meta/rowsFilter/"+t.id).then((function(t){1===t.data.status?window.alert("删除失败!"):(window.alert("删除成功"),o.getAllRowsFilters())}))},addColumn:function(){this.columnsForChose.push(this.columnForAdd),this.rowsFilterForSubmit.columns.push(this.columnForAdd)},submitRowsFilter:function(){var t=this,e=this.rowsFilterForSubmit;null!==e.name&&null!==e.mode?this.axios.post("/api/drc/v1/meta/rowsFilter",e).then((function(e){1===e.data.status?window.alert("提交失败!"):(window.alert("提交成功！"),t.rowsFiltersData=e.data.data,t.getAllRowsFilters())})):window.alert("参数缺失，禁止提交！")},cancelSubmit:function(){this.getAllRowsFilters(),this.showRowsFiltersTable()},showRowsFiltersTable:function(){this.display={rowsFiltersTable:!0,rowsFilterForm:!1,submitButton:!1}},showUpdateOrCreateRowsFiltersForm:function(){this.display={rowsFiltersTable:!1,rowsFilterForm:!0,submitButton:!0}},showRowsFiltersForm:function(){this.display={rowsFiltersTable:!1,rowsFilterForm:!0,submitButton:!1}}},created:function(){this.getAllRowsFilters()}}),l=s,n=o("2877"),a=Object(n["a"])(l,r,i,!1,null,"3284bd5c",null);e["default"]=a.exports}}]);
//# sourceMappingURL=chunk-6da1284e.77bc6d43.js.map