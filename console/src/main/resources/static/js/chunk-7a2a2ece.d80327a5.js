(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7a2a2ece"],{"06c5":function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));a("a630"),a("fb6a"),a("b0c0"),a("d3b7"),a("ac1f"),a("25f0"),a("3ca3");var r=a("6b75");function n(e,t){if(e){if("string"==typeof e)return Object(r["a"])(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Object(r["a"])(e,t):void 0}}},2532:function(e,t,a){"use strict";var r=a("23e7"),n=a("5a34"),o=a("1d80"),i=a("ab13");r({target:"String",proto:!0,forced:!i("includes")},{includes:function(e){return!!~String(o(this)).indexOf(n(e),arguments.length>1?arguments[1]:void 0)}})},"25f0":function(e,t,a){"use strict";var r=a("6eeb"),n=a("825a"),o=a("d039"),i=a("ad6d"),s="toString",l=RegExp.prototype,c=l[s],m=o((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),u=c.name!=s;(m||u)&&r(RegExp.prototype,s,(function(){var e=n(this),t=String(e.source),a=e.flags,r=String(void 0===a&&e instanceof RegExp&&!("flags"in l)?i.call(e):a);return"/"+t+"/"+r}),{unsafe:!0})},2909:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var r=a("6b75");function n(e){if(Array.isArray(e))return Object(r["a"])(e)}a("a4d3"),a("e01a"),a("d28b"),a("a630"),a("e260"),a("d3b7"),a("3ca3"),a("ddb0");function o(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}var i=a("06c5");function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e){return n(e)||o(e)||Object(i["a"])(e)||s()}},"44e7":function(e,t,a){var r=a("861d"),n=a("c6b6"),o=a("b622"),i=o("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==n(e))}},"4df4":function(e,t,a){"use strict";var r=a("0366"),n=a("7b0b"),o=a("9bdd"),i=a("e95a"),s=a("50c4"),l=a("8418"),c=a("35a1");e.exports=function(e){var t,a,m,u,d,f,g=n(e),b="function"==typeof this?this:Array,h=arguments.length,p=h>1?arguments[1]:void 0,I=void 0!==p,v=c(g),w=0;if(I&&(p=r(p,h>2?arguments[2]:void 0,2)),void 0==v||b==Array&&i(v))for(t=s(g.length),a=new b(t);t>w;w++)f=I?p(g[w],w):g[w],l(a,w,f);else for(u=v.call(g),d=u.next,a=new b;!(m=d.call(u)).done;w++)f=I?o(u,p,[m.value,w],!0):m.value,l(a,w,f);return a.length=w,a}},"5a34":function(e,t,a){var r=a("44e7");e.exports=function(e){if(r(e))throw TypeError("The method doesn't accept regular expressions");return e}},"6b75":function(e,t,a){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=Array(t);a<t;a++)r[a]=e[a];return r}a.d(t,"a",(function(){return r}))},9263:function(e,t,a){"use strict";var r=a("ad6d"),n=a("9f7f"),o=RegExp.prototype.exec,i=String.prototype.replace,s=o,l=function(){var e=/a/,t=/b*/g;return o.call(e,"a"),o.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),c=n.UNSUPPORTED_Y||n.BROKEN_CARET,m=void 0!==/()??/.exec("")[1],u=l||m||c;u&&(s=function(e){var t,a,n,s,u=this,d=c&&u.sticky,f=r.call(u),g=u.source,b=0,h=e;return d&&(f=f.replace("y",""),-1===f.indexOf("g")&&(f+="g"),h=String(e).slice(u.lastIndex),u.lastIndex>0&&(!u.multiline||u.multiline&&"\n"!==e[u.lastIndex-1])&&(g="(?: "+g+")",h=" "+h,b++),a=new RegExp("^(?:"+g+")",f)),m&&(a=new RegExp("^"+g+"$(?!\\s)",f)),l&&(t=u.lastIndex),n=o.call(d?a:u,h),d?n?(n.input=n.input.slice(b),n[0]=n[0].slice(b),n.index=u.lastIndex,u.lastIndex+=n[0].length):u.lastIndex=0:l&&n&&(u.lastIndex=u.global?n.index+n[0].length:t),m&&n&&n.length>1&&i.call(n[0],a,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(n[s]=void 0)})),n}),e.exports=s},"9aa3":function(e,t,a){},"9f7f":function(e,t,a){"use strict";var r=a("d039");function n(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=r((function(){var e=n("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=r((function(){var e=n("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},a15b:function(e,t,a){"use strict";var r=a("23e7"),n=a("44ad"),o=a("fc6a"),i=a("a640"),s=[].join,l=n!=Object,c=i("join",",");r({target:"Array",proto:!0,forced:l||!c},{join:function(e){return s.call(o(this),void 0===e?",":e)}})},a630:function(e,t,a){var r=a("23e7"),n=a("4df4"),o=a("1c7e"),i=!o((function(e){Array.from(e)}));r({target:"Array",stat:!0,forced:i},{from:n})},ab13:function(e,t,a){var r=a("b622"),n=r("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(a){try{return t[n]=!1,"/./"[e](t)}catch(r){}}return!1}},ac1f:function(e,t,a){"use strict";var r=a("23e7"),n=a("9263");r({target:"RegExp",proto:!0,forced:/./.exec!==n},{exec:n})},ad6d:function(e,t,a){"use strict";var r=a("825a");e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},c43d:function(e,t,a){"use strict";a("9aa3")},ced6:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("base-component",[a("Breadcrumb",{style:{margin:"15px 0 15px 185px",position:"fixed"}},[a("BreadcrumbItem",{attrs:{to:"/home"}},[e._v("首页")]),a("BreadcrumbItem",{attrs:{to:"/v2/dbDrcBuild"}},[e._v("建立 DRC 同步")])],1),a("Content",{staticClass:"content",style:{padding:"10px",background:"#ffffff",margin:"50px 0 111px 185px",zIndex:"1"}},[a("Row",{attrs:{gutter:10,align:"middle"}},[a("Col",{attrs:{span:"13"}},[a("Form",{staticStyle:{"margin-right":"20px","margin-top":"10px"},attrs:{model:e.formItem,"label-width":100}},[a("FormItem",{attrs:{label:"配置模式",required:!0}},[a("Select",{attrs:{clearable:"",placeholder:"模式"},model:{value:e.formItem.buildMode,callback:function(t){e.$set(e.formItem,"buildMode",t)},expression:"formItem.buildMode"}},[a("Option",{attrs:{value:0}},[e._v("单库")]),a("Option",{attrs:{value:1}},[e._v("分库")]),a("Option",{attrs:{value:2}},[e._v("自定义多库")])],1)],1),0===e.formItem.buildMode?a("div",[a("FormItem",{attrs:{label:"数据库",required:!0}},[a("Select",{attrs:{filterable:"",placeholder:"请搜索数据库信息","remote-method":e.getExistDb,loading:e.dataLoading},on:{"on-change":e.selectDb},model:{value:e.formItem.dbName,callback:function(t){e.$set(e.formItem,"dbName",t)},expression:"formItem.dbName"}},e._l(e.meta.dbOptions,(function(t,r){return a("Option",{key:r,attrs:{value:t.dbName}},[e._v(" "+e._s(t.dbName)+" ")])})),1)],1)],1):e._e(),1===e.formItem.buildMode?a("div",[a("FormItem",{attrs:{label:"dalcluster",required:!0}},[a("Input",{attrs:{placeholder:"请输入 dalCluster 名称"},on:{"on-keydown":function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"]))return null;t.preventDefault()},"on-blur":e.afterEnterDalCluster},model:{value:e.formItem.dalClusterModeOption.dalClusterName,callback:function(t){e.$set(e.formItem.dalClusterModeOption,"dalClusterName",t)},expression:"formItem.dalClusterModeOption.dalClusterName"}})],1)],1):e._e(),2===e.formItem.buildMode?a("div",[a("FormItem",{attrs:{label:"数据库列表",required:!0}},[a("Input",{attrs:{placeholder:"请输入数据库列表，英文逗号分隔"},on:{"on-keydown":function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"]))return null;t.preventDefault()},"on-blur":e.afterEnterDalCluster},model:{value:e.formItem.dbName,callback:function(t){e.$set(e.formItem,"dbName",t)},expression:"formItem.dbName"}})],1)],1):e._e(),a("FormItem",{attrs:{label:"同步方向",required:!0}},[a("Row",[a("Col",{attrs:{span:"11"}},[a("Card",{attrs:{bordered:!0},scopedSlots:e._u([{key:"title",fn:function(){return[a("Icon",{attrs:{type:"ios-pin"}}),e._v(" 源 region ")]},proxy:!0}])},[a("FormItem",[a("Select",{attrs:{filterable:"",clearable:"",placeholder:"地域"},on:{"on-change":e.afterSwitchRegion},model:{value:e.formItem.srcRegionName,callback:function(t){e.$set(e.formItem,"srcRegionName",t)},expression:"formItem.srcRegionName"}},e._l(e.meta.regionOptions,(function(t){return a("Option",{key:t,attrs:{value:t,label:t}},[e._v(" "+e._s(t)+" ")])})),1)],1)],1)],1),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}},[a("Button",{attrs:{size:"small",shape:"circle",type:"default",loading:e.dataLoading},on:{click:e.getRegionOptions}},[e._v(" -> ")])],1),a("Col",{attrs:{span:"11"}},[a("Card",{attrs:{bordered:!0},scopedSlots:e._u([{key:"title",fn:function(){return[a("Icon",{attrs:{type:"ios-pin"}}),e._v(" 目标 region ")]},proxy:!0}])},[a("FormItem",[a("Select",{attrs:{filterable:"",clearable:"",placeholder:"地域"},on:{"on-change":e.afterSwitchRegion},model:{value:e.formItem.dstRegionName,callback:function(t){e.$set(e.formItem,"dstRegionName",t)},expression:"formItem.dstRegionName"}},e._l(e.meta.regionOptions,(function(t){return a("Option",{key:t,attrs:{value:t,label:t}},[e._v(" "+e._s(t)+" ")])})),1)],1)],1)],1)],1)],1),a("FormItem",{attrs:{label:"同步表",required:!0}},[a("Input",{attrs:{placeholder:"请输入正则表达式"},on:{"on-keydown":function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"]))return null;t.preventDefault()},"on-blur":e.afterEnterTableName},model:{value:e.formItem.tableName,callback:function(t){e.$set(e.formItem,"tableName",t)},expression:"formItem.tableName"}})],1),a("FormItem",{attrs:{label:"行过滤"}},[a("i-switch",{attrs:{size:"large"},scopedSlots:e._u([{key:"open",fn:function(){return[a("span",[e._v("On")])]},proxy:!0},{key:"close",fn:function(){return[a("span",[e._v("Off")])]},proxy:!0}]),model:{value:e.formItem.switch.rowsFilter,callback:function(t){e.$set(e.formItem.switch,"rowsFilter",t)},expression:"formItem.switch.rowsFilter"}})],1),e.formItem.switch.rowsFilter?a("Card",{staticStyle:{"margin-left":"100px"},scopedSlots:e._u([{key:"title",fn:function(){return[a("Icon",{attrs:{type:"md-settings"}}),e._v(" 行过滤配置 "),a("Button",{staticStyle:{"margin-left":"50px"},attrs:{icon:"ios-refresh",size:"small",type:"primary",loading:e.commonColumnLoading},on:{click:e.getCommonColumns}},[e._v("获取公共字段 ")])]},proxy:!0}],null,!1,571298879)},[a("FormItem",{attrs:{label:"模式"}},[a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"选择行过滤模式"},model:{value:e.formItem.rowsFilterDetail.mode,callback:function(t){e.$set(e.formItem.rowsFilterDetail,"mode",t)},expression:"formItem.rowsFilterDetail.mode"}},e._l(e.formItem.constants.rowsFilter.modes,(function(t){return a("Option",{key:t.mode,attrs:{value:t.mode}},[e._v(" "+e._s(t.name)+" ")])})),1)],1),e.useTripUdlOrUidMode?a("div",[e.fillContextByRegion?a("FormItem",{attrs:{label:"规则内容"}},[a("Select",{staticStyle:{width:"200px"},attrs:{multiple:"",placeholder:"Region 选择"},model:{value:e.formItem.constants.rowsFilter.configInTripUid.regionsChosen,callback:function(t){e.$set(e.formItem.constants.rowsFilter.configInTripUid,"regionsChosen",t)},expression:"formItem.constants.rowsFilter.configInTripUid.regionsChosen"}},e._l(e.formItem.constants.rowsFilter.regionsForChose,(function(t){return a("Option",{key:t,attrs:{value:t}},[e._v(" "+e._s(t)+" ")])})),1)],1):e._e(),e.showUdlConfigDetail?a("div",[a("Divider",[e._v("UDL配置")]),a("FormItem",{attrs:{label:"UDL字段"}},[a("Select",{staticStyle:{width:"200px"},attrs:{filterable:"","allow-create":"",multiple:"",placeholder:"不选默认则无UDL配置"},model:{value:e.formItem.rowsFilterDetail.udlColumns,callback:function(t){e.$set(e.formItem.rowsFilterDetail,"udlColumns",t)},expression:"formItem.rowsFilterDetail.udlColumns"}},e._l(e.formItem.constants.columnsForChose,(function(t){return a("Option",{key:t,attrs:{value:t}},[e._v(e._s(t)+" ")])})),1)],1),e.hasUdlColumn?a("FormItem",{attrs:{label:"DRC UDL策略id"}},[a("Select",{staticStyle:{width:"200px"},attrs:{filterable:"","allow-create":"",placeholder:"请选择ucs策略id"},model:{value:e.formItem.rowsFilterDetail.drcStrategyId,callback:function(t){e.$set(e.formItem.rowsFilterDetail,"drcStrategyId",t)},expression:"formItem.rowsFilterDetail.drcStrategyId"}},e._l(e.formItem.constants.rowsFilter.drcStrategyIdsForChose,(function(t){return a("Option",{key:t,attrs:{value:t}},[e._v(e._s(t)+" ")])})),1)],1):e._e()],1):e._e(),e.showUidConfigDetail?a("div",[a("Divider",[e._v("UID配置")]),a("FormItem",{attrs:{label:"UID字段"}},[a("Select",{staticStyle:{width:"200px"},attrs:{filterable:"","allow-create":"",multiple:"",placeholder:"不选默认则无UID配置"},model:{value:e.formItem.rowsFilterDetail.columns,callback:function(t){e.$set(e.formItem.rowsFilterDetail,"columns",t)},expression:"formItem.rowsFilterDetail.columns"}},e._l(e.formItem.constants.columnsForChose,(function(t){return a("Option",{key:t,attrs:{value:t}},[e._v(e._s(t)+" ")])})),1)],1),e.hasUidColumn?a("FormItem",{attrs:{label:"fetchMode"}},[a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"选择"},on:{"on-change":function(t){return e.fetchModeChange()}},model:{value:e.formItem.rowsFilterDetail.fetchMode,callback:function(t){e.$set(e.formItem.rowsFilterDetail,"fetchMode",t)},expression:"formItem.rowsFilterDetail.fetchMode"}},e._l(e.formItem.constants.rowsFilter.fetchModeForChose,(function(t){return a("Option",{key:t.k,attrs:{value:t.v}},[e._v(" "+e._s(t.k)+" ")])})),1)],1):e._e(),e.hasUidColumn?a("FormItem",{attrs:{label:"空处理"}},[a("Checkbox",{model:{value:e.formItem.rowsFilterDetail.illegalArgument,callback:function(t){e.$set(e.formItem.rowsFilterDetail,"illegalArgument",t)},expression:"formItem.rowsFilterDetail.illegalArgument"}},[e._v("【字段为空时】同步")])],1):e._e()],1):e._e()],1):a("div",[a("FormItem",{attrs:{label:"规则内容"}},[a("Input",{staticStyle:{width:"250px"},attrs:{type:"textarea",placeholder:"请输入行过滤内容"},model:{value:e.formItem.rowsFilterDetail.context,callback:function(t){e.$set(e.formItem.rowsFilterDetail,"context",t)},expression:"formItem.rowsFilterDetail.context"}})],1),a("FormItem",{attrs:{label:"相关字段"}},[a("Select",{staticStyle:{width:"200px"},attrs:{filterable:"","allow-create":"",multiple:"",placeholder:"选择相关字段"},model:{value:e.formItem.rowsFilterDetail.columns,callback:function(t){e.$set(e.formItem.rowsFilterDetail,"columns",t)},expression:"formItem.rowsFilterDetail.columns"}},e._l(e.formItem.constants.columnsForChose,(function(e){return a("Option",{key:e,attrs:{value:e,lable:e}})})),1)],1)],1)],1):e._e(),a("FormItem",{attrs:{label:"列过滤"}},[a("i-switch",{attrs:{size:"large"},scopedSlots:e._u([{key:"open",fn:function(){return[a("span",[e._v("On")])]},proxy:!0},{key:"close",fn:function(){return[a("span",[e._v("Off")])]},proxy:!0}]),model:{value:e.formItem.switch.colsFilter,callback:function(t){e.$set(e.formItem.switch,"colsFilter",t)},expression:"formItem.switch.colsFilter"}})],1),e.formItem.switch.colsFilter?a("Card",{staticStyle:{"margin-left":"100px"},scopedSlots:e._u([{key:"title",fn:function(){return[a("Icon",{attrs:{type:"md-settings"}}),e._v(" 列过滤配置 "),a("Button",{staticStyle:{"margin-left":"50px"},attrs:{icon:"ios-refresh",size:"small",type:"primary",loading:e.commonColumnLoading},on:{click:e.getCommonColumns}},[e._v("获取公共字段 ")])]},proxy:!0}],null,!1,2228726756)},[a("FormItem",{attrs:{label:"模式"}},[a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"选择字段过滤模式"},model:{value:e.formItem.colsFilterDetail.mode,callback:function(t){e.$set(e.formItem.colsFilterDetail,"mode",t)},expression:"formItem.colsFilterDetail.mode"}},e._l(e.formItem.constants.colsFilter.modes,(function(t){return a("Option",{key:t.mode,attrs:{value:t.mode}},[e._v(" "+e._s(t.name)+" ")])})),1)],1),a("FormItem",{attrs:{label:"字段"}},[a("Select",{staticStyle:{width:"200px"},attrs:{filterable:"","allow-create":"",multiple:"",placeholder:"选择相关的字段"},on:{"on-create":e.handleCreateColumn},model:{value:e.formItem.colsFilterDetail.columns,callback:function(t){e.$set(e.formItem.colsFilterDetail,"columns",t)},expression:"formItem.colsFilterDetail.columns"}},e._l(e.formItem.constants.columnsForChose,(function(t){return a("Option",{key:t,attrs:{value:t}},[e._v(e._s(t)+" ")])})),1)],1)],1):e._e(),a("FormItem",{attrs:{label:"业务部门",required:!0}},[a("Select",{attrs:{filterable:"",prefix:"ios-home",clearable:"",placeholder:"部门"},on:{"on-change":e.autoSetTag},model:{value:e.formItem.buName,callback:function(t){e.$set(e.formItem,"buName",t)},expression:"formItem.buName"}},e._l(e.meta.bus,(function(t){return a("Option",{key:t.buName,attrs:{value:t.buName}},[e._v(e._s(t.buName))])})),1)],1),a("FormItem",{attrs:{label:"Tag",prop:"tag",required:!0}},[a("Select",{staticStyle:{width:"200px"},attrs:{filterable:"","allow-create":"",placeholder:"选择tag"},on:{"on-create":e.handleCreateTag},model:{value:e.formItem.tag,callback:function(t){e.$set(e.formItem,"tag",t)},expression:"formItem.tag"}},e._l(e.meta.tags,(function(t){return a("Option",{key:t,attrs:{value:t}},[e._v(e._s(t))])})),1)],1),e.gtidConfigurable?a("FormItem",{attrs:{label:"初始同步位点",prop:"gtidInit"}},[a("Input",{staticStyle:{width:"80%","margin-right":"10px"},attrs:{border:!1,placeholder:"请输入binlog拉取位点"},model:{value:e.formItem.gtidInit,callback:function(t){e.$set(e.formItem,"gtidInit",t)},expression:"formItem.gtidInit"}}),a("Button",{attrs:{type:"success"},on:{click:e.querySrcMhaGtidCheckRes}},[e._v("位点校验")])],1):e._e(),a("FormItem",[a("Button",{attrs:{type:"primary",loading:e.dataLoading,disabled:0===e.previewDataList.length||!e.formItem.tableName},on:{click:e.beforeSubmit}},[e._v("提交 ")])],1)],1)],1),a("Col",{attrs:{span:"11"}},[a("Divider",[e._v("预览：同步集群")]),a("Button",{staticStyle:{"margin-bottom":"5px"},attrs:{type:"primary",loading:e.table.dbMhaTableLoading},on:{click:e.getDalInfo}},[e._v(" 检查同步集群 ")]),a("Table",{attrs:{size:"small",loading:e.table.dbMhaTableLoading,stripe:"",columns:e.table.dbMhaTableColumn,data:e.preCheckMhaReplicationPage,border:""}}),a("div",[a("Page",{attrs:{transfer:!0,total:e.previewDataList.length,current:e.table.dbMhaTablePage.current,"page-size-opts":e.table.dbMhaTablePage.pageSizeOpts,"page-size":e.table.dbMhaTablePage.size,"show-total":"","show-sizer":"","show-elevator":""},on:{"update:current":function(t){return e.$set(e.table.dbMhaTablePage,"current",t)},"on-page-size-change":function(t){e.table.dbMhaTablePage.size=t}}})],1),a("Divider",{staticStyle:{"margin-top":"50px"}},[e._v("预览：同步表")]),a("Button",{staticStyle:{"margin-bottom":"5px"},attrs:{type:"primary",loading:e.table.dbTableLoading},on:{click:e.getTableInfo}},[e._v(" 检查同步表 ")]),a("Table",{attrs:{size:"small",loading:e.table.dbTableLoading,stripe:"",columns:e.table.dbTableColumn,data:e.preCheckTablePage,border:""}}),a("div",[a("Page",{attrs:{transfer:!0,total:e.checkTableDataList.length,current:e.table.dbTablePage.current,"page-size-opts":e.table.dbTablePage.pageSizeOpts,"page-size":e.table.dbTablePage.size,"show-total":"","show-sizer":"","show-elevator":""},on:{"update:current":function(t){return e.$set(e.table.dbTablePage,"current",t)},"on-page-size-change":function(t){e.table.dbTablePage=t}}})],1)],1)],1),a("Modal",{attrs:{title:"gitd位点校验结果",width:"900px"},model:{value:e.gtidCheck.modal,callback:function(t){e.$set(e.gtidCheck,"modal",t)},expression:"gtidCheck.modal"}},[a("Form",{staticStyle:{width:"80%"}},[a("FormItem",{attrs:{label:"校验结果"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:30},readonly:""},model:{value:e.gtidCheck.resVo.legal,callback:function(t){e.$set(e.gtidCheck.resVo,"legal",t)},expression:"gtidCheck.resVo.legal"}})],1),a("FormItem",{attrs:{label:"当前Mha"}},[a("Input",{attrs:{autosize:{minRows:1,maxRows:30},readonly:""},model:{value:e.gtidCheck.resVo.mha,callback:function(t){e.$set(e.gtidCheck.resVo,"mha",t)},expression:"gtidCheck.resVo.mha"}})],1),a("FormItem",{attrs:{label:"配置位点"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:30},readonly:""},model:{value:e.gtidCheck.resVo.configGtid,callback:function(t){e.$set(e.gtidCheck.resVo,"configGtid",t)},expression:"gtidCheck.resVo.configGtid"}})],1),a("FormItem",{attrs:{label:"purgedGtid"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:30},readonly:""},model:{value:e.gtidCheck.resVo.purgedGtid,callback:function(t){e.$set(e.gtidCheck.resVo,"purgedGtid",t)},expression:"gtidCheck.resVo.purgedGtid"}})],1)],1)],1),a("Drawer",{attrs:{title:"请确认同步信息",width:"80","mask-closable":!1},model:{value:e.drawer.show,callback:function(t){e.$set(e.drawer,"show",t)},expression:"drawer.show"}},[e.alertInfo.show?a("Alert",{attrs:{type:"warning","show-icon":"",closable:""},scopedSlots:e._u([{key:"desc",fn:function(){return[e._v(e._s(e.alertInfo.message))]},proxy:!0}],null,!1,3041357252)},[e._v(" "+e._s(e.alertInfo.title)+" ")]):e._e(),e.alertInfo.successShow?a("Alert",{attrs:{type:"success","show-icon":"",closable:""},scopedSlots:e._u([{key:"desc",fn:function(){return[e._v(e._s(e.alertInfo.message))]},proxy:!0}],null,!1,3041357252)},[e._v(" "+e._s(e.alertInfo.title)+" ")]):e._e(),a("Table",{attrs:{size:"small",loading:e.dataLoading,stripe:"",border:"",columns:e.drawer.tableColumns,data:e.finalBuildParam}}),a("div",{staticClass:"drawer-footer"},[a("Divider"),a("Button",{staticStyle:{"margin-right":"8px"},on:{click:function(t){e.drawer.show=!1}}},[e._v("关闭")]),a("Button",{directives:[{name:"show",rawName:"v-show",value:!e.successSubmit,expression:"!successSubmit"}],attrs:{type:"primary",loading:e.dataLoading},on:{click:e.submitAll}},[e._v("提交")])],1)],1)],1)],1)},n=[],o=a("2909"),i=a("53ca"),s=a("c7eb"),l=a("1da1"),c=(a("4de4"),a("caad"),a("a15b"),a("d81d"),a("fb6a"),a("b0c0"),a("d3b7"),a("2532"),{data:function(){var e=this;return{formItem:{buildMode:0,srcRegionName:null,dstRegionName:null,dbName:null,dalClusterModeOption:{dalClusterName:null},buName:null,tag:"COMMON",tableName:null,rowsFilterDetail:{mode:1,drcStrategyId:0,routeStrategyId:0,udlColumns:[],columns:[],context:"",illegalArgument:!1,fetchMode:0},colsFilterDetail:{mode:null,columns:[]},gtidInit:"",textarea:"",switch:{rowsFilter:!1,colsFilter:!1},constants:{drcStatus:{NOT_EXIST:-1,STOP:0,STARTED:1,PARTIAL_STARTED:2},drcApplyMode:{MHA_APPLY:0,DB_APPLY:1},rowsFilter:{configInTripUid:{regionsChosen:[]},filterMode:{JAVA_REGEX:0,TRIP_UDL:1,AVIATOR_REGEX:3,CUSTOM:4,TRIP_UDL_UID:5},fetchMode:{RPC:0,BlackList:1,WhiteList:2,BlackList_Global:3},modes:[{name:"trip_udl",mode:1},{name:"java_regex",mode:0},{name:"aviator_regex",mode:3},{name:"custom",mode:4},{name:"trip_udl_uid",mode:5}],regionsForChose:["SGP","SIN","SH","FRA"],drcStrategyIdsForChose:[2000000002],fetchModeForChose:[{k:"RPC调用",v:0},{k:"BlackList",v:1},{k:"WhiteList",v:2},{k:"BlackListGlobal",v:3}]},colsFilter:{modes:[{name:"exclude",mode:0},{name:"include",mode:1},{name:"regex",mode:2}]},columnsForChose:[]}},gtidCheck:{modal:!1,resVo:{mha:"",legal:"",configGtid:"",purgedGtid:""}},meta:{bus:[],regions:[],regionOptions:[],existReplicationRegionOptions:[],dbOptions:[],tags:this.constant.tagList,selectedDb:{}},drawer:{show:!1,tableColumns:[{title:"状态（点击查看详情）",key:"status",width:200,align:"center",render:function(t,a){var r,n,o,i,c=a.row,m=c.viewOnlyInfo.drcApplyMode,u=c.viewOnlyInfo.drcStatus,d=-1===u;return m===e.formItem.constants.drcApplyMode.DB_APPLY?(o="DB 粒度同步",i="success",u===e.formItem.constants.drcStatus.STARTED?(n="已接入",r="primary"):u===e.formItem.constants.drcStatus.PARTIAL_STARTED?(n="部分接入",r="primary",i="error"):(n="未接入",r="default")):u===e.formItem.constants.drcStatus.STARTED?(n="已接入",r="primary"):(n="未接入",r="default"),t("div",[m===e.formItem.constants.drcApplyMode.DB_APPLY&&t("Tag",{props:{color:i}},o),t("Button",{on:{click:function(){var t=Object(l["a"])(Object(s["a"])().mark((function t(){var a;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e.$router.resolve({path:"/drcV2",query:{step:3,srcMhaName:c.srcMhaName,dstMhaName:c.dstMhaName}}),window.open(a.href,"_blank");case 2:case"end":return t.stop()}}),t)})));function a(){return t.apply(this,arguments)}return a}()},props:{type:r,disabled:d,icon:"ios-open-outline"}},n)])}},{title:"源集群",key:"srcMhaName",render:function(e,t){var a=t.row,r=a.srcMhaName,n=a.srcDcName;return e("div",[e("span",r),e("span",{style:{float:"right",color:"#ababab"}},n)])}},{title:"目标集群",key:"srcMhaName",render:function(e,t){var a=t.row,r=a.dstMhaName,n=a.dstDcName;return e("div",[e("span",r),e("span",{style:{float:"right",color:"#ababab"}},n)])}},{title:"BU",key:"buName"},{title:"表过滤",key:"tableFilter"},{title:"DB名",key:"dbName",render:function(e,t){var a=t.row,r=a.dbName.join("\r\n");return e("div",{style:{"white-space":"pre-wrap"}},r)}}]},alertInfo:{show:!1,successShow:!1,title:null,message:null},dbClusterInfoList:[],finalBuildParam:[],previewDataList:[],checkTableDataList:[],table:{dbMhaTableLoading:!1,dbMhaTableColumn:[{title:"DB名",key:"dbName"},{title:"源集群",key:"srcMhaName",render:function(e,t){var a=t.row,r=a.srcMha;if(null!=r)return e("div",[e("span",r.name),e("span",{style:{float:"right",color:"#ababab"}},r.regionName+"("+r.dcName+")")])}},{title:"目标集群",key:"dstMhaName",render:function(e,t){var a=t.row,r=a.dstMha;if(null!=r)return e("div",[e("span",r.name),e("span",{style:{float:"right",color:"#ababab"}},r.regionName+"("+r.dcName+")")])}}],dbMhaTablePage:{total:0,current:1,size:5,pageSizeOpts:[5,10,20,100]},dbTableLoading:!1,dbTableColumn:[{title:"序号",width:75,align:"center",fixed:"left",render:function(e,t){return e("span",t.index+1)}},{title:"库名",key:"schema",resizable:!0},{title:"表名",key:"table",resizable:!0},{title:"结果",align:"center",render:function(e,t){var a=t.row,r="ok"!==a.res?"volcano":"green",n=a.res;return e("Tag",{props:{color:r}},n)}}],dbTablePage:{total:0,current:1,size:5,pageSizeOpts:[5,10,20,100]}},dataLoading:!1,successSubmit:!1,commonColumnLoading:!1}},methods:{getBus:function(){var e=this;this.axios.get("/api/drc/v2/meta/bus/all").then((function(t){e.meta.bus=t.data.data}))},getRegions:function(){var e=this;this.axios.get("/api/drc/v2/meta/regions/all").then((function(t){e.meta.regions=t.data.data.map((function(e){return e.regionName})),e.meta.regionOptions=e.meta.regions}))},getParams:function(){var e={};return e.buName=this.formItem.buName,e.tag=this.formItem.tag,e.mode=this.formItem.buildMode,e.srcRegionName=this.formItem.srcRegionName,e.dstRegionName=this.formItem.dstRegionName,this.gtidConfigurable&&(e.gtidInit=this.formItem.gtidInit),e.tblsFilterDetail={tableNames:this.formItem.tableName},0===this.formItem.buildMode?e.dbName=this.formItem.dbName:1===this.formItem.buildMode?e.dalClusterName=this.formItem.dalClusterModeOption.dalClusterName:2===this.formItem.buildMode&&(e.dbName=this.formItem.dbName),this.formItem.switch.rowsFilter&&(this.useTripUdlOrUidMode&&(this.fillContextByRegion?this.formItem.rowsFilterDetail.context=this.formItem.constants.rowsFilter.configInTripUid.regionsChosen.join(","):this.formItem.rowsFilterDetail.context="//filter by config"),e.openRowsFilterConfig=!0,e.rowsFilterDetail=this.formItem.rowsFilterDetail),this.formItem.switch.colsFilter&&(e.openColsFilterConfig=!0,e.colsFilterDetail=this.formItem.colsFilterDetail),e},submitAll:function(){var e=this;return Object(l["a"])(Object(s["a"])().mark((function t(){var a,r;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e,a.dataLoading=!0,a.alertInfo.show=!1,a.alertInfo.successShow=!1,a.successSubmit=!1,r=e.getParams(),e.checkParam(r)){t.next=8;break}return t.abrupt("return");case 8:return console.log(r),t.next=11,a.axios.post("/api/drc/v2/autoconfig/submit",r).then((function(t){var r=t.data,n=1!==r.status;n?(a.$Message.success("提交成功"),e.preCheckBuildParam(),a.successSubmit=!0,a.alertInfo.successShow=!0,a.alertInfo.message=null,a.alertInfo.title="提交成功"):(a.$Message.warning("提交失败: "+r.message),a.alertInfo.show=!0,a.alertInfo.title="提交失败",a.alertInfo.message=r.message)})).catch((function(e){a.$Message.error("提交异常: "+e)})).finally((function(){a.dataLoading=!1}));case 11:case"end":return t.stop()}}),t)})))()},selectDb:function(){var e=this;return Object(l["a"])(Object(s["a"])().mark((function t(){var a;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.formItem.dbName,console.log(a),e.meta.selectedDb=e.meta.dbOptions.filter((function(e){return e.dbName===a}))[0],console.log("selected",e.meta.selectedDb),e.formItem.buName=e.meta.selectedDb.buCode,console.log("selected",e.formItem.tableName),e.autoSetTag(),t.next=9,e.getRegionOptions();case 9:if(!e.formItem.srcRegionName||!e.formItem.dstRegionName){t.next=12;break}return t.next=12,e.getDalInfo();case 12:case"end":return t.stop()}}),t)})))()},autoSetTag:function(){"FLT"===this.formItem.buName?this.formItem.tag="FLT":"HTL"===this.formItem.buName?this.formItem.tag="HTL":this.formItem.tag="COMMON"},getDalInfo:function(){var e=this;return Object(l["a"])(Object(s["a"])().mark((function t(){var a,r;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.getParams(),r=e,r.previewDataList=[],r.table.dbMhaTablePage.current=1,0!==a.mode){t.next=10;break}if(a.dbName){t.next=8;break}return e.$Message.warning("请先填写数据库"),t.abrupt("return");case 8:t.next=14;break;case 10:if(1!==a.mode){t.next=14;break}if(a.dalClusterName){t.next=14;break}return e.$Message.warning("请先填写 dalcluster"),t.abrupt("return");case 14:if(a.srcRegionName&&a.dstRegionName){t.next=17;break}return e.$Message.warning("请先填写同步方向"),t.abrupt("return");case 17:return r.table.dbMhaTableLoading=!0,t.next=20,r.axios.get("/api/drc/v2/autoconfig/preCheck",{params:{mode:a.mode,dbName:a.dbName,dalClusterName:a.dalClusterName,srcRegionName:a.srcRegionName,dstRegionName:a.dstRegionName}}).then((function(e){var t=e.data.data,a=t&&0===e.data.status;a?(r.previewDataList=t,console.log("total: "+r.previewDataList.length),r.$Message.success("同步集群检测成功, 共找到 "+t.length+" 个DB")):r.$Message.warning("同步集群检测失败："+e.data.message)})).catch((function(e){r.$Message.error("查询dalcluster异常: "+e)})).finally((function(){r.table.dbMhaTableLoading=!1}));case 20:case"end":return t.stop()}}),t)})))()},getTableInfo:function(){var e=this;return Object(l["a"])(Object(s["a"])().mark((function t(){var a,r;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.getParams(),r=e,r.checkTableDataList=[],r.table.dbTablePage.current=1,0!==a.mode){t.next=10;break}if(a.dbName){t.next=8;break}return e.$Message.warning("请先填写数据库"),t.abrupt("return");case 8:t.next=14;break;case 10:if(1!==a.mode){t.next=14;break}if(a.dalClusterName){t.next=14;break}return e.$Message.warning("请先填写 dalcluster"),t.abrupt("return");case 14:if(a.srcRegionName&&a.dstRegionName){t.next=17;break}return e.$Message.warning("请先填写同步方向"),t.abrupt("return");case 17:if(a.tblsFilterDetail.tableNames){t.next=21;break}return console.log(a),e.$Message.warning("请先填写表名"),t.abrupt("return");case 21:return r.table.dbTableLoading=!0,t.next=24,r.axios.get("/api/drc/v2/autoconfig/preCheckTable",{params:e.flattenObj({mode:a.mode,dbName:a.dbName,dalClusterName:a.dalClusterName,srcRegionName:a.srcRegionName,dstRegionName:a.dstRegionName,tblsFilterDetail:a.tblsFilterDetail})}).then((function(e){var t=e.data.data;t?(r.checkTableDataList=t,console.log("total: "+r.checkTableDataList.length),r.$Message.success("同步表检测成功, 共找到 "+t.length+" 个表")):r.$Message.warning("同步表检测失败："+e.data.message)})).catch((function(e){r.$Message.error("查询dalcluster异常: "+e)})).finally((function(){r.table.dbTableLoading=!1}));case 24:case"end":return t.stop()}}),t)})))()},preCheckBuildParam:function(){var e=this;return Object(l["a"])(Object(s["a"])().mark((function t(){var a,r;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.getParams(),e.checkParam(a)){t.next=3;break}return t.abrupt("return");case 3:return r=e,r.dataLoading=!0,r.finalBuildParam=[],r.alertInfo.show=!1,r.alertInfo.successShow=!1,r.successSubmit=!1,console.log("precheckParam",a),t.next=12,r.axios.post("/api/drc/v2/autoconfig/preCheckBuildParam",a).then((function(e){var t=e.data.data;t?(r.drawer.show=!0,r.finalBuildParam=t,r.$Message.success("预检测成功, 共 "+t.length+" 个集群")):(r.drawer.show=!1,r.$Message.warning("预检测失败: "+e.data.message))})).catch((function(e){r.$Message.error("查询dalcluster异常: "+e)})).finally((function(){r.dataLoading=!1}));case 12:case"end":return t.stop()}}),t)})))()},afterSwitchRegion:function(){var e=this;return Object(l["a"])(Object(s["a"])().mark((function t(){var a;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.getParams(),a.srcRegionName&&a.dstRegionName){t.next=3;break}return t.abrupt("return");case 3:e.getDalInfo();case 4:case"end":return t.stop()}}),t)})))()},afterEnterTableName:function(){var e=this;return Object(l["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getTableInfo();case 2:case"end":return t.stop()}}),t)})))()},afterEnterDalCluster:function(){var e=this;return Object(l["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getRegionOptions();case 2:case"end":return t.stop()}}),t)})))()},getRegionOptions:function(){var e=this;return Object(l["a"])(Object(s["a"])().mark((function t(){var a,r;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,a.dataLoading=!0,a.previewDataList=[],a.meta.regionOptions=[],r=e.getParams(),t.next=7,a.axios.get("/api/drc/v2/autoconfig/regionOptions",{params:{mode:r.mode,dbName:r.dbName,dalClusterName:r.dalClusterName}}).then((function(e){var t=e.data.data,r=t&&0===e.data.status;r?(a.meta.regionOptions=t,-1===t.indexOf(a.formItem.srcRegionName)&&(a.formItem.srcRegionName=null),-1===t.indexOf(a.formItem.dstRegionName)&&(a.formItem.dstRegionName=null),a.$Message.success("查询到 "+a.meta.regionOptions.length+" 个可选区域"),console.log("total selectable region: "+a.meta.regionOptions.length)):(a.formItem.srcRegionName=null,a.formItem.dstRegionName=null,a.$Message.warning("查询可选地域失败"))})).catch((function(e){a.$Message.error("查询可选地域失败: "+e)})).finally((function(){a.dataLoading=!1}));case 7:case"end":return t.stop()}}),t)})))()},getExistDb:function(e){var t=this;return Object(l["a"])(Object(s["a"])().mark((function a(){var r;return Object(s["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!(null===e||null===e.length||e.length<=4)){a.next=2;break}return a.abrupt("return",[]);case 2:return r=t,r.dataLoading=!0,r.dbClusterInfoList=[],a.next=7,r.axios.get("/api/drc/v2/autoconfig/getExistDb",{params:{dbName:e}}).then((function(e){var t=e.data.data;t?r.meta.dbOptions=t:r.$Message.warning("查询DB失败")})).catch((function(e){r.$Message.error("查询DB异常: "+e)})).finally((function(){r.dataLoading=!1}));case 7:case"end":return a.stop()}}),a)})))()},fetchModeChange:function(){this.formItem.rowsFilterDetail.illegalArgument=1===this.formItem.rowsFilterDetail.fetchMode||3===this.formItem.rowsFilterDetail.fetchMode},beforeSubmit:function(){var e=this;return Object(l["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.preCheckBuildParam();case 2:case"end":return t.stop()}}),t)})))()},getCommonColumns:function(){var e=this,t=this.getParams();t.rowsFilterDetail&&(t.rowsFilterDetail.columns=[],t.rowsFilterDetail.udlColumns=[]),t.colsFilterDetail&&(t.colsFilterDetail.columns=[]),console.log(t),this.formItem.constants.columnsForChose=[],this.commonColumnLoading=!0,this.axios.get("/api/drc/v2/autoconfig/commonColumns",{params:this.flattenObj(t)}).then((function(t){1===t.data.status?e.$Message.error("查询公共列名失败，请手动添加："+t.data.message):(console.log(t.data.data),e.formItem.constants.columnsForChose=t.data.data,e.$Message.info("查询公共列名数："+t.data.data.length))})).catch((function(t){e.$Message.error("查询公共列名异常: "+t)})).finally((function(){e.commonColumnLoading=!1}))},querySrcMhaGtidCheckRes:function(){var e=this,t=this.formItem.gtidInit,a=this.previewDataList[0].srcMha.name;null!=t&&""!==t?(console.log(a),this.axios.get("/api/drc/v2/mha/gtid/checkResult?mha="+a+"&configGtid="+t).then((function(r){0===r.data.status?(e.gtidCheck.resVo={mha:a,legal:!0===r.data.data.legal?"合理位点":"binlog已经被purge",configGtid:t,purgedGtid:r.data.data.purgedGtid},e.gtidCheck.modal=!0):alert("位点校验失败!")}))):alert("位点为空！")},handleCreateColumn:function(e){this.contains(this.formItem.constants.columnsForChose,e)?alert("已有项禁止创建"):""!==e&&void 0!==e&&null!==e?this.formItem.constants.columnsForChose.push(e):alert("字段不能为空")},handleCreateTag:function(e){this.meta.tags.push(e)},flattenObj:function(e){var t={};for(var a in e)if("object"!==Object(i["a"])(e[a])||Array.isArray(e[a]))t[a]=e[a];else{var r=this.flattenObj(e[a]);for(var n in r)t[a+"."+n]=r[n]}return t},checkParam:function(e){if(!0===e.openRowsFilterConfig){var t=e.rowsFilterDetail;if(console.log("rowsFilterConfig",t),[this.formItem.constants.rowsFilter.filterMode.TRIP_UDL,this.formItem.constants.rowsFilter.filterMode.TRIP_UDL_UID].includes(t.mode)){if(0===t.columns.length&&0===t.udlColumns.length)return this.$Message.warning("行过滤检测失败：uid 与 uld字段不能同时为空！"),!1;if(0!==t.udlColumns.length&&!t.drcStrategyId)return this.$Message.warning("行过滤检测失败：UDL策略不可为空！"),!1;if(0===t.fetchMode&&(""===t.context||void 0===t.context||"//filter by config"===t.context))return this.$Message.warning("行过滤检测失败：context 不能为空！"),!1}else if(""===t.mode||void 0===t.mode||0===t.columns.length)return this.$Message.warning("缺少行过滤配置 禁止提交"),!1}return!0}},computed:{useTripUdlOrUidMode:function(){return[this.formItem.constants.rowsFilter.filterMode.TRIP_UDL,this.formItem.constants.rowsFilter.filterMode.TRIP_UDL_UID].includes(this.formItem.rowsFilterDetail.mode)},hasUdlColumn:function(){return 0!==this.formItem.rowsFilterDetail.udlColumns.length},fillContextByRegion:function(){return this.formItem.rowsFilterDetail.fetchMode===this.formItem.constants.rowsFilter.fetchMode.RPC},hasUidColumn:function(){return 0!==this.formItem.rowsFilterDetail.columns.length},showUdlConfigDetail:function(){return this.formItem.rowsFilterDetail.mode===this.formItem.constants.rowsFilter.filterMode.TRIP_UDL_UID||this.hasUdlLegalConfig||!this.hasUidLegalConfig},showUidConfigDetail:function(){return this.formItem.rowsFilterDetail.mode===this.formItem.constants.rowsFilter.filterMode.TRIP_UDL_UID||this.hasUidLegalConfig||!this.hasUdlLegalConfig},hasUdlLegalConfig:function(){return 0!==this.formItem.rowsFilterDetail.udlColumns.length&&null!=this.formItem.rowsFilterDetail.drcStrategyId&&this.formItem.rowsFilterDetail.drcStrategyId>0},hasUidLegalConfig:function(){return this.hasUidColumn},gtidConfigurable:function(){return null!==this.previewDataList&&1===this.previewDataList.length&&[this.formItem.constants.drcStatus.NOT_EXIST,this.formItem.constants.drcStatus.STOP].includes(this.previewDataList[0].drcStatus)},preCheckTablePage:function(){var e=this.checkTableDataList,t=this.table.dbTablePage.current*this.table.dbTablePage.size-this.table.dbTablePage.size,a=t+this.table.dbTablePage.size;return Object(o["a"])(e).slice(t,a)},preCheckMhaReplicationPage:function(){var e=this.previewDataList,t=this.table.dbMhaTablePage.current*this.table.dbMhaTablePage.size-this.table.dbMhaTablePage.size,a=t+this.table.dbMhaTablePage.size;return Object(o["a"])(e).slice(t,a)}},created:function(){var e=this;this.axios.get("/api/drc/v2/permission/meta/mhaReplication/modify").then((function(t){403!==t.data.status?e.getBus():e.$router.push("/nopermission")}))}}),m=c,u=(a("c43d"),a("2877")),d=Object(u["a"])(m,r,n,!1,null,null,null);t["default"]=d.exports},d81d:function(e,t,a){"use strict";var r=a("23e7"),n=a("b727").map,o=a("1dde"),i=a("ae40"),s=o("map"),l=i("map");r({target:"Array",proto:!0,forced:!s||!l},{map:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-7a2a2ece.d80327a5.js.map