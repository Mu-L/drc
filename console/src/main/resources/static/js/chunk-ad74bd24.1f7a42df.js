(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ad74bd24"],{7156:function(t,e,n){"use strict";var a=n("1626"),i=n("861d"),o=n("d2bb");t.exports=function(t,e,n){var r,s;return o&&a(r=e.constructor)&&r!==n&&i(s=r.prototype)&&s!==n.prototype&&o(t,s),t}},"79c8":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t._self._c;return e("base-component",{attrs:{isFather:t.isFather,subMenuName:["1"],fatherMenu:t.fatherMenu}},[e("Breadcrumb",{style:{margin:"15px 0 15px 185px",position:"fixed"}},[e("BreadcrumbItem",{attrs:{to:"/home"}},[t._v("首页")]),e("BreadcrumbItem",[t._v("校验结果")])],1),e("Content",{staticClass:"content",style:{padding:"10px",background:"#fff",margin:"50px 0 1px 185px",zIndex:"1"}},[e("div",{staticStyle:{padding:"1px 1px"}},[e("Card",[t._v(" 数据库名："),e("Input",{style:{width:"180px",marginRight:"10px"},model:{value:t.searchCondition.dbName,callback:function(e){t.$set(t.searchCondition,"dbName",e)},expression:"searchCondition.dbName"}}),t._v(" 表名："),e("Input",{style:{width:"180px",marginRight:"10px"},model:{value:t.searchCondition.tableName,callback:function(e){t.$set(t.searchCondition,"tableName",e)},expression:"searchCondition.tableName"}}),t._v(" 开始时间："),e("DatePicker",{key:t.searchCondition.startTime,style:{width:"160px",marginRight:"10px"},attrs:{type:"datetime",transfer:!0,format:"yyyy-MM-dd HH:mm",value:t.searchCondition.startTime},on:{"on-change":function(e){t.searchCondition.startTime=e}}}),t._v(" 结束时间："),e("DatePicker",{key:t.searchCondition.endTime,style:{width:"160px",marginRight:"10px"},attrs:{type:"datetime",transfer:!0,format:"yyyy-MM-dd HH:mm",value:t.searchCondition.endTime},on:{"on-change":function(e){t.searchCondition.endTime=e}}}),e("Button",{style:{marginLeft:"10px"},attrs:{type:"primary"},on:{click:t.searchRecord}},[t._v("查询")]),e("Button",{style:{marginLeft:"10px"},attrs:{type:"primary"},on:{click:t.switchConsistencyMonitor}},[t._v("配置")]),e("Table",{staticStyle:{"margin-top":"20px"},attrs:{columns:t.columns,data:t.records,stripe:"",size:"small"}}),e("div",{staticStyle:{"text-align":"center",margin:"16px 0"}},[e("Page",{attrs:{total:t.total,current:t.current,"show-sizer":"","show-elevator":"",transfer:!0},on:{"update:current":function(e){t.current=e},"on-change":t.getCurrentRecord2,"on-page-size-change":t.handleChangeSize}})],1)],1)],1)])],1)},i=[],o=(n("14d9"),n("e66c")),r={name:"incrementDataConsistencyResult",data:function(){var t=this;return{isFather:!0,fatherMenu:"/incrementDataConsistencyResult",srcTableItems:[],destTableItems:[],srcDc:"",destDc:"",srcMhaName:"",destMhaName:"",isDiffTransaction:"error",diffTransaction:"",records:[],total:0,current:1,size:10,searchCondition:{dbName:"",tableName:"",startTime:"",endTime:""},columns:[{title:"数据库",key:"monitorSchemaName",align:"center",tooltip:!0},{title:"表名",key:"monitorTableName",align:"center",tooltip:!0},{title:"校验key",key:"monitorTableKey",align:"center",tooltip:!0},{title:"校验keyValue",key:"monitorTableKeyValue",align:"center",tooltip:!0},{title:"校验时间",key:"createTime",align:"center",tooltip:!0,render:function(t,e){return t("div",Object(o["a"])(new Date(e.row.createTime),"yyyy-MM-dd hh:mm:ss"))}},{title:"操作",key:"createTime",align:"center",tooltip:!0,render:function(e,n){return e("div",[e("Button",{props:{type:"success",size:"small"},style:{marginLeft:"5px"},on:{click:function(){t.handleInconsistency(n.row)}}},"处理")])}}]}},methods:{getCurrentRecord:function(){var t=this;this.axios.get("api/drc/v1/monitor/consistency/data/increment/history/inconsistency/"+this.$route.query.mhaA+"/"+this.$route.query.mhaB+"/"+this.$route.query.tableName+"/"+this.$route.query.key).then((function(e){console.log("test record data"),console.log(e),t.srcDc=e.data.data.srcDc,t.destDc=e.data.data.destDc,t.srcMhaName=e.data.data.srcMhaName,t.destMhaName=e.data.data.destMhaName,t.srcTableItems=e.data.data.srcTableItems,t.destTableItems=e.data.data.destTableItems,t.isDiffTransaction=!0===e.data.data.diffTransaction?"error":"success",t.diffTransaction=!0===e.data.data.diffTransaction?"数据不一致":"数据一致",console.log("test column"),console.log(t.destTableItems[0].column)}))},getCurrentRecord2:function(){var t=this;this.axios.get("api/drc/v1/monitor/consistency/increment/history?pageNo="+this.current+"&pageSize="+this.size+"&dbName="+this.searchCondition.dbName+"&tableName="+this.searchCondition.tableName+"&startTime="+this.searchCondition.startTime+"&endTime="+this.searchCondition.endTime).then((function(e){console.log("test record data"),console.log(e.data.data),t.records=e.data.data,console.log("test column")}))},getCurrentRecordCount:function(){var t=this;this.axios.get("api/drc/v1/monitor/consistency/increment/history/count?&dbName="+this.searchCondition.dbName+"&tableName="+this.searchCondition.tableName+"&startTime="+this.searchCondition.startTime+"&endTime="+this.searchCondition.endTime).then((function(e){console.log("test record count"),console.log(e.data.data),t.total=e.data.data,console.log("test column")}))},handleChangeSize:function(t){var e=this;this.size=t,this.$nextTick((function(){e.getCurrentRecord2()}))},searchRecord:function(){this.getCurrentRecord2(),this.getCurrentRecordCount()},handleInconsistency:function(t){this.$router.push({name:"incrementDataConsistencyHandle",query:{mhaGroupId:t.mhaGroupId,dbName:t.monitorSchemaName,tableName:t.monitorTableName,key:t.monitorTableKey,keyValue:t.monitorTableKeyValue}})},switchConsistencyMonitor:function(){this.$router.push({name:"incrementDataConsistencyCluster"})}},created:function(){this.getCurrentRecord2(),this.getCurrentRecordCount()}},s=r,c=(n("ff8d"),n("2877")),d=Object(c["a"])(s,a,i,!1,null,null,null);e["default"]=d.exports},aeb0:function(t,e,n){"use strict";var a=n("9bf2").f;t.exports=function(t,e,n){n in t||a(t,n,{configurable:!0,get:function(){return e[n]},set:function(t){e[n]=t}})}},c4d0:function(t,e,n){},ff8d:function(t,e,n){"use strict";n("c4d0")}}]);
//# sourceMappingURL=chunk-ad74bd24.1f7a42df.js.map