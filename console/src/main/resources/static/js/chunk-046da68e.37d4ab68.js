(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-046da68e"],{"14c3":function(e,t,i){var a=i("c6b6"),n=i("9263");e.exports=function(e,t){var i=e.exec;if("function"===typeof i){var r=i.call(e,t);if("object"!==typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==a(e))throw TypeError("RegExp#exec called on incompatible receiver");return n.call(e,t)}},"44e7":function(e,t,i){var a=i("861d"),n=i("c6b6"),r=i("b622"),c=r("match");e.exports=function(e){var t;return a(e)&&(void 0!==(t=e[c])?!!t:"RegExp"==n(e))}},"4d63":function(e,t,i){var a=i("83ab"),n=i("da84"),r=i("94ca"),c=i("7156"),s=i("9bf2").f,l=i("241c").f,o=i("44e7"),u=i("ad6d"),d=i("9f7f"),f=i("6eeb"),h=i("d039"),p=i("69f3").set,g=i("2626"),v=i("b622"),x=v("match"),m=n.RegExp,b=m.prototype,y=/a/g,E=/a/g,R=new m(y)!==y,S=d.UNSUPPORTED_Y,_=a&&r("RegExp",!R||S||h((function(){return E[x]=!1,m(y)!=y||m(E)==E||"/a/i"!=m(y,"i")})));if(_){var I=function(e,t){var i,a=this instanceof I,n=o(e),r=void 0===t;if(!a&&n&&e.constructor===I&&r)return e;R?n&&!r&&(e=e.source):e instanceof I&&(r&&(t=u.call(e)),e=e.source),S&&(i=!!t&&t.indexOf("y")>-1,i&&(t=t.replace(/y/g,"")));var s=c(R?new m(e,t):m(e,t),a?this:b,I);return S&&i&&p(s,{sticky:i}),s},D=function(e){e in I||s(I,e,{configurable:!0,get:function(){return m[e]},set:function(t){m[e]=t}})},w=l(m),N=0;while(w.length>N)D(w[N++]);b.constructor=I,I.prototype=b,f(n,"RegExp",I)}g("RegExp")},5319:function(e,t,i){"use strict";var a=i("d784"),n=i("825a"),r=i("7b0b"),c=i("50c4"),s=i("a691"),l=i("1d80"),o=i("8aa5"),u=i("14c3"),d=Math.max,f=Math.min,h=Math.floor,p=/\$([$&'`]|\d\d?|<[^>]*>)/g,g=/\$([$&'`]|\d\d?)/g,v=function(e){return void 0===e?e:String(e)};a("replace",2,(function(e,t,i,a){var x=a.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,m=a.REPLACE_KEEPS_$0,b=x?"$":"$0";return[function(i,a){var n=l(this),r=void 0==i?void 0:i[e];return void 0!==r?r.call(i,n,a):t.call(String(n),i,a)},function(e,a){if(!x&&m||"string"===typeof a&&-1===a.indexOf(b)){var r=i(t,e,this,a);if(r.done)return r.value}var l=n(e),h=String(this),p="function"===typeof a;p||(a=String(a));var g=l.global;if(g){var E=l.unicode;l.lastIndex=0}var R=[];while(1){var S=u(l,h);if(null===S)break;if(R.push(S),!g)break;var _=String(S[0]);""===_&&(l.lastIndex=o(h,c(l.lastIndex),E))}for(var I="",D=0,w=0;w<R.length;w++){S=R[w];for(var N=String(S[0]),C=d(f(s(S.index),h.length),0),$=[],k=1;k<S.length;k++)$.push(v(S[k]));var z=S.groups;if(p){var P=[N].concat($,C,h);void 0!==z&&P.push(z);var T=String(a.apply(void 0,P))}else T=y(N,h,C,$,z,a);C>=D&&(I+=h.slice(D,C)+T,D=C+N.length)}return I+h.slice(D)}];function y(e,i,a,n,c,s){var l=a+e.length,o=n.length,u=g;return void 0!==c&&(c=r(c),u=p),t.call(s,u,(function(t,r){var s;switch(r.charAt(0)){case"$":return"$";case"&":return e;case"`":return i.slice(0,a);case"'":return i.slice(l);case"<":s=c[r.slice(1,-1)];break;default:var u=+r;if(0===u)return t;if(u>o){var d=h(u/10);return 0===d?t:d<=o?void 0===n[d-1]?r.charAt(1):n[d-1]+r.charAt(1):t}s=n[u-1]}return void 0===s?"":s}))}}))},"8aa5":function(e,t,i){"use strict";var a=i("6547").charAt;e.exports=function(e,t,i){return t+(i?a(e,t).length:1)}},9263:function(e,t,i){"use strict";var a=i("ad6d"),n=i("9f7f"),r=RegExp.prototype.exec,c=String.prototype.replace,s=r,l=function(){var e=/a/,t=/b*/g;return r.call(e,"a"),r.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),o=n.UNSUPPORTED_Y||n.BROKEN_CARET,u=void 0!==/()??/.exec("")[1],d=l||u||o;d&&(s=function(e){var t,i,n,s,d=this,f=o&&d.sticky,h=a.call(d),p=d.source,g=0,v=e;return f&&(h=h.replace("y",""),-1===h.indexOf("g")&&(h+="g"),v=String(e).slice(d.lastIndex),d.lastIndex>0&&(!d.multiline||d.multiline&&"\n"!==e[d.lastIndex-1])&&(p="(?: "+p+")",v=" "+v,g++),i=new RegExp("^(?:"+p+")",h)),u&&(i=new RegExp("^"+p+"$(?!\\s)",h)),l&&(t=d.lastIndex),n=r.call(f?i:d,v),f?n?(n.input=n.input.slice(g),n[0]=n[0].slice(g),n.index=d.lastIndex,d.lastIndex+=n[0].length):d.lastIndex=0:l&&n&&(d.lastIndex=d.global?n.index+n[0].length:t),u&&n&&n.length>1&&c.call(n[0],i,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(n[s]=void 0)})),n}),e.exports=s},"9f7f":function(e,t,i){"use strict";var a=i("d039");function n(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=a((function(){var e=n("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=a((function(){var e=n("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},ac1f:function(e,t,i){"use strict";var a=i("23e7"),n=i("9263");a({target:"RegExp",proto:!0,forced:/./.exec!==n},{exec:n})},d784:function(e,t,i){"use strict";i("ac1f");var a=i("6eeb"),n=i("d039"),r=i("b622"),c=i("9263"),s=i("9112"),l=r("species"),o=!n((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),u=function(){return"$0"==="a".replace(/./,"$0")}(),d=r("replace"),f=function(){return!!/./[d]&&""===/./[d]("a","$0")}(),h=!n((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var i="ab".split(e);return 2!==i.length||"a"!==i[0]||"b"!==i[1]}));e.exports=function(e,t,i,d){var p=r(e),g=!n((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),v=g&&!n((function(){var t=!1,i=/a/;return"split"===e&&(i={},i.constructor={},i.constructor[l]=function(){return i},i.flags="",i[p]=/./[p]),i.exec=function(){return t=!0,null},i[p](""),!t}));if(!g||!v||"replace"===e&&(!o||!u||f)||"split"===e&&!h){var x=/./[p],m=i(p,""[e],(function(e,t,i,a,n){return t.exec===c?g&&!n?{done:!0,value:x.call(t,i,a)}:{done:!0,value:e.call(i,t,a)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:f}),b=m[0],y=m[1];a(String.prototype,e,b),a(RegExp.prototype,p,2==t?function(e,t){return y.call(e,this,t)}:function(e){return y.call(e,this)})}d&&s(RegExp.prototype[p],"sham",!0)}},e66c:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));i("4d63"),i("ac1f"),i("25f0"),i("5319");function a(e,t){var i={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"S+":e.getMilliseconds()};for(var a in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),i)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?i[a]:("00"+i[a]).substr((""+i[a]).length)));return t}},fb6a:function(e,t,i){"use strict";var a=i("23e7"),n=i("861d"),r=i("e8b5"),c=i("23cb"),s=i("50c4"),l=i("fc6a"),o=i("8418"),u=i("b622"),d=i("1dde"),f=i("ae40"),h=d("slice"),p=f("slice",{ACCESSORS:!0,0:0,1:2}),g=u("species"),v=[].slice,x=Math.max;a({target:"Array",proto:!0,forced:!h||!p},{slice:function(e,t){var i,a,u,d=l(this),f=s(d.length),h=c(e,f),p=c(void 0===t?f:t,f);if(r(d)&&(i=d.constructor,"function"!=typeof i||i!==Array&&!r(i.prototype)?n(i)&&(i=i[g],null===i&&(i=void 0)):i=void 0,i===Array||void 0===i))return v.call(d,h,p);for(a=new(void 0===i?Array:i)(x(p-h,0)),u=0;h<p;h++,u++)h in d&&o(a,u,d[h]);return a.length=u,a}})},ff40:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("base-component",{attrs:{isFather:e.isFather,subMenuName:["1"],fatherMenu:e.fatherMenu}},[i("Breadcrumb",{style:{margin:"15px 0 15px 185px",position:"fixed"}},[i("BreadcrumbItem",{attrs:{to:"/home"}},[e._v("首页")]),i("BreadcrumbItem",[e._v("单元化路由校验")])],1),i("Content",{staticClass:"content",style:{padding:"10px",background:"#fff",margin:"50px 0 1px 185px",zIndex:"1"}},[i("div",{staticStyle:{padding:"1px 1px"}},[i("Card",[e._v(" 数据库名："),i("Input",{style:{width:"180px",marginRight:"10px"},model:{value:e.searchCondition.schemaName,callback:function(t){e.$set(e.searchCondition,"schemaName",t)},expression:"searchCondition.schemaName"}}),e._v(" 表名："),i("Input",{style:{width:"180px",marginRight:"10px"},model:{value:e.searchCondition.tableName,callback:function(t){e.$set(e.searchCondition,"tableName",t)},expression:"searchCondition.tableName"}}),i("Button",{style:{marginLeft:"10px"},attrs:{type:"primary"},on:{click:e.getVerificationResults}},[e._v("查询")]),i("Table",{staticStyle:{"margin-top":"20px"},attrs:{stripe:"",columns:e.columns,data:e.dataWithPage,size:"small"}}),i("Modal",{attrs:{title:"校验详情",width:"900px"},on:{"on-ok":e.clearDetail,"on-cancel":e.clearDetail},model:{value:e.verificationResultDetail,callback:function(t){e.verificationResultDetail=t},expression:"verificationResultDetail"}},[e._v(" "+e._s(this.detail.querySql)+" "),i("Row",{attrs:{gutter:5}},[i("i-col",{attrs:{span:"12"}},[i("List",{attrs:{border:""}},[i("ListItem",[e._v("字段名")]),i("ListItem",[e._v("原始值")]),i("ListItem",[e._v("更新值")])],1)],1),i("i-col",{attrs:{span:"12"}},[i("List",{attrs:{border:""}},[i("ListItem",[e._v(e._s(this.detail.columns))]),i("ListItem",[e._v(e._s(this.detail.beforeValues))]),i("ListItem",[e._v(e._s(this.detail.afterValues))])],1)],1)],1),e._v(" 单元化路由机房："+e._s(this.detail.expectedDc)+"（根据用户id名["+e._s(this.detail.uidName)+"]对应值和ucs策略号["+e._s(this.detail.ucsStrategyId)+"]获得） "),i("br"),e._v(" 实际写入机房："+e._s(this.detail.actualDc)+"（根据GTID["+e._s(this.detail.gtid)+"]获得） ")],1),i("div",{staticStyle:{"text-align":"center",margin:"16px 0"}},[i("Page",{attrs:{transfer:!0,total:e.verificationResults.length,current:e.current,"show-sizer":"","show-elevator":""},on:{"update:current":function(t){e.current=t},"on-page-size-change":e.handleChangeSize}})],1)],1)],1)])],1)},n=[],r=(i("fb6a"),i("2909")),c=i("e66c"),s={name:"unitRouteVerificationResult",data:function(){var e=this;return{isFather:!0,fatherMenu:"/unitRouteVerificationCluster",total:0,current:1,size:10,verificationResults:[],verificationResultDetail:!1,detail:{gtid:"",querySql:"",expectedDc:"",actualDc:"",columns:"",beforeValues:"",afterValues:"",uidName:"",ucsStrategyId:""},searchCondition:{schemaName:"",tableName:""},columns:[{title:"序号",width:75,align:"center",render:function(t,i){return t("span",i.index+1+(e.current-1)*e.size)}},{title:"库名",key:"schemaName",align:"center",resizable:!0},{title:"表名",key:"tableName",align:"center",resizable:!0},{title:"SQL",key:"querySql",align:"center",resizable:!0},{title:"单元化路由机房",key:"expectedDc",align:"center",resizable:!0},{title:"实际写入机房",key:"actualDc",align:"center",resizable:!0},{title:"执行时间",key:"executeTime",align:"center",resizable:!0,render:function(e,t){return e("div",Object(c["a"])(new Date(t.row.executeTime),"yyyy-MM-dd hh:mm:ss"))}},{title:"详情",align:"center",render:function(t,i){return t("div",[t("Button",{props:{type:"info",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.showDetail(i.row)}}},"查看")])}}]}},methods:{getVerificationResults:function(){var e=this;e.axios.get("/api/drc/v1/logs/unit/mhas/"+e.$route.query.clusterA+"?schemaName="+this.searchCondition.schemaName+"&tableName="+this.searchCondition.tableName).then((function(t){console.log(t),e.total=t.data.data.length,e.verificationResults=t.data.data}))},handleChangeSize:function(e){this.size=e},showDetail:function(e){this.verificationResultDetail=!0,this.detail.gtid=e.gtid,this.detail.querySql=e.querySql,this.detail.expectedDc=e.expectedDc,this.detail.actualDc=e.actualDc,this.detail.columns=e.columns,this.detail.beforeValues=e.beforeValues,this.detail.afterValues=e.afterValues,this.detail.uidName=e.uidName,this.detail.ucsStrategyId=e.ucsStrategyId},clearDetail:function(){this.detail.gtid="",this.detail.querySql="",this.detail.expectedDc="",this.detail.actualDc="",this.detail.columns="",this.detail.beforeValues="",this.detail.afterValues="",this.detail.uidName="",this.detail.ucsStrategyId=""}},computed:{dataWithPage:function(){var e=this.verificationResults,t=this.current*this.size-this.size,i=t+this.size;return Object(r["a"])(e).slice(t,i)}},created:function(){this.getVerificationResults()}},l=s,o=i("2877"),u=Object(o["a"])(l,a,n,!1,null,"33f126b2",null);t["default"]=u.exports}}]);
//# sourceMappingURL=chunk-046da68e.37d4ab68.js.map