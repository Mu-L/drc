(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8591f8c8"],{1276:function(e,t,a){"use strict";var n=a("d784"),r=a("44e7"),i=a("825a"),s=a("1d80"),o=a("4840"),l=a("8aa5"),c=a("50c4"),u=a("14c3"),d=a("9263"),p=a("d039"),f=[].push,g=Math.min,b=4294967295,h=!p((function(){return!RegExp(b,"y")}));n("split",2,(function(e,t,a){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,a){var n=String(s(this)),i=void 0===a?b:a>>>0;if(0===i)return[];if(void 0===e)return[n];if(!r(e))return t.call(n,e,i);var o,l,c,u=[],p=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),g=0,h=new RegExp(e.source,p+"g");while(o=d.call(h,n)){if(l=h.lastIndex,l>g&&(u.push(n.slice(g,o.index)),o.length>1&&o.index<n.length&&f.apply(u,o.slice(1)),c=o[0].length,g=l,u.length>=i))break;h.lastIndex===o.index&&h.lastIndex++}return g===n.length?!c&&h.test("")||u.push(""):u.push(n.slice(g)),u.length>i?u.slice(0,i):u}:"0".split(void 0,0).length?function(e,a){return void 0===e&&0===a?[]:t.call(this,e,a)}:t,[function(t,a){var r=s(this),i=void 0==t?void 0:t[e];return void 0!==i?i.call(t,r,a):n.call(String(r),t,a)},function(e,r){var s=a(n,e,this,r,n!==t);if(s.done)return s.value;var d=i(e),p=String(this),f=o(d,RegExp),m=d.unicode,v=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(h?"y":"g"),y=new f(h?d:"^(?:"+d.source+")",v),x=void 0===r?b:r>>>0;if(0===x)return[];if(0===p.length)return null===u(y,p)?[p]:[];var w=0,T=0,R=[];while(T<p.length){y.lastIndex=h?T:0;var N,I=u(y,h?p:p.slice(T));if(null===I||(N=g(c(y.lastIndex+(h?0:T)),p.length))===w)T=l(p,T,m);else{if(R.push(p.slice(w,T)),R.length===x)return R;for(var E=1;E<=I.length-1;E++)if(R.push(I[E]),R.length===x)return R;T=w=N}}return R.push(p.slice(w)),R}]}),!h)},"14c3":function(e,t,a){var n=a("c6b6"),r=a("9263");e.exports=function(e,t){var a=e.exec;if("function"===typeof a){var i=a.call(e,t);if("object"!==typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==n(e))throw TypeError("RegExp#exec called on incompatible receiver");return r.call(e,t)}},"159b":function(e,t,a){var n=a("da84"),r=a("fdbc"),i=a("17c2"),s=a("9112");for(var o in r){var l=n[o],c=l&&l.prototype;if(c&&c.forEach!==i)try{s(c,"forEach",i)}catch(u){c.forEach=i}}},"17c2":function(e,t,a){"use strict";var n=a("b727").forEach,r=a("a640"),i=a("ae40"),s=r("forEach"),o=i("forEach");e.exports=s&&o?[].forEach:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}},3835:function(e,t,a){"use strict";function n(e){if(Array.isArray(e))return e}a.d(t,"a",(function(){return s}));a("a4d3"),a("e01a"),a("d28b"),a("e260"),a("d3b7"),a("25f0"),a("3ca3"),a("ddb0");function r(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var a=[],n=!0,r=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done);n=!0)if(a.push(s.value),t&&a.length===t)break}catch(l){r=!0,i=l}finally{try{n||null==o["return"]||o["return"]()}finally{if(r)throw i}}return a}}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function s(e,t){return n(e)||r(e,t)||i()}},4160:function(e,t,a){"use strict";var n=a("23e7"),r=a("17c2");n({target:"Array",proto:!0,forced:[].forEach!=r},{forEach:r})},"498a":function(e,t,a){"use strict";var n=a("23e7"),r=a("58a8").trim,i=a("c8d2");n({target:"String",proto:!0,forced:i("trim")},{trim:function(){return r(this)}})},5319:function(e,t,a){"use strict";var n=a("d784"),r=a("825a"),i=a("7b0b"),s=a("50c4"),o=a("a691"),l=a("1d80"),c=a("8aa5"),u=a("14c3"),d=Math.max,p=Math.min,f=Math.floor,g=/\$([$&'`]|\d\d?|<[^>]*>)/g,b=/\$([$&'`]|\d\d?)/g,h=function(e){return void 0===e?e:String(e)};n("replace",2,(function(e,t,a,n){var m=n.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,v=n.REPLACE_KEEPS_$0,y=m?"$":"$0";return[function(a,n){var r=l(this),i=void 0==a?void 0:a[e];return void 0!==i?i.call(a,r,n):t.call(String(r),a,n)},function(e,n){if(!m&&v||"string"===typeof n&&-1===n.indexOf(y)){var i=a(t,e,this,n);if(i.done)return i.value}var l=r(e),f=String(this),g="function"===typeof n;g||(n=String(n));var b=l.global;if(b){var w=l.unicode;l.lastIndex=0}var T=[];while(1){var R=u(l,f);if(null===R)break;if(T.push(R),!b)break;var N=String(R[0]);""===N&&(l.lastIndex=c(f,s(l.lastIndex),w))}for(var I="",E=0,_=0;_<T.length;_++){R=T[_];for(var S=String(R[0]),k=d(p(o(R.index),f.length),0),M=[],O=1;O<R.length;O++)M.push(h(R[O]));var D=R.groups;if(g){var P=[S].concat(M,k,f);void 0!==D&&P.push(D);var L=String(n.apply(void 0,P))}else L=x(S,f,k,M,D,n);k>=E&&(I+=f.slice(E,k)+L,E=k+S.length)}return I+f.slice(E)}];function x(e,a,n,r,s,o){var l=n+e.length,c=r.length,u=b;return void 0!==s&&(s=i(s),u=g),t.call(o,u,(function(t,i){var o;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return a.slice(0,n);case"'":return a.slice(l);case"<":o=s[i.slice(1,-1)];break;default:var u=+i;if(0===u)return t;if(u>c){var d=f(u/10);return 0===d?t:d<=c?void 0===r[d-1]?i.charAt(1):r[d-1]+i.charAt(1):t}o=r[u-1]}return void 0===o?"":o}))}}))},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,a){var n=a("1d80"),r=a("5899"),i="["+r+"]",s=RegExp("^"+i+i+"*"),o=RegExp(i+i+"*$"),l=function(e){return function(t){var a=String(n(t));return 1&e&&(a=a.replace(s,"")),2&e&&(a=a.replace(o,"")),a}};e.exports={start:l(1),end:l(2),trim:l(3)}},7252:function(e,t,a){"use strict";e.exports=function(e){if("number"!==typeof e)throw new TypeError("Expected a number");var t=e>0?Math.floor:Math.ceil;return{days:t(e/864e5),hours:t(e/36e5)%24,minutes:t(e/6e4)%60,seconds:t(e/1e3)%60,milliseconds:t(e)%1e3}}},"7d78":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{style:{padding:"1px 1px",height:"100%"}},[a("Row",[e.alertInfo.show?a("Alert",{attrs:{type:"warning","show-icon":"",closable:""},scopedSlots:e._u([{key:"desc",fn:function(){return[e._v(e._s(e.alertInfo.message))]},proxy:!0}],null,!1,3041357252)},[e._v(" "+e._s(e.alertInfo.title)+" ")]):e._e(),e.alertInfo.successShow?a("Alert",{attrs:{type:"success","show-icon":"",closable:""},scopedSlots:e._u([{key:"desc",fn:function(){return[e._v(e._s(e.alertInfo.message))]},proxy:!0}],null,!1,3041357252)},[e._v(" "+e._s(e.alertInfo.title)+" ")]):e._e(),e.replicationType===e.meta.replicationTypeEnum.DB_TO_DB?a("div",[a("Col",{attrs:{span:"12"}},[a("Row",{staticStyle:{"margin-right":"20px"}},[a("Divider",[e._v("1. 选择同步方向")]),a("Col",{attrs:{span:"11"}},[a("Card",{attrs:{bordered:!0},scopedSlots:e._u([{key:"title",fn:function(){return[a("Icon",{attrs:{type:"ios-pin"}}),e._v(" 源 region ")]},proxy:!0}],null,!1,2156775476)},[a("Select",{attrs:{filterable:"",clearable:"",placeholder:"地域"},on:{"on-change":e.afterSwitchRegion},model:{value:e.formItem.srcRegionName,callback:function(t){e.$set(e.formItem,"srcRegionName",t)},expression:"formItem.srcRegionName"}},e._l(e.meta.regionOptions,(function(t){return a("Option",{key:t,attrs:{value:t,label:t}},[e._v(" "+e._s(t)+" ")])})),1)],1)],1),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}},[a("Button",{attrs:{size:"small",shape:"circle",type:"default",loading:e.dataLoading},on:{click:e.getRegionOptions}},[e._v(" -> ")])],1),a("Col",{attrs:{span:"11"}},[a("Card",{attrs:{bordered:!0},scopedSlots:e._u([{key:"title",fn:function(){return[a("Icon",{attrs:{type:"ios-pin"}}),e._v(" 目标 region ")]},proxy:!0}],null,!1,4278622733)},[a("Select",{attrs:{filterable:"",clearable:"",placeholder:"地域"},on:{"on-change":e.afterSwitchRegion},model:{value:e.formItem.dstRegionName,callback:function(t){e.$set(e.formItem,"dstRegionName",t)},expression:"formItem.dstRegionName"}},e._l(e.meta.regionOptions,(function(t){return a("Option",{key:t,attrs:{value:t,label:t}},[e._v(" "+e._s(t)+" ")])})),1)],1)],1)],1)],1),a("Col",{attrs:{span:"12"}},[a("Row",[a("Divider",[e._v("2. 预览：同步集群")]),a("Button",{staticStyle:{"margin-bottom":"5px"},attrs:{type:"primary",loading:e.table.dbMhaTableLoading},on:{click:e.getDalInfo}},[e._v(" 检查同步集群 ")]),a("Table",{attrs:{size:"small",loading:e.table.dbMhaTableLoading,stripe:"",columns:e.table.dbMhaTableColumn,data:e.preCheckMhaReplicationPage,border:""}}),a("div",[a("Page",{attrs:{transfer:!0,total:e.previewDataList.length,current:e.table.dbMhaTablePage.current,"page-size-opts":e.table.dbMhaTablePage.pageSizeOpts,"page-size":e.table.dbMhaTablePage.size,"show-total":"","show-sizer":"","show-elevator":""},on:{"update:current":function(t){return e.$set(e.table.dbMhaTablePage,"current",t)},"on-page-size-change":function(t){e.table.dbMhaTablePage.size=t}}})],1)],1)],1)],1):e._e(),[e.meta.replicationTypeEnum.DB_TO_MQ,e.meta.replicationTypeEnum.DB_TO_KAFKA].includes(e.replicationType)?a("div",[a("Col",{attrs:{span:"12"}},[a("Row",{staticStyle:{"margin-right":"20px"}},[a("Divider",[e._v("1. 选择消息投递Region")]),a("Col",{attrs:{span:"24"}},[a("Card",{attrs:{bordered:!0},scopedSlots:e._u([{key:"title",fn:function(){return[a("Icon",{attrs:{type:"ios-pin"}}),e._v(" 源 region "),a("Button",{staticStyle:{"margin-left":"50px"},attrs:{size:"small",shape:"circle",type:"default",loading:e.dataLoading},on:{click:e.getRegionOptions}},[e._v("刷新 ")])]},proxy:!0}],null,!1,1193028979)},[a("Select",{attrs:{filterable:"",clearable:"",placeholder:"地域"},on:{"on-change":e.afterSwitchRegion},model:{value:e.formItem.srcRegionName,callback:function(t){e.$set(e.formItem,"srcRegionName",t)},expression:"formItem.srcRegionName"}},e._l(e.meta.regionOptions,(function(t){return a("Option",{key:t,attrs:{value:t,label:t}},[e._v(" "+e._s(t)+" ")])})),1)],1)],1)],1)],1),a("Col",{attrs:{span:"12"}},[a("Row",[a("Divider",[e._v("2. 预览：消息投递集群")]),a("Button",{staticStyle:{"margin-bottom":"5px"},attrs:{type:"primary",loading:e.table.dbMhaTableLoading},on:{click:e.getDalInfo}},[e._v(" 检查同步集群 ")]),a("Table",{attrs:{size:"small",loading:e.table.dbMhaTableLoading,stripe:"",columns:e.table.dbMhaMqTableColumn,data:e.preCheckMhaReplicationPage,border:""}}),a("div",[a("Page",{attrs:{transfer:!0,total:e.previewDataList.length,current:e.table.dbMhaTablePage.current,"page-size-opts":e.table.dbMhaTablePage.pageSizeOpts,"page-size":e.table.dbMhaTablePage.size,"show-total":"","show-sizer":"","show-elevator":""},on:{"update:current":function(t){return e.$set(e.table.dbMhaTablePage,"current",t)},"on-page-size-change":function(t){e.table.dbMhaTablePage.size=t}}})],1)],1)],1)],1):e._e()],1),a("Divider"),a("Button",{attrs:{loading:e.dataLoading,type:"primary"},on:{click:e.createReplication}},[e._v("提交")])],1)},r=[],i=(a("c975"),a("fb6a"),a("b0c0"),a("a9e3"),a("d3b7"),a("2909")),s=(a("96cf"),a("1da1")),o={name:"mhaPreview",components:{},props:{replicationType:Number,dbName:String,existReplicationRegionOptions:Array},emits:["updated"],data:function(){return{meta:{regionOptions:[],existReplicationRegionOptions:[],replicationTypeEnum:this.constant.replicationType},alertInfo:{show:!1,successShow:!1,title:null,message:null},formItem:{srcRegionName:null,dstRegionName:null},dataLoading:!1,constants:{DAL_CLUSTER_MODE:1},previewDataList:[],table:{dbMhaTableLoading:!1,dbMhaTableColumn:[{title:"DB名",key:"dbName"},{title:"源集群",key:"srcMhaName",render:function(e,t){var a=t.row,n=a.srcMha;if(null!=n)return e("div",[e("span",n.name),e("span",{style:{float:"right",color:"#ababab"}},n.regionName+"("+n.dcName+")")])}},{title:"目标集群",key:"dstMhaName",render:function(e,t){var a=t.row,n=a.dstMha;if(null!=n)return e("div",[e("span",n.name),e("span",{style:{float:"right",color:"#ababab"}},n.regionName+"("+n.dcName+")")])}}],dbMhaMqTableColumn:[{title:"DB名",key:"dbName"},{title:"源集群",key:"srcMhaName",render:function(e,t){var a=t.row,n=a.srcMha;if(null!=n)return e("div",[e("span",n.name),e("span",{style:{float:"right",color:"#ababab"}},n.regionName+"("+n.dcName+")")])}}],dbMhaTablePage:{total:0,current:1,size:5,pageSizeOpts:[5,10,20,100]}}}},methods:{getRegionOptions:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.dataLoading=!0,e.meta.regionOptions=[],t.next=4,e.axios.get("/api/drc/v2/autoconfig/regionOptions",{params:{mode:e.constants.DAL_CLUSTER_MODE,dbName:e.dbName}}).then((function(t){var a=t.data.data,n=a&&0===t.data.status;n?(e.meta.regionOptions=a,-1===a.indexOf(e.formItem.srcRegionName)&&(e.formItem.srcRegionName=null),-1===a.indexOf(e.formItem.dstRegionName)&&(e.formItem.dstRegionName=null)):(e.formItem.srcRegionName=null,e.formItem.dstRegionName=null,e.$Message.warning("查询可选地域失败"))})).catch((function(t){e.$Message.error("查询可选地域失败: "+t)})).finally((function(){e.dataLoading=!1}));case 4:case"end":return t.stop()}}),t)})))()},getDalInfo:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.previewDataList=[],e.table.dbMhaTablePage.current=1,e.table.dbMhaTableLoading=!0,t.next=5,e.axios.get("/api/drc/v2/autoconfig/preCheck",{params:{mode:e.constants.DAL_CLUSTER_MODE,dbName:e.dbName,srcRegionName:e.formItem.srcRegionName,dstRegionName:e.formItem.dstRegionName,replicationType:e.replicationType}}).then((function(t){var a=t.data.data,n=a&&0===t.data.status;n?(e.previewDataList=a,console.log("total: "+e.previewDataList.length),e.$Message.success("同步集群检测成功, 共找到 "+a.length+" 个DB")):e.$Message.warning("同步集群检测失败："+t.data.message)})).catch((function(t){e.$Message.error("查询dalcluster异常: "+t)})).finally((function(){e.table.dbMhaTableLoading=!1}));case 5:case"end":return t.stop()}}),t)})))()},createReplication:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={srcRegionName:e.formItem.srcRegionName,dstRegionName:e.formItem.dstRegionName,dbName:e.dbName,replicationType:e.replicationType},e.alertInfo.show=!1,e.alertInfo.successShow=!1,e.dataLoading=!0,console.log(e.meta.replicationTypeEnum),n=e.replicationType===e.meta.replicationTypeEnum.DB_TO_DB?"mhaDbReplication":"mhaDbReplicationForMq",t.next=8,e.axios.post("/api/drc/v2/autoconfig/"+n+"/create",a).then((function(t){var a=t.data,n=0===a.status;n?(e.alertInfo.successShow=!0,e.alertInfo.message=null,e.alertInfo.title="提交成功",e.$Message.warning("提交成功"),e.$emit("updated")):(e.alertInfo.show=!0,e.alertInfo.title="提交失败",e.alertInfo.message=a.message,e.$Message.warning("提交失败: "+a.message))})).catch((function(t){e.$Message.error("提交异常: "+t)})).finally((function(){e.dataLoading=!1}));case 8:case"end":return t.stop()}}),t)})))()},afterSwitchRegion:function(){return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}},computed:{preCheckMhaReplicationPage:function(){var e=this.previewDataList,t=this.table.dbMhaTablePage.current*this.table.dbMhaTablePage.size-this.table.dbMhaTablePage.size,a=t+this.table.dbMhaTablePage.size;return Object(i["a"])(e).slice(t,a)}},created:function(){this.getRegionOptions()}},l=o,c=a("2877"),u=Object(c["a"])(l,n,r,!1,null,"61432119",null);t["a"]=u.exports},"81d5":function(e,t,a){"use strict";var n=a("7b0b"),r=a("23cb"),i=a("50c4");e.exports=function(e){var t=n(this),a=i(t.length),s=arguments.length,o=r(s>1?arguments[1]:void 0,a),l=s>2?arguments[2]:void 0,c=void 0===l?a:r(l,a);while(c>o)t[o++]=e;return t}},"86aa":function(e){e.exports=JSON.parse('{"addendum":"addenda","aircraft":"aircraft","alga":"algae","alumna":"alumnae","alumnus":"alumni","amoeba":"amoebae","analysis":"analyses","antenna":"antennae","antithesis":"antitheses","apex":"apices","appendix":"appendices","automaton":"automata","axis":"axes","bacillus":"bacilli","bacterium":"bacteria","barracks":"barracks","basis":"bases","beau":"beaux","bison":"bison","buffalo":"buffalo","bureau":"bureaus","cactus":"cacti","calf":"calves","carp":"carp","census":"censuses","chassis":"chassis","cherub":"cherubim","child":"children","château":"châteaus","cod":"cod","codex":"codices","concerto":"concerti","corpus":"corpora","crisis":"crises","criterion":"criteria","curriculum":"curricula","datum":"data","deer":"deer","diagnosis":"diagnoses","die":"dice","dwarf":"dwarfs","echo":"echoes","elf":"elves","elk":"elk","ellipsis":"ellipses","embargo":"embargoes","emphasis":"emphases","erratum":"errata","faux pas":"faux pas","fez":"fezes","firmware":"firmware","fish":"fish","focus":"foci","foot":"feet","formula":"formulae","fungus":"fungi","gallows":"gallows","genus":"genera","goose":"geese","graffito":"graffiti","grouse":"grouse","half":"halves","hero":"heroes","hoof":"hooves","hovercraft":"hovercraft","hypothesis":"hypotheses","index":"indices","kakapo":"kakapo","knife":"knives","larva":"larvae","leaf":"leaves","libretto":"libretti","life":"lives","loaf":"loaves","locus":"loci","louse":"lice","man":"men","matrix":"matrices","means":"means","medium":"media","memorandum":"memoranda","millennium":"millennia","minutia":"minutiae","moose":"moose","mouse":"mice","nebula":"nebulae","nemesis":"nemeses","neurosis":"neuroses","news":"news","nucleus":"nuclei","oasis":"oases","offspring":"offspring","opus":"opera","ovum":"ova","ox":"oxen","paralysis":"paralyses","parenthesis":"parentheses","person":"people","phenomenon":"phenomena","phylum":"phyla","pike":"pike","polyhedron":"polyhedra","potato":"potatoes","prognosis":"prognoses","quiz":"quizzes","radius":"radii","referendum":"referenda","salmon":"salmon","scarf":"scarves","self":"selves","series":"series","sheep":"sheep","shelf":"shelves","shrimp":"shrimp","spacecraft":"spacecraft","species":"species","spectrum":"spectra","squid":"squid","stimulus":"stimuli","stratum":"strata","swine":"swine","syllabus":"syllabi","symposium":"symposia","synopsis":"synopses","synthesis":"syntheses","tableau":"tableaus","that":"those","thesis":"theses","thief":"thieves","this":"these","tomato":"tomatoes","tooth":"teeth","trout":"trout","tuna":"tuna","vertebra":"vertebrae","vertex":"vertices","veto":"vetoes","vita":"vitae","vortex":"vortices","watercraft":"watercraft","wharf":"wharves","wife":"wives","wolf":"wolves","woman":"women"}')},"8aa5":function(e,t,a){"use strict";var n=a("6547").charAt;e.exports=function(e,t,a){return t+(a?n(e,t).length:1)}},9263:function(e,t,a){"use strict";var n=a("ad6d"),r=a("9f7f"),i=RegExp.prototype.exec,s=String.prototype.replace,o=i,l=function(){var e=/a/,t=/b*/g;return i.call(e,"a"),i.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),c=r.UNSUPPORTED_Y||r.BROKEN_CARET,u=void 0!==/()??/.exec("")[1],d=l||u||c;d&&(o=function(e){var t,a,r,o,d=this,p=c&&d.sticky,f=n.call(d),g=d.source,b=0,h=e;return p&&(f=f.replace("y",""),-1===f.indexOf("g")&&(f+="g"),h=String(e).slice(d.lastIndex),d.lastIndex>0&&(!d.multiline||d.multiline&&"\n"!==e[d.lastIndex-1])&&(g="(?: "+g+")",h=" "+h,b++),a=new RegExp("^(?:"+g+")",f)),u&&(a=new RegExp("^"+g+"$(?!\\s)",f)),l&&(t=d.lastIndex),r=i.call(p?a:d,h),p?r?(r.input=r.input.slice(b),r[0]=r[0].slice(b),r.index=d.lastIndex,d.lastIndex+=r[0].length):d.lastIndex=0:l&&r&&(d.lastIndex=d.global?r.index+r[0].length:t),u&&r&&r.length>1&&s.call(r[0],a,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)})),r}),e.exports=o},"9f7f":function(e,t,a){"use strict";var n=a("d039");function r(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=n((function(){var e=r("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=n((function(){var e=r("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},a3b8:function(e,t,a){"use strict";const n=a("7252"),r=a("afa5");e.exports=(e,t)=>{if(!Number.isFinite(e))throw new TypeError("Expected a finite number");if(t=t||{},e<1e3){const a="number"===typeof t.msDecimalDigits?t.msDecimalDigits:0;return(a?e.toFixed(a):Math.ceil(e))+(t.verbose?" "+r("millisecond",Math.ceil(e)):"ms")}const a=[],i=(e,n,i,s)=>{if(0===e)return;const o=t.verbose?" "+r(n,e):i;a.push((s||e)+o)},s=n(e);if(i(Math.trunc(s.days/365),"year","y"),i(s.days%365,"day","d"),i(s.hours,"hour","h"),i(s.minutes,"minute","m"),t.compact)return i(s.seconds,"second","s"),"~"+a[0];const o=e/1e3%60,l="number"===typeof t.secDecimalDigits?t.secDecimalDigits:1,c=o.toFixed(l).replace(/\.0$/,"");return i(o,"second","s",c),a.join(" ")}},a9e3:function(e,t,a){"use strict";var n=a("83ab"),r=a("da84"),i=a("94ca"),s=a("6eeb"),o=a("5135"),l=a("c6b6"),c=a("7156"),u=a("c04e"),d=a("d039"),p=a("7c73"),f=a("241c").f,g=a("06cf").f,b=a("9bf2").f,h=a("58a8").trim,m="Number",v=r[m],y=v.prototype,x=l(p(y))==m,w=function(e){var t,a,n,r,i,s,o,l,c=u(e,!1);if("string"==typeof c&&c.length>2)if(c=h(c),t=c.charCodeAt(0),43===t||45===t){if(a=c.charCodeAt(2),88===a||120===a)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:n=2,r=49;break;case 79:case 111:n=8,r=55;break;default:return+c}for(i=c.slice(2),s=i.length,o=0;o<s;o++)if(l=i.charCodeAt(o),l<48||l>r)return NaN;return parseInt(i,n)}return+c};if(i(m,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var T,R=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof R&&(x?d((function(){y.valueOf.call(a)})):l(a)!=m)?c(new v(w(t)),a,R):w(t)},N=n?f(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),I=0;N.length>I;I++)o(v,T=N[I])&&!o(R,T)&&b(R,T,g(v,T));R.prototype=y,y.constructor=R,s(r,m,R)}},ac1f:function(e,t,a){"use strict";var n=a("23e7"),r=a("9263");n({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},afa5:function(e,t,a){"use strict";var n=a("86aa");e.exports=function(e,t,a){return"number"===typeof t&&(a=t),e in n?t=n[e]:"string"!==typeof t&&(t=(e.replace(/(?:s|x|z|ch|sh)$/i,"$&e").replace(/([^aeiou])y$/i,"$1ie")+"s").replace(/i?e?s$/i,(function(t){var a=e.slice(-1)===e.slice(-1).toLowerCase();return a?t.toLowerCase():t.toUpperCase()}))),1===a?e:t}},c8d2:function(e,t,a){var n=a("d039"),r=a("5899"),i="​᠎";e.exports=function(e){return n((function(){return!!r[e]()||i[e]()!=i||r[e].name!==e}))}},cb29:function(e,t,a){var n=a("23e7"),r=a("81d5"),i=a("44d2");n({target:"Array",proto:!0},{fill:r}),i("fill")},d784:function(e,t,a){"use strict";a("ac1f");var n=a("6eeb"),r=a("d039"),i=a("b622"),s=a("9263"),o=a("9112"),l=i("species"),c=!r((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),u=function(){return"$0"==="a".replace(/./,"$0")}(),d=i("replace"),p=function(){return!!/./[d]&&""===/./[d]("a","$0")}(),f=!r((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var a="ab".split(e);return 2!==a.length||"a"!==a[0]||"b"!==a[1]}));e.exports=function(e,t,a,d){var g=i(e),b=!r((function(){var t={};return t[g]=function(){return 7},7!=""[e](t)})),h=b&&!r((function(){var t=!1,a=/a/;return"split"===e&&(a={},a.constructor={},a.constructor[l]=function(){return a},a.flags="",a[g]=/./[g]),a.exec=function(){return t=!0,null},a[g](""),!t}));if(!b||!h||"replace"===e&&(!c||!u||p)||"split"===e&&!f){var m=/./[g],v=a(g,""[e],(function(e,t,a,n,r){return t.exec===s?b&&!r?{done:!0,value:m.call(t,a,n)}:{done:!0,value:e.call(a,t,n)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:p}),y=v[0],x=v[1];n(String.prototype,e,y),n(RegExp.prototype,g,2==t?function(e,t){return x.call(e,this,t)}:function(e){return x.call(e,this)})}d&&o(RegExp.prototype[g],"sham",!0)}},efa3:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{style:{padding:"1px 1px",height:"100%"}},[a("Divider",{staticStyle:{"margin-top":"50px"}},[e._v("预览：同步表")]),a("Button",{staticStyle:{"margin-bottom":"5px"},attrs:{type:"primary",loading:e.dbTableLoading},on:{click:e.getTableInfo}},[e._v(" 检查同步表 ")]),a("Table",{attrs:{size:"small",loading:e.dbTableLoading,stripe:"",columns:e.table.dbTableColumn,data:e.preCheckTablePage,border:""}}),a("div",[a("Page",{attrs:{transfer:!0,total:e.checkTableDataList.length,current:e.table.dbTablePage.current,"page-size-opts":e.table.dbTablePage.pageSizeOpts,"page-size":e.table.dbTablePage.size,"show-total":"","show-sizer":"","show-elevator":""},on:{"update:current":function(t){return e.$set(e.table.dbTablePage,"current",t)},"on-change":function(t){e.table.dbTablePage.current=t},"on-page-size-change":function(t){e.table.dbTablePage.size=t}}})],1)],1)},r=[],i=(a("a4d3"),a("e01a"),a("d28b"),a("fb6a"),a("a9e3"),a("d3b7"),a("3ca3"),a("498a"),a("ddb0"),a("2909")),s=a("53ca"),o=a("3835"),l=(a("96cf"),a("1da1")),c={name:"dbTablesPreview",props:{mode:Number,dbName:String,srcRegionName:String,dstRegionName:String,tableNames:String,replicationType:Number},emits:["updated"],data:function(){return{checkTableDataList:[],dbTableLoading:!1,table:{dbTableColumn:[{title:"序",width:50,key:"indexForShow"},{title:"库名",key:"schema",resizable:!0},{title:"表名",key:"table",resizable:!0},{title:"结果",align:"center",render:function(e,t){var a=t.row,n="ok"!==a.res?"volcano":"green",r=a.res;return e("Tag",{props:{color:n}},r)}}],dbTablePage:{total:0,current:1,size:10,pageSizeOpts:[5,10,20,100]}}}},methods:{getTableInfo:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.checkTableDataList=[],e.table.dbTablePage.current=1,1!==e.mode){t.next=8;break}if(e.dalClusterName){t.next=6;break}return e.$Message.warning("请先填写 dalcluster"),t.abrupt("return");case 6:t.next=11;break;case 8:if(e.dbName){t.next=11;break}return e.$Message.warning("请先填写数据库"),t.abrupt("return");case 11:if(e.srcRegionName&&(0!==e.replicationType||e.dstRegionName)){t.next=14;break}return e.$Message.warning("请先填写同步方向"),t.abrupt("return");case 14:if(e.tableNames){t.next=17;break}return e.$Message.warning("请先填写表名"),t.abrupt("return");case 17:return e.dbTableLoading=!0,t.next=20,e.axios.get("/api/drc/v2/autoconfig/preCheckTable",{params:e.flattenObj({mode:e.mode,dbName:e.dbName,srcRegionName:e.srcRegionName,dstRegionName:e.dstRegionName,replicationType:e.replicationType,tblsFilterDetail:{tableNames:e.tableNames}})}).then((function(t){var a=t.data.data;if(a){var n=!0,r=!1,i=void 0;try{for(var s,l=a.entries()[Symbol.iterator]();!(n=(s=l.next()).done);n=!0){var c=Object(o["a"])(s.value,2),u=c[0],d=c[1];d.indexForShow=u}}catch(p){r=!0,i=p}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}e.checkTableDataList=a,e.$Message.success("同步表检测成功, 共找到 "+a.length+" 个表")}else e.$Message.warning("同步表检测失败："+t.data.message)})).catch((function(t){e.$Message.error("查询dalcluster异常: "+t)})).finally((function(){e.dbTableLoading=!1}));case 20:case"end":return t.stop()}}),t)})))()},flattenObj:function(e){var t={};for(var a in e)if("object"!==Object(s["a"])(e[a])||Array.isArray(e[a]))t[a]=e[a];else{var n=this.flattenObj(e[a]);for(var r in n)t[a+"."+r]=n[r]}return t}},computed:{preCheckTablePage:function(){var e=this.checkTableDataList,t=(this.table.dbTablePage.current-1)*this.table.dbTablePage.size,a=t+this.table.dbTablePage.size;return Object(i["a"])(e).slice(t,a)}},created:function(){this.tableNames&&this.tableNames.trim().length>0&&this.getTableInfo()}},u=c,d=a("2877"),p=Object(d["a"])(u,n,r,!1,null,"647b2baf",null);t["a"]=p.exports}}]);
//# sourceMappingURL=chunk-8591f8c8.c297b0c6.js.map