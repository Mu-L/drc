{"version":3,"sources":["webpack:///./src/views/v2/dbTables.vue?c4ad","webpack:///src/views/v2/dbTables.vue","webpack:///./src/views/v2/dbTables.vue?10bd","webpack:///./src/views/v2/dbTables.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","style","margin","position","attrs","_v","path","query","step","srcMhaName","initInfo","dstMhaName","srcDc","dstDc","order","staticClass","padding","background","zIndex","staticStyle","_s","on","goTodbReplicationConfig","model","value","display","callback","$$v","$set","expression","propertiesJson","scopedSlots","_u","key","fn","ref","copied","height","columns","tableData","row","index","$event","goToShowConfig","goToUpdateConfig","goToDeleteConfig","staticRenderFns","name","data","srcMhaId","dbReplicationId","showPropertiesJson","total","size","pageSizeOpts","methods","getDbReplications","axios","get","$router","push","dbName","tableName","logicTableName","update","console","log","delete","then","response","status","window","alert","created","$route","applierGroupId","component"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,iBAAiB,CAACA,EAAG,aAAa,CAACE,MAAM,CAAEC,OAAQ,oBAAqBC,SAAU,UAAW,CAACJ,EAAG,iBAAiB,CAACK,MAAM,CAAC,GAAK,UAAU,CAACT,EAAIU,GAAG,QAAQN,EAAG,iBAAiB,CAACK,MAAM,CAAC,GAAK,CACvRE,KAAM,SAASC,MAAO,CACpBC,KAAM,EACNC,WAAYb,KAAKc,SAASD,WAC1BE,WAAYf,KAAKc,SAASC,WAC1BC,MAAOhB,KAAKc,SAASE,MACrBC,MAAOjB,KAAKc,SAASG,MACrBC,MAAOlB,KAAKc,SAASI,UAErB,CAACnB,EAAIU,GAAG,aAAaN,EAAG,iBAAiB,CAACJ,EAAIU,GAAG,UAAU,GAAGN,EAAG,UAAU,CAACgB,YAAY,UAAUd,MAAM,CAAEe,QAAS,OAAQC,WAAY,OAAQf,OAAQ,mBAAoBgB,OAAQ,MAAO,CAACnB,EAAG,MAAM,CAACA,EAAG,MAAM,CAACK,MAAM,CAAC,KAAO,OAAO,CAACL,EAAG,OAAO,CAACoB,YAAY,CAAC,aAAa,OAAO,MAAQ,UAAU,cAAc,QAAQ,CAACxB,EAAIU,GAAGV,EAAIyB,GAAGzB,EAAIe,SAASD,YAAY,IAAId,EAAIyB,GAAGzB,EAAIe,SAASE,OAAO,OAAOjB,EAAIyB,GAAGzB,EAAIe,SAASC,YAAY,IAAIhB,EAAIyB,GAAGzB,EAAIe,SAASG,OAAO,SAASd,EAAG,MAAM,CAACK,MAAM,CAAC,KAAO,MAAM,CAACL,EAAG,SAAS,CAACoB,YAAY,CAAC,aAAa,OAAO,aAAa,SAASf,MAAM,CAAC,KAAO,UAAU,MAAQ,IAAIiB,GAAG,CAAC,MAAQ1B,EAAI2B,0BAA0B,CAAC3B,EAAIU,GAAG,SAAS,IAAI,GAAGN,EAAG,QAAQ,CAACK,MAAM,CAAC,MAAQ,qBAAqB,MAAQ,SAASmB,MAAM,CAACC,MAAO7B,EAAI8B,QAA0B,mBAAEC,SAAS,SAAUC,GAAMhC,EAAIiC,KAAKjC,EAAI8B,QAAS,qBAAsBE,IAAME,WAAW,+BAA+B,CAAC9B,EAAG,cAAc,CAACK,MAAM,CAAC,MAAQT,EAAImC,eAAe,eAAe,EAAE,SAAW,IAAIC,YAAYpC,EAAIqC,GAAG,CAAC,CAACC,IAAI,OAAOC,GAAG,SAASC,GACjgC,IAAIC,EAASD,EAAIC,OACrB,MAAO,CAAUrC,EAAG,OAAZ,EAAmB,CAACJ,EAAIU,GAAG,SAAoB,CAACV,EAAIU,GAAG,gBAAgB,GAAGN,EAAG,MAAM,CAACE,MAAM,CAAEe,QAAS,UAAUqB,OAAQ,SAAU,CAAC,CAACtC,EAAG,QAAQ,CAACoB,YAAY,CAAC,aAAa,QAAQf,MAAM,CAAC,OAAS,GAAG,QAAUT,EAAI2C,QAAQ,KAAO3C,EAAI4C,UAAU,OAAS,IAAIR,YAAYpC,EAAIqC,GAAG,CAAC,CAACC,IAAI,SAASC,GAAG,SAASC,GAC9S,IAAIK,EAAML,EAAIK,IACVC,EAAQN,EAAIM,MACpB,MAAO,CAAC1C,EAAG,SAAS,CAACoB,YAAY,CAAC,eAAe,OAAOf,MAAM,CAAC,KAAO,UAAU,KAAO,SAASiB,GAAG,CAAC,MAAQ,SAASqB,GAAQ,OAAO/C,EAAIgD,eAAeH,EAAKC,MAAU,CAAC9C,EAAIU,GAAG,QAAQN,EAAG,SAAS,CAACoB,YAAY,CAAC,eAAe,OAAOf,MAAM,CAAC,KAAO,UAAU,KAAO,SAASiB,GAAG,CAAC,MAAQ,SAASqB,GAAQ,OAAO/C,EAAIiD,iBAAiBJ,EAAKC,MAAU,CAAC9C,EAAIU,GAAG,QAAQN,EAAG,SAAS,CAACoB,YAAY,CAAC,eAAe,QAAQf,MAAM,CAAC,KAAO,QAAQ,KAAO,SAASiB,GAAG,CAAC,MAAQ,SAASqB,GAAQ,OAAO/C,EAAIkD,iBAAiBL,EAAKC,MAAU,CAAC9C,EAAIU,GAAG,iBAAiB,IAAI,IAAI,IACliByC,EAAkB,GCyCtB,GACEC,KAAM,SACNC,KAFF,WAGI,MAAO,CACLtC,SAAU,CACRD,WAAY,GACZwC,SAAU,EACVtC,WAAY,GACZuC,gBAAiB,EACjBtC,MAAO,GACPC,MAAO,GACPC,OAAO,GAETwB,QAAS,CACf,CACQ,MAAR,KACQ,MAAR,GACQ,MAAR,SACQ,MAAR,OACQ,OAAR,cACU,OAAV,EACA,OACA,aAQM,CACE,MAAR,KACQ,IAAR,UAEA,CACQ,MAAR,KACQ,IAAR,kBAEA,CACQ,MAAR,KACQ,KAAR,SACQ,MAAR,SACQ,MAAR,IACQ,MAAR,UAGMb,QAAS,CACP0B,oBAAoB,GAEtBrB,eAAgB,GAChBS,UAAW,GACXa,MAAO,EACPC,KAAM,EACNC,aAAc,CAAC,EAAG,GAAI,GAAI,OAG9BC,QAAS,CACPC,kBADJ,WACA,WACM5D,KAAK6D,MAAMC,IAAI,+CAAiD9D,KAAKc,SAASD,WAAa,eAAiBb,KAAKc,SAASC,YAChI,kBACA,kBACU,OAAV,oBAEU,EAAV,0BAIIW,wBAXJ,WAYM1B,KAAK+D,QAAQC,KAAK,CAChBtD,KAAM,uBACNC,MAAO,CACLE,WAAYb,KAAKc,SAASD,WAC1BwC,SAAUrD,KAAKc,SAASuC,SACxBtC,WAAYf,KAAKc,SAASC,WAC1BC,MAAOhB,KAAKc,SAASE,MACrBC,MAAOjB,KAAKc,SAASG,MACrBC,MAAOlB,KAAKc,SAASI,MACrB+C,OAAQ,GACRC,UAAW,OAIjBnB,eA1BJ,SA0BA,OAGIC,iBA7BJ,SA6BA,KACMhD,KAAK+D,QAAQC,KAAK,CAChBtD,KAAM,uBACNC,MAAO,CACLE,WAAYb,KAAKc,SAASD,WAC1BE,WAAYf,KAAKc,SAASC,WAC1BC,MAAOhB,KAAKc,SAASE,MACrBC,MAAOjB,KAAKc,SAASG,MACrBC,MAAOlB,KAAKc,SAASI,MACrB+C,OAAQrB,EAAIqB,OACZC,UAAWtB,EAAIuB,eACfb,gBAAiBV,EAAIU,gBACrBc,OAAQ,MAIdnB,iBA7CJ,SA6CA,gBAEMoB,QAAQC,IAAI1B,GACZ5C,KAAK6D,MAAMU,OAAO,oDAAsD3B,EAAIU,iBAAiBkB,MAAK,SAAxG,GACqC,IAAzBC,EAASrB,KAAKsB,OAChBC,OAAOC,MAAM,UAEbD,OAAOC,MAAM,SACb,EAAV,0BAKEC,QAlHF,WAmHI7E,KAAKc,SAAW,CACdD,WAAYb,KAAK8E,OAAOnE,MAAME,WAC9BwC,SAAUrD,KAAK8E,OAAOnE,MAAM0C,SAC5BtC,WAAYf,KAAK8E,OAAOnE,MAAMI,WAC9BgE,eAAgB/E,KAAK8E,OAAOnE,MAAMoE,eAClC/D,MAAOhB,KAAK8E,OAAOnE,MAAMK,MACzBC,MAAOjB,KAAK8E,OAAOnE,MAAMM,MACzBC,MAAOlB,KAAK8E,OAAOnE,MAAMO,OAE3BmD,QAAQC,IAAI,aACZD,QAAQC,IAAItE,KAAKc,UACjBd,KAAK4D,sBCtLwV,I,YCO7VoB,EAAY,eACd,EACAlF,EACAoD,GACA,EACA,KACA,WACA,MAIa,aAAA8B,E","file":"js/chunk-2d0de1ae.a91e728d.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('base-component',[_c('Breadcrumb',{style:({margin: '15px 0 15px 185px', position: 'fixed'})},[_c('BreadcrumbItem',{attrs:{\"to\":\"/home\"}},[_vm._v(\"首页\")]),_c('BreadcrumbItem',{attrs:{\"to\":{\n      path: '/drcV2',query :{\n        step: 3,\n        srcMhaName: this.initInfo.srcMhaName,\n        dstMhaName: this.initInfo.dstMhaName,\n        srcDc: this.initInfo.srcDc,\n        dstDc: this.initInfo.dstDc,\n        order: this.initInfo.order\n      }\n    }}},[_vm._v(\"DRC配置V2\")]),_c('BreadcrumbItem',[_vm._v(\"同步表\")])],1),_c('Content',{staticClass:\"content\",style:({padding: '10px', background: '#fff', margin: '50px 0 1px 185px', zIndex: '1'})},[_c('Row',[_c('Col',{attrs:{\"span\":\"20\"}},[_c('span',{staticStyle:{\"margin-top\":\"10px\",\"color\":\"#464c5b\",\"font-weight\":\"600\"}},[_vm._v(_vm._s(_vm.initInfo.srcMhaName)+\"(\"+_vm._s(_vm.initInfo.srcDc)+\")==>\"+_vm._s(_vm.initInfo.dstMhaName)+\"(\"+_vm._s(_vm.initInfo.dstDc)+\")\")])]),_c('Col',{attrs:{\"span\":\"2\"}},[_c('Button',{staticStyle:{\"margin-top\":\"10px\",\"text-align\":\"right\"},attrs:{\"type\":\"primary\",\"ghost\":\"\"},on:{\"click\":_vm.goTodbReplicationConfig}},[_vm._v(\"添加\")])],1)],1),_c('Modal',{attrs:{\"title\":\"Applier properties\",\"width\":\"800px\"},model:{value:(_vm.display.showPropertiesJson),callback:function ($$v) {_vm.$set(_vm.display, \"showPropertiesJson\", $$v)},expression:\"display.showPropertiesJson\"}},[_c('json-viewer',{attrs:{\"value\":_vm.propertiesJson,\"expand-depth\":5,\"copyable\":\"\"},scopedSlots:_vm._u([{key:\"copy\",fn:function(ref){\n    var copied = ref.copied;\nreturn [(copied)?_c('span',[_vm._v(\"复制成功\")]):_c('span',[_vm._v(\"复制\")])]}}])})],1),_c('div',{style:({padding: '1px 1px',height: '100%'})},[[_c('Table',{staticStyle:{\"margin-top\":\"20px\"},attrs:{\"stripe\":\"\",\"columns\":_vm.columns,\"data\":_vm.tableData,\"border\":\"\"},scopedSlots:_vm._u([{key:\"action\",fn:function(ref){\n    var row = ref.row;\n    var index = ref.index;\nreturn [_c('Button',{staticStyle:{\"margin-right\":\"5px\"},attrs:{\"type\":\"success\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.goToShowConfig(row, index)}}},[_vm._v(\"查看\")]),_c('Button',{staticStyle:{\"margin-right\":\"5px\"},attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.goToUpdateConfig(row, index)}}},[_vm._v(\"修改\")]),_c('Button',{staticStyle:{\"margin-right\":\"10px\"},attrs:{\"type\":\"error\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.goToDeleteConfig(row, index)}}},[_vm._v(\"删除\")])]}}])})]],2)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <base-component>\n    <Breadcrumb :style=\"{margin: '15px 0 15px 185px', position: 'fixed'}\">\n      <BreadcrumbItem to=\"/home\">首页</BreadcrumbItem>\n      <BreadcrumbItem :to=\"{\n        path: '/drcV2',query :{\n          step: 3,\n          srcMhaName: this.initInfo.srcMhaName,\n          dstMhaName: this.initInfo.dstMhaName,\n          srcDc: this.initInfo.srcDc,\n          dstDc: this.initInfo.dstDc,\n          order: this.initInfo.order\n        }\n      }\">DRC配置V2</BreadcrumbItem>\n      <BreadcrumbItem >同步表</BreadcrumbItem>\n    </Breadcrumb>\n    <Content class=\"content\" :style=\"{padding: '10px', background: '#fff', margin: '50px 0 1px 185px', zIndex: '1'}\">\n      <Row>\n        <Col span=\"20\">\n          <span style=\"margin-top: 10px;color:#464c5b;font-weight:600\">{{initInfo.srcMhaName}}({{initInfo.srcDc}})==>{{initInfo.dstMhaName}}({{initInfo.dstDc}})</span>\n        </Col>\n        <Col span=\"2\">\n          <Button style=\"margin-top: 10px;text-align: right\" type=\"primary\" ghost @click=\"goTodbReplicationConfig\">添加</Button>\n        </Col>\n      </Row>\n      <Modal\n        v-model=\"display.showPropertiesJson\"\n        title=\"Applier properties\"\n        width=\"800px\"\n      >\n        <json-viewer\n          :value=\"propertiesJson\"\n          :expand-depth=5\n          copyable>\n          <template v-slot:copy=\"{copied}\">\n            <span v-if=\"copied\">复制成功</span>\n            <span v-else>复制</span>\n          </template>\n        </json-viewer>\n      </Modal>\n      <div :style=\"{padding: '1px 1px',height: '100%'}\">\n        <template>\n          <Table style=\"margin-top: 20px\" stripe :columns=\"columns\" :data=\"tableData\" border>\n            <template slot-scope=\"{ row, index }\" slot=\"action\">\n              <Button type=\"success\" size=\"small\" style=\"margin-right: 5px\" @click=\"goToShowConfig(row, index)\">查看</Button>\n              <Button type=\"primary\" size=\"small\" style=\"margin-right: 5px\" @click=\"goToUpdateConfig(row, index)\">修改</Button>\n              <Button type=\"error\" size=\"small\" style=\"margin-right: 10px\" @click=\"goToDeleteConfig(row, index)\">删除</Button>\n            </template>\n          </Table>\n        </template>\n      </div>\n    </Content>\n  </base-component>\n</template>\n\n<script>\nexport default {\n  name: 'tables',\n  data () {\n    return {\n      initInfo: {\n        srcMhaName: '',\n        srcMhaId: 0,\n        dstMhaName: '',\n        dbReplicationId: 0,\n        srcDc: '',\n        dstDc: '',\n        order: true\n      },\n      columns: [\n        {\n          title: '序号',\n          width: 75,\n          align: 'center',\n          fixed: 'left',\n          render: (h, params) => {\n            return h(\n              'span',\n              params.index + 1\n            )\n          }\n        },\n        // {\n        //   title: 'id',\n        //   key: 'dbReplicationId'\n        // },\n        {\n          title: '库名',\n          key: 'dbName'\n        },\n        {\n          title: '表名',\n          key: 'logicTableName'\n        },\n        {\n          title: '操作',\n          slot: 'action',\n          align: 'center',\n          width: 200,\n          fixed: 'right'\n        }\n      ],\n      display: {\n        showPropertiesJson: false\n      },\n      propertiesJson: {},\n      tableData: [],\n      total: 0,\n      size: 5,\n      pageSizeOpts: [5, 10, 20, 100]\n    }\n  },\n  methods: {\n    getDbReplications () {\n      this.axios.get('/api/drc/v2/config/dbReplication?srcMhaName=' + this.initInfo.srcMhaName + '&dstMhaName=' + this.initInfo.dstMhaName)\n        .then(response => {\n          if (response.data.status === 1) {\n            window.alert('查询相关配置表失败!')\n          } else {\n            this.tableData = response.data.data\n          }\n        })\n    },\n    goTodbReplicationConfig () {\n      this.$router.push({\n        path: '/dbReplicationConfig',\n        query: {\n          srcMhaName: this.initInfo.srcMhaName,\n          srcMhaId: this.initInfo.srcMhaId,\n          dstMhaName: this.initInfo.dstMhaName,\n          srcDc: this.initInfo.srcDc,\n          dstDc: this.initInfo.dstDc,\n          order: this.initInfo.order,\n          dbName: '',\n          tableName: ''\n        }\n      })\n    },\n    goToShowConfig (row, index) {\n      // todo 展示json\n    },\n    goToUpdateConfig (row, index) {\n      this.$router.push({\n        path: '/dbReplicationConfig',\n        query: {\n          srcMhaName: this.initInfo.srcMhaName,\n          dstMhaName: this.initInfo.dstMhaName,\n          srcDc: this.initInfo.srcDc,\n          dstDc: this.initInfo.dstDc,\n          order: this.initInfo.order,\n          dbName: row.dbName,\n          tableName: row.logicTableName,\n          dbReplicationId: row.dbReplicationId,\n          update: 0\n        }\n      })\n    },\n    goToDeleteConfig (row, index) {\n      // todo, json确认弹窗\n      console.log(row)\n      this.axios.delete('/api/drc/v2/config/dbReplication?dbReplicationId=' + row.dbReplicationId).then(response => {\n        if (response.data.status === 1) {\n          window.alert('删除失败!')\n        } else {\n          window.alert('删除成功!')\n          this.getDbReplications()\n        }\n      })\n    }\n  },\n  created () {\n    this.initInfo = {\n      srcMhaName: this.$route.query.srcMhaName,\n      srcMhaId: this.$route.query.srcMhaId,\n      dstMhaName: this.$route.query.dstMhaName,\n      applierGroupId: this.$route.query.applierGroupId,\n      srcDc: this.$route.query.srcDc,\n      dstDc: this.$route.query.dstDc,\n      order: this.$route.query.order\n    }\n    console.log('initInfo:')\n    console.log(this.initInfo)\n    this.getDbReplications()\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dbTables.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dbTables.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./dbTables.vue?vue&type=template&id=b194d90e&scoped=true&\"\nimport script from \"./dbTables.vue?vue&type=script&lang=js&\"\nexport * from \"./dbTables.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b194d90e\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}