(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-46f5126c"],{"159b":function(t,e,i){var a=i("da84"),n=i("fdbc"),o=i("17c2"),s=i("9112");for(var r in n){var c=a[r],l=c&&c.prototype;if(l&&l.forEach!==o)try{s(l,"forEach",o)}catch(d){l.forEach=o}}},"17c2":function(t,e,i){"use strict";var a=i("b727").forEach,n=i("a640"),o=i("ae40"),s=n("forEach"),r=o("forEach");t.exports=s&&r?[].forEach:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}},4160:function(t,e,i){"use strict";var a=i("23e7"),n=i("17c2");a({target:"Array",proto:!0,forced:[].forEach!=n},{forEach:n})},"83da":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("base-component",[i("Breadcrumb",{style:{margin:"15px 0 15px 185px",position:"fixed"}},[i("BreadcrumbItem",{attrs:{to:{path:"/v2/mhaReplications",query:{srcMhaName:this.initInfo.srcMhaName,dstMhaName:this.initInfo.dstMhaName,preciseSearchMode:!0}}}},[t._v("首页 ")]),i("BreadcrumbItem",{attrs:{to:{path:"/drcV2",query:{step:3,srcMhaName:this.initInfo.srcMhaName,dstMhaName:this.initInfo.dstMhaName,srcDc:this.initInfo.srcDc,dstDc:this.initInfo.dstDc,order:this.initInfo.order}}}},[t._v("DRC配置V2 ")]),i("BreadcrumbItem",[t._v("同步表")])],1),i("Content",{staticClass:"content",style:{padding:"10px",background:"#fff",margin:"50px 0 1px 185px",zIndex:"1"}},[i("Row",[i("Col",{attrs:{span:"16"}},[i("span",{staticStyle:{"margin-top":"10px",color:"#464c5b","font-weight":"600"}},[t._v(t._s(t.initInfo.srcMhaName)+"("+t._s(t.initInfo.srcDc)+")==>"+t._s(t.initInfo.dstMhaName)+"("+t._s(t.initInfo.dstDc)+")")])]),i("Col",{attrs:{span:"2"}},[i("Button",{staticStyle:{"margin-top":"10px","text-align":"right"},attrs:{type:"primary",ghost:""},on:{click:t.goTodbReplicationConfigV2}},[t._v("添加 ")])],1),i("Col",{attrs:{span:"2"}},[i("Button",{staticStyle:{"margin-top":"10px","text-align":"right"},attrs:{type:"primary",ghost:""},on:{click:function(e){return t.batchUpdate()}}},[t._v("批量修改 ")])],1),i("Col",{attrs:{span:"2"}},[i("Button",{staticStyle:{"margin-top":"10px","text-align":"right"},attrs:{type:"error",ghost:""},on:{click:function(e){return t.preBatchDelete()}}},[t._v("批量删除 ")])],1)],1),i("div",{style:{padding:"1px 1px",height:"100%"}},[[i("Table",{ref:"multipleTable",staticStyle:{"margin-top":"20px"},attrs:{stripe:"",columns:t.columns,data:t.tableData,border:""},on:{"on-selection-change":t.changeSelection},scopedSlots:t._u([{key:"action",fn:function(e){var a=e.row,n=e.index;return[i("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"success",size:"small"},on:{click:function(e){return t.goToShowConfig(a,n)}}},[t._v("查看 ")]),i("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.goToUpdateConfig(a,n)}}},[t._v("修改 ")]),i("Button",{staticStyle:{"margin-right":"10px"},attrs:{type:"error",size:"small"},on:{click:function(e){return t.preDeleteDbReplication(a,n)}}},[t._v(" 删除 ")])]}}])})]],2),i("Modal",{attrs:{title:"确认删除以下同步表",width:"1200px"},on:{"on-ok":t.deleteDbReplication,"on-cancel":t.clearDeleteDbReplication},model:{value:t.batchDeleteModal,callback:function(e){t.batchDeleteModal=e},expression:"batchDeleteModal"}},[i("div",{style:{padding:"1px 1px",height:"100%"}},[i("p",[i("span",[t._v("一共 ")]),i("span",{staticStyle:{color:"red","font-size":"16px","word-break":"break-all","word-wrap":"break-word"}},[t._v(t._s(this.deleteData.length))]),i("span",[t._v(" 行")])]),[i("Table",{staticStyle:{"margin-top":"20px"},attrs:{stripe:"",columns:t.deleteColumns,data:t.deleteData,border:""}})]],2)])],1)],1)},n=[],o=(i("4160"),i("159b"),{name:"tables",data:function(){return{initInfo:{srcMhaName:"",srcMhaId:0,dstMhaName:"",dbReplicationId:0,multiData:[],srcDc:"",dstDc:"",order:!0},batchDeleteModal:!1,deleteData:[],columns:[{type:"selection",width:60,align:"center"},{title:"序号",width:75,align:"center",render:function(t,e){return t("span",e.index+1)}},{title:"库名",key:"dbName"},{title:"表名",key:"logicTableName"},{title:"操作",slot:"action",align:"center",width:200,fixed:"right"}],deleteColumns:[{title:"序号",width:75,align:"center",render:function(t,e){return t("span",e.index+1)}},{title:"库名",key:"dbName"},{title:"表名",key:"logicTableName"}],propertiesJson:{},tableData:[],total:0,size:5,pageSizeOpts:[5,10,20,100]}},methods:{changeSelection:function(t){this.initInfo.multiData=t,console.log(this.initInfo.multiData)},getDbReplications:function(){var t=this;this.axios.get("/api/drc/v2/config/dbReplication?srcMhaName="+this.initInfo.srcMhaName+"&dstMhaName="+this.initInfo.dstMhaName).then((function(e){1===e.data.status?window.alert("查询相关配置表失败!"):t.tableData=e.data.data}))},goTodbReplicationConfigV2:function(){this.$router.push({path:"/dbReplicationConfigV2",query:{srcMhaName:this.initInfo.srcMhaName,dstMhaName:this.initInfo.dstMhaName,srcDc:this.initInfo.srcDc,dstDc:this.initInfo.dstDc,update:!1}})},goToShowConfig:function(t,e){var i=[];i.push(t.dbReplicationId),this.$router.push({path:"/dbReplicationConfigV2",query:{srcMhaName:this.initInfo.srcMhaName,dstMhaName:this.initInfo.dstMhaName,srcDc:this.initInfo.srcDc,dstDc:this.initInfo.dstDc,dbName:t.dbName,tableName:t.logicTableName,dbReplicationId:t.dbReplicationId,dbReplicationIds:JSON.stringify(i),update:!0,show:!0}})},preBatchDelete:function(){var t=this.initInfo.multiData;void 0!==t&&null!==t&&0!==t.length?(this.batchDeleteModal=!0,this.deleteData=this.initInfo.multiData):this.$Message.warning("请勾选！")},batchUpdate:function(){var t=this.initInfo.multiData;if(void 0!==t&&null!==t&&0!==t.length){var e=t[0],i=[];t.forEach((function(t){return i.push(t.dbReplicationId)}));var a="";if(t.length>1){a="("+e.dbName;for(var n=1;n<t.length;n++){if(t[n].logicTableName!==e.logicTableName)return void this.$Message.warning("表名不一样不能勾选");a+="|"+t[n].dbName}a+=")"}else a=e.dbName;console.log(i),this.$router.push({path:"/dbReplicationConfigV2",query:{srcMhaName:this.initInfo.srcMhaName,dstMhaName:this.initInfo.dstMhaName,srcDc:this.initInfo.srcDc,dstDc:this.initInfo.dstDc,dbName:a,tableName:e.logicTableName,dbReplicationId:e.dbReplicationId,dbReplicationIds:JSON.stringify(i),update:!0,batchUpdate:!0}})}else this.$Message.warning("请勾选！")},goToUpdateConfig:function(t,e){var i=[];i.push(t.dbReplicationId),this.$router.push({path:"/dbReplicationConfigV2",query:{srcMhaName:this.initInfo.srcMhaName,dstMhaName:this.initInfo.dstMhaName,srcDc:this.initInfo.srcDc,dstDc:this.initInfo.dstDc,dbName:t.dbName,tableName:t.logicTableName,dbReplicationId:t.dbReplicationId,dbReplicationIds:JSON.stringify(i),update:!0}})},preDeleteDbReplication:function(t,e){this.deleteData=[],this.deleteData.push(t),this.batchDeleteModal=!0},clearDeleteDbReplication:function(t,e){this.deleteData=[],this.batchDeleteModal=!1},deleteDbReplication:function(){var t=this,e=[];this.deleteData.forEach((function(t){return e.push(t.dbReplicationId)})),this.axios.delete("/api/drc/v2/config/dbReplications?dbReplicationIds="+e).then((function(e){1===e.data.status?t.$Message.error("删除失败!"+e.data.message):(t.$Message.success("删除成功!"),t.getDbReplications(),t.initInfo.multiData=[])}))}},created:function(){this.initInfo={srcMhaName:this.$route.query.srcMhaName,srcMhaId:this.$route.query.srcMhaId,dstMhaName:this.$route.query.dstMhaName,applierGroupId:this.$route.query.applierGroupId,srcDc:this.$route.query.srcDc,dstDc:this.$route.query.dstDc,order:this.$route.query.order},console.log("initInfo:"),console.log(this.initInfo),this.getDbReplications()}}),s=o,r=i("2877"),c=Object(r["a"])(s,a,n,!1,null,"04d77a55",null);e["default"]=c.exports},a640:function(t,e,i){"use strict";var a=i("d039");t.exports=function(t,e){var i=[][t];return!!i&&a((function(){i.call(null,e||function(){throw 1},1)}))}},fdbc:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=chunk-46f5126c.56930cec.js.map