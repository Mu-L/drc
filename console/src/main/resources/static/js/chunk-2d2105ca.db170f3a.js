(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2105ca"],{b820:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("base-component",[t("Breadcrumb",{style:{margin:"15px 0 15px 185px",position:"fixed"}},[t("BreadcrumbItem",{attrs:{to:"/home"}},[e._v("首页")]),t("BreadcrumbItem",{attrs:{to:"/buildMetaMessage"}},[e._v("行过滤唯一标识配置")])],1),t("Content",{staticClass:"content",style:{padding:"10px",background:"#fff",margin:"50px 0 1px 185px",zIndex:"1"}},[t("div",{staticStyle:{padding:"1px 1px"}},[t("Form",{ref:"metaMessage",staticStyle:{"margin-top":"50px"},attrs:{rules:e.ruleForm,model:e.metaMessage,"label-width":250}},[t("FormItem",{attrs:{label:"行过滤唯一标识",prop:"metaFilterName"}},[t("Input",{staticStyle:{width:"600px"},attrs:{placeholder:"请输入行过滤唯一标识"},model:{value:e.metaMessage.metaFilterName,callback:function(t){e.$set(e.metaMessage,"metaFilterName",t)},expression:"metaMessage.metaFilterName"}})],1),t("FormItem",{attrs:{label:"请选择目标子环境",prop:"targetSubEnv"}},[t("Select",{staticStyle:{width:"600px"},attrs:{placeholder:"目标子环境",multiple:""},model:{value:e.metaMessage.targetSubEnv,callback:function(t){e.$set(e.metaMessage,"targetSubEnv",t)},expression:"metaMessage.targetSubEnv"}},e._l(e.subEnvs,(function(e,a){return t("Option",{key:a,attrs:{value:e}})})),1)],1),t("FormItem",{attrs:{label:"bu",prop:"bu"}},[t("Input",{staticStyle:{width:"600px"},attrs:{placeholder:"请输入bu"},model:{value:e.metaMessage.bu,callback:function(t){e.$set(e.metaMessage,"bu",t)},expression:"metaMessage.bu"}})],1),t("FormItem",{attrs:{label:"负责人",prop:"owner"}},[t("Input",{staticStyle:{width:"600px"},attrs:{placeholder:"请输入负责人"},model:{value:e.metaMessage.owner,callback:function(t){e.$set(e.metaMessage,"owner",t)},expression:"metaMessage.owner"}})],1),t("FormItem",{attrs:{label:"行过滤类型",prop:"filterType"}},[t("Select",{staticStyle:{width:"600px"},attrs:{placeholder:"请选择行过滤类型"},model:{value:e.metaMessage.filterType,callback:function(t){e.$set(e.metaMessage,"filterType",t)},expression:"metaMessage.filterType"}},[t("Option",{attrs:{value:"1"}},[e._v("黑名单")]),t("Option",{attrs:{value:"2"}},[e._v("白名单")])],1)],1),t("FormItem",[t("Button",{on:{click:e.resetForm}},[e._v("重置")]),t("Button",{staticStyle:{"margin-left":"150px"},attrs:{type:"primary"},on:{click:e.putMetaMessage}},[e._v("新建配置")]),t("Button",{staticStyle:{"margin-left":"150px"},attrs:{type:"primary",to:"metaMessage"}},[e._v("返回")])],1)],1)],1)])],1)},r=[],n=(a("d9e2"),a("14d9"),{name:"buildMetaMessage",props:{},data:function(){return{status:"",msg:"",title:"",hasResp:"",subEnvs:[],metaMessage:{metaFilterName:"",targetSubEnv:"",bu:"",owner:"",filterType:""},ruleForm:{metaFilterName:[{required:!0,message:"行过滤唯一标识不能为空",trigger:"blur"}],targetSubEnv:[{validator:function(e,t,a){0===t.length?a(new Error("请至少选择一个子环境")):a()},trigger:"blur"}],bu:[{required:!0,message:"BU名不能为空",trigger:"blur"}],owner:[{required:!0,message:"请填写负责人",trigger:"blur"}],filterType:[{required:!0,message:"请选择行过滤类型",trigger:"change"}]}}},methods:{getSubEnvs:function(){var e=this;this.axios.get("/api/drc/v1/filter/row/subEnv").then((function(t){e.subEnvs=t.data.data,console.log(e.subEnvs)}))},putMetaMessage:function(){var e=this;this.$refs.metaMessage.validate((function(t){t?(console.log(e.metaMessage),e.axios.put("/api/drc/v1/filter/row/meta",{metaFilterName:e.metaMessage.metaFilterName,targetSubEnv:e.metaMessage.targetSubEnv,bu:e.metaMessage.bu,owner:e.metaMessage.owner,filterType:e.metaMessage.filterType}).then((function(t){e.hasResp=!0,0===t.data.status?e.$router.push("/metaMessage"):e.$Message.error("新建配置失败")})).catch((function(t){e.status="error",e.title="创建失败！",console.log(t)}))):e.$Message.error("仍有必填项未填!")}))},resetForm:function(){this.$refs.metaMessage.resetFields()}},created:function(){var e=this;this.axios.get("/api/drc/v2/permission/meta/rowsFilterMark").then((function(t){403!==t.data.status?e.getSubEnvs():e.$router.push("/nopermission")}))}}),i=n,l=a("2877"),o=Object(l["a"])(i,s,r,!1,null,"6a454067",null);t["default"]=o.exports}}]);
//# sourceMappingURL=chunk-2d2105ca.db170f3a.js.map