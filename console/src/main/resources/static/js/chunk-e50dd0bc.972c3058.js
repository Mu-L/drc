(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e50dd0bc"],{1276:function(e,t,a){"use strict";var n=a("d784"),r=a("44e7"),i=a("825a"),o=a("1d80"),s=a("4840"),l=a("8aa5"),c=a("50c4"),u=a("14c3"),f=a("9263"),d=a("d039"),p=[].push,g=Math.min,h=4294967295,b=!d((function(){return!RegExp(h,"y")}));n("split",2,(function(e,t,a){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,a){var n=String(o(this)),i=void 0===a?h:a>>>0;if(0===i)return[];if(void 0===e)return[n];if(!r(e))return t.call(n,e,i);var s,l,c,u=[],d=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),g=0,b=new RegExp(e.source,d+"g");while(s=f.call(b,n)){if(l=b.lastIndex,l>g&&(u.push(n.slice(g,s.index)),s.length>1&&s.index<n.length&&p.apply(u,s.slice(1)),c=s[0].length,g=l,u.length>=i))break;b.lastIndex===s.index&&b.lastIndex++}return g===n.length?!c&&b.test("")||u.push(""):u.push(n.slice(g)),u.length>i?u.slice(0,i):u}:"0".split(void 0,0).length?function(e,a){return void 0===e&&0===a?[]:t.call(this,e,a)}:t,[function(t,a){var r=o(this),i=void 0==t?void 0:t[e];return void 0!==i?i.call(t,r,a):n.call(String(r),t,a)},function(e,r){var o=a(n,e,this,r,n!==t);if(o.done)return o.value;var f=i(e),d=String(this),p=s(f,RegExp),m=f.unicode,v=(f.ignoreCase?"i":"")+(f.multiline?"m":"")+(f.unicode?"u":"")+(b?"y":"g"),y=new p(b?f:"^(?:"+f.source+")",v),x=void 0===r?h:r>>>0;if(0===x)return[];if(0===d.length)return null===u(y,d)?[d]:[];var w=0,T=0,R=[];while(T<d.length){y.lastIndex=b?T:0;var E,I=u(y,b?d:d.slice(T));if(null===I||(E=g(c(y.lastIndex+(b?0:T)),d.length))===w)T=l(d,T,m);else{if(R.push(d.slice(w,T)),R.length===x)return R;for(var N=1;N<=I.length-1;N++)if(R.push(I[N]),R.length===x)return R;T=w=E}}return R.push(d.slice(w)),R}]}),!b)},"14c3":function(e,t,a){var n=a("c6b6"),r=a("9263");e.exports=function(e,t){var a=e.exec;if("function"===typeof a){var i=a.call(e,t);if("object"!==typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==n(e))throw TypeError("RegExp#exec called on incompatible receiver");return r.call(e,t)}},"159b":function(e,t,a){var n=a("da84"),r=a("fdbc"),i=a("17c2"),o=a("9112");for(var s in r){var l=n[s],c=l&&l.prototype;if(c&&c.forEach!==i)try{o(c,"forEach",i)}catch(u){c.forEach=i}}},"17c2":function(e,t,a){"use strict";var n=a("b727").forEach,r=a("a640"),i=a("ae40"),o=r("forEach"),s=i("forEach");e.exports=o&&s?[].forEach:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}},3835:function(e,t,a){"use strict";function n(e){if(Array.isArray(e))return e}a.d(t,"a",(function(){return o}));a("a4d3"),a("e01a"),a("d28b"),a("e260"),a("d3b7"),a("25f0"),a("3ca3"),a("ddb0");function r(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var a=[],n=!0,r=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0)if(a.push(o.value),t&&a.length===t)break}catch(l){r=!0,i=l}finally{try{n||null==s["return"]||s["return"]()}finally{if(r)throw i}}return a}}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function o(e,t){return n(e)||r(e,t)||i()}},4160:function(e,t,a){"use strict";var n=a("23e7"),r=a("17c2");n({target:"Array",proto:!0,forced:[].forEach!=r},{forEach:r})},"498a":function(e,t,a){"use strict";var n=a("23e7"),r=a("58a8").trim,i=a("c8d2");n({target:"String",proto:!0,forced:i("trim")},{trim:function(){return r(this)}})},"4ec9":function(e,t,a){"use strict";var n=a("6d61"),r=a("6566");e.exports=n("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),r)},5319:function(e,t,a){"use strict";var n=a("d784"),r=a("825a"),i=a("7b0b"),o=a("50c4"),s=a("a691"),l=a("1d80"),c=a("8aa5"),u=a("14c3"),f=Math.max,d=Math.min,p=Math.floor,g=/\$([$&'`]|\d\d?|<[^>]*>)/g,h=/\$([$&'`]|\d\d?)/g,b=function(e){return void 0===e?e:String(e)};n("replace",2,(function(e,t,a,n){var m=n.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,v=n.REPLACE_KEEPS_$0,y=m?"$":"$0";return[function(a,n){var r=l(this),i=void 0==a?void 0:a[e];return void 0!==i?i.call(a,r,n):t.call(String(r),a,n)},function(e,n){if(!m&&v||"string"===typeof n&&-1===n.indexOf(y)){var i=a(t,e,this,n);if(i.done)return i.value}var l=r(e),p=String(this),g="function"===typeof n;g||(n=String(n));var h=l.global;if(h){var w=l.unicode;l.lastIndex=0}var T=[];while(1){var R=u(l,p);if(null===R)break;if(T.push(R),!h)break;var E=String(R[0]);""===E&&(l.lastIndex=c(p,o(l.lastIndex),w))}for(var I="",N=0,k=0;k<T.length;k++){R=T[k];for(var _=String(R[0]),S=f(d(s(R.index),p.length),0),M=[],O=1;O<R.length;O++)M.push(b(R[O]));var D=R.groups;if(g){var z=[_].concat(M,S,p);void 0!==D&&z.push(D);var P=String(n.apply(void 0,z))}else P=x(_,p,S,M,D,n);S>=N&&(I+=p.slice(N,S)+P,N=S+_.length)}return I+p.slice(N)}];function x(e,a,n,r,o,s){var l=n+e.length,c=r.length,u=h;return void 0!==o&&(o=i(o),u=g),t.call(s,u,(function(t,i){var s;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return a.slice(0,n);case"'":return a.slice(l);case"<":s=o[i.slice(1,-1)];break;default:var u=+i;if(0===u)return t;if(u>c){var f=p(u/10);return 0===f?t:f<=c?void 0===r[f-1]?i.charAt(1):r[f-1]+i.charAt(1):t}s=r[u-1]}return void 0===s?"":s}))}}))},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,a){var n=a("1d80"),r=a("5899"),i="["+r+"]",o=RegExp("^"+i+i+"*"),s=RegExp(i+i+"*$"),l=function(e){return function(t){var a=String(n(t));return 1&e&&(a=a.replace(o,"")),2&e&&(a=a.replace(s,"")),a}};e.exports={start:l(1),end:l(2),trim:l(3)}},6566:function(e,t,a){"use strict";var n=a("9bf2").f,r=a("7c73"),i=a("e2cc"),o=a("0366"),s=a("19aa"),l=a("2266"),c=a("7dd0"),u=a("2626"),f=a("83ab"),d=a("f183").fastKey,p=a("69f3"),g=p.set,h=p.getterFor;e.exports={getConstructor:function(e,t,a,c){var u=e((function(e,n){s(e,u,t),g(e,{type:t,index:r(null),first:void 0,last:void 0,size:0}),f||(e.size=0),void 0!=n&&l(n,e[c],e,a)})),p=h(t),b=function(e,t,a){var n,r,i=p(e),o=m(e,t);return o?o.value=a:(i.last=o={index:r=d(t,!0),key:t,value:a,previous:n=i.last,next:void 0,removed:!1},i.first||(i.first=o),n&&(n.next=o),f?i.size++:e.size++,"F"!==r&&(i.index[r]=o)),e},m=function(e,t){var a,n=p(e),r=d(t);if("F"!==r)return n.index[r];for(a=n.first;a;a=a.next)if(a.key==t)return a};return i(u.prototype,{clear:function(){var e=this,t=p(e),a=t.index,n=t.first;while(n)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete a[n.index],n=n.next;t.first=t.last=void 0,f?t.size=0:e.size=0},delete:function(e){var t=this,a=p(t),n=m(t,e);if(n){var r=n.next,i=n.previous;delete a.index[n.index],n.removed=!0,i&&(i.next=r),r&&(r.previous=i),a.first==n&&(a.first=r),a.last==n&&(a.last=i),f?a.size--:t.size--}return!!n},forEach:function(e){var t,a=p(this),n=o(e,arguments.length>1?arguments[1]:void 0,3);while(t=t?t.next:a.first){n(t.value,t.key,this);while(t&&t.removed)t=t.previous}},has:function(e){return!!m(this,e)}}),i(u.prototype,a?{get:function(e){var t=m(this,e);return t&&t.value},set:function(e,t){return b(this,0===e?0:e,t)}}:{add:function(e){return b(this,e=0===e?0:e,e)}}),f&&n(u.prototype,"size",{get:function(){return p(this).size}}),u},setStrong:function(e,t,a){var n=t+" Iterator",r=h(t),i=h(n);c(e,t,(function(e,t){g(this,{type:n,target:e,state:r(e),kind:t,last:void 0})}),(function(){var e=i(this),t=e.kind,a=e.last;while(a&&a.removed)a=a.previous;return e.target&&(e.last=a=a?a.next:e.state.first)?"keys"==t?{value:a.key,done:!1}:"values"==t?{value:a.value,done:!1}:{value:[a.key,a.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),a?"entries":"values",!a,!0),u(t)}}},"6d61":function(e,t,a){"use strict";var n=a("23e7"),r=a("da84"),i=a("94ca"),o=a("6eeb"),s=a("f183"),l=a("2266"),c=a("19aa"),u=a("861d"),f=a("d039"),d=a("1c7e"),p=a("d44e"),g=a("7156");e.exports=function(e,t,a){var h=-1!==e.indexOf("Map"),b=-1!==e.indexOf("Weak"),m=h?"set":"add",v=r[e],y=v&&v.prototype,x=v,w={},T=function(e){var t=y[e];o(y,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(b&&!u(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return b&&!u(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(b&&!u(e))&&t.call(this,0===e?0:e)}:function(e,a){return t.call(this,0===e?0:e,a),this})};if(i(e,"function"!=typeof v||!(b||y.forEach&&!f((function(){(new v).entries().next()})))))x=a.getConstructor(t,e,h,m),s.REQUIRED=!0;else if(i(e,!0)){var R=new x,E=R[m](b?{}:-0,1)!=R,I=f((function(){R.has(1)})),N=d((function(e){new v(e)})),k=!b&&f((function(){var e=new v,t=5;while(t--)e[m](t,t);return!e.has(-0)}));N||(x=t((function(t,a){c(t,x,e);var n=g(new v,t,x);return void 0!=a&&l(a,n[m],n,h),n})),x.prototype=y,y.constructor=x),(I||k)&&(T("delete"),T("has"),h&&T("get")),(k||E)&&T(m),b&&y.clear&&delete y.clear}return w[e]=x,n({global:!0,forced:x!=v},w),p(x,e),b||a.setStrong(x,e,h),x}},7156:function(e,t,a){var n=a("861d"),r=a("d2bb");e.exports=function(e,t,a){var i,o;return r&&"function"==typeof(i=t.constructor)&&i!==a&&n(o=i.prototype)&&o!==a.prototype&&r(e,o),e}},7252:function(e,t,a){"use strict";e.exports=function(e){if("number"!==typeof e)throw new TypeError("Expected a number");var t=e>0?Math.floor:Math.ceil;return{days:t(e/864e5),hours:t(e/36e5)%24,minutes:t(e/6e4)%60,seconds:t(e/1e3)%60,milliseconds:t(e)%1e3}}},"7d78":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{style:{padding:"1px 1px",height:"100%"}},[a("Row",[e.alertInfo.show?a("Alert",{attrs:{type:"warning","show-icon":"",closable:""},scopedSlots:e._u([{key:"desc",fn:function(){return[e._v(e._s(e.alertInfo.message))]},proxy:!0}],null,!1,3041357252)},[e._v(" "+e._s(e.alertInfo.title)+" ")]):e._e(),e.alertInfo.successShow?a("Alert",{attrs:{type:"success","show-icon":"",closable:""},scopedSlots:e._u([{key:"desc",fn:function(){return[e._v(e._s(e.alertInfo.message))]},proxy:!0}],null,!1,3041357252)},[e._v(" "+e._s(e.alertInfo.title)+" ")]):e._e(),e.replicationType===e.meta.replicationType.DB_TO_DB?a("div",[a("Col",{attrs:{span:"12"}},[a("Row",{staticStyle:{"margin-right":"20px"}},[a("Divider",[e._v("1. 选择同步方向")]),a("Col",{attrs:{span:"11"}},[a("Card",{attrs:{bordered:!0},scopedSlots:e._u([{key:"title",fn:function(){return[a("Icon",{attrs:{type:"ios-pin"}}),e._v(" 源 region ")]},proxy:!0}],null,!1,2156775476)},[a("Select",{attrs:{filterable:"",clearable:"",placeholder:"地域"},on:{"on-change":e.afterSwitchRegion},model:{value:e.formItem.srcRegionName,callback:function(t){e.$set(e.formItem,"srcRegionName",t)},expression:"formItem.srcRegionName"}},e._l(e.meta.regionOptions,(function(t){return a("Option",{key:t,attrs:{value:t,label:t}},[e._v(" "+e._s(t)+" ")])})),1)],1)],1),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}},[a("Button",{attrs:{size:"small",shape:"circle",type:"default",loading:e.dataLoading},on:{click:e.getRegionOptions}},[e._v(" -> ")])],1),a("Col",{attrs:{span:"11"}},[a("Card",{attrs:{bordered:!0},scopedSlots:e._u([{key:"title",fn:function(){return[a("Icon",{attrs:{type:"ios-pin"}}),e._v(" 目标 region ")]},proxy:!0}],null,!1,4278622733)},[a("Select",{attrs:{filterable:"",clearable:"",placeholder:"地域"},on:{"on-change":e.afterSwitchRegion},model:{value:e.formItem.dstRegionName,callback:function(t){e.$set(e.formItem,"dstRegionName",t)},expression:"formItem.dstRegionName"}},e._l(e.meta.regionOptions,(function(t){return a("Option",{key:t,attrs:{value:t,label:t}},[e._v(" "+e._s(t)+" ")])})),1)],1)],1)],1)],1),a("Col",{attrs:{span:"12"}},[a("Row",[a("Divider",[e._v("2. 预览：同步集群")]),a("Button",{staticStyle:{"margin-bottom":"5px"},attrs:{type:"primary",loading:e.table.dbMhaTableLoading},on:{click:e.getDalInfo}},[e._v(" 检查同步集群 ")]),a("Table",{attrs:{size:"small",loading:e.table.dbMhaTableLoading,stripe:"",columns:e.table.dbMhaTableColumn,data:e.preCheckMhaReplicationPage,border:""}}),a("div",[a("Page",{attrs:{transfer:!0,total:e.previewDataList.length,current:e.table.dbMhaTablePage.current,"page-size-opts":e.table.dbMhaTablePage.pageSizeOpts,"page-size":e.table.dbMhaTablePage.size,"show-total":"","show-sizer":"","show-elevator":""},on:{"update:current":function(t){return e.$set(e.table.dbMhaTablePage,"current",t)},"on-page-size-change":function(t){e.table.dbMhaTablePage.size=t}}})],1)],1)],1)],1):e._e(),e.replicationType===e.meta.replicationType.DB_TO_MQ?a("div",[a("Col",{attrs:{span:"12"}},[a("Row",{staticStyle:{"margin-right":"20px"}},[a("Divider",[e._v("1. 选择消息投递Region")]),a("Col",{attrs:{span:"24"}},[a("Card",{attrs:{bordered:!0},scopedSlots:e._u([{key:"title",fn:function(){return[a("Icon",{attrs:{type:"ios-pin"}}),e._v(" 源 region "),a("Button",{staticStyle:{"margin-left":"50px"},attrs:{size:"small",shape:"circle",type:"default",loading:e.dataLoading},on:{click:e.getRegionOptions}},[e._v("刷新 ")])]},proxy:!0}],null,!1,1193028979)},[a("Select",{attrs:{filterable:"",clearable:"",placeholder:"地域"},on:{"on-change":e.afterSwitchRegion},model:{value:e.formItem.srcRegionName,callback:function(t){e.$set(e.formItem,"srcRegionName",t)},expression:"formItem.srcRegionName"}},e._l(e.meta.regionOptions,(function(t){return a("Option",{key:t,attrs:{value:t,label:t}},[e._v(" "+e._s(t)+" ")])})),1)],1)],1)],1)],1),a("Col",{attrs:{span:"12"}},[a("Row",[a("Divider",[e._v("2. 预览：消息投递集群")]),a("Button",{staticStyle:{"margin-bottom":"5px"},attrs:{type:"primary",loading:e.table.dbMhaTableLoading},on:{click:e.getDalInfo}},[e._v(" 检查同步集群 ")]),a("Table",{attrs:{size:"small",loading:e.table.dbMhaTableLoading,stripe:"",columns:e.table.dbMhaMqTableColumn,data:e.preCheckMhaReplicationPage,border:""}}),a("div",[a("Page",{attrs:{transfer:!0,total:e.previewDataList.length,current:e.table.dbMhaTablePage.current,"page-size-opts":e.table.dbMhaTablePage.pageSizeOpts,"page-size":e.table.dbMhaTablePage.size,"show-total":"","show-sizer":"","show-elevator":""},on:{"update:current":function(t){return e.$set(e.table.dbMhaTablePage,"current",t)},"on-page-size-change":function(t){e.table.dbMhaTablePage.size=t}}})],1)],1)],1)],1):e._e()],1),a("Divider"),a("Button",{attrs:{loading:e.dataLoading,type:"primary"},on:{click:e.createReplication}},[e._v("提交")])],1)},r=[],i=(a("c975"),a("fb6a"),a("b0c0"),a("a9e3"),a("d3b7"),a("2909")),o=(a("96cf"),a("1da1")),s={name:"mhaPreview",components:{},props:{replicationType:Number,dbName:String,existReplicationRegionOptions:Array},emits:["updated"],data:function(){return{meta:{regionOptions:[],existReplicationRegionOptions:[],replicationType:{DB_TO_DB:0,DB_TO_MQ:1}},alertInfo:{show:!1,successShow:!1,title:null,message:null},formItem:{srcRegionName:null,dstRegionName:null},dataLoading:!1,constants:{DAL_CLUSTER_MODE:1},previewDataList:[],table:{dbMhaTableLoading:!1,dbMhaTableColumn:[{title:"DB名",key:"dbName"},{title:"源集群",key:"srcMhaName",render:function(e,t){var a=t.row,n=a.srcMha;if(null!=n)return e("div",[e("span",n.name),e("span",{style:{float:"right",color:"#ababab"}},n.regionName+"("+n.dcName+")")])}},{title:"目标集群",key:"dstMhaName",render:function(e,t){var a=t.row,n=a.dstMha;if(null!=n)return e("div",[e("span",n.name),e("span",{style:{float:"right",color:"#ababab"}},n.regionName+"("+n.dcName+")")])}}],dbMhaMqTableColumn:[{title:"DB名",key:"dbName"},{title:"源集群",key:"srcMhaName",render:function(e,t){var a=t.row,n=a.srcMha;if(null!=n)return e("div",[e("span",n.name),e("span",{style:{float:"right",color:"#ababab"}},n.regionName+"("+n.dcName+")")])}}],dbMhaTablePage:{total:0,current:1,size:5,pageSizeOpts:[5,10,20,100]}}}},methods:{getRegionOptions:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.dataLoading=!0,e.meta.regionOptions=[],t.next=4,e.axios.get("/api/drc/v2/autoconfig/regionOptions",{params:{mode:e.constants.DAL_CLUSTER_MODE,dbName:e.dbName}}).then((function(t){var a=t.data.data,n=a&&0===t.data.status;n?(e.meta.regionOptions=a,-1===a.indexOf(e.formItem.srcRegionName)&&(e.formItem.srcRegionName=null),-1===a.indexOf(e.formItem.dstRegionName)&&(e.formItem.dstRegionName=null)):(e.formItem.srcRegionName=null,e.formItem.dstRegionName=null,e.$Message.warning("查询可选地域失败"))})).catch((function(t){e.$Message.error("查询可选地域失败: "+t)})).finally((function(){e.dataLoading=!1}));case 4:case"end":return t.stop()}}),t)})))()},getDalInfo:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.previewDataList=[],e.table.dbMhaTablePage.current=1,e.table.dbMhaTableLoading=!0,t.next=5,e.axios.get("/api/drc/v2/autoconfig/preCheck",{params:{mode:e.constants.DAL_CLUSTER_MODE,dbName:e.dbName,srcRegionName:e.formItem.srcRegionName,replicationType:e.replicationType}}).then((function(t){var a=t.data.data,n=a&&0===t.data.status;n?(e.previewDataList=a,console.log("total: "+e.previewDataList.length),e.$Message.success("同步集群检测成功, 共找到 "+a.length+" 个DB")):e.$Message.warning("同步集群检测失败："+t.data.message)})).catch((function(t){e.$Message.error("查询dalcluster异常: "+t)})).finally((function(){e.table.dbMhaTableLoading=!1}));case 5:case"end":return t.stop()}}),t)})))()},createReplication:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={srcRegionName:e.formItem.srcRegionName,dstRegionName:e.formItem.dstRegionName,dbName:e.dbName,replicationType:e.replicationType},e.alertInfo.show=!1,e.alertInfo.successShow=!1,e.dataLoading=!0,n=e.replicationType===e.meta.replicationType.DB_TO_MQ?"mhaDbReplicationForMq":"mhaDbReplication",t.next=7,e.axios.post("/api/drc/v2/autoconfig/"+n+"/create",a).then((function(t){var a=t.data,n=0===a.status;n?(e.alertInfo.successShow=!0,e.alertInfo.message=null,e.alertInfo.title="提交成功",e.$Message.warning("提交成功"),e.$emit("updated")):(e.alertInfo.show=!0,e.alertInfo.title="提交失败",e.alertInfo.message=a.message,e.$Message.warning("提交失败: "+a.message))})).catch((function(t){e.$Message.error("提交异常: "+t)})).finally((function(){e.dataLoading=!1}));case 7:case"end":return t.stop()}}),t)})))()},afterSwitchRegion:function(){return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}},computed:{preCheckMhaReplicationPage:function(){var e=this.previewDataList,t=this.table.dbMhaTablePage.current*this.table.dbMhaTablePage.size-this.table.dbMhaTablePage.size,a=t+this.table.dbMhaTablePage.size;return Object(i["a"])(e).slice(t,a)}},created:function(){this.getRegionOptions()}},l=s,c=a("2877"),u=Object(c["a"])(l,n,r,!1,null,"60af7656",null);t["a"]=u.exports},"81d5":function(e,t,a){"use strict";var n=a("7b0b"),r=a("23cb"),i=a("50c4");e.exports=function(e){var t=n(this),a=i(t.length),o=arguments.length,s=r(o>1?arguments[1]:void 0,a),l=o>2?arguments[2]:void 0,c=void 0===l?a:r(l,a);while(c>s)t[s++]=e;return t}},"86aa":function(e){e.exports=JSON.parse('{"addendum":"addenda","aircraft":"aircraft","alga":"algae","alumna":"alumnae","alumnus":"alumni","amoeba":"amoebae","analysis":"analyses","antenna":"antennae","antithesis":"antitheses","apex":"apices","appendix":"appendices","automaton":"automata","axis":"axes","bacillus":"bacilli","bacterium":"bacteria","barracks":"barracks","basis":"bases","beau":"beaux","bison":"bison","buffalo":"buffalo","bureau":"bureaus","cactus":"cacti","calf":"calves","carp":"carp","census":"censuses","chassis":"chassis","cherub":"cherubim","child":"children","château":"châteaus","cod":"cod","codex":"codices","concerto":"concerti","corpus":"corpora","crisis":"crises","criterion":"criteria","curriculum":"curricula","datum":"data","deer":"deer","diagnosis":"diagnoses","die":"dice","dwarf":"dwarfs","echo":"echoes","elf":"elves","elk":"elk","ellipsis":"ellipses","embargo":"embargoes","emphasis":"emphases","erratum":"errata","faux pas":"faux pas","fez":"fezes","firmware":"firmware","fish":"fish","focus":"foci","foot":"feet","formula":"formulae","fungus":"fungi","gallows":"gallows","genus":"genera","goose":"geese","graffito":"graffiti","grouse":"grouse","half":"halves","hero":"heroes","hoof":"hooves","hovercraft":"hovercraft","hypothesis":"hypotheses","index":"indices","kakapo":"kakapo","knife":"knives","larva":"larvae","leaf":"leaves","libretto":"libretti","life":"lives","loaf":"loaves","locus":"loci","louse":"lice","man":"men","matrix":"matrices","means":"means","medium":"media","memorandum":"memoranda","millennium":"millennia","minutia":"minutiae","moose":"moose","mouse":"mice","nebula":"nebulae","nemesis":"nemeses","neurosis":"neuroses","news":"news","nucleus":"nuclei","oasis":"oases","offspring":"offspring","opus":"opera","ovum":"ova","ox":"oxen","paralysis":"paralyses","parenthesis":"parentheses","person":"people","phenomenon":"phenomena","phylum":"phyla","pike":"pike","polyhedron":"polyhedra","potato":"potatoes","prognosis":"prognoses","quiz":"quizzes","radius":"radii","referendum":"referenda","salmon":"salmon","scarf":"scarves","self":"selves","series":"series","sheep":"sheep","shelf":"shelves","shrimp":"shrimp","spacecraft":"spacecraft","species":"species","spectrum":"spectra","squid":"squid","stimulus":"stimuli","stratum":"strata","swine":"swine","syllabus":"syllabi","symposium":"symposia","synopsis":"synopses","synthesis":"syntheses","tableau":"tableaus","that":"those","thesis":"theses","thief":"thieves","this":"these","tomato":"tomatoes","tooth":"teeth","trout":"trout","tuna":"tuna","vertebra":"vertebrae","vertex":"vertices","veto":"vetoes","vita":"vitae","vortex":"vortices","watercraft":"watercraft","wharf":"wharves","wife":"wives","wolf":"wolves","woman":"women"}')},"8aa5":function(e,t,a){"use strict";var n=a("6547").charAt;e.exports=function(e,t,a){return t+(a?n(e,t).length:1)}},9263:function(e,t,a){"use strict";var n=a("ad6d"),r=a("9f7f"),i=RegExp.prototype.exec,o=String.prototype.replace,s=i,l=function(){var e=/a/,t=/b*/g;return i.call(e,"a"),i.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),c=r.UNSUPPORTED_Y||r.BROKEN_CARET,u=void 0!==/()??/.exec("")[1],f=l||u||c;f&&(s=function(e){var t,a,r,s,f=this,d=c&&f.sticky,p=n.call(f),g=f.source,h=0,b=e;return d&&(p=p.replace("y",""),-1===p.indexOf("g")&&(p+="g"),b=String(e).slice(f.lastIndex),f.lastIndex>0&&(!f.multiline||f.multiline&&"\n"!==e[f.lastIndex-1])&&(g="(?: "+g+")",b=" "+b,h++),a=new RegExp("^(?:"+g+")",p)),u&&(a=new RegExp("^"+g+"$(?!\\s)",p)),l&&(t=f.lastIndex),r=i.call(d?a:f,b),d?r?(r.input=r.input.slice(h),r[0]=r[0].slice(h),r.index=f.lastIndex,f.lastIndex+=r[0].length):f.lastIndex=0:l&&r&&(f.lastIndex=f.global?r.index+r[0].length:t),u&&r&&r.length>1&&o.call(r[0],a,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(r[s]=void 0)})),r}),e.exports=s},"9f7f":function(e,t,a){"use strict";var n=a("d039");function r(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=n((function(){var e=r("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=n((function(){var e=r("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},a3b8:function(e,t,a){"use strict";const n=a("7252"),r=a("afa5");e.exports=(e,t)=>{if(!Number.isFinite(e))throw new TypeError("Expected a finite number");if(t=t||{},e<1e3){const a="number"===typeof t.msDecimalDigits?t.msDecimalDigits:0;return(a?e.toFixed(a):Math.ceil(e))+(t.verbose?" "+r("millisecond",Math.ceil(e)):"ms")}const a=[],i=(e,n,i,o)=>{if(0===e)return;const s=t.verbose?" "+r(n,e):i;a.push((o||e)+s)},o=n(e);if(i(Math.trunc(o.days/365),"year","y"),i(o.days%365,"day","d"),i(o.hours,"hour","h"),i(o.minutes,"minute","m"),t.compact)return i(o.seconds,"second","s"),"~"+a[0];const s=e/1e3%60,l="number"===typeof t.secDecimalDigits?t.secDecimalDigits:1,c=s.toFixed(l).replace(/\.0$/,"");return i(s,"second","s",c),a.join(" ")}},a9e3:function(e,t,a){"use strict";var n=a("83ab"),r=a("da84"),i=a("94ca"),o=a("6eeb"),s=a("5135"),l=a("c6b6"),c=a("7156"),u=a("c04e"),f=a("d039"),d=a("7c73"),p=a("241c").f,g=a("06cf").f,h=a("9bf2").f,b=a("58a8").trim,m="Number",v=r[m],y=v.prototype,x=l(d(y))==m,w=function(e){var t,a,n,r,i,o,s,l,c=u(e,!1);if("string"==typeof c&&c.length>2)if(c=b(c),t=c.charCodeAt(0),43===t||45===t){if(a=c.charCodeAt(2),88===a||120===a)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:n=2,r=49;break;case 79:case 111:n=8,r=55;break;default:return+c}for(i=c.slice(2),o=i.length,s=0;s<o;s++)if(l=i.charCodeAt(s),l<48||l>r)return NaN;return parseInt(i,n)}return+c};if(i(m,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var T,R=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof R&&(x?f((function(){y.valueOf.call(a)})):l(a)!=m)?c(new v(w(t)),a,R):w(t)},E=n?p(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),I=0;E.length>I;I++)s(v,T=E[I])&&!s(R,T)&&h(R,T,g(v,T));R.prototype=y,y.constructor=R,o(r,m,R)}},ac1f:function(e,t,a){"use strict";var n=a("23e7"),r=a("9263");n({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},afa5:function(e,t,a){"use strict";var n=a("86aa");e.exports=function(e,t,a){return"number"===typeof t&&(a=t),e in n?t=n[e]:"string"!==typeof t&&(t=(e.replace(/(?:s|x|z|ch|sh)$/i,"$&e").replace(/([^aeiou])y$/i,"$1ie")+"s").replace(/i?e?s$/i,(function(t){var a=e.slice(-1)===e.slice(-1).toLowerCase();return a?t.toLowerCase():t.toUpperCase()}))),1===a?e:t}},bb2f:function(e,t,a){var n=a("d039");e.exports=!n((function(){return Object.isExtensible(Object.preventExtensions({}))}))},c8d2:function(e,t,a){var n=a("d039"),r=a("5899"),i="​᠎";e.exports=function(e){return n((function(){return!!r[e]()||i[e]()!=i||r[e].name!==e}))}},cb29:function(e,t,a){var n=a("23e7"),r=a("81d5"),i=a("44d2");n({target:"Array",proto:!0},{fill:r}),i("fill")},d784:function(e,t,a){"use strict";a("ac1f");var n=a("6eeb"),r=a("d039"),i=a("b622"),o=a("9263"),s=a("9112"),l=i("species"),c=!r((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),u=function(){return"$0"==="a".replace(/./,"$0")}(),f=i("replace"),d=function(){return!!/./[f]&&""===/./[f]("a","$0")}(),p=!r((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var a="ab".split(e);return 2!==a.length||"a"!==a[0]||"b"!==a[1]}));e.exports=function(e,t,a,f){var g=i(e),h=!r((function(){var t={};return t[g]=function(){return 7},7!=""[e](t)})),b=h&&!r((function(){var t=!1,a=/a/;return"split"===e&&(a={},a.constructor={},a.constructor[l]=function(){return a},a.flags="",a[g]=/./[g]),a.exec=function(){return t=!0,null},a[g](""),!t}));if(!h||!b||"replace"===e&&(!c||!u||d)||"split"===e&&!p){var m=/./[g],v=a(g,""[e],(function(e,t,a,n,r){return t.exec===o?h&&!r?{done:!0,value:m.call(t,a,n)}:{done:!0,value:e.call(a,t,n)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:d}),y=v[0],x=v[1];n(String.prototype,e,y),n(RegExp.prototype,g,2==t?function(e,t){return x.call(e,this,t)}:function(e){return x.call(e,this)})}f&&s(RegExp.prototype[g],"sham",!0)}},efa3:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{style:{padding:"1px 1px",height:"100%"}},[a("Divider",{staticStyle:{"margin-top":"50px"}},[e._v("预览：同步表")]),a("Button",{staticStyle:{"margin-bottom":"5px"},attrs:{type:"primary",loading:e.dbTableLoading},on:{click:e.getTableInfo}},[e._v(" 检查同步表 ")]),a("Table",{attrs:{size:"small",loading:e.dbTableLoading,stripe:"",columns:e.table.dbTableColumn,data:e.preCheckTablePage,border:""}}),a("div",[a("Page",{attrs:{transfer:!0,total:e.checkTableDataList.length,current:e.table.dbTablePage.current,"page-size-opts":e.table.dbTablePage.pageSizeOpts,"page-size":e.table.dbTablePage.size,"show-total":"","show-sizer":"","show-elevator":""},on:{"update:current":function(t){return e.$set(e.table.dbTablePage,"current",t)},"on-change":function(t){e.table.dbTablePage.current=t},"on-page-size-change":function(t){e.table.dbTablePage.size=t}}})],1)],1)},r=[],i=(a("a4d3"),a("e01a"),a("d28b"),a("fb6a"),a("a9e3"),a("d3b7"),a("3ca3"),a("498a"),a("ddb0"),a("2909")),o=a("53ca"),s=a("3835"),l=(a("96cf"),a("1da1")),c={name:"dbTablesPreview",props:{mode:Number,dbName:String,srcRegionName:String,dstRegionName:String,tableNames:String,replicationType:Number},emits:["updated"],data:function(){return{checkTableDataList:[],dbTableLoading:!1,table:{dbTableColumn:[{title:"序",width:50,key:"indexForShow"},{title:"库名",key:"schema",resizable:!0},{title:"表名",key:"table",resizable:!0},{title:"结果",align:"center",render:function(e,t){var a=t.row,n="ok"!==a.res?"volcano":"green",r=a.res;return e("Tag",{props:{color:n}},r)}}],dbTablePage:{total:0,current:1,size:10,pageSizeOpts:[5,10,20,100]}}}},methods:{getTableInfo:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.checkTableDataList=[],e.table.dbTablePage.current=1,1!==e.mode){t.next=8;break}if(e.dalClusterName){t.next=6;break}return e.$Message.warning("请先填写 dalcluster"),t.abrupt("return");case 6:t.next=11;break;case 8:if(e.dbName){t.next=11;break}return e.$Message.warning("请先填写数据库"),t.abrupt("return");case 11:if(e.srcRegionName&&(0!==e.replicationType||e.dstRegionName)){t.next=14;break}return e.$Message.warning("请先填写同步方向"),t.abrupt("return");case 14:if(e.tableNames){t.next=17;break}return e.$Message.warning("请先填写表名"),t.abrupt("return");case 17:return e.dbTableLoading=!0,t.next=20,e.axios.get("/api/drc/v2/autoconfig/preCheckTable",{params:e.flattenObj({mode:e.mode,dbName:e.dbName,srcRegionName:e.srcRegionName,dstRegionName:e.dstRegionName,replicationType:e.replicationType,tblsFilterDetail:{tableNames:e.tableNames}})}).then((function(t){var a=t.data.data;if(a){var n=!0,r=!1,i=void 0;try{for(var o,l=a.entries()[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var c=Object(s["a"])(o.value,2),u=c[0],f=c[1];f.indexForShow=u}}catch(d){r=!0,i=d}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}e.checkTableDataList=a,e.$Message.success("同步表检测成功, 共找到 "+a.length+" 个表")}else e.$Message.warning("同步表检测失败："+t.data.message)})).catch((function(t){e.$Message.error("查询dalcluster异常: "+t)})).finally((function(){e.dbTableLoading=!1}));case 20:case"end":return t.stop()}}),t)})))()},flattenObj:function(e){var t={};for(var a in e)if("object"!==Object(o["a"])(e[a])||Array.isArray(e[a]))t[a]=e[a];else{var n=this.flattenObj(e[a]);for(var r in n)t[a+"."+r]=n[r]}return t}},computed:{preCheckTablePage:function(){var e=this.checkTableDataList,t=(this.table.dbTablePage.current-1)*this.table.dbTablePage.size,a=t+this.table.dbTablePage.size;return Object(i["a"])(e).slice(t,a)}},created:function(){this.tableNames&&this.tableNames.trim().length>0&&this.getTableInfo()}},u=c,f=a("2877"),d=Object(f["a"])(u,n,r,!1,null,"647b2baf",null);t["a"]=d.exports},f183:function(e,t,a){var n=a("d012"),r=a("861d"),i=a("5135"),o=a("9bf2").f,s=a("90e3"),l=a("bb2f"),c=s("meta"),u=0,f=Object.isExtensible||function(){return!0},d=function(e){o(e,c,{value:{objectID:"O"+ ++u,weakData:{}}})},p=function(e,t){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,c)){if(!f(e))return"F";if(!t)return"E";d(e)}return e[c].objectID},g=function(e,t){if(!i(e,c)){if(!f(e))return!0;if(!t)return!1;d(e)}return e[c].weakData},h=function(e){return l&&b.REQUIRED&&f(e)&&!i(e,c)&&d(e),e},b=e.exports={REQUIRED:!1,fastKey:p,getWeakData:g,onFreeze:h};n[c]=!0}}]);
//# sourceMappingURL=chunk-e50dd0bc.972c3058.js.map