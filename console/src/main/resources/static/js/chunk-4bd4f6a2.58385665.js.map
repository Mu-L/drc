{"version":3,"sources":["webpack:///./src/views/v2/meta/buildStep/drcBuildV2.vue","webpack:///src/views/v2/meta/buildStep/drcBuildV2.vue","webpack:///./src/views/v2/meta/buildStep/drcBuildV2.vue?7575","webpack:///./src/views/v2/meta/buildStep/drcBuildV2.vue?393b","webpack:///./src/views/v2/meta/buildStep/drcBuildV2.vue?d422"],"names":["render","_vm","this","_c","_self","hasResp","staticStyle","attrs","status","_v","_s","title","domProps","message","slot","_e","ref","srcBuildParam","ruleDrc","on","changeSrcMha","model","value","mhaName","callback","$$v","$set","expression","replicatorIps","_l","replicatorList","src","item","key","ip","az","autoConfigSrcReplicator","replicatorInitGtid","querySrcMhaMachineGtid","hasTest1","testSuccess1","querySrcMhaGtidCheckRes","getSrcDbReplications","getSrcDbApplierReplications","dstBuildParam","changeDstMha","dst","autoConfigDstReplicator","queryDstMhaMachineGtid","hasTest2","testSuccess2","queryDstMhaGtidCheckRes","getDstDbReplications","getDstDbApplierReplications","$event","preCheckConfigure","submitConfig","reviewModal","minRows","maxRows","resultModal","result","gtidCheck","modal","resVo","legal","mha","configGtid","purgedGtid","staticRenderFns","name","props","srcMhaName","String","dstMhaName","srcDc","dstDc","env","data","srcBuildData","dbApplierDtos","dstBuildData","oldClusterName","required","trigger","newClusterName","replicator","applier","computed","dataWithPage","nameFilterCheck","tableData","start","current","size","end","_toConsumableArray","slice","methods","flattenObj","ob","i","_typeof","Array","isArray","temp","j","_this","axios","get","then","response","console","log","forEach","push","_this2","getSrcMhaResources","_this3","getDstMhaResources","_this4","getSrcMhaReplicatorsInUse","_this5","getDstMhaReplicatorsInUse","_this6","getMhaDbAppliersInUse","_this7","_this8","that","_this9","alert","_this10","_this11","getSrcDc","_this12","getDstDc","_this13","$emit","$Loading","finish","error","changeModal","_this14","$refs","validate","valid","drc","$Message","reviewConfigure","_this15","post","refresh","$router","path","query","order","handleChangeSize","val","hasAppliers","_step","_iterator","_createForOfIteratorHelper","s","n","done","x","ips","length","err","e","f","created","component"],"mappings":"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","file":"js/chunk-4bd4f6a2.58385665.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[(_vm.hasResp)?_c('Alert',{staticStyle:{\"width\":\"65%\",\"margin-left\":\"250px\"},attrs:{\"type\":_vm.status,\"show-icon\":\"\"}},[_vm._v(\" \"+_vm._s(_vm.title)+\" \"),_c('span',{attrs:{\"slot\":\"desc\"},domProps:{\"innerHTML\":_vm._s(_vm.message)},slot:\"desc\"})]):_vm._e(),_c('Row',[_c('i-col',{attrs:{\"span\":\"12\"}},[_c('Form',{ref:\"drc1\",staticStyle:{\"float\":\"left\",\"margin-top\":\"50px\"},attrs:{\"model\":_vm.srcBuildParam,\"rules\":_vm.ruleDrc,\"label-width\":250}},[_c('FormItem',{staticStyle:{\"width\":\"600px\"},attrs:{\"label\":\"源集群名\",\"prop\":\"srcMhaName\"}},[_c('Input',{attrs:{\"placeholder\":\"请输入源集群名\"},on:{\"input\":_vm.changeSrcMha},model:{value:(_vm.srcBuildParam.mhaName),callback:function ($$v) {_vm.$set(_vm.srcBuildParam, \"mhaName\", $$v)},expression:\"srcBuildParam.mhaName\"}})],1),_c('FormItem',{attrs:{\"label\":\"选择Replicator\",\"prop\":\"replicator\"}},[_c('Select',{staticStyle:{\"width\":\"250px\"},attrs:{\"multiple\":\"\",\"placeholder\":\"选择源集群Replicator\"},model:{value:(_vm.srcBuildParam.replicatorIps),callback:function ($$v) {_vm.$set(_vm.srcBuildParam, \"replicatorIps\", $$v)},expression:\"srcBuildParam.replicatorIps\"}},_vm._l((_vm.replicatorList.src),function(item){return _c('Option',{key:item.ip,attrs:{\"value\":item.ip}},[_vm._v(_vm._s(item.ip)+\" —— \"+_vm._s(item.az)+\" \")])}),1),_vm._v(\"   \"),_c('Button',{attrs:{\"type\":\"success\"},on:{\"click\":_vm.autoConfigSrcReplicator}},[_vm._v(\"自动录入\")])],1),_c('FormItem',{staticStyle:{\"width\":\"600px\"},attrs:{\"label\":\"初始拉取位点R\"}},[_c('Input',{attrs:{\"placeholder\":\"变更replicator机器时,请输入binlog拉取位点\"},model:{value:(_vm.srcBuildParam.replicatorInitGtid),callback:function ($$v) {_vm.$set(_vm.srcBuildParam, \"replicatorInitGtid\", $$v)},expression:\"srcBuildParam.replicatorInitGtid\"}}),_c('Row',[_c('Col',{attrs:{\"span\":\"12\"}},[_c('Button',{on:{\"click\":_vm.querySrcMhaMachineGtid}},[_vm._v(\"查询mha位点\")]),(_vm.hasTest1)?_c('span',[_c('Icon',{attrs:{\"type\":_vm.testSuccess1 ? 'ios-checkmark-circle' : 'ios-close-circle',\"color\":_vm.testSuccess1 ? 'green' : 'red'}}),_vm._v(\" \"+_vm._s(_vm.testSuccess1 ? '查询实时位点成功' : '连接查询失败')+\" \")],1):_vm._e()],1),_c('Col',{attrs:{\"span\":\"12\"}},[_c('Button',{attrs:{\"type\":\"success\"},on:{\"click\":_vm.querySrcMhaGtidCheckRes}},[_vm._v(\"位点校验\")])],1)],1)],1),_c('FormItem',{staticStyle:{\"width\":\"600px\"},attrs:{\"label\":\"同步配置\"}},[_c('Button',{attrs:{\"type\":\"primary\",\"ghost\":\"\"},on:{\"click\":_vm.getSrcDbReplications}},[_vm._v(\"同步表管理\")])],1),_c('FormItem',{staticStyle:{\"width\":\"600px\"},attrs:{\"label\":\"DB Applier 配置\"}},[_c('Button',{attrs:{\"type\":\"primary\",\"ghost\":\"\"},on:{\"click\":_vm.getSrcDbApplierReplications}},[_vm._v(\"Db Applier 管理\")])],1)],1)],1),_c('i-col',{attrs:{\"span\":\"12\"}},[_c('Form',{ref:\"drc1\",staticStyle:{\"float\":\"left\",\"margin-top\":\"50px\"},attrs:{\"model\":_vm.dstBuildParam,\"rules\":_vm.ruleDrc,\"label-width\":250}},[_c('FormItem',{staticStyle:{\"width\":\"600px\"},attrs:{\"label\":\"目标集群名\",\"prop\":\"dstMhaName\"}},[_c('Input',{attrs:{\"placeholder\":\"请输入目标集群名\"},on:{\"input\":_vm.changeDstMha},model:{value:(_vm.dstBuildParam.mhaName),callback:function ($$v) {_vm.$set(_vm.dstBuildParam, \"mhaName\", $$v)},expression:\"dstBuildParam.mhaName\"}})],1),_c('FormItem',{attrs:{\"label\":\"选择Replicator\",\"prop\":\"replicator\"}},[_c('Select',{staticStyle:{\"width\":\"250px\"},attrs:{\"multiple\":\"\",\"placeholder\":\"选择目标集群Replicator\"},model:{value:(_vm.dstBuildParam.replicatorIps),callback:function ($$v) {_vm.$set(_vm.dstBuildParam, \"replicatorIps\", $$v)},expression:\"dstBuildParam.replicatorIps\"}},_vm._l((_vm.replicatorList.dst),function(item){return _c('Option',{key:item.ip,attrs:{\"value\":item.ip}},[_vm._v(_vm._s(item.ip)+\" —— \"+_vm._s(item.az)+\" \")])}),1),_vm._v(\"   \"),_c('Button',{attrs:{\"type\":\"success\"},on:{\"click\":_vm.autoConfigDstReplicator}},[_vm._v(\"自动录入\")])],1),_c('FormItem',{staticStyle:{\"width\":\"600px\"},attrs:{\"label\":\"初始拉取位点R\"}},[_c('Input',{attrs:{\"placeholder\":\"变更replicator机器时,请输入binlog拉取位点\"},model:{value:(_vm.dstBuildParam.replicatorInitGtid),callback:function ($$v) {_vm.$set(_vm.dstBuildParam, \"replicatorInitGtid\", $$v)},expression:\"dstBuildParam.replicatorInitGtid\"}}),_c('Row',[_c('Col',{attrs:{\"span\":\"12\"}},[_c('Button',{on:{\"click\":_vm.queryDstMhaMachineGtid}},[_vm._v(\"查询mha位点\")]),(_vm.hasTest2)?_c('span',[_c('Icon',{attrs:{\"type\":_vm.testSuccess2 ? 'ios-checkmark-circle' : 'ios-close-circle',\"color\":_vm.testSuccess2 ? 'green' : 'red'}}),_vm._v(\" \"+_vm._s(_vm.testSuccess2 ? '查询实时位点成功' : '连接查询失败')+\" \")],1):_vm._e()],1),_c('Col',{attrs:{\"span\":\"12\"}},[_c('Button',{attrs:{\"type\":\"success\"},on:{\"click\":_vm.queryDstMhaGtidCheckRes}},[_vm._v(\"位点校验\")])],1)],1)],1),_c('FormItem',{staticStyle:{\"width\":\"600px\"},attrs:{\"label\":\"同步配置\"}},[_c('Button',{attrs:{\"type\":\"primary\",\"ghost\":\"\"},on:{\"click\":_vm.getDstDbReplications}},[_vm._v(\"同步表管理\")])],1),_c('FormItem',{staticStyle:{\"width\":\"600px\"},attrs:{\"label\":\"DB Applier 配置\"}},[_c('Button',{attrs:{\"type\":\"primary\",\"ghost\":\"\"},on:{\"click\":_vm.getDstDbApplierReplications}},[_vm._v(\"Db Applier 管理\")])],1)],1)],1)],1),_c('Form',{staticStyle:{\"margin-top\":\"50px\"},attrs:{\"label-width\":250}},[_c('FormItem',[_c('br'),_c('Button',{staticStyle:{\"width\":\"100px\"},attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.preCheckConfigure ()}}},[_vm._v(\"提交\")])],1),_c('Modal',{attrs:{\"title\":\"确认配置信息\",\"width\":\"900px\"},on:{\"on-ok\":_vm.submitConfig},model:{value:(_vm.reviewModal),callback:function ($$v) {_vm.reviewModal=$$v},expression:\"reviewModal\"}},[_c('Row',{attrs:{\"gutter\":5}},[_c('i-col',{attrs:{\"span\":\"12\"}},[_c('Form',{staticStyle:{\"width\":\"80%\"}},[_c('FormItem',{attrs:{\"label\":\"源集群名\"}},[_c('Input',{attrs:{\"type\":\"textarea\",\"autosize\":{minRows: 1,maxRows: 30},\"readonly\":\"\"},model:{value:(_vm.srcBuildParam.mhaName),callback:function ($$v) {_vm.$set(_vm.srcBuildParam, \"mhaName\", $$v)},expression:\"srcBuildParam.mhaName\"}})],1),_c('FormItem',{attrs:{\"label\":\"源集群端Replicator\"}},[_c('Input',{attrs:{\"type\":\"textarea\",\"autosize\":{minRows: 1,maxRows: 30},\"readonly\":\"\"},model:{value:(_vm.srcBuildParam.replicatorIps),callback:function ($$v) {_vm.$set(_vm.srcBuildParam, \"replicatorIps\", $$v)},expression:\"srcBuildParam.replicatorIps\"}})],1),_c('FormItem',{attrs:{\"label\":\"源集群端R位点\"}},[_c('Input',{attrs:{\"type\":\"textarea\",\"autosize\":{minRows: 1,maxRows: 30},\"readonly\":\"\"},model:{value:(_vm.srcBuildParam.replicatorInitGtid),callback:function ($$v) {_vm.$set(_vm.srcBuildParam, \"replicatorInitGtid\", $$v)},expression:\"srcBuildParam.replicatorInitGtid\"}})],1)],1)],1),_c('i-col',{attrs:{\"span\":\"12\"}},[_c('Form',{staticStyle:{\"width\":\"80%\"}},[_c('FormItem',{attrs:{\"label\":\"目标集群名\"}},[_c('Input',{attrs:{\"type\":\"textarea\",\"autosize\":{minRows: 1,maxRows: 30},\"readonly\":\"\"},model:{value:(_vm.dstBuildParam.mhaName),callback:function ($$v) {_vm.$set(_vm.dstBuildParam, \"mhaName\", $$v)},expression:\"dstBuildParam.mhaName\"}})],1),_c('FormItem',{attrs:{\"label\":\"目标集群端Replicator\"}},[_c('Input',{attrs:{\"type\":\"textarea\",\"autosize\":{minRows: 1,maxRows: 30},\"readonly\":\"\"},model:{value:(_vm.dstBuildParam.replicatorIps),callback:function ($$v) {_vm.$set(_vm.dstBuildParam, \"replicatorIps\", $$v)},expression:\"dstBuildParam.replicatorIps\"}})],1),_c('FormItem',{attrs:{\"label\":\"目标集群端R位点\"}},[_c('Input',{attrs:{\"type\":\"textarea\",\"autosize\":{minRows: 1,maxRows: 30},\"readonly\":\"\"},model:{value:(_vm.dstBuildParam.replicatorInitGtid),callback:function ($$v) {_vm.$set(_vm.dstBuildParam, \"replicatorInitGtid\", $$v)},expression:\"dstBuildParam.replicatorInitGtid\"}})],1)],1)],1)],1)],1),_c('Modal',{attrs:{\"title\":\"配置结果\",\"width\":\"1200px\"},model:{value:(_vm.resultModal),callback:function ($$v) {_vm.resultModal=$$v},expression:\"resultModal\"}},[_c('Form',{staticStyle:{\"width\":\"100%\"}},[_c('FormItem',{attrs:{\"label\":\"集群配置\"}},[_c('Input',{attrs:{\"type\":\"textarea\",\"autosize\":{minRows: 1,maxRows: 30},\"readonly\":\"\"},model:{value:(_vm.result),callback:function ($$v) {_vm.result=$$v},expression:\"result\"}})],1)],1)],1),_c('Modal',{attrs:{\"title\":\"gitd位点校验结果\",\"width\":\"900px\"},model:{value:(_vm.gtidCheck.modal),callback:function ($$v) {_vm.$set(_vm.gtidCheck, \"modal\", $$v)},expression:\"gtidCheck.modal\"}},[_c('Form',{staticStyle:{\"width\":\"80%\"}},[_c('FormItem',{attrs:{\"label\":\"校验结果\"}},[_c('Input',{attrs:{\"type\":\"textarea\",\"autosize\":{minRows: 1,maxRows: 30},\"readonly\":\"\"},model:{value:(_vm.gtidCheck.resVo.legal),callback:function ($$v) {_vm.$set(_vm.gtidCheck.resVo, \"legal\", $$v)},expression:\"gtidCheck.resVo.legal\"}})],1),_c('FormItem',{attrs:{\"label\":\"当前Mha\"}},[_c('Input',{attrs:{\"autosize\":{minRows: 1,maxRows: 30},\"readonly\":\"\"},model:{value:(_vm.gtidCheck.resVo.mha),callback:function ($$v) {_vm.$set(_vm.gtidCheck.resVo, \"mha\", $$v)},expression:\"gtidCheck.resVo.mha\"}})],1),_c('FormItem',{attrs:{\"label\":\"配置位点\"}},[_c('Input',{attrs:{\"type\":\"textarea\",\"autosize\":{minRows: 1,maxRows: 30},\"readonly\":\"\"},model:{value:(_vm.gtidCheck.resVo.configGtid),callback:function ($$v) {_vm.$set(_vm.gtidCheck.resVo, \"configGtid\", $$v)},expression:\"gtidCheck.resVo.configGtid\"}})],1),_c('FormItem',{attrs:{\"label\":\"purgedGtid\"}},[_c('Input',{attrs:{\"type\":\"textarea\",\"autosize\":{minRows: 1,maxRows: 30},\"readonly\":\"\"},model:{value:(_vm.gtidCheck.resVo.purgedGtid),callback:function ($$v) {_vm.$set(_vm.gtidCheck.resVo, \"purgedGtid\", $$v)},expression:\"gtidCheck.resVo.purgedGtid\"}})],1)],1)],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template v-if=\"current === 0\" :key=\"0\">\n  <div>\n    <Alert :type=\"status\" show-icon v-if=\"hasResp\" style=\"width: 65%; margin-left: 250px\">\n      {{title}}\n      <span slot=\"desc\" v-html=\"message\"></span>\n    </Alert>\n    <Row>\n      <i-col span=\"12\">\n        <Form ref=\"drc1\" :model=\"srcBuildParam\" :rules=\"ruleDrc\" :label-width=\"250\"\n              style=\"float: left; margin-top: 50px\">\n          <FormItem label=\"源集群名\" prop=\"srcMhaName\" style=\"width: 600px\">\n            <Input v-model=\"srcBuildParam.mhaName\" @input=\"changeSrcMha\" placeholder=\"请输入源集群名\"/>\n          </FormItem>\n          <FormItem label=\"选择Replicator\" prop=\"replicator\">\n            <Select v-model=\"srcBuildParam.replicatorIps\" multiple style=\"width: 250px\" placeholder=\"选择源集群Replicator\">\n              <Option v-for=\"item in replicatorList.src\" :value=\"item.ip\" :key=\"item.ip\">{{ item.ip }} —— {{ item.az\n                }}\n              </Option>\n            </Select>\n            &nbsp;\n            <Button type=\"success\" @click=\"autoConfigSrcReplicator\">自动录入</Button>\n          </FormItem>\n          <FormItem label=\"初始拉取位点R\" style=\"width: 600px\">\n            <Input v-model=\"srcBuildParam.replicatorInitGtid\" placeholder=\"变更replicator机器时,请输入binlog拉取位点\"/>\n            <Row>\n              <Col span=\"12\">\n                <Button @click=\"querySrcMhaMachineGtid\">查询mha位点</Button>\n                <span v-if=\"hasTest1\">\n                  <Icon :type=\"testSuccess1 ? 'ios-checkmark-circle' : 'ios-close-circle'\"\n                        :color=\"testSuccess1 ? 'green' : 'red'\"/>\n                    {{ testSuccess1 ? '查询实时位点成功' : '连接查询失败' }}\n                </span>\n              </Col>\n              <Col span=\"12\">\n                <Button type=\"success\" @click=\"querySrcMhaGtidCheckRes\">位点校验</Button>\n              </Col>\n            </Row>\n          </FormItem>\n          <FormItem label=\"同步配置\" style=\"width: 600px\">\n            <Button type=\"primary\" ghost @click=\"getSrcDbReplications\">同步表管理</Button>\n          </FormItem>\n          <FormItem label=\"DB Applier 配置\"  style=\"width: 600px\">\n            <Button type=\"primary\" ghost @click=\"getSrcDbApplierReplications\">Db Applier 管理</Button>\n          </FormItem>\n        </Form>\n      </i-col>\n      <i-col span=\"12\">\n        <Form ref=\"drc1\" :model=\"dstBuildParam\" :rules=\"ruleDrc\" :label-width=\"250\"\n              style=\"float: left; margin-top: 50px\">\n          <FormItem label=\"目标集群名\" prop=\"dstMhaName\" style=\"width: 600px\">\n            <Input v-model=\"dstBuildParam.mhaName\" @input=\"changeDstMha\" placeholder=\"请输入目标集群名\"/>\n          </FormItem>\n          <FormItem label=\"选择Replicator\" prop=\"replicator\">\n            <Select v-model=\"dstBuildParam.replicatorIps\" multiple style=\"width: 250px\" placeholder=\"选择目标集群Replicator\">\n              <Option v-for=\"item in replicatorList.dst\" :value=\"item.ip\" :key=\"item.ip\">{{ item.ip }} —— {{ item.az\n                }}\n              </Option>\n            </Select>\n            &nbsp;\n            <Button type=\"success\" @click=\"autoConfigDstReplicator\">自动录入</Button>\n          </FormItem>\n          <FormItem label=\"初始拉取位点R\" style=\"width: 600px\">\n            <Input v-model=\"dstBuildParam.replicatorInitGtid\" placeholder=\"变更replicator机器时,请输入binlog拉取位点\"/>\n            <Row>\n              <Col span=\"12\">\n                <Button @click=\"queryDstMhaMachineGtid\">查询mha位点</Button>\n                <span v-if=\"hasTest2\">\n                  <Icon :type=\"testSuccess2 ? 'ios-checkmark-circle' : 'ios-close-circle'\"\n                        :color=\"testSuccess2 ? 'green' : 'red'\"/>\n                    {{ testSuccess2 ? '查询实时位点成功' : '连接查询失败' }}\n                </span>\n              </Col>\n              <Col span=\"12\">\n                <Button type=\"success\" @click=\"queryDstMhaGtidCheckRes\">位点校验</Button>\n              </Col>\n            </Row>\n          </FormItem>\n          <FormItem label=\"同步配置\" style=\"width: 600px\">\n            <Button type=\"primary\" ghost @click=\"getDstDbReplications\">同步表管理</Button>\n          </FormItem>\n          <FormItem label=\"DB Applier 配置\" style=\"width: 600px\">\n            <Button type=\"primary\" ghost @click=\"getDstDbApplierReplications\">Db Applier 管理</Button>\n          </FormItem>\n        </Form>\n      </i-col>\n    </Row>\n    <Form :label-width=\"250\" style=\"margin-top: 50px\">\n      <FormItem>\n        <br>\n        <Button type=\"primary\" style=\"width: 100px\" @click=\"preCheckConfigure ()\">提交</Button>\n      </FormItem>\n      <Modal\n        v-model=\"reviewModal\"\n        title=\"确认配置信息\"\n        width=\"900px\"\n        @on-ok=\"submitConfig\">\n        <Row :gutter=\"5\">\n          <i-col span=\"12\">\n            <Form style=\"width: 80%\">\n              <FormItem label=\"源集群名\">\n                <Input type=\"textarea\" :autosize=\"{minRows: 1,maxRows: 30}\" v-model=\"srcBuildParam.mhaName\" readonly/>\n              </FormItem>\n              <FormItem label=\"源集群端Replicator\">\n                <Input type=\"textarea\" :autosize=\"{minRows: 1,maxRows: 30}\" v-model=\"srcBuildParam.replicatorIps\"\n                       readonly/>\n              </FormItem>\n              <FormItem label=\"源集群端R位点\">\n                <Input type=\"textarea\" :autosize=\"{minRows: 1,maxRows: 30}\" v-model=\"srcBuildParam.replicatorInitGtid\"\n                       readonly/>\n              </FormItem>\n            </Form>\n          </i-col>\n          <i-col span=\"12\">\n            <Form style=\"width: 80%\">\n              <FormItem label=\"目标集群名\">\n                <Input type=\"textarea\" :autosize=\"{minRows: 1,maxRows: 30}\" v-model=\"dstBuildParam.mhaName\" readonly/>\n              </FormItem>\n              <FormItem label=\"目标集群端Replicator\">\n                <Input type=\"textarea\" :autosize=\"{minRows: 1,maxRows: 30}\" v-model=\"dstBuildParam.replicatorIps\"\n                       readonly/>\n              </FormItem>\n              <FormItem label=\"目标集群端R位点\">\n                <Input type=\"textarea\" :autosize=\"{minRows: 1,maxRows: 30}\" v-model=\"dstBuildParam.replicatorInitGtid\"\n                       readonly/>\n              </FormItem>\n            </Form>\n          </i-col>\n        </Row>\n      </Modal>\n      <Modal\n        v-model=\"resultModal\"\n        title=\"配置结果\"\n        width=\"1200px\">\n        <Form style=\"width: 100%\">\n          <FormItem label=\"集群配置\">\n            <Input type=\"textarea\" :autosize=\"{minRows: 1,maxRows: 30}\" v-model=\"result\" readonly/>\n          </FormItem>\n        </Form>\n      </Modal>\n      <Modal\n        v-model=\"gtidCheck.modal\"\n        title=\"gitd位点校验结果\"\n        width=\"900px\">\n        <Form style=\"width: 80%\">\n          <FormItem label=\"校验结果\">\n            <Input type=\"textarea\" :autosize=\"{minRows: 1,maxRows: 30}\" v-model=\"gtidCheck.resVo.legal\" readonly/>\n          </FormItem>\n          <FormItem label=\"当前Mha\">\n            <Input :autosize=\"{minRows: 1,maxRows: 30}\" v-model=\"gtidCheck.resVo.mha\" readonly/>\n          </FormItem>\n          <FormItem label=\"配置位点\">\n            <Input type=\"textarea\" :autosize=\"{minRows: 1,maxRows: 30}\" v-model=\"gtidCheck.resVo.configGtid\" readonly/>\n          </FormItem>\n          <FormItem label=\"purgedGtid\">\n            <Input type=\"textarea\" :autosize=\"{minRows: 1,maxRows: 30}\" v-model=\"gtidCheck.resVo.purgedGtid\" readonly/>\n          </FormItem>\n        </Form>\n      </Modal>\n    </Form>\n  </div>\n</template>\n<script>\nexport default {\n  name: 'drcBuildV2',\n  props: {\n    srcMhaName: String,\n    dstMhaName: String,\n    srcDc: String,\n    dstDc: String,\n    env: String\n  },\n  data () {\n    return {\n      result: '',\n      status: '',\n      title: '',\n      message: '',\n      hasResp: false,\n      hasTest1: false,\n      testSuccess1: false,\n      hasTest2: false,\n      testSuccess2: false,\n      reviewModal: false,\n      resultModal: false,\n      replicatorList: {\n        src: [],\n        dst: []\n      },\n      srcBuildParam: {\n        mhaName: this.srcMhaName,\n        replicatorIps: [],\n        replicatorInitGtid: ''\n      },\n      srcBuildData: {\n        dbApplierDtos: []\n      },\n      dstBuildParam: {\n        mhaName: this.dstMhaName,\n        replicatorIps: [],\n        replicatorInitGtid: ''\n      },\n      dstBuildData: {\n        dbApplierDtos: []\n      },\n      gtidCheck: {\n        modal: false,\n        resVo: {\n          mha: '',\n          legal: '',\n          configGtid: '',\n          purgedGtid: ''\n        }\n      },\n      ruleDrc: {\n        oldClusterName: [\n          { required: true, message: '源集群名不能为空', trigger: 'blur' }\n        ],\n        newClusterName: [\n          { required: true, message: '新集群名不能为空', trigger: 'blur' }\n        ],\n        env: [\n          { required: true, message: '环境不能为空', trigger: 'blur' }\n        ],\n        replicator: [\n          { required: true, message: 'replicator不能为空', trigger: 'blur' }\n        ],\n        applier: [\n          { required: true, message: 'applier不能为空', trigger: 'blur' }\n        ]\n      }\n    }\n  },\n  computed: {\n    dataWithPage () {\n      const data = this.nameFilterCheck.tableData\n      const start = this.nameFilterCheck.current * this.nameFilterCheck.size - this.nameFilterCheck.size\n      const end = start + this.nameFilterCheck.size\n      return [...data].slice(start, end)\n    }\n  },\n  methods: {\n    flattenObj (ob) {\n      const result = {}\n      for (const i in ob) {\n        if ((typeof ob[i]) === 'object' && !Array.isArray(ob[i])) {\n          const temp = this.flattenObj(ob[i])\n          for (const j in temp) {\n            result[i + '.' + j] = temp[j]\n          }\n        } else {\n          result[i] = ob[i]\n        }\n      }\n      return result\n    },\n    autoConfigSrcReplicator () {\n      // const param = {\n      //   mhaName: this.srcBuildParam.mhaName,\n      //   type: 0,\n      //   selectIps: this.srcBuildParam.replicatorIps\n      // }\n      // const reqParam = this.flattenObj(param)\n      this.axios.get('/api/drc/v2/resource/mha/auto?mhaName=' + this.srcBuildParam.mhaName + '&type=0' + '&selectedIps=' + this.srcBuildParam.replicatorIps).then(response => {\n        console.log(response.data)\n        this.srcBuildParam.replicatorIps = []\n        response.data.data.forEach(ip => this.srcBuildParam.replicatorIps.push(ip.ip))\n      })\n    },\n    autoConfigDstReplicator () {\n      this.axios.get('/api/drc/v2/resource/mha/auto?mhaName=' + this.dstBuildParam.mhaName + '&type=0' + '&selectedIps=' + this.dstBuildParam.replicatorIps)\n        .then(response => {\n          console.log(response.data)\n          this.dstBuildParam.replicatorIps = []\n          response.data.data.forEach(ip => this.dstBuildParam.replicatorIps.push(ip.ip))\n        })\n    },\n    getSrcMhaResources () {\n      this.axios.get('/api/drc/v2/resource/mha/all?mhaName=' + this.srcBuildParam.mhaName + '&type=0')\n        .then(response => {\n          console.log(response.data)\n          this.replicatorList.src = response.data.data\n        })\n    },\n    getDstMhaResources () {\n      this.axios.get('/api/drc/v2/resource/mha/all?mhaName=' + this.dstBuildParam.mhaName + '&type=0')\n        .then(response => {\n          console.log(response.data)\n          this.replicatorList.dst = response.data.data\n        })\n    },\n    getSrcMhaReplicatorsInUse () {\n      this.axios.get('/api/drc/v2/mha/replicator?mhaName=' + this.srcBuildParam.mhaName)\n        .then(response => {\n          this.srcBuildParam.replicatorIps = response.data.data\n        })\n    },\n    getDstMhaReplicatorsInUse () {\n      this.axios.get('/api/drc/v2/mha/replicator?mhaName=' + this.dstBuildParam.mhaName)\n        .then(response => {\n          console.log(response.data)\n          this.dstBuildParam.replicatorIps = response.data.data\n        })\n    },\n    getMhaDbAppliersInUse () {\n      this.axios.get('/api/drc/v2/config/mha/dbApplier?srcMhaName=' + this.dstBuildParam.mhaName + '&dstMhaName=' + this.srcBuildParam.mhaName)\n        .then(response => {\n          console.log(response.data)\n          this.srcBuildData.dbApplierDtos = response.data.data\n        })\n      this.axios.get('/api/drc/v2/config/mha/dbApplier?srcMhaName=' + this.srcBuildParam.mhaName + '&dstMhaName=' + this.dstBuildParam.mhaName)\n        .then(response => {\n          console.log(response.data)\n          this.dstBuildData.dbApplierDtos = response.data.data\n        })\n    },\n    querySrcMhaMachineGtid () {\n      const that = this\n      that.axios.get('/api/drc/v2/mha/gtid/executed?mha=' + this.srcBuildParam.mhaName)\n        .then(response => {\n          this.hasTest1 = true\n          if (response.data.status === 0) {\n            this.srcBuildParam.replicatorInitGtid = response.data.data\n            this.testSuccess1 = true\n          } else {\n            this.testSuccess1 = false\n          }\n        })\n    },\n    querySrcMhaGtidCheckRes () {\n      if (this.srcBuildParam.replicatorInitGtid == null || this.srcBuildParam.replicatorInitGtid === '') {\n        alert('位点为空！')\n        return\n      }\n      const that = this\n      that.axios.get('/api/drc/v2/mha/gtid/checkResult?mha=' + this.srcBuildParam.mhaName +\n        '&configGtid=' + this.srcBuildParam.replicatorInitGtid)\n        .then(response => {\n          if (response.data.status === 0) {\n            this.gtidCheck.resVo = {\n              mha: this.srcBuildParam.mhaName,\n              legal: response.data.data.legal === true ? '合理位点' : 'binlog已经被purge',\n              configGtid: this.srcBuildParam.replicatorInitGtid,\n              purgedGtid: response.data.data.purgedGtid\n            }\n            this.gtidCheck.modal = true\n          } else {\n            alert('位点校验失败!')\n          }\n        })\n    },\n    queryDstMhaMachineGtid () {\n      const that = this\n      that.axios.get('/api/drc/v2/mha/gtid/executed?mha=' + this.dstBuildParam.mhaName)\n        .then(response => {\n          this.hasTest2 = true\n          if (response.data.status === 0) {\n            this.dstBuildParam.replicatorInitGtid = response.data.data\n            this.testSuccess2 = true\n          } else {\n            this.testSuccess2 = false\n          }\n        })\n    },\n    queryDstMhaGtidCheckRes () {\n      if (this.dstBuildParam.replicatorInitGtid == null || this.dstBuildParam.replicatorInitGtid === '') {\n        alert('位点为空！')\n        return\n      }\n      const that = this\n      that.axios.get('/api/drc/v2/mha/gtid/checkResult?mha=' + this.dstBuildParam.mhaName +\n        '&configGtid=' + this.dstBuildParam.replicatorInitGtid)\n        .then(response => {\n          if (response.data.status === 0) {\n            this.gtidCheck.resVo = {\n              mha: this.dstBuildParam.mhaName,\n              legal: response.data.data.legal === true ? '合理位点' : 'binlog已经被purge',\n              configGtid: this.dstBuildParam.replicatorInitGtid,\n              purgedGtid: response.data.data.purgedGtid\n            }\n            this.gtidCheck.modal = true\n          } else {\n            alert('位点校验失败!')\n          }\n        })\n    },\n    getSrcDc () {\n      this.axios.get('/api/drc/v2/mha/dc?mhaName=' + this.srcBuildParam.mhaName)\n        .then(response => {\n          this.srcDc = response.data.data\n        })\n    },\n    getDstDc () {\n      this.axios.get('/api/drc/v2/mha/dc?mhaName=' + this.dstBuildParam.mhaName)\n        .then(response => {\n          this.dstDc = response.data.data\n        })\n    },\n    changeSrcMha () {\n      this.$emit('srcMhaNameChanged', this.srcBuildParam.mhaName)\n      this.getSrcMhaResources()\n      this.getSrcMhaReplicatorsInUse()\n      this.getMhaDbAppliersInUse()\n      this.getSrcDc()\n    },\n    changeDstMha () {\n      this.$emit('dstMhaNameChanged', this.dstBuildParam.mhaName)\n      this.getDstMhaResources()\n      this.getDstMhaReplicatorsInUse()\n      this.getMhaDbAppliersInUse()\n      this.getDstDc()\n    },\n    start () {\n      this.$Loading.start()\n    },\n    finish () {\n      this.$Loading.finish()\n    },\n    error () {\n      this.$Loading.error()\n    },\n    changeModal (name) {\n      this.$refs[name].validate((valid) => {\n        if (!valid) {\n          this.$Message.error('仍有必填项未填!')\n        } else {\n          this.drc.reviewModal = true\n        }\n      })\n    },\n    preCheckConfigure () {\n      this.reviewModal = true\n    },\n    reviewConfigure () {\n      this.drc.reviewModal = true\n    },\n    submitConfig () {\n      const that = this\n      this.axios.post('/api/drc/v2/config/', {\n        srcBuildParam: this.srcBuildParam,\n        dstBuildParam: this.dstBuildParam\n      }).then(response => {\n        console.log(response.data)\n        that.result = response.data\n        that.reviewModal = false\n        that.resultModal = true\n        this.refresh()\n      })\n    },\n    getSrcDbReplications () {\n      this.$router.push({\n        path: '/dbTables',\n        query: {\n          srcMhaName: this.dstBuildParam.mhaName,\n          dstMhaName: this.srcBuildParam.mhaName,\n          srcDc: this.dstDc,\n          dstDc: this.srcDc,\n          order: true\n        }\n      })\n    },\n    getDstDbReplications () {\n      this.$router.push({\n        path: '/dbTables',\n        query: {\n          srcMhaName: this.srcBuildParam.mhaName,\n          dstMhaName: this.dstBuildParam.mhaName,\n          srcDc: this.srcDc,\n          dstDc: this.dstDc,\n          order: true\n        }\n      })\n    },\n    getSrcDbApplierReplications () {\n      this.$router.push({\n        path: '/dbAppliers',\n        query: {\n          srcMhaName: this.dstBuildParam.mhaName,\n          dstMhaName: this.srcBuildParam.mhaName,\n          srcDc: this.dstDc,\n          dstDc: this.srcDc,\n          order: true\n        }\n      })\n    },\n    getDstDbApplierReplications () {\n      this.$router.push({\n        path: '/dbAppliers',\n        query: {\n          srcMhaName: this.srcBuildParam.mhaName,\n          dstMhaName: this.dstBuildParam.mhaName,\n          srcDc: this.srcDc,\n          dstDc: this.dstDc,\n          order: true\n        }\n      })\n    },\n    handleChangeSize (val) {\n      this.size = val\n    },\n    hasAppliers (dbApplierDtos) {\n      for (const x of dbApplierDtos) {\n        if (x.ips && x.ips.length > 0) {\n          return true\n        }\n      }\n      return false\n    },\n    refresh () {\n      this.getSrcMhaReplicatorsInUse()\n      this.getDstMhaReplicatorsInUse()\n      this.getMhaDbAppliersInUse()\n      this.getSrcDc()\n      this.getDstDc()\n    }\n  },\n  created () {\n    this.getSrcMhaResources()\n    this.getDstMhaResources()\n    this.refresh()\n  }\n}\n</script>\n<style scoped>\n.demo-split {\n  height: 200px;\n  border: 1px solid #dcdee2;\n}\n\n.demo-split-pane {\n  padding: 10px;\n}\n</style>\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./drcBuildV2.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./drcBuildV2.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./drcBuildV2.vue?vue&type=template&id=38991636&scoped=true&v-if=current%20%3D%3D%3D%200&%3Akey=0\"\nimport script from \"./drcBuildV2.vue?vue&type=script&lang=js\"\nexport * from \"./drcBuildV2.vue?vue&type=script&lang=js\"\nimport style0 from \"./drcBuildV2.vue?vue&type=style&index=0&id=38991636&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"38991636\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./drcBuildV2.vue?vue&type=style&index=0&id=38991636&prod&scoped=true&lang=css\""],"sourceRoot":""}