(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2582f55b"],{"0cb2":function(t,e,a){"use strict";var r=a("e330"),i=a("7b0b"),n=Math.floor,l=r("".charAt),s=r("".replace),o=r("".slice),u=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,d=/\$([$&'`]|\d{1,2})/g;t.exports=function(t,e,a,r,c,p){var m=a+t.length,b=r.length,g=d;return void 0!==c&&(c=i(c),g=u),s(p,g,(function(i,s){var u;switch(l(s,0)){case"$":return"$";case"&":return t;case"`":return o(e,0,a);case"'":return o(e,m);case"<":u=c[o(s,1,-1)];break;default:var d=+s;if(0===d)return i;if(d>b){var p=n(d/10);return 0===p?i:p<=b?void 0===r[p-1]?l(s,1):r[p-1]+l(s,1):i}u=r[d-1]}return void 0===u?"":u}))}},1431:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("base-component",[e("Breadcrumb",{style:{margin:"15px 0 15px 185px",position:"fixed"}},[e("BreadcrumbItem",{attrs:{to:"/home"}},[t._v("首页")]),e("BreadcrumbItem",{attrs:{to:"/applicationForm"}},[t._v("DRC审批")]),e("BreadcrumbItem",[t._v("DRC申请")])],1),e("Content",{staticClass:"content",style:{padding:"10px",background:"#fff",margin:"50px 0 1px 185px",zIndex:"1"}},[e("div",{staticStyle:{padding:"1px 1px"}},[e("Form",{ref:"buildParam",attrs:{model:t.buildParam,rules:t.ruleValidate,"label-width":140,disabled:t.showDetail}},[e("FormItem",{attrs:{label:"同步DB",prop:"dbName"}},[e("Input",{attrs:{placeholder:"输入同步DB"},model:{value:t.buildParam.dbName,callback:function(e){t.$set(t.buildParam,"dbName",e)},expression:"buildParam.dbName"}})],1),e("FormItem",{attrs:{label:"同步表",prop:"tableName"}},[e("Input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:5},placeholder:"输入同步表,多表用,分隔; 不填默认同步所有表"},model:{value:t.buildParam.tableName,callback:function(e){t.$set(t.buildParam,"tableName",e)},expression:"buildParam.tableName"}})],1),e("FormItem",{attrs:{label:"同步方向",required:!0}},[e("Row",[e("Col",{attrs:{span:"11"}},[e("Card",{attrs:{bordered:!0},scopedSlots:t._u([{key:"title",fn:function(){return[e("Icon",{attrs:{type:"ios-pin"}}),t._v(" 源 region ")]},proxy:!0}])},[e("FormItem",{attrs:{prop:"srcRegion"}},[e("Select",{attrs:{filterable:"",clearable:"",placeholder:"地域"},model:{value:t.buildParam.srcRegion,callback:function(e){t.$set(t.buildParam,"srcRegion",e)},expression:"buildParam.srcRegion"}},t._l(t.regionOptions,(function(a){return e("Option",{key:a,attrs:{value:a,label:a}},[t._v(" "+t._s(a)+" ")])})),1)],1)],1)],1),e("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}},[e("Button",{attrs:{size:"middle",shape:"circle",type:"default"},on:{click:function(e){return t.reverseRegion()}}},[t._v(" -> ")])],1),e("Col",{attrs:{span:"11"}},[e("Card",{attrs:{bordered:!0},scopedSlots:t._u([{key:"title",fn:function(){return[e("Icon",{attrs:{type:"ios-pin"}}),t._v(" 目标 region ")]},proxy:!0}])},[e("FormItem",{attrs:{prop:"dstRegion"}},[e("Select",{attrs:{filterable:"",clearable:"",placeholder:"地域",prop:"dstRegion"},model:{value:t.buildParam.dstRegion,callback:function(e){t.$set(t.buildParam,"dstRegion",e)},expression:"buildParam.dstRegion"}},t._l(t.regionOptions,(function(a){return e("Option",{key:a,attrs:{value:a,label:a}},[t._v(" "+t._s(a)+" ")])})),1)],1)],1)],1)],1)],1),e("FormItem",{attrs:{label:"过滤方式",prop:"filterType"}},[e("Select",{model:{value:t.buildParam.filterType,callback:function(e){t.$set(t.buildParam,"filterType",e)},expression:"buildParam.filterType"}},t._l(t.filterTypeOpts,(function(a){return e("Option",{key:a,attrs:{value:a}},[t._v(t._s(a))])})),1)],1),e("FormItem",{attrs:{label:"BU",prop:"buName"}},[e("Select",{attrs:{filterable:"",prefix:"ios-home",placeholder:"部门"},on:{"on-change":t.autoSetTag},model:{value:t.buildParam.buName,callback:function(e){t.$set(t.buildParam,"buName",e)},expression:"buildParam.buName"}},t._l(t.bus,(function(a){return e("Option",{key:a.buName,attrs:{value:a.buName}},[t._v(t._s(a.buName))])})),1)],1),e("FormItem",{attrs:{label:"Tag",prop:"tag"}},[e("Select",{attrs:{filterable:"","allow-create":""},on:{"on-create":t.handleCreateTag},model:{value:t.buildParam.tag,callback:function(e){t.$set(t.buildParam,"tag",e)},expression:"buildParam.tag"}},t._l(t.tags,(function(a){return e("Option",{key:a,attrs:{value:a}},[t._v(t._s(a))])})),1)],1),e("FormItem",{attrs:{label:"是否刷存量数据",prop:"flushExistingData"}},[e("RadioGroup",{model:{value:t.buildParam.flushExistingData,callback:function(e){t.$set(t.buildParam,"flushExistingData",e)},expression:"buildParam.flushExistingData"}},[e("Radio",{attrs:{label:"0"}},[t._v("否")]),e("Radio",{attrs:{label:"1"}},[t._v("是")])],1)],1),e("FormItem",{attrs:{label:"是否订单相关",prop:"orderRelated"}},[e("RadioGroup",{model:{value:t.buildParam.orderRelated,callback:function(e){t.$set(t.buildParam,"orderRelated",e)},expression:"buildParam.orderRelated"}},[e("Radio",{attrs:{label:"0"}},[t._v("否")]),e("Radio",{attrs:{label:"1"}},[t._v("是")])],1)],1),e("FormItem",{attrs:{label:"同步开始位点",prop:"gtidInit"}},[e("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"输入同步开始位点"},model:{value:t.buildParam.gtidInit,callback:function(e){t.$set(t.buildParam,"gtidInit",e)},expression:"buildParam.gtidInit"}})],1),e("FormItem",{attrs:{label:"中断影响",prop:"disruptionImpact"}},[e("Input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:2},placeholder:"中断影响"},model:{value:t.buildParam.disruptionImpact,callback:function(e){t.$set(t.buildParam,"disruptionImpact",e)},expression:"buildParam.disruptionImpact"}})],1),e("FormItem",{attrs:{label:"tps",prop:"tps"}},[e("Input",{attrs:{placeholder:"tps"},model:{value:t.buildParam.tps,callback:function(e){t.$set(t.buildParam,"tps",e)},expression:"buildParam.tps"}})],1),e("FormItem",{attrs:{label:"申请人",prop:"applicant"}},[e("Input",{attrs:{placeholder:"申请人"},model:{value:t.buildParam.applicant,callback:function(e){t.$set(t.buildParam,"applicant",e)},expression:"buildParam.applicant"}})],1),e("FormItem",{attrs:{label:"备注",prop:"remark"}},[e("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"备注"},model:{value:t.buildParam.remark,callback:function(e){t.$set(t.buildParam,"remark",e)},expression:"buildParam.remark"}})],1),t.showDetail?t._e():e("FormItem",[e("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("buildParam")}}},[t._v("提交")]),e("Button",{staticStyle:{"margin-left":"20px"},on:{click:function(e){return t.handleReset("buildParam")}}},[t._v("重置")])],1)],1),t.showDetail?e("Button",{staticStyle:{"margin-left":"80px"},attrs:{type:"primary"},on:{click:function(e){return t.toDrcBuild()}}},[t._v("审批")]):t._e()],1)])],1)},i=[],n=(a("a4d3"),a("e01a"),a("caad"),a("14d9"),a("ac1f"),a("2532"),a("5319"),a("5b81"),{name:"applicationBuild",data:function(){return{applicationFormId:null,buildLoading:!1,showDetail:!1,bus:[],tags:this.constant.tagList,regionOptions:[],filterTypeOpts:["ALL","UDL"],replicationTypeOpts:[{name:"单向同步",val:0},{name:"双向同步",val:1}],buildParam:{dbName:"",tableName:"",srcRegion:"",dstRegion:"",filterType:"ALL",buName:"",tps:"",description:"",disruptionImpact:"",tag:"",flushExistingData:"0",orderRelated:"0",gtidInit:"",remark:"",applicant:""},ruleValidate:{dbName:[{required:!0,message:"请输入同步DB",trigger:"blur"}],applicant:[{required:!0,message:"请输入申请人",trigger:"blur"}],filterType:[{required:!0,message:"请选择过滤类型",trigger:"change"}],flushExistingData:[{required:!0,message:"请选择是否刷存量数据",trigger:"change"}],orderRelated:[{required:!0,message:"请选择是否订单相关",trigger:"change"}],srcRegion:[{required:!0,message:"请选择源region",trigger:"change"}],dstRegion:[{required:!0,message:"请选择目标region",trigger:"change"}],buName:[{required:!0,message:"请选择BU",trigger:"change"}],tag:[{required:!0,message:"请选择tag",trigger:"change"}]}}},methods:{handleCreateTag:function(t){this.constant.tagList.push(t),this.tags.push(t)},reverseRegion:function(){var t=this.buildParam.srcRegion;this.buildParam.srcRegion=this.buildParam.dstRegion,this.buildParam.dstRegion=t},getRegions:function(){var t=this;this.axios.get("/api/drc/v2/autoconfig/region/all").then((function(e){t.regionOptions=e.data.data}))},autoSetTag:function(){"FLT"===this.buildParam.buName?this.buildParam.tag="FLT":"HTL"===this.buildParam.buName?this.buildParam.tag="HTL":this.buildParam.tag="COMMON"},getBus:function(){var t=this;this.axios.get("/api/drc/v2/meta/bus/all").then((function(e){t.bus=e.data.data}))},toDrcBuild:function(){var t=this;this.axios.post("/api/drc/v2/application/approve?applicationFormId="+this.applicationFormId).then((function(e){1===e.data.status?t.$Message.error(e.data.message):t.$router.push({path:"/drcBuild",query:{dalClusterName:t.buildParam.dbName+"_dalcluster",tableName:t.changeTableName(t.buildParam.tableName),srcRegion:t.buildParam.srcRegion,dstRegion:t.buildParam.dstRegion,filterType:t.buildParam.filterType,buName:t.buildParam.buName,tag:t.buildParam.tag,flushExistingData:t.buildParam.flushExistingData,gtidInit:t.buildParam.gtidInit,applicationFormId:t.applicationFormId}})}))},changeTableName:function(t){return null===t||""===t?".*":t.includes(",")?"("+t.replaceAll(",","|")+")":t},handleSubmit:function(t){this.validate(t),console.log(this.buildParam)},submit:function(){var t=this;this.dataLoading=!0;var e={dbName:this.buildParam.dbName,tableName:this.buildParam.tableName,srcRegion:this.buildParam.srcRegion,dstRegion:this.buildParam.dstRegion,filterType:this.buildParam.filterType,buName:this.buildParam.buName,tps:this.buildParam.tps,description:this.buildParam.description,disruptionImpact:this.buildParam.disruptionImpact,tag:this.buildParam.tag,flushExistingData:this.buildParam.flushExistingData,orderRelated:this.buildParam.orderRelated,gtidInit:this.buildParam.gtidInit,remark:this.buildParam.remark,applicant:this.buildParam.applicant};this.axios.post("/api/drc/v2/application/",e).then((function(e){t.dataLoading=!1,1===e.data.status?t.$Message.error({content:"提交失败! "+e.data.message,duration:2}):t.$Message.success("提交成功！")}))},validate:function(t){var e=this;this.$refs[t].validate((function(t){t?e.submit():e.$Message.error("仍有必填项未填!")}))},handleReset:function(t){this.$refs[t].resetFields()},init:function(){this.showDetail=this.$route.query.showDetail,this.buildParam={dbName:this.$route.query.dbName,tableName:this.$route.query.tableName,srcRegion:this.$route.query.srcRegion,dstRegion:this.$route.query.dstRegion,filterType:this.$route.query.filterType,buName:this.$route.query.buName,tps:this.$route.query.tps,description:this.$route.query.description,disruptionImpact:this.$route.query.disruptionImpact,tag:this.$route.query.tag,flushExistingData:this.$route.query.flushExistingData,orderRelated:this.$route.query.orderRelated,gtidInit:this.$route.query.gtidInit,remark:this.$route.query.remark,applicant:this.$route.query.applicant},this.applicationFormId=this.$route.query.applicationFormId}},created:function(){this.getBus(),this.getRegions(),this.init()}}),l=n,s=a("2877"),o=Object(s["a"])(l,r,i,!1,null,"6c718dfc",null);e["default"]=o.exports},"14c3":function(t,e,a){"use strict";var r=a("c65b"),i=a("825a"),n=a("1626"),l=a("c6b6"),s=a("9263"),o=TypeError;t.exports=function(t,e){var a=t.exec;if(n(a)){var u=r(a,t,e);return null!==u&&i(u),u}if("RegExp"===l(t))return r(s,t,e);throw new o("RegExp#exec called on incompatible receiver")}},2532:function(t,e,a){"use strict";var r=a("23e7"),i=a("e330"),n=a("5a34"),l=a("1d80"),s=a("577e"),o=a("ab13"),u=i("".indexOf);r({target:"String",proto:!0,forced:!o("includes")},{includes:function(t){return!!~u(s(l(this)),s(n(t)),arguments.length>1?arguments[1]:void 0)}})},"44e7":function(t,e,a){"use strict";var r=a("861d"),i=a("c6b6"),n=a("b622"),l=n("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[l])?!!e:"RegExp"===i(t))}},5319:function(t,e,a){"use strict";var r=a("2ba4"),i=a("c65b"),n=a("e330"),l=a("d784"),s=a("d039"),o=a("825a"),u=a("1626"),d=a("7234"),c=a("5926"),p=a("50c4"),m=a("577e"),b=a("1d80"),g=a("8aa5"),h=a("dc4a"),f=a("0cb2"),v=a("14c3"),x=a("b622"),P=x("replace"),y=Math.max,R=Math.min,I=n([].concat),$=n([].push),N=n("".indexOf),k=n("".slice),_=function(t){return void 0===t?t:String(t)},w=function(){return"$0"==="a".replace(/./,"$0")}(),T=function(){return!!/./[P]&&""===/./[P]("a","$0")}(),q=!s((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}));l("replace",(function(t,e,a){var n=T?"$":"$0";return[function(t,a){var r=b(this),n=d(t)?void 0:h(t,P);return n?i(n,t,r,a):i(e,m(r),t,a)},function(t,i){var l=o(this),s=m(t);if("string"==typeof i&&-1===N(i,n)&&-1===N(i,"$<")){var d=a(e,l,s,i);if(d.done)return d.value}var b=u(i);b||(i=m(i));var h,x=l.global;x&&(h=l.unicode,l.lastIndex=0);var P,w=[];while(1){if(P=v(l,s),null===P)break;if($(w,P),!x)break;var T=m(P[0]);""===T&&(l.lastIndex=g(s,p(l.lastIndex),h))}for(var q="",F=0,D=0;D<w.length;D++){P=w[D];for(var B,E=m(P[0]),S=y(R(c(P.index),s.length),0),O=[],L=1;L<P.length;L++)$(O,_(P[L]));var C=P.groups;if(b){var M=I([E],O,S,s);void 0!==C&&$(M,C),B=m(r(i,void 0,M))}else B=f(E,s,S,O,C,i);S>=F&&(q+=k(s,F,S)+B,F=S+E.length)}return q+k(s,F)}]}),!q||!w||T)},"5a34":function(t,e,a){"use strict";var r=a("44e7"),i=TypeError;t.exports=function(t){if(r(t))throw new i("The method doesn't accept regular expressions");return t}},"5b81":function(t,e,a){"use strict";var r=a("23e7"),i=a("c65b"),n=a("e330"),l=a("1d80"),s=a("1626"),o=a("7234"),u=a("44e7"),d=a("577e"),c=a("dc4a"),p=a("90d8"),m=a("0cb2"),b=a("b622"),g=a("c430"),h=b("replace"),f=TypeError,v=n("".indexOf),x=n("".replace),P=n("".slice),y=Math.max;r({target:"String",proto:!0},{replaceAll:function(t,e){var a,r,n,b,R,I,$,N,k,_,w=l(this),T=0,q="";if(!o(t)){if(a=u(t),a&&(r=d(l(p(t))),!~v(r,"g")))throw new f("`.replaceAll` does not allow non-global regexes");if(n=c(t,h),n)return i(n,t,w,e);if(g&&a)return x(d(w),t,e)}b=d(w),R=d(t),I=s(e),I||(e=d(e)),$=R.length,N=y(1,$),k=v(b,R);while(-1!==k)_=I?d(e(R,k,b)):m(R,b,k,[],void 0,e),q+=P(b,T,k)+_,T=k+$,k=k+N>b.length?-1:v(b,R,k+N);return T<b.length&&(q+=P(b,T)),q}})},"8aa5":function(t,e,a){"use strict";var r=a("6547").charAt;t.exports=function(t,e,a){return e+(a?r(t,e).length:1)}},ab13:function(t,e,a){"use strict";var r=a("b622"),i=r("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(a){try{return e[i]=!1,"/./"[t](e)}catch(r){}}return!1}},d784:function(t,e,a){"use strict";a("ac1f");var r=a("c65b"),i=a("cb2d"),n=a("9263"),l=a("d039"),s=a("b622"),o=a("9112"),u=s("species"),d=RegExp.prototype;t.exports=function(t,e,a,c){var p=s(t),m=!l((function(){var e={};return e[p]=function(){return 7},7!==""[t](e)})),b=m&&!l((function(){var e=!1,a=/a/;return"split"===t&&(a={},a.constructor={},a.constructor[u]=function(){return a},a.flags="",a[p]=/./[p]),a.exec=function(){return e=!0,null},a[p](""),!e}));if(!m||!b||a){var g=/./[p],h=e(p,""[t],(function(t,e,a,i,l){var s=e.exec;return s===n||s===d.exec?m&&!l?{done:!0,value:r(g,e,a,i)}:{done:!0,value:r(t,a,e,i)}:{done:!1}}));i(String.prototype,t,h[0]),i(d,p,h[1])}c&&o(d[p],"sham",!0)}}}]);
//# sourceMappingURL=chunk-2582f55b.7b21d0f8.js.map