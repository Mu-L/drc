(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-385c8951"],{"14c3":function(e,t,a){var r=a("c6b6"),n=a("9263");e.exports=function(e,t){var a=e.exec;if("function"===typeof a){var i=a.call(e,t);if("object"!==typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==r(e))throw TypeError("RegExp#exec called on incompatible receiver");return n.call(e,t)}},"4ec9":function(e,t,a){"use strict";var r=a("6d61"),n=a("6566");e.exports=r("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),n)},5319:function(e,t,a){"use strict";var r=a("d784"),n=a("825a"),i=a("7b0b"),o=a("50c4"),s=a("a691"),l=a("1d80"),c=a("8aa5"),u=a("14c3"),d=Math.max,g=Math.min,f=Math.floor,m=/\$([$&'`]|\d\d?|<[^>]*>)/g,p=/\$([$&'`]|\d\d?)/g,h=function(e){return void 0===e?e:String(e)};r("replace",2,(function(e,t,a,r){var v=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,y=r.REPLACE_KEEPS_$0,b=v?"$":"$0";return[function(a,r){var n=l(this),i=void 0==a?void 0:a[e];return void 0!==i?i.call(a,n,r):t.call(String(n),a,r)},function(e,r){if(!v&&y||"string"===typeof r&&-1===r.indexOf(b)){var i=a(t,e,this,r);if(i.done)return i.value}var l=n(e),f=String(this),m="function"===typeof r;m||(r=String(r));var p=l.global;if(p){var x=l.unicode;l.lastIndex=0}var R=[];while(1){var q=u(l,f);if(null===q)break;if(R.push(q),!p)break;var D=String(q[0]);""===D&&(l.lastIndex=c(f,o(l.lastIndex),x))}for(var P="",k=0,E=0;E<R.length;E++){q=R[E];for(var T=String(q[0]),S=d(g(s(q.index),f.length),0),_=[],I=1;I<q.length;I++)_.push(h(q[I]));var N=q.groups;if(m){var L=[T].concat(_,S,f);void 0!==N&&L.push(N);var $=String(r.apply(void 0,L))}else $=w(T,f,S,_,N,r);S>=k&&(P+=f.slice(k,S)+$,k=S+T.length)}return P+f.slice(k)}];function w(e,a,r,n,o,s){var l=r+e.length,c=n.length,u=p;return void 0!==o&&(o=i(o),u=m),t.call(s,u,(function(t,i){var s;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return a.slice(0,r);case"'":return a.slice(l);case"<":s=o[i.slice(1,-1)];break;default:var u=+i;if(0===u)return t;if(u>c){var d=f(u/10);return 0===d?t:d<=c?void 0===n[d-1]?i.charAt(1):n[d-1]+i.charAt(1):t}s=n[u-1]}return void 0===s?"":s}))}}))},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,a){var r=a("1d80"),n=a("5899"),i="["+n+"]",o=RegExp("^"+i+i+"*"),s=RegExp(i+i+"*$"),l=function(e){return function(t){var a=String(r(t));return 1&e&&(a=a.replace(o,"")),2&e&&(a=a.replace(s,"")),a}};e.exports={start:l(1),end:l(2),trim:l(3)}},"61b1":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{padding:"1px 1px"}},[a("Row",{attrs:{gutter:10,align:"middle"}},[a("Col",{attrs:{span:"20"}},[a("Card",{attrs:{padding:5},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("查询条件")]},proxy:!0}])},[a("Row",{directives:[{name:"show",rawName:"v-show",value:!e.searchMode,expression:"!searchMode"}],attrs:{gutter:10}},[a("Col",{attrs:{span:"2"}},[a("Select",{attrs:{filterable:"",clearable:"",placeholder:"源region"},model:{value:e.queryParam.srcRegion,callback:function(t){e.$set(e.queryParam,"srcRegion",t)},expression:"queryParam.srcRegion"}},e._l(e.regions,(function(t){return a("Option",{key:t.regionName,attrs:{value:t.regionName}},[e._v(" "+e._s(t.regionName)+" ")])})),1)],1),a("Col",{attrs:{span:"2"}},[a("Select",{attrs:{filterable:"",clearable:"",placeholder:"目标region"},model:{value:e.queryParam.dstRegion,callback:function(t){e.$set(e.queryParam,"dstRegion",t)},expression:"queryParam.dstRegion"}},e._l(e.regions,(function(t){return a("Option",{key:t.regionName,attrs:{value:t.regionName}},[e._v(" "+e._s(t.regionName)+" ")])})),1)],1),a("Col",{attrs:{span:"4"}},[a("Input",{attrs:{prefix:"ios-search",placeholder:"库名"},model:{value:e.queryParam.dbName,callback:function(t){e.$set(e.queryParam,"dbName",t)},expression:"queryParam.dbName"}})],1),a("Col",{attrs:{span:"4"}},[a("Input",{attrs:{prefix:"ios-search",placeholder:"表名"},model:{value:e.queryParam.tableName,callback:function(t){e.$set(e.queryParam,"tableName",t)},expression:"queryParam.tableName"}})],1),a("Col",{attrs:{span:"4"}},[a("DatePicker",{attrs:{type:"datetime",editable:e.editable,clearable:!1,placeholder:"起始日期"},model:{value:e.queryParam.beginHandleTime,callback:function(t){e.$set(e.queryParam,"beginHandleTime",t)},expression:"queryParam.beginHandleTime"}})],1),a("Col",{attrs:{span:"4"}},[a("DatePicker",{attrs:{type:"datetime",editable:e.editable,confirm:!1,clearable:!1,placeholder:"结束日期"},model:{value:e.queryParam.endHandleTime,callback:function(t){e.$set(e.queryParam,"endHandleTime",t)},expression:"queryParam.endHandleTime"}})],1),a("Col",{attrs:{span:"2"}},[a("Select",{attrs:{filterable:"",clearable:"",placeholder:"日志情况"},model:{value:e.queryParam.brief,callback:function(t){e.$set(e.queryParam,"brief",t)},expression:"queryParam.brief"}},e._l(e.briefOpts,(function(t){return a("Option",{key:t.val,attrs:{value:t.val}},[e._v(e._s(t.name))])})),1)],1),a("Col",{attrs:{span:"2"}},[a("Select",{attrs:{filterable:"",clearable:"",placeholder:"执行结果"},model:{value:e.queryParam.rowResult,callback:function(t){e.$set(e.queryParam,"rowResult",t)},expression:"queryParam.rowResult"}},e._l(e.resultOpts,(function(t){return a("Option",{key:t.val,attrs:{value:t.val}},[e._v(e._s(t.name))])})),1)],1)],1),a("Row",{directives:[{name:"show",rawName:"v-show",value:e.searchMode,expression:"searchMode"}],attrs:{gutter:10}},[a("Col",{attrs:{span:"12"}},[a("Input",{attrs:{prefix:"ios-search",placeholder:"事务id"},model:{value:e.queryParam.gtid,callback:function(t){e.$set(e.queryParam,"gtid",t)},expression:"queryParam.gtid"}})],1),a("Col",{attrs:{span:"4"}},[a("DatePicker",{attrs:{type:"datetime",editable:e.editable,clearable:!1,placeholder:"起始日期"},model:{value:e.queryParam.beginHandleTime,callback:function(t){e.$set(e.queryParam,"beginHandleTime",t)},expression:"queryParam.beginHandleTime"}})],1),a("Col",{attrs:{span:"4"}},[a("DatePicker",{attrs:{type:"datetime",editable:e.editable,clearable:!1,placeholder:"结束日期"},model:{value:e.queryParam.endHandleTime,callback:function(t){e.$set(e.queryParam,"endHandleTime",t)},expression:"queryParam.endHandleTime"}})],1),a("Col",{attrs:{span:"4"}},[a("Select",{attrs:{filterable:"",clearable:"",placeholder:"执行结果"},model:{value:e.queryParam.rowResult,callback:function(t){e.$set(e.queryParam,"rowResult",t)},expression:"queryParam.rowResult"}},e._l(e.resultOpts,(function(t){return a("Option",{key:t.val,attrs:{value:t.val}},[e._v(e._s(t.name))])})),1)],1)],1)],1)],1),a("Col",{attrs:{span:"4"}},[a("Row",{attrs:{gutter:10,align:"middle"}},[a("Button",{attrs:{type:"primary",icon:"ios-search",loading:e.dataLoading},on:{click:e.getTotalData}},[e._v("查询")]),a("i-switch",{staticStyle:{"margin-left":"10px"},attrs:{size:"large"},scopedSlots:e._u([{key:"open",fn:function(){return[a("span",[e._v("模糊匹配")])]},proxy:!0},{key:"close",fn:function(){return[a("span",[e._v("精确匹配")])]},proxy:!0}]),model:{value:e.queryParam.likeSearch,callback:function(t){e.$set(e.queryParam,"likeSearch",t)},expression:"queryParam.likeSearch"}},[e._v("模糊匹配 ")])],1),a("Row",{staticStyle:{"margin-top":"20px"},attrs:{gutter:10,align:"middle"}},[a("Button",{attrs:{icon:"md-refresh"},on:{click:e.resetParam}},[e._v("重置")]),a("i-switch",{staticStyle:{"margin-left":"10px"},attrs:{size:"large"},on:{"on-change":e.searchModeChange},scopedSlots:e._u([{key:"open",fn:function(){return[a("span",[e._v("进阶")])]},proxy:!0},{key:"close",fn:function(){return[a("span",[e._v("进阶")])]},proxy:!0}]),model:{value:e.searchMode,callback:function(t){e.searchMode=t},expression:"searchMode"}},[e._v("进阶 ")])],1)],1)],1),a("br"),a("Row",{staticStyle:{background:"#fdfdff",border:"1px solid #e8eaec"}},[a("Col",{staticStyle:{display:"flex",float:"left",margin:"5px"},attrs:{span:"2"}},[a("Dropdown",{attrs:{placement:"bottom-start"},scopedSlots:e._u([{key:"list",fn:function(){return[a("DropdownMenu",[a("DropdownItem",{nativeOn:{click:function(t){return e.compareRecords.apply(null,arguments)}}},[e._v("数据比对")]),a("DropdownItem",{nativeOn:{click:function(t){return e.getLogDetails.apply(null,arguments)}}},[e._v("冲突行详情")])],1)]},proxy:!0}])},[a("Button",{attrs:{type:"default",icon:"ios-hammer"}},[e._v(" 批量操作 "),a("Icon",{attrs:{type:"ios-arrow-down"}})],1)],1)],1),a("Col",{staticStyle:{display:"flex",float:"left",margin:"5px"},attrs:{span:"2"}},[a("Button",{attrs:{type:"default",icon:"md-create"},on:{click:e.dbBlacklist}},[e._v(" 冲突黑名单 ")])],1)],1),a("Table",{ref:"multipleTable",attrs:{border:"",columns:e.columns,data:e.tableData},on:{"on-selection-change":e.changeSelection},scopedSlots:e._u([{key:"action",fn:function(t){var r=t.row,n=t.index;return[a("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.getLogDetail1(r,n)}}},[e._v(" 详情 ")]),a("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"success",size:"small"},on:{click:function(t){return e.queryTrxLog(r,n)}}},[e._v(" 冲突事务 ")])]}}])}),a("div",{staticStyle:{"text-align":"center",margin:"16px 0"}},[e.countLoading?a("div",[e._v(" Total Loading... ")]):a("Page",{attrs:{transfer:!0,total:e.total,current:e.current,"page-size-opts":[10,20,50,100],"page-size":10,"show-total":"","show-sizer":"","show-elevator":""},on:{"update:current":function(t){e.current=t},"on-change":e.getData,"on-page-size-change":e.handleChangeSize}})],1),a("Modal",{attrs:{title:"冲突行详情",width:"1200px",scrollable:!0,draggable:!0},model:{value:e.detailModal,callback:function(t){e.detailModal=t},expression:"detailModal"}},[a("div",{style:{padding:"1px 1px",height:"100%"}},[a("Card",[a("div",{staticClass:"ivu-list-item-meta-title"},[e._v("冲突行提交结果： "),a("Button",{attrs:{loading:e.modalLoading,size:"small",type:0==e.logDetail.result?"success":"error"}},[e._v(" "+e._s(e.logDetail.resultStr)+" ")])],1),a("div",{staticClass:"ivu-list-item-meta-title"},[e._v("冲突行数据一致性比较结果： "),a("Tooltip",{attrs:{content:"数据一致性比对忽略字段过滤的列"}},[a("Button",{attrs:{loading:e.modalLoading,size:"small",type:1==e.logDetail.recordEqual?"success":"warning"}},[e._v(" "+e._s(e.logDetail.diffStr)+" ")])],1)],1),a("Divider"),a("div",{staticClass:"ivu-list-item-meta-title"},[e._v("源机房("+e._s(e.logDetail.srcRegion)+")")]),e._l(e.logDetail.srcRecords,(function(t,r){return a("Card",{key:r},[a("div",{staticClass:"ivu-list-item-meta-title"},[e._v("表名："+e._s(t.tableName)+" "),a("Tooltip",{attrs:{content:1==t.doubleSync?"双向同步":"单向同步"}},[a("Button",{attrs:{size:"small",type:1==t.doubleSync?"success":"primary"}},[e._v(" "+e._s(1==t.doubleSync?"双向同步":"单向同步")+" ")])],1)],1),a("Table",{attrs:{loading:e.modalLoading,size:"small",columns:t.columns,data:t.records,border:""}})],1)})),a("Divider"),a("div",{staticClass:"ivu-list-item-meta-title"},[e._v("目标机房("+e._s(e.logDetail.dstRegion)+")")]),e._l(e.logDetail.dstRecords,(function(t,r){return a("Card",{key:r},[a("div",{staticClass:"ivu-list-item-meta-title"},[e._v("表名："+e._s(t.tableName)+" "),a("Tooltip",{attrs:{content:1==t.doubleSync?"双向同步":"单向同步"}},[a("Button",{attrs:{size:"small",type:1==t.doubleSync?"success":"primary"}},[e._v(" "+e._s(1==t.doubleSync?"双向同步":"单向同步")+" ")])],1)],1),a("Table",{attrs:{loading:e.modalLoading,size:"small",columns:t.columns,data:t.records,border:""}})],1)})),a("Divider"),a("Card",[a("codemirror",{attrs:{options:e.options},model:{value:e.rowData,callback:function(t){e.rowData=t},expression:"rowData"}})],1)],2)],1)]),a("Modal",{attrs:{title:"数据一致性比对结果",width:"800px"},model:{value:e.compareModal,callback:function(t){e.compareModal=t},expression:"compareModal"}},[this.rowLogIds.length>0?a("div",{staticClass:"ivu-list-item-meta-title"},[e._v("存在数据比对不一致的冲突行，点击查询 "),a("Tooltip",{attrs:{content:"冲突行仅限当前页面"}},[a("Button",{attrs:{size:"middle",type:"success"},on:{click:e.getUnEqualRecords}},[e._v("冲突行")])],1)],1):e._e(),a("Table",{attrs:{stripe:"",border:"",loading:e.compareLoading,columns:e.compareData.columns,data:e.compareData.compareRowRecords}})],1)],1)},n=[],i=a("53ca"),o=a("c7eb"),s=a("1da1"),l=(a("d81d"),a("4ec9"),a("a9e3"),a("d3b7"),a("ac1f"),a("3ca3"),a("5319"),a("159b"),a("ddb0"),a("8f94")),c=(a("0f7c"),a("ffda"),{name:"conflictRowsLog",props:{gtid:String,beginHandleTime:String,endHandleTime:String,searchMode:Boolean},components:{codemirror:l["codemirror"]},data:function(){var e=this;return{compareModal:!1,multiData:[],detailModal:!1,compareEqualLoading:!1,modalLoading:!1,compareLoading:!1,rowLogIds:[],compareData:{compareRowRecords:[],columns:[{title:"表名",key:"tableName"},{title:"比对结果",key:"recordIsEqual",render:function(e,t){var a=t.row,r=a.recordIsEqual?"blue":"warning",n=a.recordIsEqual?"数据一致":"数据不一致";return e("Tag",{props:{color:r}},n)}}]},logDetail:{srcRecords:[],dstRecords:[],srcRegion:"",dstRegion:"",result:null,resultStr:"",hasDiff:null,recordEqual:null,diffStr:"",rowData:""},regions:[],editable:!1,dataLoading:!1,countLoading:!1,queryParam:{srcRegion:this.$route.query.srcRegion,dstRegion:this.$route.query.dstRegion,dbName:this.$route.query.dbName,tableName:this.$route.query.tableName,rowResult:this.$route.query.rowResult?Number(this.$route.query.rowResult):null,brief:this.$route.query.brief?Number(this.$route.query.brief):null,gtid:this.gtid,likeSearch:!0===this.$route.query.likeSearch||"true"===this.$route.query.likeSearch,beginHandleTime:this.$route.query.beginTime?new Date(Number(this.$route.query.beginTime)):this.beginHandleTime,endHandleTime:this.$route.query.endTime?new Date(Number(this.$route.query.endTime)):this.endHandleTime},tableData:[],columns:[{type:"selection",width:60,align:"center"},{title:"同步方向",key:"region",width:160,render:function(e,t){var a=t.row,r="blue",n=a.srcRegion+" -> "+a.dstRegion;return e("Tag",{props:{color:r}},n)}},{title:"表名",key:"tableName",width:250,tooltip:!0,render:function(e,t){var a=t.row,r=a.dbName+"."+a.tableName;return e("div",r)}},{title:"原始sql",key:"rawSql",tooltip:!0},{title:"冲突处理sql",key:"handleSql",tooltip:!0},{title:"提交时间",key:"handleTime",width:180,sortable:!0},{title:"执行结果",key:"rowResult",width:150,align:"center",render:function(e,t){var a=t.row,r=0===a.rowResult?"blue":"volcano",n=0===a.rowResult?"commit":"rollBack";return e("Tag",{props:{color:r}},n)}},{title:"数据是否一致",key:"recordIsEqual",width:150,align:"center",renderHeader:function(t,a){return t("span",[t("span","数据比对"),t("Button",{on:{click:function(){var t=Object(s["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.compareRecordEqual();case 2:case"end":return t.stop()}}),t)})));function a(){return t.apply(this,arguments)}return a}()},props:{loading:e.compareEqualLoading,size:"small",shape:"circle",type:"default",icon:"md-refresh"}})])},render:function(e,t){var a,r,n=t.row;return!0===n.recordIsEqual?(a="success",r="一致"):!1===n.recordIsEqual&&(a="warning",r="不一致"),e("Tag",{props:{color:a}},r)}},{title:"操作",slot:"action",width:165,align:"center"}],total:0,current:1,size:10,pageSizeOpts:[10,20,50,100],resultOpts:[{name:"commit",val:0},{name:"rollBack",val:1}],briefOpts:[{name:"有日志",val:0},{name:"无日志",val:1}],options:{value:"",mode:"text/x-mysql",theme:"ambiance",lineWrapping:!0,height:100,readOnly:!0,lineNumbers:!0}}},methods:{resetPath:function(){this.searchMode?this.$router.replace({query:{gtid:this.queryParam.gtid,rowResult:this.queryParam.rowResult,beginTime:new Date(this.queryParam.beginHandleTime).getTime(),endTime:new Date(this.queryParam.endHandleTime).getTime()}}):this.$router.replace({query:{srcRegion:this.queryParam.srcRegion,dstRegion:this.queryParam.dstRegion,dbName:this.queryParam.dbName,tableName:this.queryParam.tableName,rowResult:this.queryParam.rowResult,brief:this.queryParam.brief,likeSearch:this.queryParam.likeSearch,beginTime:new Date(this.queryParam.beginHandleTime).getTime(),endTime:new Date(this.queryParam.endHandleTime).getTime()}})},searchModeChange:function(){this.queryParam.gtid=null},compareRecordEqual:function(){var e=this,t=[];0!==this.tableData.length&&(this.tableData.forEach((function(e){return t.push(e.conflictRowsLogId)})),this.compareEqualLoading=!0,this.axios.get("/api/drc/v2/log/conflict/compare?conflictRowLogIds="+t).then((function(t){if(1===t.data.status)e.$Message.error({content:"数据比对失败! "+t.data.message,duration:5});else{var a=t.data.data,r=new Map(a.map((function(e){return[e.rowLogId,e.recordIsEqual]})));e.tableData.forEach((function(e){e.recordIsEqual=r.get(e.conflictRowsLogId)}))}})).finally((function(){e.compareEqualLoading=!1})))},compareRecords:function(){var e=this,t=this.multiData;if(void 0!==t&&null!==t&&0!==t.length){this.compareLoading=!0,this.compareModal=!0;var a=[];t.forEach((function(e){return a.push(e.conflictRowsLogId)})),this.axios.get("/api/drc/v2/log/conflict/records/compare?conflictRowLogIds="+a).then((function(t){if(1===t.data.status)e.compareData.compareRowRecords=[],e.$Message.error({content:"数据比对失败! "+t.data.message,duration:5});else{var a=t.data.data;e.compareData.compareRowRecords=a.recordDetailList,e.rowLogIds=[],a.rowLogIds.forEach((function(t){return e.rowLogIds.push(t)}))}})).finally((function(){e.compareLoading=!1}))}else this.$Message.warning("请勾选！")},getLogDetails:function(){var e=this,t=this.multiData;if(void 0!==t&&null!==t&&0!==t.length){var a=[],r=t[0];t.forEach((function(e){return a.push(e.conflictRowsLogId)})),this.axios.get("/api/drc/v2/log/conflict/rows/check?conflictRowLogIds="+a).then((function(t){if(1===t.data.status)e.$Message.error(t.data.message);else{var n=e.$router.resolve({path:"/conflictLogDetail",query:{queryType:"1",rowLogIds:a,srcRegion:r.srcRegion,dstRegion:r.dstRegion}});window.open(n.href,"_blank")}}))}else this.$Message.warning("请勾选！")},dbBlacklist:function(){var e=this.$router.resolve({path:"/dbBlacklist"});window.open(e.href,"_blank")},changeSelection:function(e){this.multiData=e,console.log(this.multiData)},getLogDetail1:function(e,t){var a=this;this.modalLoading=!0,this.detailModal=!0,this.logDetail.result=e.rowResult,this.logDetail.resultStr=0===e.rowResult?"commit":"rollBack",this.logDetail.srcRegion=e.srcRegion,this.logDetail.dstRegion=e.dstRegion,this.logDetail.srcRecords=[],this.logDetail.dstRecords=[],this.rowData="",this.axios.get("/api/drc/v2/log/conflict/row/record?conflictRowLogId="+e.conflictRowsLogId+"&columnSize=12").then((function(t){if(1===t.data.status)a.$Message.error({content:"查询失败! "+t.data.message,duration:5}),a.logDetail.recordEqual=!1,a.logDetail.diffStr="数据比对失败",a.logDetail.srcRecords=[],a.logDetail.dstRecords=[];else{var r=t.data.data;a.logDetail.recordEqual=r.recordIsEqual,a.logDetail.diffStr=r.recordIsEqual?"数据一致":"数据不一致",a.logDetail.srcRecords=r.srcRecords,a.logDetail.dstRecords=r.dstRecords,a.rowData="/*原始SQL*/\n"+e.rawSql+"\n/*原始SQL处理结果: "+e.rawSqlResult+"*/\n\n/*冲突时行记录*/\n"+e.dstRowRecord+"\n\n/*冲突处理SQL*/\n"+e.handleSql+"\n/*冲突处理SQL处理结果: "+e.handleSqlResult+"*/"}})).finally((function(){a.modalLoading=!1}))},getRegions:function(){var e=this;this.axios.get("/api/drc/v2/meta/regions/all").then((function(t){e.regions=t.data.data}))},queryTrxLog:function(e,t){this.$emit("tabValueChanged","trxLog"),this.$emit("gtidChanged",e.gtid),this.$emit("beginHandleTimeChanged",this.queryParam.beginHandleTime),this.$emit("endHandleTimeChanged",this.queryParam.endHandleTime)},getUnEqualRecords:function(){var e=this;this.multiData=[],this.compareModal=!1,this.dataLoading=!0,this.axios.get("/api/drc/v2/log/conflict/rows/rowLogIds?rowLogIds="+this.rowLogIds).then((function(t){var a=t.data;1===a.status?e.$Message.error("查询失败"):(e.tableData=a.data,e.total=a.data.length,e.current=1,e.tableData=a.data,0===e.total?e.$Message.warning("查询结果为空"):(e.compareRecordEqual(),e.$Message.success("以下冲突行数据对比不一致")))})).finally((function(){e.dataLoading=!1}))},getTotalData:function(){this.getData(),this.getCount()},getCount:function(){var e=this,t=this.queryParam.beginHandleTime,a=this.queryParam.endHandleTime,r=new Date(t).getTime(),n=new Date(a).getTime();if(!isNaN(r)&&!isNaN(n)){console.log("beginTime: "+t),console.log("endTime: "+a);var i={gtid:this.queryParam.gtid,dbName:this.queryParam.dbName,tableName:this.queryParam.tableName,rowResult:this.queryParam.rowResult,srcRegion:this.queryParam.srcRegion,dstRegion:this.queryParam.dstRegion,beginHandleTime:r,endHandleTime:n,likeSearch:this.queryParam.likeSearch,brief:this.queryParam.brief,pageReq:{pageSize:this.size,pageIndex:this.current}};this.countLoading=!0;var o=this.flattenObj(i);this.axios.get("/api/drc/v2/log/conflict/rows/count",{params:o}).then((function(t){var a=t.data;0===a.status&&(e.total=a.data)})).finally((function(){e.countLoading=!1}))}},getData:function(){var e=this;this.resetPath(),this.multiData=[],this.compareData.compareRowRecords=[],this.rowLogIds=[];var t=this.queryParam.beginHandleTime,a=this.queryParam.endHandleTime,r=new Date(t).getTime(),n=new Date(a).getTime();if(isNaN(r)||isNaN(n))this.$Message.warning("请选择时间范围!");else{console.log("beginTime: "+t),console.log("endTime: "+a);var i={gtid:this.queryParam.gtid,dbName:this.queryParam.dbName,tableName:this.queryParam.tableName,rowResult:this.queryParam.rowResult,srcRegion:this.queryParam.srcRegion,dstRegion:this.queryParam.dstRegion,beginHandleTime:r,endHandleTime:n,likeSearch:this.queryParam.likeSearch,brief:this.queryParam.brief,pageReq:{pageSize:this.size,pageIndex:this.current}};console.log("params"),console.log(i);var o=this.flattenObj(i);this.dataLoading=!0,this.axios.get("/api/drc/v2/log/conflict/rows",{params:o}).then((function(t){var a=t.data,r=a.pageReq;1===a.status?e.$Message.error(a.message):0===a.data.length?(e.current=1,e.tableData=a.data,e.$Message.warning("查询结果为空")):(e.current=r.pageIndex,e.tableData=a.data,e.$Message.success("查询成功"),e.compareRecordEqual())})).finally((function(){e.dataLoading=!1}))}},flattenObj:function(e){var t={};for(var a in e)if("object"!==Object(i["a"])(e[a])||Array.isArray(e[a]))t[a]=e[a];else{var r=this.flattenObj(e[a]);for(var n in r)t[a+"."+n]=r[n]}return t},resetParam:function(){this.queryParam={dbName:null,tableName:null,gtId:null,beginHandleTime:new Date((new Date).setSeconds(0,0)-6e5),endHandleTime:new Date((new Date).setSeconds(0,0)+6e4),rowResult:null,srcRegion:null,dstRegion:null},this.rowLogIds=[]},handleChangeSize:function(e){var t=this;this.size=e,this.$nextTick((function(){t.getData()}))}},created:function(){this.getTotalData(),this.getRegions()}}),u=c,d=(a("f889"),a("2877")),g=Object(d["a"])(u,r,n,!1,null,null,null);t["default"]=g.exports},6566:function(e,t,a){"use strict";var r=a("9bf2").f,n=a("7c73"),i=a("e2cc"),o=a("0366"),s=a("19aa"),l=a("2266"),c=a("7dd0"),u=a("2626"),d=a("83ab"),g=a("f183").fastKey,f=a("69f3"),m=f.set,p=f.getterFor;e.exports={getConstructor:function(e,t,a,c){var u=e((function(e,r){s(e,u,t),m(e,{type:t,index:n(null),first:void 0,last:void 0,size:0}),d||(e.size=0),void 0!=r&&l(r,e[c],e,a)})),f=p(t),h=function(e,t,a){var r,n,i=f(e),o=v(e,t);return o?o.value=a:(i.last=o={index:n=g(t,!0),key:t,value:a,previous:r=i.last,next:void 0,removed:!1},i.first||(i.first=o),r&&(r.next=o),d?i.size++:e.size++,"F"!==n&&(i.index[n]=o)),e},v=function(e,t){var a,r=f(e),n=g(t);if("F"!==n)return r.index[n];for(a=r.first;a;a=a.next)if(a.key==t)return a};return i(u.prototype,{clear:function(){var e=this,t=f(e),a=t.index,r=t.first;while(r)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),delete a[r.index],r=r.next;t.first=t.last=void 0,d?t.size=0:e.size=0},delete:function(e){var t=this,a=f(t),r=v(t,e);if(r){var n=r.next,i=r.previous;delete a.index[r.index],r.removed=!0,i&&(i.next=n),n&&(n.previous=i),a.first==r&&(a.first=n),a.last==r&&(a.last=i),d?a.size--:t.size--}return!!r},forEach:function(e){var t,a=f(this),r=o(e,arguments.length>1?arguments[1]:void 0,3);while(t=t?t.next:a.first){r(t.value,t.key,this);while(t&&t.removed)t=t.previous}},has:function(e){return!!v(this,e)}}),i(u.prototype,a?{get:function(e){var t=v(this,e);return t&&t.value},set:function(e,t){return h(this,0===e?0:e,t)}}:{add:function(e){return h(this,e=0===e?0:e,e)}}),d&&r(u.prototype,"size",{get:function(){return f(this).size}}),u},setStrong:function(e,t,a){var r=t+" Iterator",n=p(t),i=p(r);c(e,t,(function(e,t){m(this,{type:r,target:e,state:n(e),kind:t,last:void 0})}),(function(){var e=i(this),t=e.kind,a=e.last;while(a&&a.removed)a=a.previous;return e.target&&(e.last=a=a?a.next:e.state.first)?"keys"==t?{value:a.key,done:!1}:"values"==t?{value:a.value,done:!1}:{value:[a.key,a.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),a?"entries":"values",!a,!0),u(t)}}},"6d61":function(e,t,a){"use strict";var r=a("23e7"),n=a("da84"),i=a("94ca"),o=a("6eeb"),s=a("f183"),l=a("2266"),c=a("19aa"),u=a("861d"),d=a("d039"),g=a("1c7e"),f=a("d44e"),m=a("7156");e.exports=function(e,t,a){var p=-1!==e.indexOf("Map"),h=-1!==e.indexOf("Weak"),v=p?"set":"add",y=n[e],b=y&&y.prototype,w=y,x={},R=function(e){var t=b[e];o(b,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(h&&!u(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return h&&!u(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(h&&!u(e))&&t.call(this,0===e?0:e)}:function(e,a){return t.call(this,0===e?0:e,a),this})};if(i(e,"function"!=typeof y||!(h||b.forEach&&!d((function(){(new y).entries().next()})))))w=a.getConstructor(t,e,p,v),s.REQUIRED=!0;else if(i(e,!0)){var q=new w,D=q[v](h?{}:-0,1)!=q,P=d((function(){q.has(1)})),k=g((function(e){new y(e)})),E=!h&&d((function(){var e=new y,t=5;while(t--)e[v](t,t);return!e.has(-0)}));k||(w=t((function(t,a){c(t,w,e);var r=m(new y,t,w);return void 0!=a&&l(a,r[v],r,p),r})),w.prototype=b,b.constructor=w),(P||E)&&(R("delete"),R("has"),p&&R("get")),(E||D)&&R(v),h&&b.clear&&delete b.clear}return x[e]=w,r({global:!0,forced:w!=y},x),f(w,e),h||a.setStrong(w,e,p),w}},7156:function(e,t,a){var r=a("861d"),n=a("d2bb");e.exports=function(e,t,a){var i,o;return n&&"function"==typeof(i=t.constructor)&&i!==a&&r(o=i.prototype)&&o!==a.prototype&&n(e,o),e}},"8aa5":function(e,t,a){"use strict";var r=a("6547").charAt;e.exports=function(e,t,a){return t+(a?r(e,t).length:1)}},9263:function(e,t,a){"use strict";var r=a("ad6d"),n=a("9f7f"),i=RegExp.prototype.exec,o=String.prototype.replace,s=i,l=function(){var e=/a/,t=/b*/g;return i.call(e,"a"),i.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),c=n.UNSUPPORTED_Y||n.BROKEN_CARET,u=void 0!==/()??/.exec("")[1],d=l||u||c;d&&(s=function(e){var t,a,n,s,d=this,g=c&&d.sticky,f=r.call(d),m=d.source,p=0,h=e;return g&&(f=f.replace("y",""),-1===f.indexOf("g")&&(f+="g"),h=String(e).slice(d.lastIndex),d.lastIndex>0&&(!d.multiline||d.multiline&&"\n"!==e[d.lastIndex-1])&&(m="(?: "+m+")",h=" "+h,p++),a=new RegExp("^(?:"+m+")",f)),u&&(a=new RegExp("^"+m+"$(?!\\s)",f)),l&&(t=d.lastIndex),n=i.call(g?a:d,h),g?n?(n.input=n.input.slice(p),n[0]=n[0].slice(p),n.index=d.lastIndex,d.lastIndex+=n[0].length):d.lastIndex=0:l&&n&&(d.lastIndex=d.global?n.index+n[0].length:t),u&&n&&n.length>1&&o.call(n[0],a,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(n[s]=void 0)})),n}),e.exports=s},"9f7f":function(e,t,a){"use strict";var r=a("d039");function n(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=r((function(){var e=n("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=r((function(){var e=n("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},a9e3:function(e,t,a){"use strict";var r=a("83ab"),n=a("da84"),i=a("94ca"),o=a("6eeb"),s=a("5135"),l=a("c6b6"),c=a("7156"),u=a("c04e"),d=a("d039"),g=a("7c73"),f=a("241c").f,m=a("06cf").f,p=a("9bf2").f,h=a("58a8").trim,v="Number",y=n[v],b=y.prototype,w=l(g(b))==v,x=function(e){var t,a,r,n,i,o,s,l,c=u(e,!1);if("string"==typeof c&&c.length>2)if(c=h(c),t=c.charCodeAt(0),43===t||45===t){if(a=c.charCodeAt(2),88===a||120===a)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:r=2,n=49;break;case 79:case 111:r=8,n=55;break;default:return+c}for(i=c.slice(2),o=i.length,s=0;s<o;s++)if(l=i.charCodeAt(s),l<48||l>n)return NaN;return parseInt(i,r)}return+c};if(i(v,!y(" 0o1")||!y("0b1")||y("+0x1"))){for(var R,q=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof q&&(w?d((function(){b.valueOf.call(a)})):l(a)!=v)?c(new y(x(t)),a,q):x(t)},D=r?f(y):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),P=0;D.length>P;P++)s(y,R=D[P])&&!s(q,R)&&p(q,R,m(y,R));q.prototype=b,b.constructor=q,o(n,v,q)}},ac1f:function(e,t,a){"use strict";var r=a("23e7"),n=a("9263");r({target:"RegExp",proto:!0,forced:/./.exec!==n},{exec:n})},ad6d:function(e,t,a){"use strict";var r=a("825a");e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},bb2f:function(e,t,a){var r=a("d039");e.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},d784:function(e,t,a){"use strict";a("ac1f");var r=a("6eeb"),n=a("d039"),i=a("b622"),o=a("9263"),s=a("9112"),l=i("species"),c=!n((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),u=function(){return"$0"==="a".replace(/./,"$0")}(),d=i("replace"),g=function(){return!!/./[d]&&""===/./[d]("a","$0")}(),f=!n((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var a="ab".split(e);return 2!==a.length||"a"!==a[0]||"b"!==a[1]}));e.exports=function(e,t,a,d){var m=i(e),p=!n((function(){var t={};return t[m]=function(){return 7},7!=""[e](t)})),h=p&&!n((function(){var t=!1,a=/a/;return"split"===e&&(a={},a.constructor={},a.constructor[l]=function(){return a},a.flags="",a[m]=/./[m]),a.exec=function(){return t=!0,null},a[m](""),!t}));if(!p||!h||"replace"===e&&(!c||!u||g)||"split"===e&&!f){var v=/./[m],y=a(m,""[e],(function(e,t,a,r,n){return t.exec===o?p&&!n?{done:!0,value:v.call(t,a,r)}:{done:!0,value:e.call(a,t,r)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:g}),b=y[0],w=y[1];r(String.prototype,e,b),r(RegExp.prototype,m,2==t?function(e,t){return w.call(e,this,t)}:function(e){return w.call(e,this)})}d&&s(RegExp.prototype[m],"sham",!0)}},d81d:function(e,t,a){"use strict";var r=a("23e7"),n=a("b727").map,i=a("1dde"),o=a("ae40"),s=i("map"),l=o("map");r({target:"Array",proto:!0,forced:!s||!l},{map:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},f057:function(e,t,a){},f183:function(e,t,a){var r=a("d012"),n=a("861d"),i=a("5135"),o=a("9bf2").f,s=a("90e3"),l=a("bb2f"),c=s("meta"),u=0,d=Object.isExtensible||function(){return!0},g=function(e){o(e,c,{value:{objectID:"O"+ ++u,weakData:{}}})},f=function(e,t){if(!n(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,c)){if(!d(e))return"F";if(!t)return"E";g(e)}return e[c].objectID},m=function(e,t){if(!i(e,c)){if(!d(e))return!0;if(!t)return!1;g(e)}return e[c].weakData},p=function(e){return l&&h.REQUIRED&&d(e)&&!i(e,c)&&g(e),e},h=e.exports={REQUIRED:!1,fastKey:f,getWeakData:m,onFreeze:p};r[c]=!0},f889:function(e,t,a){"use strict";a("f057")}}]);
//# sourceMappingURL=chunk-385c8951.1102bebf.js.map