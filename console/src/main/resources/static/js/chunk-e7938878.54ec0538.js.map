{"version":3,"sources":["webpack:///./src/views/v2/meta/dbDrcBuildV2.vue?a779","webpack:///./src/views/v2/meta/buildStep/drcBuildV2.vue?e129","webpack:///src/views/v2/meta/buildStep/drcBuildV2.vue","webpack:///./src/views/v2/meta/buildStep/drcBuildV2.vue?9470","webpack:///./src/views/v2/meta/buildStep/drcBuildV2.vue?5a5b","webpack:///./src/views/v2/meta/dbDrcBuildV2.vue?6b78","webpack:///./src/components/v2/dbDrcBuild/tables.vue?7f5d","webpack:///./src/components/v2/dbDrcBuild/dbReplicationConfig.vue?1d64","webpack:///src/components/v2/dbDrcBuild/dbReplicationConfig.vue","webpack:///./src/components/v2/dbDrcBuild/dbReplicationConfig.vue?2f3b","webpack:///./src/components/v2/dbDrcBuild/dbReplicationConfig.vue","webpack:///src/components/v2/dbDrcBuild/tables.vue","webpack:///./src/components/v2/dbDrcBuild/tables.vue?af3c","webpack:///./src/components/v2/dbDrcBuild/tables.vue","webpack:///./src/components/v2/dbDrcBuild/mhaReplicationPanel.vue?92fc","webpack:///./src/components/v2/dbDrcBuild/mhaDbReplicationPanel.vue?367b","webpack:///src/components/v2/dbDrcBuild/mhaDbReplicationPanel.vue","webpack:///./src/components/v2/dbDrcBuild/mhaDbReplicationPanel.vue?a6a7","webpack:///./src/components/v2/dbDrcBuild/mhaDbReplicationPanel.vue","webpack:///src/components/v2/dbDrcBuild/mhaReplicationPanel.vue","webpack:///./src/components/v2/dbDrcBuild/mhaReplicationPanel.vue?aa73","webpack:///./src/components/v2/dbDrcBuild/mhaReplicationPanel.vue","webpack:///src/views/v2/meta/dbDrcBuildV2.vue","webpack:///./src/views/v2/meta/dbDrcBuildV2.vue?df9b","webpack:///./src/views/v2/meta/dbDrcBuildV2.vue?7197","webpack:///./src/views/v2/meta/buildStep/drcBuildV2.vue?b815"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticStyle","attrs","status","_v","_s","title","domProps","message","slot","_e","ref","srcBuildParam","ruleDrc","on","changeSrcMha","model","value","callback","$$v","$set","expression","key","replicatorInstanceInfo","src","_l","replicatorList","item","ip","az","getRole","autoConfigSrcReplicator","querySrcMhaMachineGtid","testSuccess1","querySrcMhaGtidCheckRes","getSrcDbReplications","getSrcDbApplierReplications","dstBuildParam","changeDstMha","dst","autoConfigDstReplicator","queryDstMhaMachineGtid","testSuccess2","queryDstMhaGtidCheckRes","getDstDbReplications","getDstDbApplierReplications","$event","preCheckConfigure","submitConfig","reviewModal","minRows","maxRows","resultModal","result","gtidCheck","resVo","staticRenderFns","name","props","srcMhaName","String","dstMhaName","srcDc","dstDc","env","data","hasResp","hasTest1","hasTest2","mhaName","replicatorIps","replicatorInitGtid","srcBuildData","dbApplierDtos","dstBuildData","modal","mha","legal","configGtid","purgedGtid","oldClusterName","newClusterName","replicator","applier","computed","dataWithPage","methods","flattenObj","i","ob","j","temp","axios","get","then","console","log","response","forEach","getSrcMhaResources","getDstMhaResources","getSrcMhaReplicatorsInUse","getDstMhaReplicatorsInUse","getReplicatorInstances","params","param","ips","join","instances","isSrc","getMhaDbAppliersInUse","that","alert","currentInstances","length","getSrcDc","getDstDc","$emit","start","$Loading","finish","error","changeModal","$refs","validate","valid","reviewConfigure","drc","post","$router","push","path","query","order","handleChangeSize","size","val","hasAppliers","refresh","created","component","style","margin","position","staticClass","padding","background","zIndex","formItem","meta","fixDb","getExistDb","dataLoading","selectDb","option","index","dbName","afterSelectExistReplication","selectedExistReplication","items","srcRegionName","dstRegionName","goToCreateReplication","createModal","existReplicationRegionOptions","drcConfig","logicTableSummaryDtos","configDataLoading","dbNames","getDrcConfig","mhaReplications","height","columns","tableData","scopedSlots","_u","fn","row","goToUpdateConfig","goToDeleteConfig","goToInsertConfig","actionTitle","editModal","selectedRow","srcRegion","dstRegion","action","finishConfig","formAction","alertInfo","proxy","type","indexOf","_k","keyCode","preventDefault","afterEnterTableName","switch","commonColumnLoading","getCommonColumns","rowsFilterCreateParam","constants","rowsFilter","mode","configInTripUid","fetchModeChange","k","v","handleCreateColumn","handleCreateSoaServiceCode","handleCreateSoaServiceName","columnsFilterCreateParam","colsFilter","tableName","buildMode","Number","buttonTypeMap","submitAll","buttonTextMap","components","FORM_ACTION_OPTION","CREATE","EDIT","DELETE","configData","Array","emits","rowsFilterId","colsFilterId","dbReplicationIds","originLogicTableConfig","rowsFilterCreateParamInit","columnsFilterCreateParamInit","regionsChosen","filterMode","JAVA_REGEX","TRIP_UDL","AVIATOR_REGEX","TRIP_UDL_UID","CUSTOM_SOA","fetchMode","RPC","BlackList","WhiteList","BlackList_Global","modes","regionsForChose","drcStrategyIdsForChose","fetchModeForChose","columnsForChose","serviceCodeForChose","serviceNameForChose","checkTableDataList","table","dbMhaTableLoading","dbMhaTableColumn","dbMhaTablePage","total","current","pageSizeOpts","dbTableLoading","dbTableColumn","dbTablePage","show","successShow","Map","successSubmit","getParams","buName","tag","gtidConfigurable","gtidInit","tblsFilterDetail","tableNames","getEditParams","logicTableConfig","logicTable","useTripUdlOrUidMode","fillContextByRegion","context","openRowsFilterConfig","openColsFilterConfig","contains","undefined","drcStrategyId","routeStrategyId","udlColumns","illegalArgument","preCheckTablePage","includes","useCustomSoaMode","hasUdlColumn","hasUidColumn","showUdlConfigDetail","hasUdlLegalConfig","hasUidLegalConfig","showUidConfigDetail","Boolean","actionTitleMap","open","replication","srcMha","dstMha","openModal","openDetailModal","refInFor","dcName","mhaDbReplications","goToSwitchAppliers","mhaReplication","mhaApplierDto","mhaColumns","delayDataLoading","showModal","$Message","info","replicationIds","getDelay","getMhaDelay","$Modal","confirm","content","loading","onOk","switchAppliers","getSwitchParams","map","mhaDbReplication","fill","$route","regionOptions","dbOptions","resetPath","replace"],"mappings":"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","file":"js/chunk-e7938878.54ec0538.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dbDrcBuildV2.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.hasResp)?_c('Alert',{staticStyle:{\"width\":\"65%\",\"margin-left\":\"250px\"},attrs:{\"type\":_vm.status,\"show-icon\":\"\"}},[_vm._v(\" \"+_vm._s(_vm.title)+\" \"),_c('span',{attrs:{\"slot\":\"desc\"},domProps:{\"innerHTML\":_vm._s(_vm.message)},slot:\"desc\"})]):_vm._e(),_c('Row',[_c('i-col',{attrs:{\"span\":\"12\"}},[_c('Form',{ref:\"drc1\",staticStyle:{\"float\":\"left\",\"margin-top\":\"50px\"},attrs:{\"model\":_vm.srcBuildParam,\"rules\":_vm.ruleDrc,\"label-width\":200}},[_c('FormItem',{staticStyle:{\"width\":\"600px\"},attrs:{\"label\":\"源集群名\",\"prop\":\"srcMhaName\"}},[_c('Input',{attrs:{\"placeholder\":\"请输入源集群名\"},on:{\"input\":_vm.changeSrcMha},model:{value:(_vm.srcBuildParam.mhaName),callback:function ($$v) {_vm.$set(_vm.srcBuildParam, \"mhaName\", $$v)},expression:\"srcBuildParam.mhaName\"}})],1),_c('FormItem',{attrs:{\"label\":\"选择Replicator\",\"prop\":\"replicator\"}},[_c('Select',{key:_vm.replicatorInstanceInfo.src,staticStyle:{\"width\":\"300px\"},attrs:{\"multiple\":\"\",\"placeholder\":\"选择源集群Replicator\"},model:{value:(_vm.srcBuildParam.replicatorIps),callback:function ($$v) {_vm.$set(_vm.srcBuildParam, \"replicatorIps\", $$v)},expression:\"srcBuildParam.replicatorIps\"}},_vm._l((_vm.replicatorList.src),function(item){return _c('Option',{key:item.ip,attrs:{\"value\":item.ip}},[_vm._v(_vm._s(item.ip)+\" — \"+_vm._s(item.az)+\" \"+_vm._s(_vm.getRole(item.ip, _vm.replicatorInstanceInfo.src))+\" \")])}),1),_vm._v(\"   \"),_c('Button',{attrs:{\"type\":\"success\"},on:{\"click\":_vm.autoConfigSrcReplicator}},[_vm._v(\"自动录入\")])],1),_c('FormItem',{staticStyle:{\"width\":\"600px\"},attrs:{\"label\":\"初始拉取位点R\"}},[_c('Input',{attrs:{\"placeholder\":\"变更replicator机器时,请输入binlog拉取位点\"},model:{value:(_vm.srcBuildParam.replicatorInitGtid),callback:function ($$v) {_vm.$set(_vm.srcBuildParam, \"replicatorInitGtid\", $$v)},expression:\"srcBuildParam.replicatorInitGtid\"}}),_c('Row',[_c('Col',{attrs:{\"span\":\"12\"}},[_c('Button',{on:{\"click\":_vm.querySrcMhaMachineGtid}},[_vm._v(\"查询mha位点\")]),(_vm.hasTest1)?_c('span',[_c('Icon',{attrs:{\"type\":_vm.testSuccess1 ? 'ios-checkmark-circle' : 'ios-close-circle',\"color\":_vm.testSuccess1 ? 'green' : 'red'}}),_vm._v(\" \"+_vm._s(_vm.testSuccess1 ? '查询实时位点成功' : '连接查询失败')+\" \")],1):_vm._e()],1),_c('Col',{attrs:{\"span\":\"12\"}},[_c('Button',{attrs:{\"type\":\"success\"},on:{\"click\":_vm.querySrcMhaGtidCheckRes}},[_vm._v(\"位点校验\")])],1)],1)],1),_c('FormItem',{staticStyle:{\"width\":\"600px\"},attrs:{\"label\":\"同步配置\"}},[_c('Button',{attrs:{\"type\":\"primary\",\"ghost\":\"\"},on:{\"click\":_vm.getSrcDbReplications}},[_vm._v(\"同步表管理\")])],1),_c('FormItem',{staticStyle:{\"width\":\"600px\"},attrs:{\"label\":\"DB Applier 配置\"}},[_c('Button',{attrs:{\"type\":\"primary\",\"ghost\":\"\"},on:{\"click\":_vm.getSrcDbApplierReplications}},[_vm._v(\"Db Applier 管理\")])],1)],1)],1),_c('i-col',{attrs:{\"span\":\"12\"}},[_c('Form',{ref:\"drc1\",staticStyle:{\"float\":\"left\",\"margin-top\":\"50px\"},attrs:{\"model\":_vm.dstBuildParam,\"rules\":_vm.ruleDrc,\"label-width\":200}},[_c('FormItem',{staticStyle:{\"width\":\"600px\"},attrs:{\"label\":\"目标集群名\",\"prop\":\"dstMhaName\"}},[_c('Input',{attrs:{\"placeholder\":\"请输入目标集群名\"},on:{\"input\":_vm.changeDstMha},model:{value:(_vm.dstBuildParam.mhaName),callback:function ($$v) {_vm.$set(_vm.dstBuildParam, \"mhaName\", $$v)},expression:\"dstBuildParam.mhaName\"}})],1),_c('FormItem',{attrs:{\"label\":\"选择Replicator\",\"prop\":\"replicator\"}},[_c('Select',{key:_vm.replicatorInstanceInfo.dst,staticStyle:{\"width\":\"300px\"},attrs:{\"multiple\":\"\",\"placeholder\":\"选择目标集群Replicator\"},model:{value:(_vm.dstBuildParam.replicatorIps),callback:function ($$v) {_vm.$set(_vm.dstBuildParam, \"replicatorIps\", $$v)},expression:\"dstBuildParam.replicatorIps\"}},_vm._l((_vm.replicatorList.dst),function(item){return _c('Option',{key:item.ip,attrs:{\"value\":item.ip}},[_vm._v(_vm._s(item.ip)+\" — \"+_vm._s(item.az)+\" \"+_vm._s(_vm.getRole(item.ip, _vm.replicatorInstanceInfo.dst))+\" \")])}),1),_vm._v(\"   \"),_c('Button',{attrs:{\"type\":\"success\"},on:{\"click\":_vm.autoConfigDstReplicator}},[_vm._v(\"自动录入\")])],1),_c('FormItem',{staticStyle:{\"width\":\"600px\"},attrs:{\"label\":\"初始拉取位点R\"}},[_c('Input',{attrs:{\"placeholder\":\"变更replicator机器时,请输入binlog拉取位点\"},model:{value:(_vm.dstBuildParam.replicatorInitGtid),callback:function ($$v) {_vm.$set(_vm.dstBuildParam, \"replicatorInitGtid\", $$v)},expression:\"dstBuildParam.replicatorInitGtid\"}}),_c('Row',[_c('Col',{attrs:{\"span\":\"12\"}},[_c('Button',{on:{\"click\":_vm.queryDstMhaMachineGtid}},[_vm._v(\"查询mha位点\")]),(_vm.hasTest2)?_c('span',[_c('Icon',{attrs:{\"type\":_vm.testSuccess2 ? 'ios-checkmark-circle' : 'ios-close-circle',\"color\":_vm.testSuccess2 ? 'green' : 'red'}}),_vm._v(\" \"+_vm._s(_vm.testSuccess2 ? '查询实时位点成功' : '连接查询失败')+\" \")],1):_vm._e()],1),_c('Col',{attrs:{\"span\":\"12\"}},[_c('Button',{attrs:{\"type\":\"success\"},on:{\"click\":_vm.queryDstMhaGtidCheckRes}},[_vm._v(\"位点校验\")])],1)],1)],1),_c('FormItem',{staticStyle:{\"width\":\"600px\"},attrs:{\"label\":\"同步配置\"}},[_c('Button',{attrs:{\"type\":\"primary\",\"ghost\":\"\"},on:{\"click\":_vm.getDstDbReplications}},[_vm._v(\"同步表管理\")])],1),_c('FormItem',{staticStyle:{\"width\":\"600px\"},attrs:{\"label\":\"DB Applier 配置\"}},[_c('Button',{attrs:{\"type\":\"primary\",\"ghost\":\"\"},on:{\"click\":_vm.getDstDbApplierReplications}},[_vm._v(\"Db Applier 管理\")])],1)],1)],1)],1),_c('Form',{staticStyle:{\"margin-top\":\"50px\"},attrs:{\"label-width\":250}},[_c('FormItem',[_c('br'),_c('Button',{staticStyle:{\"width\":\"100px\"},attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.preCheckConfigure ()}}},[_vm._v(\"提交\")])],1),_c('Modal',{attrs:{\"title\":\"确认配置信息\",\"width\":\"900px\"},on:{\"on-ok\":_vm.submitConfig},model:{value:(_vm.reviewModal),callback:function ($$v) {_vm.reviewModal=$$v},expression:\"reviewModal\"}},[_c('Row',{attrs:{\"gutter\":5}},[_c('i-col',{attrs:{\"span\":\"12\"}},[_c('Form',{staticStyle:{\"width\":\"80%\"}},[_c('FormItem',{attrs:{\"label\":\"源集群名\"}},[_c('Input',{attrs:{\"type\":\"textarea\",\"autosize\":{minRows: 1,maxRows: 30},\"readonly\":\"\"},model:{value:(_vm.srcBuildParam.mhaName),callback:function ($$v) {_vm.$set(_vm.srcBuildParam, \"mhaName\", $$v)},expression:\"srcBuildParam.mhaName\"}})],1),_c('FormItem',{attrs:{\"label\":\"源集群端Replicator\"}},[_c('Input',{attrs:{\"type\":\"textarea\",\"autosize\":{minRows: 1,maxRows: 30},\"readonly\":\"\"},model:{value:(_vm.srcBuildParam.replicatorIps),callback:function ($$v) {_vm.$set(_vm.srcBuildParam, \"replicatorIps\", $$v)},expression:\"srcBuildParam.replicatorIps\"}})],1),_c('FormItem',{attrs:{\"label\":\"源集群端R位点\"}},[_c('Input',{attrs:{\"type\":\"textarea\",\"autosize\":{minRows: 1,maxRows: 30},\"readonly\":\"\"},model:{value:(_vm.srcBuildParam.replicatorInitGtid),callback:function ($$v) {_vm.$set(_vm.srcBuildParam, \"replicatorInitGtid\", $$v)},expression:\"srcBuildParam.replicatorInitGtid\"}})],1)],1)],1),_c('i-col',{attrs:{\"span\":\"12\"}},[_c('Form',{staticStyle:{\"width\":\"80%\"}},[_c('FormItem',{attrs:{\"label\":\"目标集群名\"}},[_c('Input',{attrs:{\"type\":\"textarea\",\"autosize\":{minRows: 1,maxRows: 30},\"readonly\":\"\"},model:{value:(_vm.dstBuildParam.mhaName),callback:function ($$v) {_vm.$set(_vm.dstBuildParam, \"mhaName\", $$v)},expression:\"dstBuildParam.mhaName\"}})],1),_c('FormItem',{attrs:{\"label\":\"目标集群端Replicator\"}},[_c('Input',{attrs:{\"type\":\"textarea\",\"autosize\":{minRows: 1,maxRows: 30},\"readonly\":\"\"},model:{value:(_vm.dstBuildParam.replicatorIps),callback:function ($$v) {_vm.$set(_vm.dstBuildParam, \"replicatorIps\", $$v)},expression:\"dstBuildParam.replicatorIps\"}})],1),_c('FormItem',{attrs:{\"label\":\"目标集群端R位点\"}},[_c('Input',{attrs:{\"type\":\"textarea\",\"autosize\":{minRows: 1,maxRows: 30},\"readonly\":\"\"},model:{value:(_vm.dstBuildParam.replicatorInitGtid),callback:function ($$v) {_vm.$set(_vm.dstBuildParam, \"replicatorInitGtid\", $$v)},expression:\"dstBuildParam.replicatorInitGtid\"}})],1)],1)],1)],1)],1),_c('Modal',{attrs:{\"title\":\"配置结果\",\"width\":\"1200px\"},model:{value:(_vm.resultModal),callback:function ($$v) {_vm.resultModal=$$v},expression:\"resultModal\"}},[_c('Form',{staticStyle:{\"width\":\"100%\"}},[_c('FormItem',{attrs:{\"label\":\"集群配置\"}},[_c('Input',{attrs:{\"type\":\"textarea\",\"autosize\":{minRows: 1,maxRows: 30},\"readonly\":\"\"},model:{value:(_vm.result),callback:function ($$v) {_vm.result=$$v},expression:\"result\"}})],1)],1)],1),_c('Modal',{attrs:{\"title\":\"gitd位点校验结果\",\"width\":\"900px\"},model:{value:(_vm.gtidCheck.modal),callback:function ($$v) {_vm.$set(_vm.gtidCheck, \"modal\", $$v)},expression:\"gtidCheck.modal\"}},[_c('Form',{staticStyle:{\"width\":\"80%\"}},[_c('FormItem',{attrs:{\"label\":\"校验结果\"}},[_c('Input',{attrs:{\"type\":\"textarea\",\"autosize\":{minRows: 1,maxRows: 30},\"readonly\":\"\"},model:{value:(_vm.gtidCheck.resVo.legal),callback:function ($$v) {_vm.$set(_vm.gtidCheck.resVo, \"legal\", $$v)},expression:\"gtidCheck.resVo.legal\"}})],1),_c('FormItem',{attrs:{\"label\":\"当前Mha\"}},[_c('Input',{attrs:{\"autosize\":{minRows: 1,maxRows: 30},\"readonly\":\"\"},model:{value:(_vm.gtidCheck.resVo.mha),callback:function ($$v) {_vm.$set(_vm.gtidCheck.resVo, \"mha\", $$v)},expression:\"gtidCheck.resVo.mha\"}})],1),_c('FormItem',{attrs:{\"label\":\"配置位点\"}},[_c('Input',{attrs:{\"type\":\"textarea\",\"autosize\":{minRows: 1,maxRows: 30},\"readonly\":\"\"},model:{value:(_vm.gtidCheck.resVo.configGtid),callback:function ($$v) {_vm.$set(_vm.gtidCheck.resVo, \"configGtid\", $$v)},expression:\"gtidCheck.resVo.configGtid\"}})],1),_c('FormItem',{attrs:{\"label\":\"purgedGtid\"}},[_c('Input',{attrs:{\"type\":\"textarea\",\"autosize\":{minRows: 1,maxRows: 30},\"readonly\":\"\"},model:{value:(_vm.gtidCheck.resVo.purgedGtid),callback:function ($$v) {_vm.$set(_vm.gtidCheck.resVo, \"purgedGtid\", $$v)},expression:\"gtidCheck.resVo.purgedGtid\"}})],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template v-if=\"current === 0\" :key=\"0\">\r\n  <div>\r\n    <Alert :type=\"status\" show-icon v-if=\"hasResp\" style=\"width: 65%; margin-left: 250px\">\r\n      {{title}}\r\n      <span slot=\"desc\" v-html=\"message\"></span>\r\n    </Alert>\r\n    <Row>\r\n      <i-col span=\"12\">\r\n        <Form ref=\"drc1\" :model=\"srcBuildParam\" :rules=\"ruleDrc\" :label-width=\"200\"\r\n              style=\"float: left; margin-top: 50px\">\r\n          <FormItem label=\"源集群名\" prop=\"srcMhaName\" style=\"width: 600px\">\r\n            <Input v-model=\"srcBuildParam.mhaName\" @input=\"changeSrcMha\" placeholder=\"请输入源集群名\"/>\r\n          </FormItem>\r\n          <FormItem label=\"选择Replicator\" prop=\"replicator\">\r\n            <Select v-model=\"srcBuildParam.replicatorIps\" multiple style=\"width: 300px\" :key=\"replicatorInstanceInfo.src\" placeholder=\"选择源集群Replicator\">\r\n              <Option v-for=\"item in replicatorList.src\" :value=\"item.ip\" :key=\"item.ip\">{{ item.ip }} — {{ item.az }}\r\n                {{getRole(item.ip, replicatorInstanceInfo.src)}}\r\n              </Option>\r\n            </Select>\r\n            &nbsp;\r\n            <Button type=\"success\" @click=\"autoConfigSrcReplicator\">自动录入</Button>\r\n          </FormItem>\r\n          <FormItem label=\"初始拉取位点R\" style=\"width: 600px\">\r\n            <Input v-model=\"srcBuildParam.replicatorInitGtid\" placeholder=\"变更replicator机器时,请输入binlog拉取位点\"/>\r\n            <Row>\r\n              <Col span=\"12\">\r\n                <Button @click=\"querySrcMhaMachineGtid\">查询mha位点</Button>\r\n                <span v-if=\"hasTest1\">\r\n                  <Icon :type=\"testSuccess1 ? 'ios-checkmark-circle' : 'ios-close-circle'\"\r\n                        :color=\"testSuccess1 ? 'green' : 'red'\"/>\r\n                    {{ testSuccess1 ? '查询实时位点成功' : '连接查询失败' }}\r\n                </span>\r\n              </Col>\r\n              <Col span=\"12\">\r\n                <Button type=\"success\" @click=\"querySrcMhaGtidCheckRes\">位点校验</Button>\r\n              </Col>\r\n            </Row>\r\n          </FormItem>\r\n          <FormItem label=\"同步配置\" style=\"width: 600px\">\r\n            <Button type=\"primary\" ghost @click=\"getSrcDbReplications\">同步表管理</Button>\r\n          </FormItem>\r\n          <FormItem label=\"DB Applier 配置\"  style=\"width: 600px\">\r\n            <Button type=\"primary\" ghost @click=\"getSrcDbApplierReplications\">Db Applier 管理</Button>\r\n          </FormItem>\r\n        </Form>\r\n      </i-col>\r\n      <i-col span=\"12\">\r\n        <Form ref=\"drc1\" :model=\"dstBuildParam\" :rules=\"ruleDrc\" :label-width=\"200\"\r\n              style=\"float: left; margin-top: 50px\">\r\n          <FormItem label=\"目标集群名\" prop=\"dstMhaName\" style=\"width: 600px\">\r\n            <Input v-model=\"dstBuildParam.mhaName\" @input=\"changeDstMha\" placeholder=\"请输入目标集群名\"/>\r\n          </FormItem>\r\n          <FormItem label=\"选择Replicator\" prop=\"replicator\">\r\n            <Select v-model=\"dstBuildParam.replicatorIps\" multiple style=\"width: 300px\" :key=\"replicatorInstanceInfo.dst\" placeholder=\"选择目标集群Replicator\">\r\n              <Option v-for=\"item in replicatorList.dst\" :value=\"item.ip\" :key=\"item.ip\">{{ item.ip }} — {{ item.az }}\r\n                {{getRole(item.ip, replicatorInstanceInfo.dst)}}\r\n              </Option>\r\n            </Select>\r\n            &nbsp;\r\n            <Button type=\"success\" @click=\"autoConfigDstReplicator\">自动录入</Button>\r\n          </FormItem>\r\n          <FormItem label=\"初始拉取位点R\" style=\"width: 600px\">\r\n            <Input v-model=\"dstBuildParam.replicatorInitGtid\" placeholder=\"变更replicator机器时,请输入binlog拉取位点\"/>\r\n            <Row>\r\n              <Col span=\"12\">\r\n                <Button @click=\"queryDstMhaMachineGtid\">查询mha位点</Button>\r\n                <span v-if=\"hasTest2\">\r\n                  <Icon :type=\"testSuccess2 ? 'ios-checkmark-circle' : 'ios-close-circle'\"\r\n                        :color=\"testSuccess2 ? 'green' : 'red'\"/>\r\n                    {{ testSuccess2 ? '查询实时位点成功' : '连接查询失败' }}\r\n                </span>\r\n              </Col>\r\n              <Col span=\"12\">\r\n                <Button type=\"success\" @click=\"queryDstMhaGtidCheckRes\">位点校验</Button>\r\n              </Col>\r\n            </Row>\r\n          </FormItem>\r\n          <FormItem label=\"同步配置\" style=\"width: 600px\">\r\n            <Button type=\"primary\" ghost @click=\"getDstDbReplications\">同步表管理</Button>\r\n          </FormItem>\r\n          <FormItem label=\"DB Applier 配置\" style=\"width: 600px\">\r\n            <Button type=\"primary\" ghost @click=\"getDstDbApplierReplications\">Db Applier 管理</Button>\r\n          </FormItem>\r\n        </Form>\r\n      </i-col>\r\n    </Row>\r\n    <Form :label-width=\"250\" style=\"margin-top: 50px\">\r\n      <FormItem>\r\n        <br>\r\n        <Button type=\"primary\" style=\"width: 100px\" @click=\"preCheckConfigure ()\">提交</Button>\r\n      </FormItem>\r\n      <Modal\r\n        v-model=\"reviewModal\"\r\n        title=\"确认配置信息\"\r\n        width=\"900px\"\r\n        @on-ok=\"submitConfig\">\r\n        <Row :gutter=\"5\">\r\n          <i-col span=\"12\">\r\n            <Form style=\"width: 80%\">\r\n              <FormItem label=\"源集群名\">\r\n                <Input type=\"textarea\" :autosize=\"{minRows: 1,maxRows: 30}\" v-model=\"srcBuildParam.mhaName\" readonly/>\r\n              </FormItem>\r\n              <FormItem label=\"源集群端Replicator\">\r\n                <Input type=\"textarea\" :autosize=\"{minRows: 1,maxRows: 30}\" v-model=\"srcBuildParam.replicatorIps\"\r\n                       readonly/>\r\n              </FormItem>\r\n              <FormItem label=\"源集群端R位点\">\r\n                <Input type=\"textarea\" :autosize=\"{minRows: 1,maxRows: 30}\" v-model=\"srcBuildParam.replicatorInitGtid\"\r\n                       readonly/>\r\n              </FormItem>\r\n            </Form>\r\n          </i-col>\r\n          <i-col span=\"12\">\r\n            <Form style=\"width: 80%\">\r\n              <FormItem label=\"目标集群名\">\r\n                <Input type=\"textarea\" :autosize=\"{minRows: 1,maxRows: 30}\" v-model=\"dstBuildParam.mhaName\" readonly/>\r\n              </FormItem>\r\n              <FormItem label=\"目标集群端Replicator\">\r\n                <Input type=\"textarea\" :autosize=\"{minRows: 1,maxRows: 30}\" v-model=\"dstBuildParam.replicatorIps\"\r\n                       readonly/>\r\n              </FormItem>\r\n              <FormItem label=\"目标集群端R位点\">\r\n                <Input type=\"textarea\" :autosize=\"{minRows: 1,maxRows: 30}\" v-model=\"dstBuildParam.replicatorInitGtid\"\r\n                       readonly/>\r\n              </FormItem>\r\n            </Form>\r\n          </i-col>\r\n        </Row>\r\n      </Modal>\r\n      <Modal\r\n        v-model=\"resultModal\"\r\n        title=\"配置结果\"\r\n        width=\"1200px\">\r\n        <Form style=\"width: 100%\">\r\n          <FormItem label=\"集群配置\">\r\n            <Input type=\"textarea\" :autosize=\"{minRows: 1,maxRows: 30}\" v-model=\"result\" readonly/>\r\n          </FormItem>\r\n        </Form>\r\n      </Modal>\r\n      <Modal\r\n        v-model=\"gtidCheck.modal\"\r\n        title=\"gitd位点校验结果\"\r\n        width=\"900px\">\r\n        <Form style=\"width: 80%\">\r\n          <FormItem label=\"校验结果\">\r\n            <Input type=\"textarea\" :autosize=\"{minRows: 1,maxRows: 30}\" v-model=\"gtidCheck.resVo.legal\" readonly/>\r\n          </FormItem>\r\n          <FormItem label=\"当前Mha\">\r\n            <Input :autosize=\"{minRows: 1,maxRows: 30}\" v-model=\"gtidCheck.resVo.mha\" readonly/>\r\n          </FormItem>\r\n          <FormItem label=\"配置位点\">\r\n            <Input type=\"textarea\" :autosize=\"{minRows: 1,maxRows: 30}\" v-model=\"gtidCheck.resVo.configGtid\" readonly/>\r\n          </FormItem>\r\n          <FormItem label=\"purgedGtid\">\r\n            <Input type=\"textarea\" :autosize=\"{minRows: 1,maxRows: 30}\" v-model=\"gtidCheck.resVo.purgedGtid\" readonly/>\r\n          </FormItem>\r\n        </Form>\r\n      </Modal>\r\n    </Form>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  name: 'drcBuildV2',\r\n  props: {\r\n    srcMhaName: String,\r\n    dstMhaName: String,\r\n    srcDc: String,\r\n    dstDc: String,\r\n    env: String\r\n  },\r\n  data () {\r\n    return {\r\n      result: '',\r\n      status: '',\r\n      title: '',\r\n      message: '',\r\n      hasResp: false,\r\n      hasTest1: false,\r\n      testSuccess1: false,\r\n      hasTest2: false,\r\n      testSuccess2: false,\r\n      reviewModal: false,\r\n      resultModal: false,\r\n      replicatorList: {\r\n        src: [],\r\n        dst: []\r\n      },\r\n      srcBuildParam: {\r\n        mhaName: this.srcMhaName,\r\n        replicatorIps: [],\r\n        replicatorInitGtid: ''\r\n      },\r\n      srcBuildData: {\r\n        dbApplierDtos: []\r\n      },\r\n      dstBuildParam: {\r\n        mhaName: this.dstMhaName,\r\n        replicatorIps: [],\r\n        replicatorInitGtid: ''\r\n      },\r\n      replicatorInstanceInfo: {\r\n        src: [],\r\n        dst: []\r\n      },\r\n      dstBuildData: {\r\n        dbApplierDtos: []\r\n      },\r\n      gtidCheck: {\r\n        modal: false,\r\n        resVo: {\r\n          mha: '',\r\n          legal: '',\r\n          configGtid: '',\r\n          purgedGtid: ''\r\n        }\r\n      },\r\n      ruleDrc: {\r\n        oldClusterName: [\r\n          { required: true, message: '源集群名不能为空', trigger: 'blur' }\r\n        ],\r\n        newClusterName: [\r\n          { required: true, message: '新集群名不能为空', trigger: 'blur' }\r\n        ],\r\n        env: [\r\n          { required: true, message: '环境不能为空', trigger: 'blur' }\r\n        ],\r\n        replicator: [\r\n          { required: true, message: 'replicator不能为空', trigger: 'blur' }\r\n        ],\r\n        applier: [\r\n          { required: true, message: 'applier不能为空', trigger: 'blur' }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    dataWithPage () {\r\n      const data = this.nameFilterCheck.tableData\r\n      const start = this.nameFilterCheck.current * this.nameFilterCheck.size - this.nameFilterCheck.size\r\n      const end = start + this.nameFilterCheck.size\r\n      return [...data].slice(start, end)\r\n    }\r\n  },\r\n  methods: {\r\n    flattenObj (ob) {\r\n      const result = {}\r\n      for (const i in ob) {\r\n        if ((typeof ob[i]) === 'object' && !Array.isArray(ob[i])) {\r\n          const temp = this.flattenObj(ob[i])\r\n          for (const j in temp) {\r\n            result[i + '.' + j] = temp[j]\r\n          }\r\n        } else {\r\n          result[i] = ob[i]\r\n        }\r\n      }\r\n      return result\r\n    },\r\n    autoConfigSrcReplicator () {\r\n      // const param = {\r\n      //   mhaName: this.srcBuildParam.mhaName,\r\n      //   type: 0,\r\n      //   selectIps: this.srcBuildParam.replicatorIps\r\n      // }\r\n      // const reqParam = this.flattenObj(param)\r\n      this.axios.get('/api/drc/v2/resource/mha/auto?mhaName=' + this.srcBuildParam.mhaName + '&type=0' + '&selectedIps=' + this.srcBuildParam.replicatorIps).then(response => {\r\n        console.log(response.data)\r\n        this.srcBuildParam.replicatorIps = []\r\n        response.data.data.forEach(ip => this.srcBuildParam.replicatorIps.push(ip.ip))\r\n      })\r\n    },\r\n    autoConfigDstReplicator () {\r\n      this.axios.get('/api/drc/v2/resource/mha/auto?mhaName=' + this.dstBuildParam.mhaName + '&type=0' + '&selectedIps=' + this.dstBuildParam.replicatorIps)\r\n        .then(response => {\r\n          console.log(response.data)\r\n          this.dstBuildParam.replicatorIps = []\r\n          response.data.data.forEach(ip => this.dstBuildParam.replicatorIps.push(ip.ip))\r\n        })\r\n    },\r\n    getSrcMhaResources () {\r\n      this.axios.get('/api/drc/v2/resource/mha/all?mhaName=' + this.srcBuildParam.mhaName + '&type=0')\r\n        .then(response => {\r\n          console.log(response.data)\r\n          this.replicatorList.src = response.data.data\r\n        })\r\n    },\r\n    getDstMhaResources () {\r\n      this.axios.get('/api/drc/v2/resource/mha/all?mhaName=' + this.dstBuildParam.mhaName + '&type=0')\r\n        .then(response => {\r\n          console.log(response.data)\r\n          this.replicatorList.dst = response.data.data\r\n        })\r\n    },\r\n    getSrcMhaReplicatorsInUse () {\r\n      this.axios.get('/api/drc/v2/mha/replicator?mhaName=' + this.srcBuildParam.mhaName)\r\n        .then(response => {\r\n          this.srcBuildParam.replicatorIps = response.data.data\r\n          this.getReplicatorInstances(true)\r\n        })\r\n    },\r\n    getDstMhaReplicatorsInUse () {\r\n      this.axios.get('/api/drc/v2/mha/replicator?mhaName=' + this.dstBuildParam.mhaName)\r\n        .then(response => {\r\n          console.log(response.data)\r\n          this.dstBuildParam.replicatorIps = response.data.data\r\n          this.getReplicatorInstances(false)\r\n        })\r\n    },\r\n    getReplicatorInstances (isSrc) {\r\n      const param = isSrc ? this.srcBuildParam : this.dstBuildParam\r\n      this.axios.get('/api/drc/v2/remote/resource/replicatorInstances', {\r\n        params: {\r\n          mhaName: param.mhaName,\r\n          ips: param.replicatorIps.join(',')\r\n        }\r\n      }).then(response => {\r\n        const instances = response.data.data\r\n        console.log('replicator instance: ', instances)\r\n        isSrc ? this.replicatorInstanceInfo.src = instances : this.replicatorInstanceInfo.dst = instances\r\n      })\r\n    },\r\n    getMhaDbAppliersInUse () {\r\n      this.axios.get('/api/drc/v2/config/mha/dbApplier?srcMhaName=' + this.dstBuildParam.mhaName + '&dstMhaName=' + this.srcBuildParam.mhaName)\r\n        .then(response => {\r\n          console.log(response.data)\r\n          this.srcBuildData.dbApplierDtos = response.data.data\r\n        })\r\n      this.axios.get('/api/drc/v2/config/mha/dbApplier?srcMhaName=' + this.srcBuildParam.mhaName + '&dstMhaName=' + this.dstBuildParam.mhaName)\r\n        .then(response => {\r\n          console.log(response.data)\r\n          this.dstBuildData.dbApplierDtos = response.data.data\r\n        })\r\n    },\r\n    querySrcMhaMachineGtid () {\r\n      const that = this\r\n      that.axios.get('/api/drc/v2/mha/gtid/executed?mha=' + this.srcBuildParam.mhaName)\r\n        .then(response => {\r\n          this.hasTest1 = true\r\n          if (response.data.status === 0) {\r\n            this.srcBuildParam.replicatorInitGtid = response.data.data\r\n            this.testSuccess1 = true\r\n          } else {\r\n            this.testSuccess1 = false\r\n          }\r\n        })\r\n    },\r\n    querySrcMhaGtidCheckRes () {\r\n      if (this.srcBuildParam.replicatorInitGtid == null || this.srcBuildParam.replicatorInitGtid === '') {\r\n        alert('位点为空！')\r\n        return\r\n      }\r\n      const that = this\r\n      that.axios.get('/api/drc/v2/mha/gtid/checkResult?mha=' + this.srcBuildParam.mhaName +\r\n        '&configGtid=' + this.srcBuildParam.replicatorInitGtid)\r\n        .then(response => {\r\n          if (response.data.status === 0) {\r\n            this.gtidCheck.resVo = {\r\n              mha: this.srcBuildParam.mhaName,\r\n              legal: response.data.data.legal === true ? '合理位点' : 'binlog已经被purge',\r\n              configGtid: this.srcBuildParam.replicatorInitGtid,\r\n              purgedGtid: response.data.data.purgedGtid\r\n            }\r\n            this.gtidCheck.modal = true\r\n          } else {\r\n            alert('位点校验失败!')\r\n          }\r\n        })\r\n    },\r\n    queryDstMhaMachineGtid () {\r\n      const that = this\r\n      that.axios.get('/api/drc/v2/mha/gtid/executed?mha=' + this.dstBuildParam.mhaName)\r\n        .then(response => {\r\n          this.hasTest2 = true\r\n          if (response.data.status === 0) {\r\n            this.dstBuildParam.replicatorInitGtid = response.data.data\r\n            this.testSuccess2 = true\r\n          } else {\r\n            this.testSuccess2 = false\r\n          }\r\n        })\r\n    },\r\n    getRole (ip, currentInstances) {\r\n      if (!currentInstances || currentInstances.length === 0) {\r\n        return ''\r\n      }\r\n      for (const instance of currentInstances) {\r\n        if (instance.ip === ip) {\r\n          return ' — ' + (instance.master ? 'Master' : 'Slave')\r\n        }\r\n      }\r\n      return ''\r\n    },\r\n    queryDstMhaGtidCheckRes () {\r\n      if (this.dstBuildParam.replicatorInitGtid == null || this.dstBuildParam.replicatorInitGtid === '') {\r\n        alert('位点为空！')\r\n        return\r\n      }\r\n      const that = this\r\n      that.axios.get('/api/drc/v2/mha/gtid/checkResult?mha=' + this.dstBuildParam.mhaName +\r\n        '&configGtid=' + this.dstBuildParam.replicatorInitGtid)\r\n        .then(response => {\r\n          if (response.data.status === 0) {\r\n            this.gtidCheck.resVo = {\r\n              mha: this.dstBuildParam.mhaName,\r\n              legal: response.data.data.legal === true ? '合理位点' : 'binlog已经被purge',\r\n              configGtid: this.dstBuildParam.replicatorInitGtid,\r\n              purgedGtid: response.data.data.purgedGtid\r\n            }\r\n            this.gtidCheck.modal = true\r\n          } else {\r\n            alert('位点校验失败!')\r\n          }\r\n        })\r\n    },\r\n    getSrcDc () {\r\n      this.axios.get('/api/drc/v2/mha/dc?mhaName=' + this.srcBuildParam.mhaName)\r\n        .then(response => {\r\n          this.srcDc = response.data.data\r\n        })\r\n    },\r\n    getDstDc () {\r\n      this.axios.get('/api/drc/v2/mha/dc?mhaName=' + this.dstBuildParam.mhaName)\r\n        .then(response => {\r\n          this.dstDc = response.data.data\r\n        })\r\n    },\r\n    changeSrcMha () {\r\n      this.$emit('srcMhaNameChanged', this.srcBuildParam.mhaName)\r\n      this.getSrcMhaResources()\r\n      this.getSrcMhaReplicatorsInUse()\r\n      this.getMhaDbAppliersInUse()\r\n      this.getSrcDc()\r\n    },\r\n    changeDstMha () {\r\n      this.$emit('dstMhaNameChanged', this.dstBuildParam.mhaName)\r\n      this.getDstMhaResources()\r\n      this.getDstMhaReplicatorsInUse()\r\n      this.getMhaDbAppliersInUse()\r\n      this.getDstDc()\r\n    },\r\n    start () {\r\n      this.$Loading.start()\r\n    },\r\n    finish () {\r\n      this.$Loading.finish()\r\n    },\r\n    error () {\r\n      this.$Loading.error()\r\n    },\r\n    changeModal (name) {\r\n      this.$refs[name].validate((valid) => {\r\n        if (!valid) {\r\n          this.$Message.error('仍有必填项未填!')\r\n        } else {\r\n          this.drc.reviewModal = true\r\n        }\r\n      })\r\n    },\r\n    preCheckConfigure () {\r\n      this.reviewModal = true\r\n    },\r\n    reviewConfigure () {\r\n      this.drc.reviewModal = true\r\n    },\r\n    submitConfig () {\r\n      const that = this\r\n      this.axios.post('/api/drc/v2/config/', {\r\n        srcBuildParam: this.srcBuildParam,\r\n        dstBuildParam: this.dstBuildParam\r\n      }).then(response => {\r\n        console.log(response.data)\r\n        that.result = response.data\r\n        that.reviewModal = false\r\n        that.resultModal = true\r\n        this.refresh()\r\n      })\r\n    },\r\n    getSrcDbReplications () {\r\n      this.$router.push({\r\n        path: '/dbTables',\r\n        query: {\r\n          srcMhaName: this.dstBuildParam.mhaName,\r\n          dstMhaName: this.srcBuildParam.mhaName,\r\n          srcDc: this.dstDc,\r\n          dstDc: this.srcDc,\r\n          order: true\r\n        }\r\n      })\r\n    },\r\n    getDstDbReplications () {\r\n      this.$router.push({\r\n        path: '/dbTables',\r\n        query: {\r\n          srcMhaName: this.srcBuildParam.mhaName,\r\n          dstMhaName: this.dstBuildParam.mhaName,\r\n          srcDc: this.srcDc,\r\n          dstDc: this.dstDc,\r\n          order: true\r\n        }\r\n      })\r\n    },\r\n    getSrcDbApplierReplications () {\r\n      this.$router.push({\r\n        path: '/dbAppliers',\r\n        query: {\r\n          srcMhaName: this.dstBuildParam.mhaName,\r\n          dstMhaName: this.srcBuildParam.mhaName,\r\n          srcDc: this.dstDc,\r\n          dstDc: this.srcDc,\r\n          order: true\r\n        }\r\n      })\r\n    },\r\n    getDstDbApplierReplications () {\r\n      this.$router.push({\r\n        path: '/dbAppliers',\r\n        query: {\r\n          srcMhaName: this.srcBuildParam.mhaName,\r\n          dstMhaName: this.dstBuildParam.mhaName,\r\n          srcDc: this.srcDc,\r\n          dstDc: this.dstDc,\r\n          order: true\r\n        }\r\n      })\r\n    },\r\n    handleChangeSize (val) {\r\n      this.size = val\r\n    },\r\n    hasAppliers (dbApplierDtos) {\r\n      for (const x of dbApplierDtos) {\r\n        if (x.ips && x.ips.length > 0) {\r\n          return true\r\n        }\r\n      }\r\n      return false\r\n    },\r\n    refresh () {\r\n      this.getSrcMhaReplicatorsInUse()\r\n      this.getDstMhaReplicatorsInUse()\r\n      this.getMhaDbAppliersInUse()\r\n      this.getSrcDc()\r\n      this.getDstDc()\r\n    }\r\n  },\r\n  created () {\r\n    this.getSrcMhaResources()\r\n    this.getDstMhaResources()\r\n    this.refresh()\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n.demo-split {\r\n  height: 200px;\r\n  border: 1px solid #dcdee2;\r\n}\r\n\r\n.demo-split-pane {\r\n  padding: 10px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./drcBuildV2.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./drcBuildV2.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./drcBuildV2.vue?vue&type=template&id=64534762&scoped=true&v-if=current%20%3D%3D%3D%200&%3Akey=0&\"\nimport script from \"./drcBuildV2.vue?vue&type=script&lang=js&\"\nexport * from \"./drcBuildV2.vue?vue&type=script&lang=js&\"\nimport style0 from \"./drcBuildV2.vue?vue&type=style&index=0&id=64534762&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"64534762\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('base-component',[_c('Breadcrumb',{style:({margin: '15px 0 15px 185px', position: 'fixed'})},[_c('BreadcrumbItem',{attrs:{\"to\":\"/home\"}},[_vm._v(\"首页\")]),_c('BreadcrumbItem',{attrs:{\"to\":\"/v2/mhaDbReplications\"}},[_vm._v(\"DB 复制链路\")]),_c('BreadcrumbItem',[_vm._v(\"DRC-DB 配置\")])],1),_c('Content',{staticClass:\"content\",style:({padding: '10px', background: '#ffffff', margin: '50px 0 111px 185px', zIndex: '1'})},[_c('Row',{attrs:{\"gutter\":10,\"align\":\"middle\"}},[_c('Col',{attrs:{\"span\":\"18\"}},[_c('Form',{staticStyle:{\"margin-right\":\"20px\",\"margin-top\":\"10px\"},attrs:{\"model\":_vm.formItem,\"label-width\":100}},[_c('FormItem',{attrs:{\"label\":\"数据库\",\"required\":true}},[_c('Select',{attrs:{\"filterable\":\"\",\"disabled\":!!_vm.meta.fixDb,\"placeholder\":\"请搜索数据库信息\",\"remote-method\":_vm.getExistDb,\"loading\":_vm.dataLoading},on:{\"on-change\":_vm.selectDb},model:{value:(_vm.meta.dbName),callback:function ($$v) {_vm.$set(_vm.meta, \"dbName\", $$v)},expression:\"meta.dbName\"}},_vm._l((_vm.meta.dbOptions),function(option,index){return _c('Option',{key:index,attrs:{\"value\":option.dbName}},[_vm._v(_vm._s(option.dbName))])}),1)],1),_c('FormItem',{attrs:{\"label\":\"同步方向\",\"required\":true}},[_c('RadioGroup',{attrs:{\"button-style\":\"solid\"},on:{\"on-change\":_vm.afterSelectExistReplication},model:{value:(_vm.selectedExistReplication),callback:function ($$v) {_vm.selectedExistReplication=$$v},expression:\"selectedExistReplication\"}},_vm._l((_vm.meta.existReplicationRegionOptions),function(items){return _c('Radio',{key:items.srcRegionName+' -> '+items.dstRegionName,attrs:{\"label\":items.srcRegionName+' -> '+items.dstRegionName,\"border\":\"\"}},[_vm._v(\" \"+_vm._s(items.srcRegionName + ' -> ' + items.dstRegionName)+\" \")])}),1),_c('Button',{attrs:{\"type\":\"primary\",\"icon\":\"md-add\",\"ghost\":\"\"},on:{\"click\":_vm.goToCreateReplication}},[_vm._v(\"新增\")]),_c('Modal',{attrs:{\"width\":\"1200px\",\"footer-hide\":true,\"title\":\"创建同步\"},model:{value:(_vm.createModal.open),callback:function ($$v) {_vm.$set(_vm.createModal, \"open\", $$v)},expression:\"createModal.open\"}},[(_vm.createModal.open)?_c('mha-preview',{attrs:{\"db-name\":_vm.meta.dbName,\"replication-type\":0,\"exist-replication-region-options\":_vm.meta.existReplicationRegionOptions},on:{\"updated\":_vm.selectDb}}):_vm._e()],1)],1),_c('Divider',{attrs:{\"orientation\":\"left\"}},[_vm._v(\"同步表\")]),_c('Card',{staticStyle:{\"width\":\"100%\"}},[_c('tables',{attrs:{\"table-data\":_vm.drcConfig.logicTableSummaryDtos,\"data-loading\":_vm.configDataLoading,\"src-region\":_vm.meta.srcRegionName,\"dst-region\":_vm.meta.dstRegionName,\"db-name\":_vm.meta.dbName,\"db-names\":_vm.drcConfig.dbNames},on:{\"updated\":_vm.getDrcConfig}})],1),_c('Divider',{attrs:{\"orientation\":\"left\"}},[_vm._v(\"同步DB\")]),_c('Card',{staticStyle:{\"width\":\"100%\"}},[(_vm.drcConfig.mhaReplications)?_c('mha-replication-panel',{attrs:{\"mha-replications\":_vm.drcConfig.mhaReplications},on:{\"updated\":_vm.getDrcConfig}}):_vm._e()],1)],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{style:({padding: '1px 1px',height: '100%'})},[_c('Table',{ref:\"multipleTable\",staticStyle:{\"margin-top\":\"20px\"},attrs:{\"stripe\":\"\",\"columns\":_vm.columns,\"data\":_vm.tableData,\"loading\":_vm.dataLoading,\"border\":\"\"},scopedSlots:_vm._u([{key:\"action\",fn:function(ref){\nvar row = ref.row;\nvar index = ref.index;\nreturn [_c('Button',{staticStyle:{\"margin-right\":\"5px\"},attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.goToUpdateConfig(row, index)}}},[_vm._v(\"修改 \")]),_c('Button',{staticStyle:{\"margin-right\":\"5px\"},attrs:{\"type\":\"error\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.goToDeleteConfig(row, index)}}},[_vm._v(\"删除 \")])]}}])}),_c('br'),_c('Button',{attrs:{\"type\":\"success\",\"icon\":\"md-add\"},on:{\"click\":_vm.goToInsertConfig}},[_vm._v(\" 新增 \")]),_c('Modal',{attrs:{\"width\":\"1200px\",\"footer-hide\":true,\"title\":_vm.actionTitle},model:{value:(_vm.editModal.open),callback:function ($$v) {_vm.$set(_vm.editModal, \"open\", $$v)},expression:\"editModal.open\"}},[(_vm.editModal.open)?_c('db-replication-config',{ref:\"dbReplicationConfigComponent\",attrs:{\"config-data\":_vm.selectedRow,\"src-region\":_vm.srcRegion,\"dst-region\":_vm.dstRegion,\"db-names\":_vm.dbNames,\"form-action\":_vm.action},on:{\"finished\":_vm.finishConfig}}):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{style:({padding: '1px 1px',height: '100%'})},[_c('Row',{attrs:{\"gutter\":10,\"align\":\"middle\"}},[_c('Col',{attrs:{\"span\":\"13\"}},[_c('Form',{staticStyle:{\"margin-right\":\"20px\",\"margin-top\":\"10px\"},attrs:{\"model\":_vm.formItem,\"disabled\":_vm.formAction === 'delete',\"label-width\":100}},[(_vm.alertInfo.show)?_c('Alert',{attrs:{\"type\":\"warning\",\"show-icon\":\"\",\"closable\":\"\"},scopedSlots:_vm._u([{key:\"desc\",fn:function(){return [_vm._v(_vm._s(_vm.alertInfo.message))]},proxy:true}],null,false,3041357252)},[_vm._v(\" \"+_vm._s(_vm.alertInfo.title)+\" \")]):_vm._e(),(_vm.alertInfo.successShow)?_c('Alert',{attrs:{\"type\":\"success\",\"show-icon\":\"\",\"closable\":\"\"},scopedSlots:_vm._u([{key:\"desc\",fn:function(){return [_vm._v(_vm._s(_vm.alertInfo.message))]},proxy:true}],null,false,3041357252)},[_vm._v(\" \"+_vm._s(_vm.alertInfo.title)+\" \")]):_vm._e(),_c('FormItem',{attrs:{\"prop\":\"dbName\",\"label\":\"库名\",\"required\":true}},[_c('Input',{attrs:{\"type\":\"textarea\",\"autosize\":true,\"readonly\":true,\"border\":false,\"placeholder\":\"请输入库名（支持正则）\"},model:{value:(_vm.formItem.dbName),callback:function ($$v) {_vm.$set(_vm.formItem, \"dbName\", $$v)},expression:\"formItem.dbName\"}})],1),_c('FormItem',{attrs:{\"label\":\"同步表\",\"required\":true}},[_c('Input',{attrs:{\"placeholder\":\"请输入正则表达式\"},on:{\"on-keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"space\",32,$event.key,[\" \",\"Spacebar\"])){ return null; }$event.preventDefault();},\"on-blur\":_vm.afterEnterTableName},model:{value:(_vm.formItem.tableName),callback:function ($$v) {_vm.$set(_vm.formItem, \"tableName\", $$v)},expression:\"formItem.tableName\"}})],1),_c('FormItem',{attrs:{\"label\":\"行过滤\"}},[_c('i-switch',{attrs:{\"size\":\"large\"},scopedSlots:_vm._u([{key:\"open\",fn:function(){return [_c('span',[_vm._v(\"On\")])]},proxy:true},{key:\"close\",fn:function(){return [_c('span',[_vm._v(\"Off\")])]},proxy:true}]),model:{value:(_vm.formItem.switch.rowsFilter),callback:function ($$v) {_vm.$set(_vm.formItem.switch, \"rowsFilter\", $$v)},expression:\"formItem.switch.rowsFilter\"}})],1),(_vm.formItem.switch.rowsFilter)?_c('Card',{staticStyle:{\"margin-left\":\"100px\"},scopedSlots:_vm._u([{key:\"title\",fn:function(){return [_c('Icon',{attrs:{\"type\":\"md-settings\"}}),_vm._v(\" 行过滤配置 \"),_c('Button',{staticStyle:{\"margin-left\":\"50px\"},attrs:{\"icon\":\"ios-refresh\",\"size\":\"small\",\"type\":\"primary\",\"loading\":_vm.commonColumnLoading},on:{\"click\":_vm.getCommonColumns}},[_vm._v(\"获取公共字段 \")])]},proxy:true}],null,false,571298879)},[_c('FormItem',{attrs:{\"label\":\"模式\"}},[_c('Select',{staticStyle:{\"width\":\"200px\"},attrs:{\"placeholder\":\"选择行过滤模式\"},model:{value:(_vm.formItem.rowsFilterCreateParam.mode),callback:function ($$v) {_vm.$set(_vm.formItem.rowsFilterCreateParam, \"mode\", $$v)},expression:\"formItem.rowsFilterCreateParam.mode\"}},_vm._l((_vm.formItem.constants.rowsFilter.modes),function(item){return _c('Option',{key:item.mode,attrs:{\"value\":item.mode}},[_vm._v(\" \"+_vm._s(item.name)+\" \")])}),1)],1),(_vm.useTripUdlOrUidMode)?_c('div',[(_vm.fillContextByRegion)?_c('FormItem',{attrs:{\"label\":\"规则内容\"}},[_c('Select',{staticStyle:{\"width\":\"200px\"},attrs:{\"multiple\":\"\",\"placeholder\":\"Region 选择\"},model:{value:(_vm.formItem.rowsFilter.configInTripUid.regionsChosen),callback:function ($$v) {_vm.$set(_vm.formItem.rowsFilter.configInTripUid, \"regionsChosen\", $$v)},expression:\"formItem.rowsFilter.configInTripUid.regionsChosen\"}},_vm._l((_vm.formItem.constants.rowsFilter.regionsForChose),function(item){return _c('Option',{key:item,attrs:{\"value\":item}},[_vm._v(\" \"+_vm._s(item)+\" \")])}),1)],1):_vm._e(),(_vm.showUdlConfigDetail)?_c('div',[_c('Divider',[_vm._v(\"UDL配置\")]),_c('FormItem',{attrs:{\"label\":\"UDL字段\"}},[_c('Select',{staticStyle:{\"width\":\"200px\"},attrs:{\"filterable\":\"\",\"allow-create\":\"\",\"multiple\":\"\",\"disabled\":_vm.commonColumnLoading,\"placeholder\":\"不选默认则无UDL配置\"},model:{value:(_vm.formItem.rowsFilterCreateParam.udlColumns),callback:function ($$v) {_vm.$set(_vm.formItem.rowsFilterCreateParam, \"udlColumns\", $$v)},expression:\"formItem.rowsFilterCreateParam.udlColumns\"}},_vm._l((_vm.formItem.constants.columnsForChose),function(item){return _c('Option',{key:item,attrs:{\"value\":item}},[_vm._v(_vm._s(item)+\" \")])}),1)],1),(_vm.hasUdlColumn)?_c('FormItem',{attrs:{\"label\":\"DRC UDL策略id\"}},[_c('Select',{staticStyle:{\"width\":\"200px\"},attrs:{\"filterable\":\"\",\"allow-create\":\"\",\"placeholder\":\"请选择ucs策略id\"},model:{value:(_vm.formItem.rowsFilterCreateParam.drcStrategyId),callback:function ($$v) {_vm.$set(_vm.formItem.rowsFilterCreateParam, \"drcStrategyId\", $$v)},expression:\"formItem.rowsFilterCreateParam.drcStrategyId\"}},_vm._l((_vm.formItem.constants.rowsFilter.drcStrategyIdsForChose),function(item){return _c('Option',{key:item,attrs:{\"value\":item}},[_vm._v(_vm._s(item)+\" \")])}),1)],1):_vm._e()],1):_vm._e(),(_vm.showUidConfigDetail)?_c('div',[_c('Divider',[_vm._v(\"UID配置\")]),_c('FormItem',{attrs:{\"label\":\"UID字段\"}},[_c('Select',{staticStyle:{\"width\":\"200px\"},attrs:{\"filterable\":\"\",\"allow-create\":\"\",\"multiple\":\"\",\"disabled\":_vm.commonColumnLoading,\"placeholder\":\"不选默认则无UID配置\"},model:{value:(_vm.formItem.rowsFilterCreateParam.columns),callback:function ($$v) {_vm.$set(_vm.formItem.rowsFilterCreateParam, \"columns\", $$v)},expression:\"formItem.rowsFilterCreateParam.columns\"}},_vm._l((_vm.formItem.constants.columnsForChose),function(item){return _c('Option',{key:item,attrs:{\"value\":item}},[_vm._v(_vm._s(item)+\" \")])}),1)],1),(_vm.hasUidColumn)?_c('FormItem',{attrs:{\"label\":\"fetchMode\"}},[_c('Select',{staticStyle:{\"width\":\"200px\"},attrs:{\"placeholder\":\"选择\"},on:{\"on-change\":function($event){return _vm.fetchModeChange()}},model:{value:(_vm.formItem.rowsFilterCreateParam.fetchMode),callback:function ($$v) {_vm.$set(_vm.formItem.rowsFilterCreateParam, \"fetchMode\", $$v)},expression:\"formItem.rowsFilterCreateParam.fetchMode\"}},_vm._l((_vm.formItem.constants.rowsFilter.fetchModeForChose),function(item){return _c('Option',{key:item.k,attrs:{\"value\":item.v}},[_vm._v(\" \"+_vm._s(item.k)+\" \")])}),1)],1):_vm._e(),(_vm.hasUidColumn)?_c('FormItem',{attrs:{\"label\":\"空处理\"}},[_c('Checkbox',{model:{value:(_vm.formItem.rowsFilterCreateParam.illegalArgument),callback:function ($$v) {_vm.$set(_vm.formItem.rowsFilterCreateParam, \"illegalArgument\", $$v)},expression:\"formItem.rowsFilterCreateParam.illegalArgument\"}},[_vm._v(\"【字段为空时】同步\")])],1):_vm._e()],1):_vm._e()],1):(_vm.useCustomSoaMode)?_c('div',[_c('FormItem',{attrs:{\"label\":\"相关字段\"}},[_c('Select',{staticStyle:{\"width\":\"200px\"},attrs:{\"filterable\":\"\",\"allow-create\":\"\",\"multiple\":\"\",\"placeholder\":\"选择相关字段\"},on:{\"on-create\":_vm.handleCreateColumn},model:{value:(_vm.formItem.rowsFilterCreateParam.columns),callback:function ($$v) {_vm.$set(_vm.formItem.rowsFilterCreateParam, \"columns\", $$v)},expression:\"formItem.rowsFilterCreateParam.columns\"}},_vm._l((_vm.formItem.constants.columnsForChose),function(item){return _c('Option',{key:item,attrs:{\"value\":item,\"lable\":item}})}),1)],1),_c('FormItem',{attrs:{\"label\":\"ServiceCode\"}},[_c('Select',{staticStyle:{\"width\":\"200px\"},attrs:{\"filterable\":\"\",\"allow-create\":\"\",\"placeholder\":\"请选择soaServiceCode\"},on:{\"on-create\":_vm.handleCreateSoaServiceCode},model:{value:(_vm.formItem.rowsFilterCreateParam.drcStrategyId),callback:function ($$v) {_vm.$set(_vm.formItem.rowsFilterCreateParam, \"drcStrategyId\", $$v)},expression:\"formItem.rowsFilterCreateParam.drcStrategyId\"}},_vm._l((_vm.formItem.constants.serviceCodeForChose),function(item){return _c('Option',{key:item,attrs:{\"value\":item}},[_vm._v(_vm._s(item)+\" \")])}),1)],1),_c('FormItem',{attrs:{\"label\":\"服务名\"}},[_c('Select',{staticStyle:{\"width\":\"200px\"},attrs:{\"filterable\":\"\",\"allow-create\":\"\",\"placeholder\":\"请选择服务名\"},on:{\"on-create\":_vm.handleCreateSoaServiceName},model:{value:(_vm.formItem.rowsFilterCreateParam.context),callback:function ($$v) {_vm.$set(_vm.formItem.rowsFilterCreateParam, \"context\", $$v)},expression:\"formItem.rowsFilterCreateParam.context\"}},_vm._l((_vm.formItem.constants.serviceNameForChose),function(item){return _c('Option',{key:item,attrs:{\"value\":item}},[_vm._v(_vm._s(item)+\" \")])}),1)],1)],1):_c('div',[_c('FormItem',{attrs:{\"label\":\"规则内容\"}},[_c('Input',{staticStyle:{\"width\":\"250px\"},attrs:{\"type\":\"textarea\",\"placeholder\":\"请输入行过滤内容\"},model:{value:(_vm.formItem.rowsFilterCreateParam.context),callback:function ($$v) {_vm.$set(_vm.formItem.rowsFilterCreateParam, \"context\", $$v)},expression:\"formItem.rowsFilterCreateParam.context\"}})],1),_c('FormItem',{attrs:{\"label\":\"相关字段\"}},[_c('Select',{staticStyle:{\"width\":\"200px\"},attrs:{\"filterable\":\"\",\"allow-create\":\"\",\"multiple\":\"\",\"placeholder\":\"选择相关字段\"},model:{value:(_vm.formItem.rowsFilterCreateParam.columns),callback:function ($$v) {_vm.$set(_vm.formItem.rowsFilterCreateParam, \"columns\", $$v)},expression:\"formItem.rowsFilterCreateParam.columns\"}},_vm._l((_vm.formItem.constants.columnsForChose),function(item){return _c('Option',{key:item,attrs:{\"value\":item,\"lable\":item}})}),1)],1)],1)],1):_vm._e(),_c('FormItem',{attrs:{\"label\":\"列过滤\"}},[_c('i-switch',{attrs:{\"size\":\"large\"},scopedSlots:_vm._u([{key:\"open\",fn:function(){return [_c('span',[_vm._v(\"On\")])]},proxy:true},{key:\"close\",fn:function(){return [_c('span',[_vm._v(\"Off\")])]},proxy:true}]),model:{value:(_vm.formItem.switch.colsFilter),callback:function ($$v) {_vm.$set(_vm.formItem.switch, \"colsFilter\", $$v)},expression:\"formItem.switch.colsFilter\"}})],1),(_vm.formItem.switch.colsFilter)?_c('Card',{staticStyle:{\"margin-left\":\"100px\"},scopedSlots:_vm._u([{key:\"title\",fn:function(){return [_c('Icon',{attrs:{\"type\":\"md-settings\"}}),_vm._v(\" 列过滤配置 \"),_c('Button',{staticStyle:{\"margin-left\":\"50px\"},attrs:{\"icon\":\"ios-refresh\",\"size\":\"small\",\"type\":\"primary\",\"loading\":_vm.commonColumnLoading},on:{\"click\":_vm.getCommonColumns}},[_vm._v(\"获取公共字段 \")])]},proxy:true}],null,false,2228726756)},[_c('FormItem',{attrs:{\"label\":\"模式\"}},[_c('Select',{staticStyle:{\"width\":\"200px\"},attrs:{\"placeholder\":\"选择字段过滤模式\"},model:{value:(_vm.formItem.columnsFilterCreateParam.mode),callback:function ($$v) {_vm.$set(_vm.formItem.columnsFilterCreateParam, \"mode\", $$v)},expression:\"formItem.columnsFilterCreateParam.mode\"}},_vm._l((_vm.formItem.constants.colsFilter.modes),function(item){return _c('Option',{key:item.mode,attrs:{\"value\":item.mode}},[_vm._v(\" \"+_vm._s(item.name)+\" \")])}),1)],1),_c('FormItem',{attrs:{\"label\":\"字段\"}},[_c('Select',{staticStyle:{\"width\":\"200px\"},attrs:{\"filterable\":\"\",\"allow-create\":\"\",\"multiple\":\"\",\"placeholder\":\"选择相关的字段\",\"disabled\":_vm.commonColumnLoading},on:{\"on-create\":_vm.handleCreateColumn},model:{value:(_vm.formItem.columnsFilterCreateParam.columns),callback:function ($$v) {_vm.$set(_vm.formItem.columnsFilterCreateParam, \"columns\", $$v)},expression:\"formItem.columnsFilterCreateParam.columns\"}},_vm._l((_vm.formItem.constants.columnsForChose),function(item){return _c('Option',{key:item,attrs:{\"value\":item}},[_vm._v(_vm._s(item)+\" \")])}),1)],1)],1):_vm._e(),_c('br'),_c('Row',[_c('Col',{attrs:{\"span\":\"6\",\"offset\":\"8\"}}),_c('Col',{attrs:{\"span\":\"6\",\"offset\":\"4\"}})],1)],1)],1),_c('Col',{attrs:{\"span\":\"11\"}},[_c('db-tables-preview',{attrs:{\"src-region-name\":_vm.srcRegion,\"dst-region-name\":_vm.dstRegion,\"db-name\":_vm.formItem.dbName,\"table-names\":_vm.formItem.tableName,\"mode\":_vm.formItem.buildMode,\"replication-type\":Number(0)}})],1)],1),_c('Divider'),_c('Button',{staticStyle:{\"margin-left\":\"50px\"},attrs:{\"type\":_vm.buttonTypeMap.get(_vm.formAction),\"loading\":_vm.dataLoading || _vm.commonColumnLoading},on:{\"click\":_vm.submitAll}},[_vm._v(_vm._s(_vm.buttonTextMap.get(_vm.formAction))+\" \")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div :style=\"{padding: '1px 1px',height: '100%'}\">\r\n    <Row :gutter=10 align=\"middle\">\r\n      <Col span=\"13\">\r\n        <Form :model=\"formItem\" :disabled=\"formAction === 'delete'\" :label-width=\"100\"\r\n              style=\"margin-right: 20px;margin-top: 10px\">\r\n          <Alert type=\"warning\" show-icon v-if=\"alertInfo.show\" closable>\r\n            {{ alertInfo.title }}\r\n            <template #desc>{{ alertInfo.message }}</template>\r\n          </Alert>\r\n          <Alert type=\"success\" show-icon v-if=\"alertInfo.successShow\" closable>\r\n            {{ alertInfo.title }}\r\n            <template #desc>{{ alertInfo.message }}</template>\r\n          </Alert>\r\n          <FormItem prop=\"dbName\" label=\"库名\" :required=true>\r\n            <Input type=\"textarea\" v-model=\"formItem.dbName\" :autosize=\"true\" :readonly=\"true\" :border=\"false\"\r\n                   placeholder=\"请输入库名（支持正则）\"/>\r\n          </FormItem>\r\n          <FormItem label=\"同步表\" :required=true>\r\n            <Input @on-keydown.space.prevent v-model=\"formItem.tableName\" placeholder=\"请输入正则表达式\"\r\n                   @on-blur=\"afterEnterTableName\"></Input>\r\n          </FormItem>\r\n          <FormItem label=\"行过滤\">\r\n            <i-switch v-model=\"formItem.switch.rowsFilter\" size=\"large\">\r\n              <template #open>\r\n                <span>On</span>\r\n              </template>\r\n              <template #close>\r\n                <span>Off</span>\r\n              </template>\r\n            </i-switch>\r\n          </FormItem>\r\n          <Card v-if=\"formItem.switch.rowsFilter\" style=\"margin-left: 100px\">\r\n            <template #title>\r\n              <Icon type=\"md-settings\"/>\r\n              行过滤配置\r\n              <Button icon=\"ios-refresh\" size=\"small\" type=\"primary\" :loading=\"commonColumnLoading\"\r\n                      @click=\"getCommonColumns\" style=\"margin-left: 50px\">获取公共字段\r\n              </Button>\r\n            </template>\r\n            <FormItem label=\"模式\">\r\n              <Select v-model=\"formItem.rowsFilterCreateParam.mode\" style=\"width: 200px\" placeholder=\"选择行过滤模式\">\r\n                <Option v-for=\"item in formItem.constants.rowsFilter.modes\" :value=\"item.mode\" :key=\"item.mode\">\r\n                  {{ item.name }}\r\n                </Option>\r\n              </Select>\r\n            </FormItem>\r\n            <div v-if=\"useTripUdlOrUidMode\">\r\n              <FormItem label=\"规则内容\" v-if=\"fillContextByRegion\">\r\n                <Select v-model=\"formItem.rowsFilter.configInTripUid.regionsChosen\" multiple\r\n                        style=\"width: 200px\" placeholder=\"Region 选择\">\r\n                  <Option v-for=\"item in formItem.constants.rowsFilter.regionsForChose\" :value=\"item\" :key=\"item\">\r\n                    {{ item }}\r\n                  </Option>\r\n                </Select>\r\n              </FormItem>\r\n              <div v-if=\"showUdlConfigDetail\">\r\n                <Divider>UDL配置</Divider>\r\n                <FormItem label=\"UDL字段\">\r\n                  <Select v-model=\"formItem.rowsFilterCreateParam.udlColumns\" filterable allow-create multiple\r\n                          :disabled=\"commonColumnLoading\"\r\n                          style=\"width: 200px\" placeholder=\"不选默认则无UDL配置\">\r\n                    <Option v-for=\"item in formItem.constants.columnsForChose\" :value=\"item\" :key=\"item\">{{\r\n                        item\r\n                      }}\r\n                    </Option>\r\n                  </Select>\r\n                </FormItem>\r\n                <FormItem label=\"DRC UDL策略id\" v-if=\"hasUdlColumn\">\r\n                  <Select v-model=\"formItem.rowsFilterCreateParam.drcStrategyId\" filterable allow-create\r\n                          style=\"width: 200px\"\r\n                          placeholder=\"请选择ucs策略id\">\r\n                    <Option v-for=\"item in formItem.constants.rowsFilter.drcStrategyIdsForChose\" :value=\"item\"\r\n                            :key=\"item\">{{ item }}\r\n                    </Option>\r\n                  </Select>\r\n                </FormItem>\r\n              </div>\r\n              <div v-if=\"showUidConfigDetail\">\r\n                <Divider>UID配置</Divider>\r\n                <FormItem label=\"UID字段\">\r\n                  <Select v-model=\"formItem.rowsFilterCreateParam.columns\" filterable allow-create multiple\r\n                          :disabled=\"commonColumnLoading\"\r\n                          style=\"width: 200px\" placeholder=\"不选默认则无UID配置\">\r\n                    <Option v-for=\"item in formItem.constants.columnsForChose\" :value=\"item\" :key=\"item\">{{\r\n                        item\r\n                      }}\r\n                    </Option>\r\n                  </Select>\r\n                </FormItem>\r\n                <FormItem label=\"fetchMode\" v-if=\"hasUidColumn\">\r\n                  <Select v-model=\"formItem.rowsFilterCreateParam.fetchMode\" style=\"width: 200px\" placeholder=\"选择\"\r\n                          @on-change=\"fetchModeChange()\">\r\n                    <Option v-for=\"item in formItem.constants.rowsFilter.fetchModeForChose\" :value=\"item.v\"\r\n                            :key=\"item.k\">\r\n                      {{ item.k }}\r\n                    </Option>\r\n                  </Select>\r\n                </FormItem>\r\n                <FormItem v-if=\"hasUidColumn\" label=\"空处理\">\r\n                  <Checkbox v-model=\"formItem.rowsFilterCreateParam.illegalArgument\">【字段为空时】同步</Checkbox>\r\n                </FormItem>\r\n              </div>\r\n            </div>\r\n            <div v-else-if=\"useCustomSoaMode\">\r\n              <FormItem label=\"相关字段\">\r\n                <Select v-model=\"formItem.rowsFilterCreateParam.columns\" filterable allow-create multiple style=\"width: 200px\"\r\n                        @on-create=\"handleCreateColumn\" placeholder=\"选择相关字段\">\r\n                  <Option v-for=\"item in formItem.constants.columnsForChose\" :value=\"item\" :key=\"item\" :lable=\"item\"></Option>\r\n                </Select>\r\n              </FormItem>\r\n              <FormItem label=\"ServiceCode\">\r\n                <Select v-model=\"formItem.rowsFilterCreateParam.drcStrategyId\" filterable allow-create @on-create=\"handleCreateSoaServiceCode\"\r\n                        style=\"width: 200px\"\r\n                        placeholder=\"请选择soaServiceCode\">\r\n                  <Option v-for=\"item in formItem.constants.serviceCodeForChose\" :value=\"item\"\r\n                          :key=\"item\">{{ item }}\r\n                  </Option>\r\n                </Select>\r\n              </FormItem>\r\n              <FormItem label=\"服务名\">\r\n                <Select v-model=\"formItem.rowsFilterCreateParam.context\" filterable allow-create @on-create=\"handleCreateSoaServiceName\"\r\n                        style=\"width: 200px\"\r\n                        placeholder=\"请选择服务名\">\r\n                  <Option v-for=\"item in formItem.constants.serviceNameForChose\" :value=\"item\"\r\n                          :key=\"item\">{{ item }}\r\n                  </Option>\r\n                </Select>\r\n              </FormItem>\r\n            </div>\r\n            <div v-else>\r\n              <FormItem label=\"规则内容\">\r\n                <Input type=\"textarea\"\r\n                       v-model=\"formItem.rowsFilterCreateParam.context\" style=\"width: 250px\"\r\n                       placeholder=\"请输入行过滤内容\"/>\r\n              </FormItem>\r\n              <FormItem label=\"相关字段\">\r\n                <Select v-model=\"formItem.rowsFilterCreateParam.columns\" filterable allow-create multiple\r\n                        style=\"width: 200px\" placeholder=\"选择相关字段\">\r\n                  <Option v-for=\"item in formItem.constants.columnsForChose\" :value=\"item\" :key=\"item\"\r\n                          :lable=\"item\"></Option>\r\n                </Select>\r\n              </FormItem>\r\n            </div>\r\n          </Card>\r\n\r\n          <FormItem label=\"列过滤\">\r\n            <i-switch v-model=\"formItem.switch.colsFilter\" size=\"large\">\r\n              <template #open>\r\n                <span>On</span>\r\n              </template>\r\n              <template #close>\r\n                <span>Off</span>\r\n              </template>\r\n            </i-switch>\r\n          </FormItem>\r\n          <Card v-if=\"formItem.switch.colsFilter\" style=\"margin-left: 100px\">\r\n            <template #title>\r\n              <Icon type=\"md-settings\"/>\r\n              列过滤配置\r\n              <Button icon=\"ios-refresh\" size=\"small\" type=\"primary\" :loading=\"commonColumnLoading\"\r\n                      @click=\"getCommonColumns\" style=\"margin-left: 50px\">获取公共字段\r\n              </Button>\r\n            </template>\r\n            <FormItem label=\"模式\">\r\n              <Select v-model=\"formItem.columnsFilterCreateParam.mode\" style=\"width: 200px\"\r\n                      placeholder=\"选择字段过滤模式\">\r\n                <Option v-for=\"item in formItem.constants.colsFilter.modes\" :value=\"item.mode\" :key=\"item.mode\">\r\n                  {{ item.name }}\r\n                </Option>\r\n              </Select>\r\n            </FormItem>\r\n            <FormItem label=\"字段\">\r\n              <Select v-model=\"formItem.columnsFilterCreateParam.columns\" filterable allow-create\r\n                      @on-create=\"handleCreateColumn\" multiple style=\"width: 200px\" placeholder=\"选择相关的字段\"\r\n                      :disabled=\"commonColumnLoading\">\r\n                <Option v-for=\"item in formItem.constants.columnsForChose\" :value=\"item\" :key=\"item\">{{\r\n                    item\r\n                  }}\r\n                </Option>\r\n              </Select>\r\n            </FormItem>\r\n          </Card>\r\n          <br/>\r\n          <Row>\r\n            <Col span=\"6\" offset=\"8\"></Col>\r\n            <Col span=\"6\" offset=\"4\">\r\n            </Col>\r\n          </Row>\r\n        </Form>\r\n      </Col>\r\n      <Col span=\"11\">\r\n        <db-tables-preview :src-region-name=\"srcRegion\"\r\n                           :dst-region-name=\"dstRegion\"\r\n                           :db-name=\"formItem.dbName\"\r\n                           :table-names=\"formItem.tableName\"\r\n                           :mode=\"formItem.buildMode\"\r\n                           :replication-type=\"Number(0)\"\r\n        />\r\n      </Col>\r\n    </Row>\r\n    <Divider></Divider>\r\n    <Button :type=\"buttonTypeMap.get(formAction)\" @click=\"submitAll\" style=\"margin-left: 50px\"\r\n            :loading=\"dataLoading || commonColumnLoading\">{{\r\n        buttonTextMap.get(formAction)\r\n      }}\r\n    </Button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport DbTablesPreview from '@/components/v2/dbDrcBuild/dbTablesPreview.vue'\r\n\r\nexport default {\r\n  components: { DbTablesPreview },\r\n  FORM_ACTION_OPTION: {\r\n    CREATE: 'create',\r\n    EDIT: 'edit',\r\n    DELETE: 'delete'\r\n  },\r\n  name: 'dbReplicationConfig',\r\n  props: {\r\n    configData: {},\r\n    srcRegion: String,\r\n    dstRegion: String,\r\n    dbNames: Array,\r\n    formAction: String\r\n  },\r\n  emits: ['finished'],\r\n  data () {\r\n    return {\r\n      meta: {\r\n        rowsFilterId: null,\r\n        colsFilterId: null,\r\n        dbReplicationIds: [],\r\n        originLogicTableConfig: {}\r\n      },\r\n      formItem: {\r\n        buildMode: 2,\r\n        dbName: null,\r\n        tableName: null,\r\n        rowsFilterCreateParam: this.rowsFilterCreateParamInit(),\r\n        columnsFilterCreateParam: this.columnsFilterCreateParamInit(),\r\n        rowsFilter: {\r\n          configInTripUid: {\r\n            regionsChosen: []\r\n          }\r\n        },\r\n        switch: {\r\n          rowsFilter: false,\r\n          colsFilter: false\r\n        },\r\n        constants: {\r\n          rowsFilter: {\r\n            filterMode: {\r\n              JAVA_REGEX: 0,\r\n              TRIP_UDL: 1,\r\n              AVIATOR_REGEX: 3,\r\n              TRIP_UDL_UID: 5,\r\n              CUSTOM_SOA: 6\r\n            },\r\n            fetchMode: {\r\n              RPC: 0,\r\n              BlackList: 1,\r\n              WhiteList: 2,\r\n              BlackList_Global: 3\r\n            },\r\n            modes: [\r\n              {\r\n                name: 'trip_udl',\r\n                mode: 1\r\n              },\r\n              {\r\n                name: 'java_regex',\r\n                mode: 0\r\n              },\r\n              {\r\n                name: 'aviator_regex',\r\n                mode: 3\r\n              },\r\n              {\r\n                name: 'trip_udl_uid',\r\n                mode: 5\r\n              },\r\n              {\r\n                name: 'custom_soa',\r\n                mode: 6\r\n              }\r\n            ],\r\n            regionsForChose: [\r\n              'SGP',\r\n              'SIN',\r\n              'SH',\r\n              'FRA'\r\n            ],\r\n            drcStrategyIdsForChose: [\r\n              2000000002\r\n            ],\r\n            fetchModeForChose: [\r\n              {\r\n                k: 'RPC调用',\r\n                v: 0\r\n              },\r\n              {\r\n                k: 'BlackList',\r\n                v: 1\r\n              },\r\n              {\r\n                k: 'WhiteList',\r\n                v: 2\r\n              },\r\n              {\r\n                k: 'BlackListGlobal',\r\n                v: 3\r\n              }\r\n            ]\r\n          },\r\n          colsFilter: {\r\n            modes: [\r\n              {\r\n                name: 'exclude',\r\n                mode: 0\r\n              },\r\n              {\r\n                name: 'include',\r\n                mode: 1\r\n              },\r\n              {\r\n                name: 'regex',\r\n                mode: 2\r\n              }\r\n            ]\r\n          },\r\n          columnsForChose: [],\r\n          serviceCodeForChose: [\r\n            32578\r\n          ],\r\n          serviceNameForChose: [\r\n            'DataSyncService',\r\n            'FilterRowService'\r\n          ]\r\n        }\r\n      },\r\n      checkTableDataList: [],\r\n      table: {\r\n        dbMhaTableLoading: false,\r\n        dbMhaTableColumn: [\r\n          {\r\n            title: 'DB名',\r\n            key: 'dbName'\r\n          },\r\n          {\r\n            title: '源集群',\r\n            key: 'srcMhaName',\r\n            render: (h, params) => {\r\n              const row = params.row\r\n              const mha = row.srcMha\r\n              if (mha != null) {\r\n                return h('div', [\r\n                  h('span', mha.name),\r\n                  h('span', {\r\n                    style:\r\n                      {\r\n                        float: 'right',\r\n                        color: '#ababab'\r\n                      }\r\n                  }, mha.regionName + '(' + mha.dcName + ')')\r\n                ])\r\n              }\r\n            }\r\n          },\r\n          {\r\n            title: '目标集群',\r\n            key: 'dstMhaName',\r\n            render: (h, params) => {\r\n              const row = params.row\r\n              const mha = row.dstMha\r\n              if (mha != null) {\r\n                return h('div', [\r\n                  h('span', mha.name),\r\n                  h('span', {\r\n                    style:\r\n                      {\r\n                        float: 'right',\r\n                        color: '#ababab'\r\n                      }\r\n                  }, mha.regionName + '(' + mha.dcName + ')')\r\n                ])\r\n              }\r\n            }\r\n          }\r\n        ],\r\n        dbMhaTablePage: {\r\n          total: 0,\r\n          current: 1,\r\n          size: 5,\r\n          pageSizeOpts: [5, 10, 20, 100]\r\n        },\r\n        dbTableLoading: false,\r\n        dbTableColumn: [\r\n          {\r\n            title: '序号',\r\n            width: 75,\r\n            align: 'center',\r\n            fixed: 'left',\r\n            render: (h, params) => {\r\n              return h(\r\n                'span',\r\n                params.index + 1\r\n              )\r\n            }\r\n          },\r\n          {\r\n            title: '库名',\r\n            key: 'schema',\r\n            resizable: true\r\n          },\r\n          {\r\n            title: '表名',\r\n            key: 'table',\r\n            resizable: true\r\n          },\r\n          {\r\n            title: '结果',\r\n            align: 'center',\r\n            render: (h, params) => {\r\n              const row = params.row\r\n              const color = row.res !== 'ok' ? 'volcano' : 'green'\r\n              const text = row.res\r\n              return h('Tag', {\r\n                props: {\r\n                  color: color\r\n                }\r\n              }, text)\r\n            }\r\n          }\r\n        ],\r\n        dbTablePage: {\r\n          total: 0,\r\n          current: 1,\r\n          size: 5,\r\n          pageSizeOpts: [5, 10, 20, 100]\r\n        }\r\n      },\r\n      alertInfo: {\r\n        show: false,\r\n        successShow: false,\r\n        title: null,\r\n        message: null\r\n      },\r\n      buttonTextMap: new Map([\r\n        ['create', '新增表同步'],\r\n        ['edit', '更新表同步'],\r\n        ['delete', '删除表同步']\r\n      ]),\r\n      buttonTypeMap: new Map([\r\n        ['create', 'success'],\r\n        ['edit', 'primary'],\r\n        ['delete', 'error']\r\n      ]),\r\n      dataLoading: false,\r\n      successSubmit: false,\r\n      commonColumnLoading: false\r\n    }\r\n  },\r\n  methods: {\r\n    getParams: function () {\r\n      const param = {}\r\n      param.buName = this.formItem.buName\r\n      param.tag = this.formItem.tag\r\n      param.mode = this.formItem.buildMode\r\n      param.srcRegionName = this.srcRegion\r\n      param.dstRegionName = this.dstRegion\r\n\r\n      if (this.gtidConfigurable) {\r\n        param.gtidInit = this.formItem.gtidInit\r\n      }\r\n\r\n      param.tblsFilterDetail = {\r\n        tableNames: this.formItem.tableName\r\n      }\r\n      param.dbName = this.formItem.dbName\r\n      return param\r\n    },\r\n    getEditParams: function () {\r\n      const param = {}\r\n      param.dbReplicationIds = this.meta.dbReplicationIds\r\n      param.dbNames = this.dbNames\r\n      param.srcRegionName = this.srcRegion\r\n      param.dstRegionName = this.dstRegion\r\n\r\n      param.logicTableConfig = {\r\n        logicTable: this.formItem.tableName,\r\n        rowsFilterId: this.formItem.switch.rowsFilter ? this.meta.rowsFilterId : null,\r\n        colsFilterId: this.formItem.switch.colsFilter ? this.meta.colsFilterId : null\r\n      }\r\n      param.originLogicTableConfig = this.meta.originLogicTableConfig\r\n      if (this.formItem.switch.rowsFilter) {\r\n        if (this.useTripUdlOrUidMode) {\r\n          if (this.fillContextByRegion) {\r\n            this.formItem.rowsFilterCreateParam.context = this.formItem.rowsFilter.configInTripUid.regionsChosen.join(',')\r\n          } else {\r\n            this.formItem.rowsFilterCreateParam.context = '//filter by config'\r\n          }\r\n        }\r\n        param.openRowsFilterConfig = true\r\n        param.rowsFilterCreateParam = this.formItem.rowsFilterCreateParam\r\n      }\r\n      if (this.formItem.switch.colsFilter) {\r\n        param.openColsFilterConfig = true\r\n        param.columnsFilterCreateParam = this.formItem.columnsFilterCreateParam\r\n      }\r\n      console.log(param)\r\n      return param\r\n    },\r\n    async getRowsFilterConfig () {\r\n      await this.axios.get('/api/drc/v2/autoconfig/getRowsFilterView?rowsFilterId=' + this.meta.rowsFilterId)\r\n        .then(response => {\r\n          if (response.data.status === 1) {\r\n            this.$Message.error('查询行过滤配置失败!')\r\n          } else {\r\n            const res = response.data.data\r\n            if (res == null) {\r\n              // empty config\r\n            } else {\r\n              this.formItem.switch.rowsFilter = true\r\n              // rowsFilterConfig.context和onfigInTripUid.regionsChosen要放在前面\r\n              // 不然会失效\r\n              this.formItem.rowsFilterCreateParam.context = res.context\r\n              this.formItem.rowsFilterCreateParam.mode = res.mode\r\n              if (this.useTripUdlOrUidMode) {\r\n                this.formItem.rowsFilter.configInTripUid.regionsChosen = res.context.split(',')\r\n              } else {\r\n                this.formItem.rowsFilter.configInTripUid = {\r\n                  regionsChosen: []\r\n                }\r\n              }\r\n              this.formItem.rowsFilterCreateParam.columns = res.columns === null ? [] : res.columns\r\n              if (res.udlColumns !== null) {\r\n                this.formItem.rowsFilterCreateParam.udlColumns = res.udlColumns\r\n              }\r\n              this.formItem.rowsFilterCreateParam.drcStrategyId = res.drcStrategyId === 0 ? null : res.drcStrategyId\r\n              this.formItem.rowsFilterCreateParam.routeStrategyId = res.routeStrategyId\r\n              this.formItem.rowsFilterCreateParam.illegalArgument = res.illegalArgument\r\n              this.formItem.rowsFilterCreateParam.fetchMode = res.fetchMode\r\n            }\r\n          }\r\n        })\r\n    },\r\n    async getColsFilterConfig () {\r\n      await this.axios.get('/api/drc/v2/autoconfig/getColsFilterView?colsFilterId=' + this.meta.colsFilterId)\r\n        .then(response => {\r\n          if (response.data.status === 1) {\r\n            this.$Message.error('查询字段过滤配置失败!')\r\n          } else {\r\n            const res = response.data.data\r\n            if (res == null) {\r\n              // empty config\r\n            } else {\r\n              this.formItem.switch.colsFilter = true\r\n              this.formItem.columnsFilterCreateParam.mode = res.mode\r\n              this.formItem.columnsFilterCreateParam.columns = res.columns\r\n            }\r\n          }\r\n        })\r\n    },\r\n    async getCommonColumns () {\r\n      const params = this.getParams()\r\n      this.formItem.constants.columnsForChose = []\r\n      this.commonColumnLoading = true\r\n      await this.axios.get('/api/drc/v2/autoconfig/commonColumns', {\r\n        params: this.flattenObj(params)\r\n      }).then(response => {\r\n        if (response.data.status === 1) {\r\n          this.$Message.error('查询公共列名失败，请手动添加：' + response.data.message)\r\n        } else {\r\n          this.formItem.constants.columnsForChose = response.data.data\r\n          this.$Message.info('查询公共列名数：' + response.data.data.length)\r\n        }\r\n      }).catch(message => {\r\n        this.$Message.error('查询公共列名异常: ' + message)\r\n      }).finally(() => {\r\n        this.commonColumnLoading = false\r\n      })\r\n    },\r\n    handleCreateColumn (val) {\r\n      if (this.contains(this.formItem.constants.columnsForChose, val)) {\r\n        alert('已有项禁止创建')\r\n        return\r\n      }\r\n      if (val === '' || val === undefined || val === null) {\r\n        alert('字段不能为空')\r\n        return\r\n      }\r\n      this.formItem.constants.columnsForChose.push(val)\r\n    },\r\n    handleCreateSoaServiceCode (val) {\r\n      if (this.contains(this.formItem.constants.serviceCodeForChose, val)) {\r\n        alert('已有项禁止创建')\r\n        return\r\n      }\r\n      if (val === '' || val === undefined || val === null || val === 0) {\r\n        alert('serviceCode不能为空')\r\n        return\r\n      }\r\n      this.formItem.constants.serviceCodeForChose.push(val)\r\n    },\r\n    handleCreateSoaServiceName (val) {\r\n      if (this.contains(this.formItem.constants.serviceNameForChose, val)) {\r\n        alert('已有项禁止创建')\r\n        return\r\n      }\r\n      if (val === '' || val === undefined || val === null) {\r\n        alert('serviceName不能为空')\r\n        return\r\n      }\r\n      this.formItem.constants.serviceNameForChose.push(val)\r\n    },\r\n    async afterEnterTableName () {\r\n      await this.getTableInfo()\r\n    },\r\n    flattenObj (ob) {\r\n      const result = {}\r\n      for (const i in ob) {\r\n        if ((typeof ob[i]) === 'object' && !Array.isArray(ob[i])) {\r\n          const temp = this.flattenObj(ob[i])\r\n          for (const j in temp) {\r\n            result[i + '.' + j] = temp[j]\r\n          }\r\n        } else {\r\n          result[i] = ob[i]\r\n        }\r\n      }\r\n      return result\r\n    },\r\n    async refresh () {\r\n      this.formItem.dbName = this.dbNames.join(',')\r\n      if (this.configData) {\r\n        console.log('edit panel')\r\n        this.formItem.tableName = this.configData.config.logicTable\r\n        this.meta.rowsFilterId = this.configData.config.rowsFilterId\r\n        this.meta.colsFilterId = this.configData.config.colsFilterId\r\n        this.getCommonColumns()\r\n        if (this.meta.rowsFilterId) {\r\n          await this.getRowsFilterConfig(this.meta.rowsFilterId)\r\n        } else {\r\n          this.formItem.switch.rowsFilter = false\r\n          this.formItem.rowsFilterCreateParam = this.rowsFilterCreateParamInit()\r\n        }\r\n        if (this.meta.colsFilterId) {\r\n          await this.getColsFilterConfig(this.meta.colsFilterId)\r\n        } else {\r\n          this.formItem.switch.colsFilter = false\r\n          this.formItem.columnsFilterCreateParam = this.columnsFilterCreateParamInit()\r\n        }\r\n        this.meta.dbReplicationIds = this.configData.dbReplicationIds\r\n        this.meta.originLogicTableConfig = this.configData.config\r\n      } else {\r\n        console.log('insert new config')\r\n      }\r\n    },\r\n    async submitAll () {\r\n      const that = this\r\n      that.dataLoading = true\r\n      that.alertInfo.show = false\r\n      that.alertInfo.successShow = false\r\n      that.successSubmit = false\r\n      const params = this.getEditParams()\r\n      // if (!this.checkParam(params)) {\r\n      //   return\r\n      // }\r\n      await that.axios.post('/api/drc/v2/autoconfig/dbReplication/' + this.formAction, params)\r\n        .then(response => {\r\n          const data = response.data\r\n          const success = data.status === 0\r\n          if (success) {\r\n            that.$Message.success('提交成功')\r\n            that.successSubmit = true\r\n            that.alertInfo.successShow = true\r\n            that.alertInfo.message = null\r\n            that.alertInfo.title = '提交成功'\r\n            that.$emit('finished')\r\n          } else {\r\n            that.$Message.warning('提交失败: ' + data.message)\r\n            that.alertInfo.show = true\r\n            that.alertInfo.title = '提交失败'\r\n            that.alertInfo.message = data.message\r\n          }\r\n        })\r\n        .catch(message => {\r\n          that.$Message.error('提交异常: ' + message)\r\n        })\r\n        .finally(() => {\r\n          that.dataLoading = false\r\n        })\r\n    },\r\n    rowsFilterCreateParamInit () {\r\n      return {\r\n        mode: 1,\r\n        drcStrategyId: 2000000002,\r\n        routeStrategyId: 0,\r\n        udlColumns: [],\r\n        columns: [],\r\n        context: '',\r\n        illegalArgument: false,\r\n        fetchMode: 0\r\n      }\r\n    },\r\n    columnsFilterCreateParamInit () {\r\n      return {\r\n        mode: null,\r\n        columns: []\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    preCheckTablePage () {\r\n      const data = this.checkTableDataList\r\n      const start = this.table.dbTablePage.current * this.table.dbTablePage.size - this.table.dbTablePage.size\r\n      const end = start + this.table.dbTablePage.size\r\n      return [...data].slice(start, end)\r\n    },\r\n    useTripUdlOrUidMode () {\r\n      return [this.formItem.constants.rowsFilter.filterMode.TRIP_UDL, this.formItem.constants.rowsFilter.filterMode.TRIP_UDL_UID].includes(this.formItem.rowsFilterCreateParam.mode)\r\n    },\r\n    useCustomSoaMode () {\r\n      return [this.formItem.constants.rowsFilter.filterMode.CUSTOM_SOA].includes(this.formItem.rowsFilterCreateParam.mode)\r\n    },\r\n    hasUdlColumn () {\r\n      return this.formItem.rowsFilterCreateParam.udlColumns.length !== 0\r\n    },\r\n    fillContextByRegion () {\r\n      return this.formItem.rowsFilterCreateParam.fetchMode === this.formItem.constants.rowsFilter.fetchMode.RPC\r\n    },\r\n    hasUidColumn () {\r\n      return this.formItem.rowsFilterCreateParam.columns.length !== 0\r\n    },\r\n    showUdlConfigDetail () {\r\n      return this.formItem.rowsFilterCreateParam.mode === this.formItem.constants.rowsFilter.filterMode.TRIP_UDL_UID || this.hasUdlLegalConfig || !this.hasUidLegalConfig\r\n    },\r\n    showUidConfigDetail () {\r\n      return this.formItem.rowsFilterCreateParam.mode === this.formItem.constants.rowsFilter.filterMode.TRIP_UDL_UID || this.hasUidLegalConfig || !this.hasUdlLegalConfig\r\n    },\r\n    hasUdlLegalConfig () {\r\n      return this.formItem.rowsFilterCreateParam.udlColumns.length !== 0 && this.formItem.rowsFilterCreateParam.drcStrategyId != null && this.formItem.rowsFilterCreateParam.drcStrategyId > 0\r\n    },\r\n    hasUidLegalConfig () {\r\n      return this.hasUidColumn\r\n    }\r\n  },\r\n  created () {\r\n    this.refresh()\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dbReplicationConfig.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dbReplicationConfig.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./dbReplicationConfig.vue?vue&type=template&id=8259e7b6&scoped=true&\"\nimport script from \"./dbReplicationConfig.vue?vue&type=script&lang=js&\"\nexport * from \"./dbReplicationConfig.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8259e7b6\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div :style=\"{padding: '1px 1px',height: '100%'}\">\r\n    <Table style=\"margin-top: 20px\" stripe :columns=\"columns\" :data=\"tableData\" :loading=\"dataLoading\" border\r\n           ref=\"multipleTable\">\r\n      <template slot=\"action\" slot-scope=\"{ row, index }\">\r\n        <Button type=\"primary\" size=\"small\" style=\"margin-right: 5px\" @click=\"goToUpdateConfig(row, index)\">修改\r\n        </Button>\r\n        <Button type=\"error\" size=\"small\" style=\"margin-right: 5px\" @click=\"goToDeleteConfig(row, index)\">删除\r\n        </Button>\r\n      </template>\r\n    </Table>\r\n    <br/>\r\n    <Button type=\"success\" @click=\"goToInsertConfig\" icon=\"md-add\">\r\n      新增\r\n    </Button>\r\n    <Modal v-model=\"editModal.open\" width=\"1200px\" :footer-hide=\"true\" :title=\"actionTitle\">\r\n      <db-replication-config ref=\"dbReplicationConfigComponent\" @finished=\"finishConfig\"\r\n                             v-if=\"editModal.open\"\r\n                             :config-data=\"selectedRow\"\r\n                             :src-region=\"srcRegion\"\r\n                             :dst-region=\"dstRegion\"\r\n                             :db-names=\"dbNames\"\r\n                             :form-action=\"action\"\r\n      />\r\n    </Modal>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport DbReplicationConfig from '@/components/v2/dbDrcBuild/dbReplicationConfig.vue'\r\n\r\nexport default {\r\n  name: 'tables',\r\n  components: { DbReplicationConfig },\r\n  props: {\r\n    dbName: String,\r\n    dbNames: Array,\r\n    srcRegion: String,\r\n    dstRegion: String,\r\n    tableData: Array,\r\n    dataLoading: Boolean\r\n  },\r\n  emits: ['updated'],\r\n  data () {\r\n    return {\r\n      selectedRow: {},\r\n      action: null,\r\n      actionTitleMap: new Map([\r\n        ['create', '新增 表同步'],\r\n        ['edit', '更新 表同步'],\r\n        ['delete', '⚠️删除 表同步']\r\n      ]),\r\n      editModal: {\r\n        open: false\r\n      },\r\n      columns: [\r\n        {\r\n          title: '表名',\r\n          key: 'config',\r\n          minWidth: 300,\r\n          render: (h, params) => {\r\n            const row = params.row\r\n            return h('div', row.config.logicTable)\r\n          }\r\n        },\r\n        {\r\n          title: '过滤规则',\r\n          key: 'filterTypes',\r\n          minWidth: 100,\r\n          render: (h, params) => {\r\n            const row = params.row\r\n            const rowsFilterId = row.config.rowsFilterId\r\n            const colsFilterId = row.config.colsFilterId\r\n            if (!rowsFilterId && !colsFilterId) {\r\n              return h('Tag', {\r\n                props: {\r\n                  color: 'red'\r\n                }\r\n              }, '无')\r\n            } else {\r\n              return h('div', [\r\n                rowsFilterId && h('Tag', {\r\n                  props: {\r\n                    color: 'blue'\r\n                  }\r\n                }, '行过滤'),\r\n                colsFilterId && h('Tag', {\r\n                  props: {\r\n                    color: 'green'\r\n                  }\r\n                }, '字段过滤')\r\n              ])\r\n            }\r\n          }\r\n        },\r\n        {\r\n          title: '操作',\r\n          minWidth: 100,\r\n          slot: 'action',\r\n          align: 'center',\r\n          fixed: 'right'\r\n        }\r\n      ]\r\n    }\r\n  },\r\n  methods: {\r\n    async goToInsertConfig () {\r\n      this.selectedRow = null\r\n      this.action = DbReplicationConfig.FORM_ACTION_OPTION.CREATE\r\n      this.editModal.open = true\r\n    },\r\n    async goToUpdateConfig (row, index) {\r\n      this.selectedRow = row\r\n      this.action = DbReplicationConfig.FORM_ACTION_OPTION.EDIT\r\n      this.editModal.open = true\r\n    },\r\n    async goToDeleteConfig (row, index) {\r\n      this.selectedRow = row\r\n      this.action = DbReplicationConfig.FORM_ACTION_OPTION.DELETE\r\n      this.editModal.open = true\r\n    },\r\n    finishConfig () {\r\n      this.selectedRow = null\r\n      this.editModal.open = false\r\n      this.$emit('updated')\r\n    }\r\n  },\r\n  computed: {\r\n    actionTitle () {\r\n      return this.actionTitleMap.get(this.action)\r\n    }\r\n  },\r\n  created () {\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tables.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tables.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./tables.vue?vue&type=template&id=6250ec54&scoped=true&\"\nimport script from \"./tables.vue?vue&type=script&lang=js&\"\nexport * from \"./tables.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6250ec54\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{style:({padding: '1px 1px',height: '100%'})},[_c('Collapse',{model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}},_vm._l((_vm.mhaReplications),function(replication,index){return _c('Panel',{key:replication.srcMha.name +'->'+replication.dstMha.name,attrs:{\"name\":String(index)},scopedSlots:_vm._u([{key:\"content\",fn:function(){return [_c('Button',{staticStyle:{\"margin-bottom\":\"10px\"},attrs:{\"icon\":\"ios-open-outline\"},on:{\"click\":function($event){return _vm.openModal(index)}}},[_vm._v(\" 打开详情\")]),_c('mha-db-replication-panel',{attrs:{\"mha-replication\":replication}}),_c('Modal',{attrs:{\"width\":\"1500px\",\"footer-hide\":true},model:{value:(_vm.openDetailModal[index]),callback:function ($$v) {_vm.$set(_vm.openDetailModal, index, $$v)},expression:\"openDetailModal[index]\"}},[(_vm.openDetailModal[index])?_c('drc-build-v2',{ref:\"dbReplicationConfigComponent\",refInFor:true,attrs:{\"src-mha-name\":replication.srcMha.name,\"src-dc\":replication.srcMha.dcName,\"dst-mha-name\":replication.dstMha.name,\"dst-dc\":replication.dstMha.dcName}}):_vm._e()],1)]},proxy:true}],null,true)},[_vm._v(\" \"+_vm._s(replication.srcMha.name + ' -> ' + replication.dstMha.name + ' ------ ['+ ([replication.mhaDbReplications.length] +'DB]'))+\" \")])}),1),_c('br'),_c('Button',{attrs:{\"type\":\"primary\",\"icon\":\"md-sync\"},on:{\"click\":_vm.goToSwitchAppliers}},[_vm._v(\" 切换Applier生效配置 \")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(!_vm.mhaReplication.mhaApplierDto)?_c('Table',{attrs:{\"stripe\":\"\",\"border\":\"\",\"columns\":_vm.columns,\"data\":_vm.mhaDbReplications}}):_vm._e(),(_vm.mhaReplication.mhaApplierDto)?_c('Table',{attrs:{\"stripe\":\"\",\"border\":\"\",\"columns\":_vm.mhaColumns,\"data\":[_vm.mhaReplication]}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\r\n  <div>\r\n    <Table stripe border :columns=\"columns\" :data=\"mhaDbReplications\" v-if=\"!mhaReplication.mhaApplierDto\">\r\n    </Table>\r\n    <Table stripe border :columns=\"mhaColumns\" :data=\"[mhaReplication]\" v-if=\"mhaReplication.mhaApplierDto\">\r\n    </Table>\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport prettyMilliseconds from 'pretty-ms'\r\n\r\nexport default {\r\n  name: 'mhaDbReplicationPanel',\r\n  props: {\r\n    mhaReplication: {}\r\n  },\r\n  data () {\r\n    return {\r\n      mhaDbReplications: this.mhaReplication.mhaDbReplications,\r\n      value: ['1'],\r\n      delayDataLoading: false,\r\n      columns: [\r\n        {\r\n          title: '类型',\r\n          width: 80,\r\n          render: (h, params) => {\r\n            const row = params.row\r\n            let text = 'none'\r\n            let type = 'error'\r\n            let disabled = false\r\n            switch (row.transmissionType) {\r\n              case 'simplex':\r\n                text = '单'\r\n                type = 'info'\r\n                break\r\n              case 'duplex':\r\n                text = '双'\r\n                type = 'success'\r\n                break\r\n              default:\r\n                text = '无'\r\n                disabled = true\r\n                break\r\n            }\r\n            return h('Button', {\r\n              props: {\r\n                type: type,\r\n                size: 'small',\r\n                disabled: disabled\r\n              },\r\n              on: {\r\n                click: () => {\r\n                  this.showModal(row)\r\n                }\r\n              }\r\n            }, text)\r\n          }\r\n        },\r\n        {\r\n          title: '延迟',\r\n          key: 'drcStatus',\r\n          width: 100,\r\n          align: 'center',\r\n          renderHeader: (h, params) => {\r\n            return h('span', [\r\n              h('span', '延迟'),\r\n              this.replicationIds && this.replicationIds.length !== 0 && h('Button', {\r\n                on: {\r\n                  click: async () => {\r\n                    await this.getDelay()\r\n                  }\r\n                },\r\n                props: {\r\n                  loading: this.delayDataLoading,\r\n                  size: 'small',\r\n                  shape: 'circle',\r\n                  type: 'default',\r\n                  icon: 'md-refresh'\r\n                }\r\n              })\r\n            ])\r\n          },\r\n          render: (h, params) => {\r\n            const row = params.row\r\n            let color, text\r\n            if (row.drcStatus === true) {\r\n              if (row.delay != null) {\r\n                text = prettyMilliseconds(row.delay, { compact: true })\r\n                if (row.delay > 10000) {\r\n                  color = 'warning'\r\n                } else {\r\n                  color = 'success'\r\n                }\r\n              } else {\r\n                text = '已接入'\r\n                color = 'blue'\r\n              }\r\n            } else {\r\n              text = '未接入'\r\n              color = 'default'\r\n            }\r\n            return h('Tag', {\r\n              props: {\r\n                color: color\r\n              }\r\n            }, text)\r\n          }\r\n        },\r\n        {\r\n          title: 'DB 名',\r\n          key: 'srcDbName',\r\n          render: (h, params) => {\r\n            return h('p', params.row.src.dbName)\r\n          }\r\n        },\r\n        {\r\n          title: 'applier',\r\n          key: 'srcDbName',\r\n          render: (h, params) => {\r\n            return h('p', params.row.dbApplierDto ? params.row.dbApplierDto.ips.join(', ') : null)\r\n          }\r\n        }\r\n      ],\r\n      mhaColumns: [\r\n        {\r\n          title: '延迟',\r\n          key: 'drcStatus',\r\n          width: 100,\r\n          align: 'center',\r\n          renderHeader: (h, params) => {\r\n            return h('span', [\r\n              h('span', '延迟'),\r\n              this.mhaReplication.mhaApplierDto.ips && h('Button', {\r\n                on: {\r\n                  click: async () => {\r\n                    await this.getMhaDelay()\r\n                  }\r\n                },\r\n                props: {\r\n                  loading: this.delayDataLoading,\r\n                  size: 'small',\r\n                  shape: 'circle',\r\n                  type: 'default',\r\n                  icon: 'md-refresh'\r\n                }\r\n              })\r\n            ])\r\n          },\r\n          render: (h, params) => {\r\n            const row = params.row\r\n            let color, text\r\n            if (row.mhaApplierDto.ips) {\r\n              if (row.delay != null) {\r\n                text = prettyMilliseconds(row.delay, { compact: true })\r\n                if (row.delay > 10000) {\r\n                  color = 'warning'\r\n                } else {\r\n                  color = 'success'\r\n                }\r\n              } else {\r\n                text = '已接入'\r\n                color = 'blue'\r\n              }\r\n            } else {\r\n              text = '未接入'\r\n              color = 'default'\r\n            }\r\n            return h('Tag', {\r\n              props: {\r\n                color: color\r\n              }\r\n            }, text)\r\n          }\r\n        },\r\n        {\r\n          title: '类型',\r\n          width: 100,\r\n          key: '',\r\n          render: (h, params) => {\r\n            return h('p', 'mha 同步')\r\n          }\r\n        },\r\n        {\r\n          title: 'applier',\r\n          key: '',\r\n          render: (h, params) => {\r\n            return h('p', params.row.mhaApplierDto.ips.join(','))\r\n          }\r\n        },\r\n        {\r\n          title: 'initGtid',\r\n          key: '',\r\n          render: (h, params) => {\r\n            return h('p', params.row.mhaApplierDto.gtidInit)\r\n          }\r\n        }\r\n      ]\r\n    }\r\n  },\r\n  methods: {\r\n    showModal (row) {\r\n      this.$Message.info('还未上线，敬请期待')\r\n    },\r\n    async getDelay () {\r\n      if (this.replicationIds.length === 0) {\r\n        console.log('skip delay search')\r\n        return\r\n      }\r\n      this.delayDataLoading = true\r\n      this.axios.post('/api/drc/v2/replication/db/delay', {\r\n        replicationIds: this.replicationIds\r\n      })\r\n        .then(response => {\r\n          const delays = response.data.data\r\n          const emptyResult = delays == null || !Array.isArray(delays) || delays.length === 0\r\n          if (emptyResult) {\r\n            return\r\n          }\r\n          const dataMap = new Map(delays.map(e => [e.srcMha + '->' + e.dstMha + '->' + e.dbName, e.delay]))\r\n          this.mhaDbReplications.forEach(line => {\r\n            this.$set(line, 'delay', dataMap.get(line.src.mhaName + '->' + line.dst.mhaName + '->' + line.src.dbName))\r\n          })\r\n        })\r\n        .catch(message => {\r\n          console.log(message)\r\n          this.$Message.error('查询延迟异常: ' + message)\r\n        })\r\n        .finally(() => {\r\n          this.delayDataLoading = false\r\n        })\r\n    },\r\n    async getMhaDelay () {\r\n      const param = {\r\n        srcMha: this.mhaReplication.srcMha.name,\r\n        dstMha: this.mhaReplication.dstMha.name\r\n      }\r\n      this.delayDataLoading = true\r\n      this.axios.get('/api/drc/v2/replication/delayByName', { params: param })\r\n        .then(response => {\r\n          const delays = response.data.data.delay\r\n          this.$set(this.mhaReplication, 'delay', delays)\r\n        })\r\n        .catch(message => {\r\n          console.log(message)\r\n          this.$Message.error('查询 MHA 延迟异常: ' + message)\r\n        })\r\n        .finally(() => {\r\n          this.delayDataLoading = false\r\n        })\r\n    }\r\n  },\r\n  computed: {\r\n    replicationIds () {\r\n      return this.mhaDbReplications\r\n        .filter(item => item.drcStatus === true)\r\n        .map(item => item.id)\r\n    }\r\n  },\r\n  created () {\r\n    this.getDelay()\r\n    this.getMhaDelay()\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mhaDbReplicationPanel.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mhaDbReplicationPanel.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./mhaDbReplicationPanel.vue?vue&type=template&id=23438636&scoped=true&\"\nimport script from \"./mhaDbReplicationPanel.vue?vue&type=script&lang=js&\"\nexport * from \"./mhaDbReplicationPanel.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"23438636\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div :style=\"{padding: '1px 1px',height: '100%'}\">\r\n    <Collapse v-model=\"value\">\r\n      <Panel v-for=\"(replication, index) in mhaReplications\"\r\n             :key=\"replication.srcMha.name +'->'+replication.dstMha.name\"\r\n             :name=\"String(index)\">\r\n        {{ replication.srcMha.name + ' -> ' + replication.dstMha.name + '     ------   ['+ ([replication.mhaDbReplications.length] +'DB]')}}\r\n        <template #content>\r\n          <Button icon=\"ios-open-outline\" @click=\"openModal(index)\" style=\"margin-bottom: 10px\"> 打开详情</Button>\r\n          <mha-db-replication-panel :mha-replication=\"replication\"/>\r\n          <Modal v-model=\"openDetailModal[index]\" width=\"1500px\" :footer-hide=\"true\">\r\n            <drc-build-v2 ref=\"dbReplicationConfigComponent\" v-if=\"openDetailModal[index]\"\r\n                          :src-mha-name=\"replication.srcMha.name\"\r\n                          :src-dc=\"replication.srcMha.dcName\"\r\n                          :dst-mha-name=\"replication.dstMha.name\"\r\n                          :dst-dc=\"replication.dstMha.dcName\"\r\n            />\r\n          </Modal>\r\n        </template>\r\n      </Panel>\r\n    </Collapse>\r\n    <br/>\r\n    <Button type=\"primary\" @click=\"goToSwitchAppliers\" icon=\"md-sync\">\r\n      切换Applier生效配置\r\n    </Button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport MhaDbReplicationPanel from '@/components/v2/dbDrcBuild/mhaDbReplicationPanel.vue'\r\nimport DrcBuildV2 from '@/views/v2/meta/buildStep/drcBuildV2.vue'\r\n\r\nexport default {\r\n  name: 'mhaReplicationPanel',\r\n  components: { DrcBuildV2, MhaDbReplicationPanel },\r\n  props: {\r\n    mhaReplications: Array\r\n  },\r\n  emits: ['updated'],\r\n  data () {\r\n    return {\r\n      value: [],\r\n      openDetailModal: [],\r\n      dataLoading: false\r\n    }\r\n  },\r\n  methods: {\r\n    openModal (index) {\r\n      this.$set(this.openDetailModal, index, true)\r\n    },\r\n    goToSwitchAppliers () {\r\n      this.$Modal.confirm({\r\n        title: '切换Applier',\r\n        content: '<p>请确认</p>',\r\n        loading: true,\r\n        onOk: () => {\r\n          this.switchAppliers()\r\n        }\r\n      })\r\n    },\r\n    switchAppliers () {\r\n      const params = this.getSwitchParams()\r\n      console.log(params)\r\n      this.dataLoading = true\r\n      this.axios.post('/api/drc/v2/autoconfig/switchAppliers', params)\r\n        .then(response => {\r\n          const data = response.data\r\n          const success = data.status === 0\r\n          if (success) {\r\n            this.$Message.success('提交成功')\r\n          } else {\r\n            this.$Message.warning('提交失败: ' + data.message)\r\n          }\r\n        })\r\n        .catch(message => {\r\n          this.$Message.error('提交异常: ' + message)\r\n        })\r\n        .finally(() => {\r\n          this.$Modal.remove()\r\n          this.dataLoading = false\r\n          this.$emit('updated')\r\n        })\r\n    },\r\n    getSwitchParams () {\r\n      return this.mhaReplications.map((item) => {\r\n        return {\r\n          srcMhaName: item.srcMha.name,\r\n          dstMhaName: item.dstMha.name,\r\n          dbNames: item.mhaDbReplications.map((mhaDbReplication) => {\r\n            return mhaDbReplication.src.dbName\r\n          })\r\n        }\r\n      })\r\n    }\r\n  },\r\n  created () {\r\n    this.openDetailModal = Array(this.mhaReplications.length).fill(false)\r\n    console.log('mhaReplications.length', this.mhaReplications)\r\n    if (this.mhaReplications && this.mhaReplications.length === 1) {\r\n      this.value = ['0']\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mhaReplicationPanel.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mhaReplicationPanel.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./mhaReplicationPanel.vue?vue&type=template&id=857874c4&scoped=true&\"\nimport script from \"./mhaReplicationPanel.vue?vue&type=script&lang=js&\"\nexport * from \"./mhaReplicationPanel.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"857874c4\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <base-component>\r\n    <Breadcrumb :style=\"{margin: '15px 0 15px 185px', position: 'fixed'}\">\r\n      <BreadcrumbItem to=\"/home\">首页</BreadcrumbItem>\r\n      <BreadcrumbItem to=\"/v2/mhaDbReplications\">DB 复制链路</BreadcrumbItem>\r\n      <BreadcrumbItem >DRC-DB 配置</BreadcrumbItem>\r\n    </Breadcrumb>\r\n    <Content class=\"content\"\r\n             :style=\"{padding: '10px', background: '#ffffff', margin: '50px 0 111px 185px', zIndex: '1'}\">\r\n      <Row :gutter=10 align=\"middle\">\r\n        <Col span=\"18\">\r\n          <Form :model=\"formItem\" :label-width=\"100\" style=\"margin-right: 20px;margin-top: 10px\">\r\n            <FormItem label=\"数据库\" :required=true>\r\n              <Select\r\n                v-model=\"meta.dbName\"\r\n                filterable\r\n                :disabled=\"!!meta.fixDb\"\r\n                placeholder=\"请搜索数据库信息\"\r\n                @on-change=\"selectDb\"\r\n                :remote-method=\"getExistDb\"\r\n                :loading=\"dataLoading\">\r\n                <Option v-for=\"(option, index) in meta.dbOptions\" :value=\"option.dbName\" :key=\"index\">{{option.dbName}}</Option>\r\n              </Select>\r\n            </FormItem>\r\n            <FormItem label=\"同步方向\" :required=true>\r\n              <RadioGroup v-model=\"selectedExistReplication\" button-style=\"solid\"\r\n                          @on-change=\"afterSelectExistReplication\">\r\n                <Radio v-for=\"items in meta.existReplicationRegionOptions\"\r\n                       :key=\"items.srcRegionName+' -> '+items.dstRegionName\"\r\n                       :label=\"items.srcRegionName+' -> '+items.dstRegionName\" border>\r\n                  {{ items.srcRegionName + ' -> ' + items.dstRegionName }}\r\n                </Radio>\r\n              </RadioGroup>\r\n              <Button type=\"primary\" icon=\"md-add\" ghost @click=\"goToCreateReplication\">新增</Button>\r\n              <Modal v-model=\"createModal.open\" width=\"1200px\" :footer-hide=\"true\" title=\"创建同步\">\r\n                <mha-preview v-if=\"createModal.open\" :db-name=\"meta.dbName\" :replication-type=0 @updated=\"selectDb\"\r\n                             :exist-replication-region-options=\"meta.existReplicationRegionOptions\"></mha-preview>\r\n              </Modal>\r\n            </FormItem>\r\n            <Divider orientation=\"left\">同步表</Divider>\r\n            <Card style=\"width:100%\">\r\n              <tables :table-data=\"drcConfig.logicTableSummaryDtos\" :data-loading=\"configDataLoading\"\r\n                      :src-region=\"meta.srcRegionName\" :dst-region=\"meta.dstRegionName\" :db-name=\"meta.dbName\"\r\n                      :db-names=\"drcConfig.dbNames\" @updated=\"getDrcConfig\"\r\n              />\r\n            </Card>\r\n            <Divider orientation=\"left\">同步DB</Divider>\r\n            <Card style=\"width:100%\">\r\n              <mha-replication-panel v-if=\"drcConfig.mhaReplications\" :mha-replications=\"drcConfig.mhaReplications\" @updated=\"getDrcConfig\"/>\r\n            </Card>\r\n          </Form>\r\n        </Col>\r\n      </Row>\r\n    </Content>\r\n  </base-component>\r\n</template>\r\n<script>\r\n\r\nimport tables from '@/components/v2/dbDrcBuild/tables.vue'\r\nimport MhaReplicationPanel from '@/components/v2/dbDrcBuild/mhaReplicationPanel.vue'\r\nimport MhaPreview from '@/components/v2/dbDrcBuild/mhaPreview.vue'\r\n\r\nexport default {\r\n  components: { MhaPreview, MhaReplicationPanel, tables },\r\n  data () {\r\n    return {\r\n      createModal: {\r\n        open: false\r\n      },\r\n      dataLoading: false,\r\n      configDataLoading: false,\r\n      selectedExistReplication: this.$route.query.srcRegionName + ' -> ' + this.$route.query.dstRegionName,\r\n      formItem: {\r\n        srcRegionName: null,\r\n        dstRegionName: null\r\n      },\r\n      drcConfig: {},\r\n      meta: {\r\n        dbName: this.$route.query.dbName,\r\n        srcRegionName: this.$route.query.srcRegionName,\r\n        dstRegionName: this.$route.query.dstRegionName,\r\n        fixDb: this.$route.query.fixDb,\r\n        regionOptions: [],\r\n        dbOptions: [],\r\n        existReplicationRegionOptions: []\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    getParams: function () {\r\n      const param = {}\r\n      param.dbName = this.meta.dbName\r\n      param.srcRegionName = this.meta.srcRegionName\r\n      param.dstRegionName = this.meta.dstRegionName\r\n      return param\r\n    },\r\n    async getExistDb (dbName) {\r\n      if (dbName === null || dbName.length === null || dbName.length <= 0) {\r\n        return []\r\n      }\r\n      const that = this\r\n      that.dataLoading = true\r\n      await that.axios.get('/api/drc/v2/autoconfig/getExistDb', {\r\n        params: {\r\n          dbName: dbName\r\n        }\r\n      })\r\n        .then(response => {\r\n          const data = response.data.data\r\n          if (data) {\r\n            that.meta.dbOptions = data\r\n          } else {\r\n            that.$Message.warning('查询DB失败')\r\n          }\r\n        })\r\n        .catch(message => {\r\n          that.$Message.error('查询DB异常: ' + message)\r\n        })\r\n        .finally(() => {\r\n          that.dataLoading = false\r\n        })\r\n    },\r\n    async selectDb () {\r\n      await this.getExistReplicationRegionOptions()\r\n      await this.getDrcConfig()\r\n    },\r\n    async getDrcConfig () {\r\n      this.createModal.open = false\r\n      this.resetPath()\r\n      const params = this.getParams()\r\n      this.drcConfig = {}\r\n      if (!params.dbName) {\r\n        this.$Message.warning('请先填写数据库')\r\n        return\r\n      }\r\n      if (!params.srcRegionName || !params.dstRegionName) {\r\n        return\r\n      }\r\n      if (params.srcRegionName === params.dstRegionName) {\r\n        return\r\n      }\r\n      this.configDataLoading = true\r\n      await this.axios.get('/api/drc/v2/autoconfig/getDbDrcConfig', {\r\n        params: {\r\n          dbName: params.dbName,\r\n          srcRegionName: params.srcRegionName,\r\n          dstRegionName: params.dstRegionName\r\n        }\r\n      })\r\n        .then(response => {\r\n          const data = response.data.data\r\n          const success = data && response.data.status === 0\r\n          if (success) {\r\n            this.drcConfig = data\r\n            this.$Message.success('查询DRC配置成功 ')\r\n          } else {\r\n            this.$Message.warning('查询失败：' + response.data.message)\r\n          }\r\n        })\r\n        .catch(message => {\r\n          this.$Message.error('查询异常: ' + message)\r\n        })\r\n        .finally(() => {\r\n          this.configDataLoading = false\r\n        })\r\n    },\r\n    async afterSelectExistReplication () {\r\n      console.log('afterSelectExistReplication ', this.selectedExistReplication)\r\n      const ret = this.selectedExistReplication.split('->')\r\n      this.meta.srcRegionName = ret[0].trim()\r\n      this.meta.dstRegionName = ret[1].trim()\r\n      this.getDrcConfig()\r\n    },\r\n    async getExistReplicationRegionOptions () {\r\n      const that = this\r\n      that.dataLoading = true\r\n      that.meta.existReplicationRegionOptions = []\r\n      const params = this.getParams()\r\n      await that.axios.get('/api/drc/v2/autoconfig/getExistDbReplicationDirections', {\r\n        params: {\r\n          dbName: params.dbName\r\n        }\r\n      })\r\n        .then(response => {\r\n          const data = response.data.data\r\n          const success = data && response.data.status === 0\r\n          if (success) {\r\n            that.meta.existReplicationRegionOptions = data\r\n            if (that.meta.existReplicationRegionOptions.length > 0) {\r\n              that.$Message.success('查询到 ' + that.meta.existReplicationRegionOptions.length + ' 个可选同步方向')\r\n            }\r\n          } else {\r\n            that.meta.srcRegionName = null\r\n            that.meta.dstRegionName = null\r\n            that.$Message.warning('查询可选地域失败')\r\n          }\r\n        })\r\n        .catch(message => {\r\n          that.$Message.error('查询可选地域失败: ' + message)\r\n        })\r\n        .finally(() => {\r\n          that.dataLoading = false\r\n        })\r\n    },\r\n    async goToCreateReplication () {\r\n      this.createModal.open = true\r\n    },\r\n    resetPath () {\r\n      this.$router.replace({\r\n        query: {\r\n          dbName: this.meta.dbName,\r\n          srcRegionName: this.meta.srcRegionName,\r\n          dstRegionName: this.meta.dstRegionName,\r\n          fixDb: this.meta.fixDb\r\n        }\r\n        // eslint-disable-next-line handle-callback-err\r\n      }).catch(() => {\r\n      })\r\n    },\r\n    flattenObj (ob) {\r\n      const result = {}\r\n      for (const i in ob) {\r\n        if ((typeof ob[i]) === 'object' && !Array.isArray(ob[i])) {\r\n          const temp = this.flattenObj(ob[i])\r\n          for (const j in temp) {\r\n            result[i + '.' + j] = temp[j]\r\n          }\r\n        } else {\r\n          result[i] = ob[i]\r\n        }\r\n      }\r\n      return result\r\n    }\r\n  },\r\n  computed: {},\r\n  created () {\r\n    // this.getRegions()\r\n    this.axios.get('/api/drc/v2/permission/meta/mhaReplication/modify').then((response) => {\r\n      if (response.data.status === 403) {\r\n        this.$router.push('/nopermission')\r\n        return\r\n      }\r\n      if (this.meta.dbName) {\r\n        this.getExistReplicationRegionOptions()\r\n        this.getDrcConfig()\r\n      }\r\n    })\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n.drawer-footer {\r\n  width: 100%;\r\n  bottom: 0;\r\n  left: 0;\r\n  border-top: 1px solid #e8e8e8;\r\n  padding: 10px 16px;\r\n  text-align: right;\r\n  background: #fff;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dbDrcBuildV2.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dbDrcBuildV2.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./dbDrcBuildV2.vue?vue&type=template&id=bbbfaa70&\"\nimport script from \"./dbDrcBuildV2.vue?vue&type=script&lang=js&\"\nexport * from \"./dbDrcBuildV2.vue?vue&type=script&lang=js&\"\nimport style0 from \"./dbDrcBuildV2.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./drcBuildV2.vue?vue&type=style&index=0&id=64534762&scoped=true&lang=css&\""],"sourceRoot":""}