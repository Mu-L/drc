(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4851bdc2"],{"06c5":function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));a("a630"),a("fb6a"),a("b0c0"),a("d3b7"),a("ac1f"),a("25f0"),a("3ca3");var r=a("6b75");function n(e,t){if(e){if("string"==typeof e)return Object(r["a"])(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Object(r["a"])(e,t):void 0}}},"14c3":function(e,t,a){var r=a("c6b6"),n=a("9263");e.exports=function(e,t){var a=e.exec;if("function"===typeof a){var i=a.call(e,t);if("object"!==typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==r(e))throw TypeError("RegExp#exec called on incompatible receiver");return n.call(e,t)}},2532:function(e,t,a){"use strict";var r=a("23e7"),n=a("5a34"),i=a("1d80"),o=a("ab13");r({target:"String",proto:!0,forced:!o("includes")},{includes:function(e){return!!~String(i(this)).indexOf(n(e),arguments.length>1?arguments[1]:void 0)}})},"25f0":function(e,t,a){"use strict";var r=a("6eeb"),n=a("825a"),i=a("d039"),o=a("ad6d"),s="toString",c=RegExp.prototype,l=c[s],u=i((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),f=l.name!=s;(u||f)&&r(RegExp.prototype,s,(function(){var e=n(this),t=String(e.source),a=e.flags,r=String(void 0===a&&e instanceof RegExp&&!("flags"in c)?o.call(e):a);return"/"+t+"/"+r}),{unsafe:!0})},2909:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var r=a("6b75");function n(e){if(Array.isArray(e))return Object(r["a"])(e)}a("a4d3"),a("e01a"),a("d28b"),a("a630"),a("e260"),a("d3b7"),a("3ca3"),a("ddb0");function i(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}var o=a("06c5");function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e){return n(e)||i(e)||Object(o["a"])(e)||s()}},"44e7":function(e,t,a){var r=a("861d"),n=a("c6b6"),i=a("b622"),o=i("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==n(e))}},"498a":function(e,t,a){"use strict";var r=a("23e7"),n=a("58a8").trim,i=a("c8d2");r({target:"String",proto:!0,forced:i("trim")},{trim:function(){return n(this)}})},"4df4":function(e,t,a){"use strict";var r=a("0366"),n=a("7b0b"),i=a("9bdd"),o=a("e95a"),s=a("50c4"),c=a("8418"),l=a("35a1");e.exports=function(e){var t,a,u,f,d,p,b=n(e),g="function"==typeof this?this:Array,h=arguments.length,m=h>1?arguments[1]:void 0,v=void 0!==m,y=l(b),x=0;if(v&&(m=r(m,h>2?arguments[2]:void 0,2)),void 0==y||g==Array&&o(y))for(t=s(b.length),a=new g(t);t>x;x++)p=v?m(b[x],x):b[x],c(a,x,p);else for(f=y.call(b),d=f.next,a=new g;!(u=d.call(f)).done;x++)p=v?i(f,m,[u.value,x],!0):u.value,c(a,x,p);return a.length=x,a}},"4ec9":function(e,t,a){"use strict";var r=a("6d61"),n=a("6566");e.exports=r("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),n)},5319:function(e,t,a){"use strict";var r=a("d784"),n=a("825a"),i=a("7b0b"),o=a("50c4"),s=a("a691"),c=a("1d80"),l=a("8aa5"),u=a("14c3"),f=Math.max,d=Math.min,p=Math.floor,b=/\$([$&'`]|\d\d?|<[^>]*>)/g,g=/\$([$&'`]|\d\d?)/g,h=function(e){return void 0===e?e:String(e)};r("replace",2,(function(e,t,a,r){var m=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,v=r.REPLACE_KEEPS_$0,y=m?"$":"$0";return[function(a,r){var n=c(this),i=void 0==a?void 0:a[e];return void 0!==i?i.call(a,n,r):t.call(String(n),a,r)},function(e,r){if(!m&&v||"string"===typeof r&&-1===r.indexOf(y)){var i=a(t,e,this,r);if(i.done)return i.value}var c=n(e),p=String(this),b="function"===typeof r;b||(r=String(r));var g=c.global;if(g){var w=c.unicode;c.lastIndex=0}var T=[];while(1){var R=u(c,p);if(null===R)break;if(T.push(R),!g)break;var I=String(R[0]);""===I&&(c.lastIndex=l(p,o(c.lastIndex),w))}for(var N="",E=0,S=0;S<T.length;S++){R=T[S];for(var _=String(R[0]),k=f(d(s(R.index),p.length),0),O=[],M=1;M<R.length;M++)O.push(h(R[M]));var D=R.groups;if(b){var z=[_].concat(O,k,p);void 0!==D&&z.push(D);var P=String(r.apply(void 0,z))}else P=x(_,p,k,O,D,r);k>=E&&(N+=p.slice(E,k)+P,E=k+_.length)}return N+p.slice(E)}];function x(e,a,r,n,o,s){var c=r+e.length,l=n.length,u=g;return void 0!==o&&(o=i(o),u=b),t.call(s,u,(function(t,i){var s;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return a.slice(0,r);case"'":return a.slice(c);case"<":s=o[i.slice(1,-1)];break;default:var u=+i;if(0===u)return t;if(u>l){var f=p(u/10);return 0===f?t:f<=l?void 0===n[f-1]?i.charAt(1):n[f-1]+i.charAt(1):t}s=n[u-1]}return void 0===s?"":s}))}}))},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,a){var r=a("1d80"),n=a("5899"),i="["+n+"]",o=RegExp("^"+i+i+"*"),s=RegExp(i+i+"*$"),c=function(e){return function(t){var a=String(r(t));return 1&e&&(a=a.replace(o,"")),2&e&&(a=a.replace(s,"")),a}};e.exports={start:c(1),end:c(2),trim:c(3)}},"5a34":function(e,t,a){var r=a("44e7");e.exports=function(e){if(r(e))throw TypeError("The method doesn't accept regular expressions");return e}},6566:function(e,t,a){"use strict";var r=a("9bf2").f,n=a("7c73"),i=a("e2cc"),o=a("0366"),s=a("19aa"),c=a("2266"),l=a("7dd0"),u=a("2626"),f=a("83ab"),d=a("f183").fastKey,p=a("69f3"),b=p.set,g=p.getterFor;e.exports={getConstructor:function(e,t,a,l){var u=e((function(e,r){s(e,u,t),b(e,{type:t,index:n(null),first:void 0,last:void 0,size:0}),f||(e.size=0),void 0!=r&&c(r,e[l],e,a)})),p=g(t),h=function(e,t,a){var r,n,i=p(e),o=m(e,t);return o?o.value=a:(i.last=o={index:n=d(t,!0),key:t,value:a,previous:r=i.last,next:void 0,removed:!1},i.first||(i.first=o),r&&(r.next=o),f?i.size++:e.size++,"F"!==n&&(i.index[n]=o)),e},m=function(e,t){var a,r=p(e),n=d(t);if("F"!==n)return r.index[n];for(a=r.first;a;a=a.next)if(a.key==t)return a};return i(u.prototype,{clear:function(){var e=this,t=p(e),a=t.index,r=t.first;while(r)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),delete a[r.index],r=r.next;t.first=t.last=void 0,f?t.size=0:e.size=0},delete:function(e){var t=this,a=p(t),r=m(t,e);if(r){var n=r.next,i=r.previous;delete a.index[r.index],r.removed=!0,i&&(i.next=n),n&&(n.previous=i),a.first==r&&(a.first=n),a.last==r&&(a.last=i),f?a.size--:t.size--}return!!r},forEach:function(e){var t,a=p(this),r=o(e,arguments.length>1?arguments[1]:void 0,3);while(t=t?t.next:a.first){r(t.value,t.key,this);while(t&&t.removed)t=t.previous}},has:function(e){return!!m(this,e)}}),i(u.prototype,a?{get:function(e){var t=m(this,e);return t&&t.value},set:function(e,t){return h(this,0===e?0:e,t)}}:{add:function(e){return h(this,e=0===e?0:e,e)}}),f&&r(u.prototype,"size",{get:function(){return p(this).size}}),u},setStrong:function(e,t,a){var r=t+" Iterator",n=g(t),i=g(r);l(e,t,(function(e,t){b(this,{type:r,target:e,state:n(e),kind:t,last:void 0})}),(function(){var e=i(this),t=e.kind,a=e.last;while(a&&a.removed)a=a.previous;return e.target&&(e.last=a=a?a.next:e.state.first)?"keys"==t?{value:a.key,done:!1}:"values"==t?{value:a.value,done:!1}:{value:[a.key,a.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),a?"entries":"values",!a,!0),u(t)}}},"6b75":function(e,t,a){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=Array(t);a<t;a++)r[a]=e[a];return r}a.d(t,"a",(function(){return r}))},"6d61":function(e,t,a){"use strict";var r=a("23e7"),n=a("da84"),i=a("94ca"),o=a("6eeb"),s=a("f183"),c=a("2266"),l=a("19aa"),u=a("861d"),f=a("d039"),d=a("1c7e"),p=a("d44e"),b=a("7156");e.exports=function(e,t,a){var g=-1!==e.indexOf("Map"),h=-1!==e.indexOf("Weak"),m=g?"set":"add",v=n[e],y=v&&v.prototype,x=v,w={},T=function(e){var t=y[e];o(y,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(h&&!u(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return h&&!u(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(h&&!u(e))&&t.call(this,0===e?0:e)}:function(e,a){return t.call(this,0===e?0:e,a),this})};if(i(e,"function"!=typeof v||!(h||y.forEach&&!f((function(){(new v).entries().next()})))))x=a.getConstructor(t,e,g,m),s.REQUIRED=!0;else if(i(e,!0)){var R=new x,I=R[m](h?{}:-0,1)!=R,N=f((function(){R.has(1)})),E=d((function(e){new v(e)})),S=!h&&f((function(){var e=new v,t=5;while(t--)e[m](t,t);return!e.has(-0)}));E||(x=t((function(t,a){l(t,x,e);var r=b(new v,t,x);return void 0!=a&&c(a,r[m],r,g),r})),x.prototype=y,y.constructor=x),(N||S)&&(T("delete"),T("has"),g&&T("get")),(S||I)&&T(m),h&&y.clear&&delete y.clear}return w[e]=x,r({global:!0,forced:x!=v},w),p(x,e),h||a.setStrong(x,e,g),x}},7156:function(e,t,a){var r=a("861d"),n=a("d2bb");e.exports=function(e,t,a){var i,o;return n&&"function"==typeof(i=t.constructor)&&i!==a&&r(o=i.prototype)&&o!==a.prototype&&n(e,o),e}},7252:function(e,t,a){"use strict";e.exports=function(e){if("number"!==typeof e)throw new TypeError("Expected a number");var t=e>0?Math.floor:Math.ceil;return{days:t(e/864e5),hours:t(e/36e5)%24,minutes:t(e/6e4)%60,seconds:t(e/1e3)%60,milliseconds:t(e)%1e3}}},"7d78":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{style:{padding:"1px 1px",height:"100%"}},[a("Row",[e.alertInfo.show?a("Alert",{attrs:{type:"warning","show-icon":"",closable:""},scopedSlots:e._u([{key:"desc",fn:function(){return[e._v(e._s(e.alertInfo.message))]},proxy:!0}],null,!1,3041357252)},[e._v(" "+e._s(e.alertInfo.title)+" ")]):e._e(),e.alertInfo.successShow?a("Alert",{attrs:{type:"success","show-icon":"",closable:""},scopedSlots:e._u([{key:"desc",fn:function(){return[e._v(e._s(e.alertInfo.message))]},proxy:!0}],null,!1,3041357252)},[e._v(" "+e._s(e.alertInfo.title)+" ")]):e._e(),e.replicationType===e.meta.replicationType.DB_TO_DB?a("div",[a("Col",{attrs:{span:"12"}},[a("Row",{staticStyle:{"margin-right":"20px"}},[a("Divider",[e._v("1. 选择同步方向")]),a("Col",{attrs:{span:"11"}},[a("Card",{attrs:{bordered:!0},scopedSlots:e._u([{key:"title",fn:function(){return[a("Icon",{attrs:{type:"ios-pin"}}),e._v(" 源 region ")]},proxy:!0}],null,!1,2156775476)},[a("Select",{attrs:{filterable:"",clearable:"",placeholder:"地域"},on:{"on-change":e.afterSwitchRegion},model:{value:e.formItem.srcRegionName,callback:function(t){e.$set(e.formItem,"srcRegionName",t)},expression:"formItem.srcRegionName"}},e._l(e.meta.regionOptions,(function(t){return a("Option",{key:t,attrs:{value:t,label:t}},[e._v(" "+e._s(t)+" ")])})),1)],1)],1),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}},[a("Button",{attrs:{size:"small",shape:"circle",type:"default",loading:e.dataLoading},on:{click:e.getRegionOptions}},[e._v(" -> ")])],1),a("Col",{attrs:{span:"11"}},[a("Card",{attrs:{bordered:!0},scopedSlots:e._u([{key:"title",fn:function(){return[a("Icon",{attrs:{type:"ios-pin"}}),e._v(" 目标 region ")]},proxy:!0}],null,!1,4278622733)},[a("Select",{attrs:{filterable:"",clearable:"",placeholder:"地域"},on:{"on-change":e.afterSwitchRegion},model:{value:e.formItem.dstRegionName,callback:function(t){e.$set(e.formItem,"dstRegionName",t)},expression:"formItem.dstRegionName"}},e._l(e.meta.regionOptions,(function(t){return a("Option",{key:t,attrs:{value:t,label:t}},[e._v(" "+e._s(t)+" ")])})),1)],1)],1)],1)],1),a("Col",{attrs:{span:"12"}},[a("Row",[a("Divider",[e._v("2. 预览：同步集群")]),a("Button",{staticStyle:{"margin-bottom":"5px"},attrs:{type:"primary",loading:e.table.dbMhaTableLoading},on:{click:e.getDalInfo}},[e._v(" 检查同步集群 ")]),a("Table",{attrs:{size:"small",loading:e.table.dbMhaTableLoading,stripe:"",columns:e.table.dbMhaTableColumn,data:e.preCheckMhaReplicationPage,border:""}}),a("div",[a("Page",{attrs:{transfer:!0,total:e.previewDataList.length,current:e.table.dbMhaTablePage.current,"page-size-opts":e.table.dbMhaTablePage.pageSizeOpts,"page-size":e.table.dbMhaTablePage.size,"show-total":"","show-sizer":"","show-elevator":""},on:{"update:current":function(t){return e.$set(e.table.dbMhaTablePage,"current",t)},"on-page-size-change":function(t){e.table.dbMhaTablePage.size=t}}})],1)],1)],1)],1):e._e(),e.replicationType===e.meta.replicationType.DB_TO_MQ?a("div",[a("Col",{attrs:{span:"12"}},[a("Row",{staticStyle:{"margin-right":"20px"}},[a("Divider",[e._v("1. 选择消息投递Region")]),a("Col",{attrs:{span:"24"}},[a("Card",{attrs:{bordered:!0},scopedSlots:e._u([{key:"title",fn:function(){return[a("Icon",{attrs:{type:"ios-pin"}}),e._v(" 源 region "),a("Button",{staticStyle:{"margin-left":"50px"},attrs:{size:"small",shape:"circle",type:"default",loading:e.dataLoading},on:{click:e.getRegionOptions}},[e._v("刷新 ")])]},proxy:!0}],null,!1,1193028979)},[a("Select",{attrs:{filterable:"",clearable:"",placeholder:"地域"},on:{"on-change":e.afterSwitchRegion},model:{value:e.formItem.srcRegionName,callback:function(t){e.$set(e.formItem,"srcRegionName",t)},expression:"formItem.srcRegionName"}},e._l(e.meta.regionOptions,(function(t){return a("Option",{key:t,attrs:{value:t,label:t}},[e._v(" "+e._s(t)+" ")])})),1)],1)],1)],1)],1),a("Col",{attrs:{span:"12"}},[a("Row",[a("Divider",[e._v("2. 预览：消息投递集群")]),a("Button",{staticStyle:{"margin-bottom":"5px"},attrs:{type:"primary",loading:e.table.dbMhaTableLoading},on:{click:e.getDalInfo}},[e._v(" 检查同步集群 ")]),a("Table",{attrs:{size:"small",loading:e.table.dbMhaTableLoading,stripe:"",columns:e.table.dbMhaMqTableColumn,data:e.preCheckMhaReplicationPage,border:""}}),a("div",[a("Page",{attrs:{transfer:!0,total:e.previewDataList.length,current:e.table.dbMhaTablePage.current,"page-size-opts":e.table.dbMhaTablePage.pageSizeOpts,"page-size":e.table.dbMhaTablePage.size,"show-total":"","show-sizer":"","show-elevator":""},on:{"update:current":function(t){return e.$set(e.table.dbMhaTablePage,"current",t)},"on-page-size-change":function(t){e.table.dbMhaTablePage.size=t}}})],1)],1)],1)],1):e._e()],1),a("Divider"),a("Button",{attrs:{loading:e.dataLoading,type:"primary"},on:{click:e.createReplication}},[e._v("提交")])],1)},n=[],i=a("2909"),o=a("c7eb"),s=a("1da1"),c=(a("fb6a"),a("b0c0"),a("a9e3"),a("d3b7"),{name:"mhaPreview",components:{},props:{replicationType:Number,dbName:String,existReplicationRegionOptions:Array},emits:["updated"],data:function(){return{meta:{regionOptions:[],existReplicationRegionOptions:[],replicationType:{DB_TO_DB:0,DB_TO_MQ:1}},alertInfo:{show:!1,successShow:!1,title:null,message:null},formItem:{srcRegionName:null,dstRegionName:null},dataLoading:!1,constants:{DAL_CLUSTER_MODE:1},previewDataList:[],table:{dbMhaTableLoading:!1,dbMhaTableColumn:[{title:"DB名",key:"dbName"},{title:"源集群",key:"srcMhaName",render:function(e,t){var a=t.row,r=a.srcMha;if(null!=r)return e("div",[e("span",r.name),e("span",{style:{float:"right",color:"#ababab"}},r.regionName+"("+r.dcName+")")])}},{title:"目标集群",key:"dstMhaName",render:function(e,t){var a=t.row,r=a.dstMha;if(null!=r)return e("div",[e("span",r.name),e("span",{style:{float:"right",color:"#ababab"}},r.regionName+"("+r.dcName+")")])}}],dbMhaMqTableColumn:[{title:"DB名",key:"dbName"},{title:"源集群",key:"srcMhaName",render:function(e,t){var a=t.row,r=a.srcMha;if(null!=r)return e("div",[e("span",r.name),e("span",{style:{float:"right",color:"#ababab"}},r.regionName+"("+r.dcName+")")])}}],dbMhaTablePage:{total:0,current:1,size:5,pageSizeOpts:[5,10,20,100]}}}},methods:{getRegionOptions:function(){var e=this;return Object(s["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.dataLoading=!0,e.meta.regionOptions=[],t.next=4,e.axios.get("/api/drc/v2/autoconfig/regionOptions",{params:{mode:e.constants.DAL_CLUSTER_MODE,dbName:e.dbName}}).then((function(t){var a=t.data.data,r=a&&0===t.data.status;r?(e.meta.regionOptions=a,-1===a.indexOf(e.formItem.srcRegionName)&&(e.formItem.srcRegionName=null),-1===a.indexOf(e.formItem.dstRegionName)&&(e.formItem.dstRegionName=null)):(e.formItem.srcRegionName=null,e.formItem.dstRegionName=null,e.$Message.warning("查询可选地域失败"))})).catch((function(t){e.$Message.error("查询可选地域失败: "+t)})).finally((function(){e.dataLoading=!1}));case 4:case"end":return t.stop()}}),t)})))()},getDalInfo:function(){var e=this;return Object(s["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.previewDataList=[],e.table.dbMhaTablePage.current=1,e.table.dbMhaTableLoading=!0,t.next=5,e.axios.get("/api/drc/v2/autoconfig/preCheck",{params:{mode:e.constants.DAL_CLUSTER_MODE,dbName:e.dbName,srcRegionName:e.formItem.srcRegionName,dstRegionName:e.formItem.dstRegionName,replicationType:e.replicationType}}).then((function(t){var a=t.data.data,r=a&&0===t.data.status;r?(e.previewDataList=a,console.log("total: "+e.previewDataList.length),e.$Message.success("同步集群检测成功, 共找到 "+a.length+" 个DB")):e.$Message.warning("同步集群检测失败："+t.data.message)})).catch((function(t){e.$Message.error("查询dalcluster异常: "+t)})).finally((function(){e.table.dbMhaTableLoading=!1}));case 5:case"end":return t.stop()}}),t)})))()},createReplication:function(){var e=this;return Object(s["a"])(Object(o["a"])().mark((function t(){var a,r;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={srcRegionName:e.formItem.srcRegionName,dstRegionName:e.formItem.dstRegionName,dbName:e.dbName,replicationType:e.replicationType},e.alertInfo.show=!1,e.alertInfo.successShow=!1,e.dataLoading=!0,r=e.replicationType===e.meta.replicationType.DB_TO_MQ?"mhaDbReplicationForMq":"mhaDbReplication",t.next=7,e.axios.post("/api/drc/v2/autoconfig/"+r+"/create",a).then((function(t){var a=t.data,r=0===a.status;r?(e.alertInfo.successShow=!0,e.alertInfo.message=null,e.alertInfo.title="提交成功",e.$Message.warning("提交成功"),e.$emit("updated")):(e.alertInfo.show=!0,e.alertInfo.title="提交失败",e.alertInfo.message=a.message,e.$Message.warning("提交失败: "+a.message))})).catch((function(t){e.$Message.error("提交异常: "+t)})).finally((function(){e.dataLoading=!1}));case 7:case"end":return t.stop()}}),t)})))()},afterSwitchRegion:function(){return Object(s["a"])(Object(o["a"])().mark((function e(){return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}},computed:{preCheckMhaReplicationPage:function(){var e=this.previewDataList,t=this.table.dbMhaTablePage.current*this.table.dbMhaTablePage.size-this.table.dbMhaTablePage.size,a=t+this.table.dbMhaTablePage.size;return Object(i["a"])(e).slice(t,a)}},created:function(){this.getRegionOptions()}}),l=c,u=a("2877"),f=Object(u["a"])(l,r,n,!1,null,"6faf35a6",null);t["a"]=f.exports},"81d5":function(e,t,a){"use strict";var r=a("7b0b"),n=a("23cb"),i=a("50c4");e.exports=function(e){var t=r(this),a=i(t.length),o=arguments.length,s=n(o>1?arguments[1]:void 0,a),c=o>2?arguments[2]:void 0,l=void 0===c?a:n(c,a);while(l>s)t[s++]=e;return t}},"86aa":function(e){e.exports=JSON.parse('{"addendum":"addenda","aircraft":"aircraft","alga":"algae","alumna":"alumnae","alumnus":"alumni","amoeba":"amoebae","analysis":"analyses","antenna":"antennae","antithesis":"antitheses","apex":"apices","appendix":"appendices","automaton":"automata","axis":"axes","bacillus":"bacilli","bacterium":"bacteria","barracks":"barracks","basis":"bases","beau":"beaux","bison":"bison","buffalo":"buffalo","bureau":"bureaus","cactus":"cacti","calf":"calves","carp":"carp","census":"censuses","chassis":"chassis","cherub":"cherubim","child":"children","château":"châteaus","cod":"cod","codex":"codices","concerto":"concerti","corpus":"corpora","crisis":"crises","criterion":"criteria","curriculum":"curricula","datum":"data","deer":"deer","diagnosis":"diagnoses","die":"dice","dwarf":"dwarfs","echo":"echoes","elf":"elves","elk":"elk","ellipsis":"ellipses","embargo":"embargoes","emphasis":"emphases","erratum":"errata","faux pas":"faux pas","fez":"fezes","firmware":"firmware","fish":"fish","focus":"foci","foot":"feet","formula":"formulae","fungus":"fungi","gallows":"gallows","genus":"genera","goose":"geese","graffito":"graffiti","grouse":"grouse","half":"halves","hero":"heroes","hoof":"hooves","hovercraft":"hovercraft","hypothesis":"hypotheses","index":"indices","kakapo":"kakapo","knife":"knives","larva":"larvae","leaf":"leaves","libretto":"libretti","life":"lives","loaf":"loaves","locus":"loci","louse":"lice","man":"men","matrix":"matrices","means":"means","medium":"media","memorandum":"memoranda","millennium":"millennia","minutia":"minutiae","moose":"moose","mouse":"mice","nebula":"nebulae","nemesis":"nemeses","neurosis":"neuroses","news":"news","nucleus":"nuclei","oasis":"oases","offspring":"offspring","opus":"opera","ovum":"ova","ox":"oxen","paralysis":"paralyses","parenthesis":"parentheses","person":"people","phenomenon":"phenomena","phylum":"phyla","pike":"pike","polyhedron":"polyhedra","potato":"potatoes","prognosis":"prognoses","quiz":"quizzes","radius":"radii","referendum":"referenda","salmon":"salmon","scarf":"scarves","self":"selves","series":"series","sheep":"sheep","shelf":"shelves","shrimp":"shrimp","spacecraft":"spacecraft","species":"species","spectrum":"spectra","squid":"squid","stimulus":"stimuli","stratum":"strata","swine":"swine","syllabus":"syllabi","symposium":"symposia","synopsis":"synopses","synthesis":"syntheses","tableau":"tableaus","that":"those","thesis":"theses","thief":"thieves","this":"these","tomato":"tomatoes","tooth":"teeth","trout":"trout","tuna":"tuna","vertebra":"vertebrae","vertex":"vertices","veto":"vetoes","vita":"vitae","vortex":"vortices","watercraft":"watercraft","wharf":"wharves","wife":"wives","wolf":"wolves","woman":"women"}')},"8aa5":function(e,t,a){"use strict";var r=a("6547").charAt;e.exports=function(e,t,a){return t+(a?r(e,t).length:1)}},9263:function(e,t,a){"use strict";var r=a("ad6d"),n=a("9f7f"),i=RegExp.prototype.exec,o=String.prototype.replace,s=i,c=function(){var e=/a/,t=/b*/g;return i.call(e,"a"),i.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),l=n.UNSUPPORTED_Y||n.BROKEN_CARET,u=void 0!==/()??/.exec("")[1],f=c||u||l;f&&(s=function(e){var t,a,n,s,f=this,d=l&&f.sticky,p=r.call(f),b=f.source,g=0,h=e;return d&&(p=p.replace("y",""),-1===p.indexOf("g")&&(p+="g"),h=String(e).slice(f.lastIndex),f.lastIndex>0&&(!f.multiline||f.multiline&&"\n"!==e[f.lastIndex-1])&&(b="(?: "+b+")",h=" "+h,g++),a=new RegExp("^(?:"+b+")",p)),u&&(a=new RegExp("^"+b+"$(?!\\s)",p)),c&&(t=f.lastIndex),n=i.call(d?a:f,h),d?n?(n.input=n.input.slice(g),n[0]=n[0].slice(g),n.index=f.lastIndex,f.lastIndex+=n[0].length):f.lastIndex=0:c&&n&&(f.lastIndex=f.global?n.index+n[0].length:t),u&&n&&n.length>1&&o.call(n[0],a,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(n[s]=void 0)})),n}),e.exports=s},"9f7f":function(e,t,a){"use strict";var r=a("d039");function n(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=r((function(){var e=n("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=r((function(){var e=n("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},a15b:function(e,t,a){"use strict";var r=a("23e7"),n=a("44ad"),i=a("fc6a"),o=a("a640"),s=[].join,c=n!=Object,l=o("join",",");r({target:"Array",proto:!0,forced:c||!l},{join:function(e){return s.call(i(this),void 0===e?",":e)}})},a3b8:function(e,t,a){"use strict";const r=a("7252"),n=a("afa5");e.exports=(e,t)=>{if(!Number.isFinite(e))throw new TypeError("Expected a finite number");if(t=t||{},e<1e3){const a="number"===typeof t.msDecimalDigits?t.msDecimalDigits:0;return(a?e.toFixed(a):Math.ceil(e))+(t.verbose?" "+n("millisecond",Math.ceil(e)):"ms")}const a=[],i=(e,r,i,o)=>{if(0===e)return;const s=t.verbose?" "+n(r,e):i;a.push((o||e)+s)},o=r(e);if(i(Math.trunc(o.days/365),"year","y"),i(o.days%365,"day","d"),i(o.hours,"hour","h"),i(o.minutes,"minute","m"),t.compact)return i(o.seconds,"second","s"),"~"+a[0];const s=e/1e3%60,c="number"===typeof t.secDecimalDigits?t.secDecimalDigits:1,l=s.toFixed(c).replace(/\.0$/,"");return i(s,"second","s",l),a.join(" ")}},a630:function(e,t,a){var r=a("23e7"),n=a("4df4"),i=a("1c7e"),o=!i((function(e){Array.from(e)}));r({target:"Array",stat:!0,forced:o},{from:n})},a9e3:function(e,t,a){"use strict";var r=a("83ab"),n=a("da84"),i=a("94ca"),o=a("6eeb"),s=a("5135"),c=a("c6b6"),l=a("7156"),u=a("c04e"),f=a("d039"),d=a("7c73"),p=a("241c").f,b=a("06cf").f,g=a("9bf2").f,h=a("58a8").trim,m="Number",v=n[m],y=v.prototype,x=c(d(y))==m,w=function(e){var t,a,r,n,i,o,s,c,l=u(e,!1);if("string"==typeof l&&l.length>2)if(l=h(l),t=l.charCodeAt(0),43===t||45===t){if(a=l.charCodeAt(2),88===a||120===a)return NaN}else if(48===t){switch(l.charCodeAt(1)){case 66:case 98:r=2,n=49;break;case 79:case 111:r=8,n=55;break;default:return+l}for(i=l.slice(2),o=i.length,s=0;s<o;s++)if(c=i.charCodeAt(s),c<48||c>n)return NaN;return parseInt(i,r)}return+l};if(i(m,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var T,R=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof R&&(x?f((function(){y.valueOf.call(a)})):c(a)!=m)?l(new v(w(t)),a,R):w(t)},I=r?p(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),N=0;I.length>N;N++)s(v,T=I[N])&&!s(R,T)&&g(R,T,b(v,T));R.prototype=y,y.constructor=R,o(n,m,R)}},ab13:function(e,t,a){var r=a("b622"),n=r("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(a){try{return t[n]=!1,"/./"[e](t)}catch(r){}}return!1}},ac1f:function(e,t,a){"use strict";var r=a("23e7"),n=a("9263");r({target:"RegExp",proto:!0,forced:/./.exec!==n},{exec:n})},ad6d:function(e,t,a){"use strict";var r=a("825a");e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},afa5:function(e,t,a){"use strict";var r=a("86aa");e.exports=function(e,t,a){return"number"===typeof t&&(a=t),e in r?t=r[e]:"string"!==typeof t&&(t=(e.replace(/(?:s|x|z|ch|sh)$/i,"$&e").replace(/([^aeiou])y$/i,"$1ie")+"s").replace(/i?e?s$/i,(function(t){var a=e.slice(-1)===e.slice(-1).toLowerCase();return a?t.toLowerCase():t.toUpperCase()}))),1===a?e:t}},b85c:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));a("a4d3"),a("e01a"),a("d28b"),a("e260"),a("d3b7"),a("3ca3"),a("ddb0");var r=a("06c5");function n(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=Object(r["a"])(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,c=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return s=e.done,e},e:function(e){c=!0,o=e},f:function(){try{s||null==a["return"]||a["return"]()}finally{if(c)throw o}}}}},bb2f:function(e,t,a){var r=a("d039");e.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},c8d2:function(e,t,a){var r=a("d039"),n=a("5899"),i="​᠎";e.exports=function(e){return r((function(){return!!n[e]()||i[e]()!=i||n[e].name!==e}))}},cb29:function(e,t,a){var r=a("23e7"),n=a("81d5"),i=a("44d2");r({target:"Array",proto:!0},{fill:n}),i("fill")},d784:function(e,t,a){"use strict";a("ac1f");var r=a("6eeb"),n=a("d039"),i=a("b622"),o=a("9263"),s=a("9112"),c=i("species"),l=!n((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),u=function(){return"$0"==="a".replace(/./,"$0")}(),f=i("replace"),d=function(){return!!/./[f]&&""===/./[f]("a","$0")}(),p=!n((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var a="ab".split(e);return 2!==a.length||"a"!==a[0]||"b"!==a[1]}));e.exports=function(e,t,a,f){var b=i(e),g=!n((function(){var t={};return t[b]=function(){return 7},7!=""[e](t)})),h=g&&!n((function(){var t=!1,a=/a/;return"split"===e&&(a={},a.constructor={},a.constructor[c]=function(){return a},a.flags="",a[b]=/./[b]),a.exec=function(){return t=!0,null},a[b](""),!t}));if(!g||!h||"replace"===e&&(!l||!u||d)||"split"===e&&!p){var m=/./[b],v=a(b,""[e],(function(e,t,a,r,n){return t.exec===o?g&&!n?{done:!0,value:m.call(t,a,r)}:{done:!0,value:e.call(a,t,r)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:d}),y=v[0],x=v[1];r(String.prototype,e,y),r(RegExp.prototype,b,2==t?function(e,t){return x.call(e,this,t)}:function(e){return x.call(e,this)})}f&&s(RegExp.prototype[b],"sham",!0)}},d81d:function(e,t,a){"use strict";var r=a("23e7"),n=a("b727").map,i=a("1dde"),o=a("ae40"),s=i("map"),c=o("map");r({target:"Array",proto:!0,forced:!s||!c},{map:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},efa3:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{style:{padding:"1px 1px",height:"100%"}},[a("Divider",{staticStyle:{"margin-top":"50px"}},[e._v("预览：同步表")]),a("Button",{staticStyle:{"margin-bottom":"5px"},attrs:{type:"primary",loading:e.dbTableLoading},on:{click:e.getTableInfo}},[e._v(" 检查同步表 ")]),a("Table",{attrs:{size:"small",loading:e.dbTableLoading,stripe:"",columns:e.table.dbTableColumn,data:e.preCheckTablePage,border:""}}),a("div",[a("Page",{attrs:{transfer:!0,total:e.checkTableDataList.length,current:e.table.dbTablePage.current,"page-size-opts":e.table.dbTablePage.pageSizeOpts,"page-size":e.table.dbTablePage.size,"show-total":"","show-sizer":"","show-elevator":""},on:{"update:current":function(t){return e.$set(e.table.dbTablePage,"current",t)},"on-change":function(t){e.table.dbTablePage.current=t},"on-page-size-change":function(t){e.table.dbTablePage.size=t}}})],1)],1)},n=[],i=a("2909"),o=a("53ca"),s=a("c7eb");function c(e){if(Array.isArray(e))return e}a("a4d3"),a("e01a"),a("d28b"),a("e260"),a("d3b7"),a("3ca3"),a("ddb0");function l(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var r,n,i,o,s=[],c=!0,l=!1;try{if(i=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;c=!1}else for(;!(c=(r=i.call(a)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,n=e}finally{try{if(!c&&null!=a["return"]&&(o=a["return"](),Object(o)!==o))return}finally{if(l)throw n}}return s}}var u=a("06c5");function f(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(e,t){return c(e)||l(e,t)||Object(u["a"])(e,t)||f()}var p=a("b85c"),b=a("1da1"),g=(a("fb6a"),a("a9e3"),a("498a"),{name:"dbTablesPreview",props:{mode:Number,dbName:String,srcRegionName:String,dstRegionName:String,tableNames:String,replicationType:Number},emits:["updated"],data:function(){return{checkTableDataList:[],dbTableLoading:!1,table:{dbTableColumn:[{title:"序",width:50,key:"indexForShow"},{title:"库名",key:"schema",resizable:!0},{title:"表名",key:"table",resizable:!0},{title:"结果",align:"center",render:function(e,t){var a=t.row,r="ok"!==a.res?"volcano":"green",n=a.res;return e("Tag",{props:{color:r}},n)}}],dbTablePage:{total:0,current:1,size:10,pageSizeOpts:[5,10,20,100]}}}},methods:{getTableInfo:function(){var e=this;return Object(b["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.checkTableDataList=[],e.table.dbTablePage.current=1,1!==e.mode){t.next=8;break}if(e.dalClusterName){t.next=6;break}return e.$Message.warning("请先填写 dalcluster"),t.abrupt("return");case 6:t.next=11;break;case 8:if(e.dbName){t.next=11;break}return e.$Message.warning("请先填写数据库"),t.abrupt("return");case 11:if(e.srcRegionName&&(0!==e.replicationType||e.dstRegionName)){t.next=14;break}return e.$Message.warning("请先填写同步方向"),t.abrupt("return");case 14:if(e.tableNames){t.next=17;break}return e.$Message.warning("请先填写表名"),t.abrupt("return");case 17:return e.dbTableLoading=!0,t.next=20,e.axios.get("/api/drc/v2/autoconfig/preCheckTable",{params:e.flattenObj({mode:e.mode,dbName:e.dbName,srcRegionName:e.srcRegionName,dstRegionName:e.dstRegionName,replicationType:e.replicationType,tblsFilterDetail:{tableNames:e.tableNames}})}).then((function(t){var a=t.data.data;if(a){var r,n=Object(p["a"])(a.entries());try{for(n.s();!(r=n.n()).done;){var i=d(r.value,2),o=i[0],s=i[1];s.indexForShow=o}}catch(c){n.e(c)}finally{n.f()}e.checkTableDataList=a,e.$Message.success("同步表检测成功, 共找到 "+a.length+" 个表")}else e.$Message.warning("同步表检测失败："+t.data.message)})).catch((function(t){e.$Message.error("查询dalcluster异常: "+t)})).finally((function(){e.dbTableLoading=!1}));case 20:case"end":return t.stop()}}),t)})))()},flattenObj:function(e){var t={};for(var a in e)if("object"!==Object(o["a"])(e[a])||Array.isArray(e[a]))t[a]=e[a];else{var r=this.flattenObj(e[a]);for(var n in r)t[a+"."+n]=r[n]}return t}},computed:{preCheckTablePage:function(){var e=this.checkTableDataList,t=(this.table.dbTablePage.current-1)*this.table.dbTablePage.size,a=t+this.table.dbTablePage.size;return Object(i["a"])(e).slice(t,a)}},created:function(){this.tableNames&&this.tableNames.trim().length>0&&this.getTableInfo()}}),h=g,m=a("2877"),v=Object(m["a"])(h,r,n,!1,null,"647b2baf",null);t["a"]=v.exports},f183:function(e,t,a){var r=a("d012"),n=a("861d"),i=a("5135"),o=a("9bf2").f,s=a("90e3"),c=a("bb2f"),l=s("meta"),u=0,f=Object.isExtensible||function(){return!0},d=function(e){o(e,l,{value:{objectID:"O"+ ++u,weakData:{}}})},p=function(e,t){if(!n(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,l)){if(!f(e))return"F";if(!t)return"E";d(e)}return e[l].objectID},b=function(e,t){if(!i(e,l)){if(!f(e))return!0;if(!t)return!1;d(e)}return e[l].weakData},g=function(e){return c&&h.REQUIRED&&f(e)&&!i(e,l)&&d(e),e},h=e.exports={REQUIRED:!1,fastKey:p,getWeakData:b,onFreeze:g};r[l]=!0}}]);
//# sourceMappingURL=chunk-4851bdc2.90c1d845.js.map